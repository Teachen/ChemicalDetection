(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[617],{74806:function(t,e,n){var i;t=n.nmd(t),n(57658),function(){var r,s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",d=1,p=2,f=4,m=1,g=2,v=1,_=2,y=4,x=8,b=16,w=32,M=64,S=128,T=256,A=512,E=30,C="...",L=800,P=16,R=1,D=2,I=1/0,O=9007199254740991,N=17976931348623157e292,z=NaN,U=4294967295,k=U-1,F=U>>>1,B=[["ary",S],["bind",v],["bindKey",_],["curry",x],["curryRight",b],["flip",A],["partial",w],["partialRight",M],["rearg",T]],V="[object Arguments]",G="[object Array]",W="[object AsyncFunction]",H="[object Boolean]",j="[object Date]",X="[object DOMException]",q="[object Error]",Y="[object Function]",Z="[object GeneratorFunction]",K="[object Map]",J="[object Number]",$="[object Null]",Q="[object Object]",tt="[object Promise]",et="[object Proxy]",nt="[object RegExp]",it="[object Set]",rt="[object String]",st="[object Symbol]",at="[object Undefined]",ot="[object WeakMap]",lt="[object WeakSet]",ct="[object ArrayBuffer]",ut="[object DataView]",ht="[object Float32Array]",dt="[object Float64Array]",pt="[object Int8Array]",ft="[object Int16Array]",mt="[object Int32Array]",gt="[object Uint8Array]",vt="[object Uint8ClampedArray]",_t="[object Uint16Array]",yt="[object Uint32Array]",xt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Tt=RegExp(Mt.source),At=RegExp(St.source),Et=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Ot=RegExp(It.source),Nt=/^\s+/,zt=/\s/,Ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Gt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,jt=/^[-+]0x[0-9a-f]+$/i,Xt=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Yt=/^0o[0-7]+$/i,Zt=/^(?:0|[1-9]\d*)$/,Kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jt=/($^)/,$t=/['\n\r\u2028\u2029\\]/g,Qt="\\ud800-\\udfff",te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ee="\\u2700-\\u27bf",ne="a-z\\xdf-\\xf6\\xf8-\\xff",ie="A-Z\\xc0-\\xd6\\xd8-\\xde",re="\\ufe0e\\ufe0f",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ae="['’]",oe="["+Qt+"]",le="["+se+"]",ce="["+te+"]",ue="\\d+",he="["+ee+"]",de="["+ne+"]",pe="[^"+Qt+se+ue+ee+ne+ie+"]",fe="\\ud83c[\\udffb-\\udfff]",me="[^"+Qt+"]",ge="(?:\\ud83c[\\udde6-\\uddff]){2}",ve="[\\ud800-\\udbff][\\udc00-\\udfff]",_e="["+ie+"]",ye="\\u200d",xe="(?:"+de+"|"+pe+")",be="(?:"+_e+"|"+pe+")",we="(?:['’](?:d|ll|m|re|s|t|ve))?",Me="(?:['’](?:D|LL|M|RE|S|T|VE))?",Se="(?:"+ce+"|"+fe+")"+"?",Te="["+re+"]?",Ae=Te+Se+("(?:"+ye+"(?:"+[me,ge,ve].join("|")+")"+Te+Se+")*"),Ee="(?:"+[he,ge,ve].join("|")+")"+Ae,Ce="(?:"+[me+ce+"?",ce,ge,ve,oe].join("|")+")",Le=RegExp(ae,"g"),Pe=RegExp(ce,"g"),Re=RegExp(fe+"(?="+fe+")|"+Ce+Ae,"g"),De=RegExp([_e+"?"+de+"+"+we+"(?="+[le,_e,"$"].join("|")+")",be+"+"+Me+"(?="+[le,_e+xe,"$"].join("|")+")",_e+"?"+xe+"+"+we,_e+"+"+Me,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ue,Ee].join("|"),"g"),Ie=RegExp("["+ye+Qt+te+re+"]"),Oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ze=-1,Ue={};Ue[ht]=Ue[dt]=Ue[pt]=Ue[ft]=Ue[mt]=Ue[gt]=Ue[vt]=Ue[_t]=Ue[yt]=!0,Ue[V]=Ue[G]=Ue[ct]=Ue[H]=Ue[ut]=Ue[j]=Ue[q]=Ue[Y]=Ue[K]=Ue[J]=Ue[Q]=Ue[nt]=Ue[it]=Ue[rt]=Ue[ot]=!1;var ke={};ke[V]=ke[G]=ke[ct]=ke[ut]=ke[H]=ke[j]=ke[ht]=ke[dt]=ke[pt]=ke[ft]=ke[mt]=ke[K]=ke[J]=ke[Q]=ke[nt]=ke[it]=ke[rt]=ke[st]=ke[gt]=ke[vt]=ke[_t]=ke[yt]=!0,ke[q]=ke[Y]=ke[ot]=!1;var Fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=parseFloat,Ve=parseInt,Ge="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,We="object"==typeof self&&self&&self.Object===Object&&self,He=Ge||We||Function("return this")(),je=e&&!e.nodeType&&e,Xe=je&&t&&!t.nodeType&&t,qe=Xe&&Xe.exports===je,Ye=qe&&Ge.process,Ze=function(){try{var t=Xe&&Xe.require&&Xe.require("util").types;return t||Ye&&Ye.binding&&Ye.binding("util")}catch(t){}}(),Ke=Ze&&Ze.isArrayBuffer,Je=Ze&&Ze.isDate,$e=Ze&&Ze.isMap,Qe=Ze&&Ze.isRegExp,tn=Ze&&Ze.isSet,en=Ze&&Ze.isTypedArray;function nn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function rn(t,e,n,i){for(var r=-1,s=null==t?0:t.length;++r<s;){var a=t[r];e(i,a,n(a),t)}return i}function sn(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function an(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function on(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ln(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var a=t[n];e(a,n,t)&&(s[r++]=a)}return s}function cn(t,e){return!!(null==t?0:t.length)&&yn(t,e,0)>-1}function un(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function hn(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function dn(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function pn(t,e,n,i){var r=-1,s=null==t?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function fn(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function mn(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var gn=Mn("length");function vn(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function _n(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function yn(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):_n(t,bn,n)}function xn(t,e,n,i){for(var r=n-1,s=t.length;++r<s;)if(i(t[r],e))return r;return-1}function bn(t){return t!=t}function wn(t,e){var n=null==t?0:t.length;return n?An(t,e)/n:z}function Mn(t){return function(e){return null==e?r:e[t]}}function Sn(t){return function(e){return null==t?r:t[e]}}function Tn(t,e,n,i,r){return r(t,(function(t,r,s){n=i?(i=!1,t):e(n,t,r,s)})),n}function An(t,e){for(var n,i=-1,s=t.length;++i<s;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function En(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Cn(t){return t?t.slice(0,jn(t)+1).replace(Nt,""):t}function Ln(t){return function(e){return t(e)}}function Pn(t,e){return hn(e,(function(e){return t[e]}))}function Rn(t,e){return t.has(e)}function Dn(t,e){for(var n=-1,i=t.length;++n<i&&yn(e,t[n],0)>-1;);return n}function In(t,e){for(var n=t.length;n--&&yn(e,t[n],0)>-1;);return n}var On=Sn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Nn=Sn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function zn(t){return"\\"+Fe[t]}function Un(t){return Ie.test(t)}function kn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function Fn(t,e){return function(n){return t(e(n))}}function Bn(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var a=t[n];a!==e&&a!==h||(t[n]=h,s[r++]=n)}return s}function Vn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Gn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Wn(t){return Un(t)?function(t){var e=Re.lastIndex=0;for(;Re.test(t);)++e;return e}(t):gn(t)}function Hn(t){return Un(t)?function(t){return t.match(Re)||[]}(t):function(t){return t.split("")}(t)}function jn(t){for(var e=t.length;e--&&zt.test(t.charAt(e)););return e}var Xn=Sn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var qn=function t(e){var n,i=(e=null==e?He:qn.defaults(He.Object(),e,qn.pick(He,Ne))).Array,zt=e.Date,Qt=e.Error,te=e.Function,ee=e.Math,ne=e.Object,ie=e.RegExp,re=e.String,se=e.TypeError,ae=i.prototype,oe=te.prototype,le=ne.prototype,ce=e["__core-js_shared__"],ue=oe.toString,he=le.hasOwnProperty,de=0,pe=(n=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",fe=le.toString,me=ue.call(ne),ge=He._,ve=ie("^"+ue.call(he).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=qe?e.Buffer:r,ye=e.Symbol,xe=e.Uint8Array,be=_e?_e.allocUnsafe:r,we=Fn(ne.getPrototypeOf,ne),Me=ne.create,Se=le.propertyIsEnumerable,Te=ae.splice,Ae=ye?ye.isConcatSpreadable:r,Ee=ye?ye.iterator:r,Ce=ye?ye.toStringTag:r,Re=function(){try{var t=Vs(ne,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ie=e.clearTimeout!==He.clearTimeout&&e.clearTimeout,Fe=zt&&zt.now!==He.Date.now&&zt.now,Ge=e.setTimeout!==He.setTimeout&&e.setTimeout,We=ee.ceil,je=ee.floor,Xe=ne.getOwnPropertySymbols,Ye=_e?_e.isBuffer:r,Ze=e.isFinite,gn=ae.join,Sn=Fn(ne.keys,ne),Yn=ee.max,Zn=ee.min,Kn=zt.now,Jn=e.parseInt,$n=ee.random,Qn=ae.reverse,ti=Vs(e,"DataView"),ei=Vs(e,"Map"),ni=Vs(e,"Promise"),ii=Vs(e,"Set"),ri=Vs(e,"WeakMap"),si=Vs(ne,"create"),ai=ri&&new ri,oi={},li=pa(ti),ci=pa(ei),ui=pa(ni),hi=pa(ii),di=pa(ri),pi=ye?ye.prototype:r,fi=pi?pi.valueOf:r,mi=pi?pi.toString:r;function gi(t){if(Ro(t)&&!xo(t)&&!(t instanceof xi)){if(t instanceof yi)return t;if(he.call(t,"__wrapped__"))return fa(t)}return new yi(t)}var vi=function(){function t(){}return function(e){if(!Po(e))return{};if(Me)return Me(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function _i(){}function yi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function xi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function bi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function wi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Mi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Si(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Mi;++e<n;)this.add(t[e])}function Ti(t){var e=this.__data__=new wi(t);this.size=e.size}function Ai(t,e){var n=xo(t),i=!n&&yo(t),r=!n&&!i&&So(t),s=!n&&!i&&!r&&Fo(t),a=n||i||r||s,o=a?En(t.length,re):[],l=o.length;for(var c in t)!e&&!he.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ys(c,l))||o.push(c);return o}function Ei(t){var e=t.length;return e?t[Sr(0,e-1)]:r}function Ci(t,e){return ua(ss(t),Ui(e,0,t.length))}function Li(t){return ua(ss(t))}function Pi(t,e,n){(n!==r&&!go(t[e],n)||n===r&&!(e in t))&&Ni(t,e,n)}function Ri(t,e,n){var i=t[e];he.call(t,e)&&go(i,n)&&(n!==r||e in t)||Ni(t,e,n)}function Di(t,e){for(var n=t.length;n--;)if(go(t[n][0],e))return n;return-1}function Ii(t,e,n,i){return Gi(t,(function(t,r,s){e(i,t,n(t),s)})),i}function Oi(t,e){return t&&as(e,ol(e),t)}function Ni(t,e,n){"__proto__"==e&&Re?Re(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function zi(t,e){for(var n=-1,s=e.length,a=i(s),o=null==t;++n<s;)a[n]=o?r:nl(t,e[n]);return a}function Ui(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function ki(t,e,n,i,s,a){var o,l=e&d,c=e&p,u=e&f;if(n&&(o=s?n(t,i,s,a):n(t)),o!==r)return o;if(!Po(t))return t;var h=xo(t);if(h){if(o=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&he.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return ss(t,o)}else{var m=Hs(t),g=m==Y||m==Z;if(So(t))return Qr(t,l);if(m==Q||m==V||g&&!s){if(o=c||g?{}:Xs(t),!l)return c?function(t,e){return as(t,Ws(t),e)}(t,function(t,e){return t&&as(e,ll(e),t)}(o,t)):function(t,e){return as(t,Gs(t),e)}(t,Oi(o,t))}else{if(!ke[m])return s?t:{};o=function(t,e,n){var i=t.constructor;switch(e){case ct:return ts(t);case H:case j:return new i(+t);case ut:return function(t,e){var n=e?ts(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ht:case dt:case pt:case ft:case mt:case gt:case vt:case _t:case yt:return es(t,n);case K:return new i;case J:case rt:return new i(t);case nt:return function(t){var e=new t.constructor(t.source,Ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case it:return new i;case st:return r=t,fi?ne(fi.call(r)):{}}var r}(t,m,l)}}a||(a=new Ti);var v=a.get(t);if(v)return v;a.set(t,o),zo(t)?t.forEach((function(i){o.add(ki(i,e,n,i,t,a))})):Do(t)&&t.forEach((function(i,r){o.set(r,ki(i,e,n,r,t,a))}));var _=h?r:(u?c?Os:Is:c?ll:ol)(t);return sn(_||t,(function(i,r){_&&(i=t[r=i]),Ri(o,r,ki(i,e,n,r,t,a))})),o}function Fi(t,e,n){var i=n.length;if(null==t)return!i;for(t=ne(t);i--;){var s=n[i],a=e[s],o=t[s];if(o===r&&!(s in t)||!a(o))return!1}return!0}function Bi(t,e,n){if("function"!=typeof t)throw new se(o);return aa((function(){t.apply(r,n)}),e)}function Vi(t,e,n,i){var r=-1,a=cn,o=!0,l=t.length,c=[],u=e.length;if(!l)return c;n&&(e=hn(e,Ln(n))),i?(a=un,o=!1):e.length>=s&&(a=Rn,o=!1,e=new Si(e));t:for(;++r<l;){var h=t[r],d=null==n?h:n(h);if(h=i||0!==h?h:0,o&&d==d){for(var p=u;p--;)if(e[p]===d)continue t;c.push(h)}else a(e,d,i)||c.push(h)}return c}gi.templateSettings={escape:Et,evaluate:Ct,interpolate:Lt,variable:"",imports:{_:gi}},gi.prototype=_i.prototype,gi.prototype.constructor=gi,yi.prototype=vi(_i.prototype),yi.prototype.constructor=yi,xi.prototype=vi(_i.prototype),xi.prototype.constructor=xi,bi.prototype.clear=function(){this.__data__=si?si(null):{},this.size=0},bi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},bi.prototype.get=function(t){var e=this.__data__;if(si){var n=e[t];return n===c?r:n}return he.call(e,t)?e[t]:r},bi.prototype.has=function(t){var e=this.__data__;return si?e[t]!==r:he.call(e,t)},bi.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=si&&e===r?c:e,this},wi.prototype.clear=function(){this.__data__=[],this.size=0},wi.prototype.delete=function(t){var e=this.__data__,n=Di(e,t);return!(n<0)&&(n==e.length-1?e.pop():Te.call(e,n,1),--this.size,!0)},wi.prototype.get=function(t){var e=this.__data__,n=Di(e,t);return n<0?r:e[n][1]},wi.prototype.has=function(t){return Di(this.__data__,t)>-1},wi.prototype.set=function(t,e){var n=this.__data__,i=Di(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Mi.prototype.clear=function(){this.size=0,this.__data__={hash:new bi,map:new(ei||wi),string:new bi}},Mi.prototype.delete=function(t){var e=Fs(this,t).delete(t);return this.size-=e?1:0,e},Mi.prototype.get=function(t){return Fs(this,t).get(t)},Mi.prototype.has=function(t){return Fs(this,t).has(t)},Mi.prototype.set=function(t,e){var n=Fs(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Si.prototype.add=Si.prototype.push=function(t){return this.__data__.set(t,c),this},Si.prototype.has=function(t){return this.__data__.has(t)},Ti.prototype.clear=function(){this.__data__=new wi,this.size=0},Ti.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ti.prototype.get=function(t){return this.__data__.get(t)},Ti.prototype.has=function(t){return this.__data__.has(t)},Ti.prototype.set=function(t,e){var n=this.__data__;if(n instanceof wi){var i=n.__data__;if(!ei||i.length<s-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Mi(i)}return n.set(t,e),this.size=n.size,this};var Gi=cs(Ki),Wi=cs(Ji,!0);function Hi(t,e){var n=!0;return Gi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function ji(t,e,n){for(var i=-1,s=t.length;++i<s;){var a=t[i],o=e(a);if(null!=o&&(l===r?o==o&&!ko(o):n(o,l)))var l=o,c=a}return c}function Xi(t,e){var n=[];return Gi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function qi(t,e,n,i,r){var s=-1,a=t.length;for(n||(n=qs),r||(r=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?qi(o,e-1,n,i,r):dn(r,o):i||(r[r.length]=o)}return r}var Yi=us(),Zi=us(!0);function Ki(t,e){return t&&Yi(t,e,ol)}function Ji(t,e){return t&&Zi(t,e,ol)}function $i(t,e){return ln(e,(function(e){return Eo(t[e])}))}function Qi(t,e){for(var n=0,i=(e=Zr(e,t)).length;null!=t&&n<i;)t=t[da(e[n++])];return n&&n==i?t:r}function tr(t,e,n){var i=e(t);return xo(t)?i:dn(i,n(t))}function er(t){return null==t?t===r?at:$:Ce&&Ce in ne(t)?function(t){var e=he.call(t,Ce),n=t[Ce];try{t[Ce]=r;var i=!0}catch(t){}var s=fe.call(t);i&&(e?t[Ce]=n:delete t[Ce]);return s}(t):function(t){return fe.call(t)}(t)}function nr(t,e){return t>e}function ir(t,e){return null!=t&&he.call(t,e)}function rr(t,e){return null!=t&&e in ne(t)}function sr(t,e,n){for(var s=n?un:cn,a=t[0].length,o=t.length,l=o,c=i(o),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=hn(d,Ln(e))),u=Zn(d.length,u),c[l]=!n&&(e||a>=120&&d.length>=120)?new Si(l&&d):r}d=t[0];var p=-1,f=c[0];t:for(;++p<a&&h.length<u;){var m=d[p],g=e?e(m):m;if(m=n||0!==m?m:0,!(f?Rn(f,g):s(h,g,n))){for(l=o;--l;){var v=c[l];if(!(v?Rn(v,g):s(t[l],g,n)))continue t}f&&f.push(g),h.push(m)}}return h}function ar(t,e,n){var i=null==(t=ia(t,e=Zr(e,t)))?t:t[da(Ta(e))];return null==i?r:nn(i,t,n)}function or(t){return Ro(t)&&er(t)==V}function lr(t,e,n,i,s){return t===e||(null==t||null==e||!Ro(t)&&!Ro(e)?t!=t&&e!=e:function(t,e,n,i,s,a){var o=xo(t),l=xo(e),c=o?G:Hs(t),u=l?G:Hs(e),h=(c=c==V?Q:c)==Q,d=(u=u==V?Q:u)==Q,p=c==u;if(p&&So(t)){if(!So(e))return!1;o=!0,h=!1}if(p&&!h)return a||(a=new Ti),o||Fo(t)?Rs(t,e,n,i,s,a):function(t,e,n,i,r,s,a){switch(n){case ut:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ct:return!(t.byteLength!=e.byteLength||!s(new xe(t),new xe(e)));case H:case j:case J:return go(+t,+e);case q:return t.name==e.name&&t.message==e.message;case nt:case rt:return t==e+"";case K:var o=kn;case it:var l=i&m;if(o||(o=Vn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=g,a.set(t,e);var u=Rs(o(t),o(e),i,r,s,a);return a.delete(t),u;case st:if(fi)return fi.call(t)==fi.call(e)}return!1}(t,e,c,n,i,s,a);if(!(n&m)){var f=h&&he.call(t,"__wrapped__"),v=d&&he.call(e,"__wrapped__");if(f||v){var _=f?t.value():t,y=v?e.value():e;return a||(a=new Ti),s(_,y,n,i,a)}}if(!p)return!1;return a||(a=new Ti),function(t,e,n,i,s,a){var o=n&m,l=Is(t),c=l.length,u=Is(e),h=u.length;if(c!=h&&!o)return!1;var d=c;for(;d--;){var p=l[d];if(!(o?p in e:he.call(e,p)))return!1}var f=a.get(t),g=a.get(e);if(f&&g)return f==e&&g==t;var v=!0;a.set(t,e),a.set(e,t);var _=o;for(;++d<c;){var y=t[p=l[d]],x=e[p];if(i)var b=o?i(x,y,p,e,t,a):i(y,x,p,t,e,a);if(!(b===r?y===x||s(y,x,n,i,a):b)){v=!1;break}_||(_="constructor"==p)}if(v&&!_){var w=t.constructor,M=e.constructor;w==M||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof M&&M instanceof M||(v=!1)}return a.delete(t),a.delete(e),v}(t,e,n,i,s,a)}(t,e,n,i,lr,s))}function cr(t,e,n,i){var s=n.length,a=s,o=!i;if(null==t)return!a;for(t=ne(t);s--;){var l=n[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){var c=(l=n[s])[0],u=t[c],h=l[1];if(o&&l[2]){if(u===r&&!(c in t))return!1}else{var d=new Ti;if(i)var p=i(u,h,c,t,e,d);if(!(p===r?lr(h,u,m|g,i,d):p))return!1}}return!0}function ur(t){return!(!Po(t)||(e=t,pe&&pe in e))&&(Eo(t)?ve:qt).test(pa(t));var e}function hr(t){return"function"==typeof t?t:null==t?Il:"object"==typeof t?xo(t)?vr(t[0],t[1]):gr(t):Gl(t)}function dr(t){if(!Qs(t))return Sn(t);var e=[];for(var n in ne(t))he.call(t,n)&&"constructor"!=n&&e.push(n);return e}function pr(t){if(!Po(t))return function(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}(t);var e=Qs(t),n=[];for(var i in t)("constructor"!=i||!e&&he.call(t,i))&&n.push(i);return n}function fr(t,e){return t<e}function mr(t,e){var n=-1,r=wo(t)?i(t.length):[];return Gi(t,(function(t,i,s){r[++n]=e(t,i,s)})),r}function gr(t){var e=Bs(t);return 1==e.length&&e[0][2]?ea(e[0][0],e[0][1]):function(n){return n===t||cr(n,t,e)}}function vr(t,e){return Ks(t)&&ta(e)?ea(da(t),e):function(n){var i=nl(n,t);return i===r&&i===e?il(n,t):lr(e,i,m|g)}}function _r(t,e,n,i,s){t!==e&&Yi(e,(function(a,o){if(s||(s=new Ti),Po(a))!function(t,e,n,i,s,a,o){var l=ra(t,n),c=ra(e,n),u=o.get(c);if(u)return void Pi(t,n,u);var h=a?a(l,c,n+"",t,e,o):r,d=h===r;if(d){var p=xo(c),f=!p&&So(c),m=!p&&!f&&Fo(c);h=c,p||f||m?xo(l)?h=l:Mo(l)?h=ss(l):f?(d=!1,h=Qr(c,!0)):m?(d=!1,h=es(c,!0)):h=[]:Oo(c)||yo(c)?(h=l,yo(l)?h=qo(l):Po(l)&&!Eo(l)||(h=Xs(c))):d=!1}d&&(o.set(c,h),s(h,c,i,a,o),o.delete(c));Pi(t,n,h)}(t,e,o,n,_r,i,s);else{var l=i?i(ra(t,o),a,o+"",t,e,s):r;l===r&&(l=a),Pi(t,o,l)}}),ll)}function yr(t,e){var n=t.length;if(n)return Ys(e+=e<0?n:0,n)?t[e]:r}function xr(t,e,n){e=e.length?hn(e,(function(t){return xo(t)?function(e){return Qi(e,1===t.length?t[0]:t)}:t})):[Il];var i=-1;e=hn(e,Ln(ks()));var r=mr(t,(function(t,n,r){var s=hn(e,(function(e){return e(t)}));return{criteria:s,index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,s=e.criteria,a=r.length,o=n.length;for(;++i<a;){var l=ns(r[i],s[i]);if(l)return i>=o?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function br(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var a=e[i],o=Qi(t,a);n(o,a)&&Lr(s,Zr(a,t),o)}return s}function wr(t,e,n,i){var r=i?xn:yn,s=-1,a=e.length,o=t;for(t===e&&(e=ss(e)),n&&(o=hn(t,Ln(n)));++s<a;)for(var l=0,c=e[s],u=n?n(c):c;(l=r(o,u,l,i))>-1;)o!==t&&Te.call(o,l,1),Te.call(t,l,1);return t}function Mr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==s){var s=r;Ys(r)?Te.call(t,r,1):Vr(t,r)}}return t}function Sr(t,e){return t+je($n()*(e-t+1))}function Tr(t,e){var n="";if(!t||e<1||e>O)return n;do{e%2&&(n+=t),(e=je(e/2))&&(t+=t)}while(e);return n}function Ar(t,e){return oa(na(t,e,Il),t+"")}function Er(t){return Ei(gl(t))}function Cr(t,e){var n=gl(t);return ua(n,Ui(e,0,n.length))}function Lr(t,e,n,i){if(!Po(t))return t;for(var s=-1,a=(e=Zr(e,t)).length,o=a-1,l=t;null!=l&&++s<a;){var c=da(e[s]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(s!=o){var h=l[c];(u=i?i(h,c,l):r)===r&&(u=Po(h)?h:Ys(e[s+1])?[]:{})}Ri(l,c,u),l=l[c]}return t}var Pr=ai?function(t,e){return ai.set(t,e),t}:Il,Rr=Re?function(t,e){return Re(t,"toString",{configurable:!0,enumerable:!1,value:Pl(e),writable:!0})}:Il;function Dr(t){return ua(gl(t))}function Ir(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(n=n>s?s:n)<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var a=i(s);++r<s;)a[r]=t[r+e];return a}function Or(t,e){var n;return Gi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function Nr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=F){for(;i<r;){var s=i+r>>>1,a=t[s];null!==a&&!ko(a)&&(n?a<=e:a<e)?i=s+1:r=s}return r}return zr(t,e,Il,n)}function zr(t,e,n,i){var s=0,a=null==t?0:t.length;if(0===a)return 0;for(var o=(e=n(e))!=e,l=null===e,c=ko(e),u=e===r;s<a;){var h=je((s+a)/2),d=n(t[h]),p=d!==r,f=null===d,m=d==d,g=ko(d);if(o)var v=i||m;else v=u?m&&(i||p):l?m&&p&&(i||!f):c?m&&p&&!f&&(i||!g):!f&&!g&&(i?d<=e:d<e);v?s=h+1:a=h}return Zn(a,k)}function Ur(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var a=t[n],o=e?e(a):a;if(!n||!go(o,l)){var l=o;s[r++]=0===a?0:a}}return s}function kr(t){return"number"==typeof t?t:ko(t)?z:+t}function Fr(t){if("string"==typeof t)return t;if(xo(t))return hn(t,Fr)+"";if(ko(t))return mi?mi.call(t):"";var e=t+"";return"0"==e&&1/t==-I?"-0":e}function Br(t,e,n){var i=-1,r=cn,a=t.length,o=!0,l=[],c=l;if(n)o=!1,r=un;else if(a>=s){var u=e?null:Ts(t);if(u)return Vn(u);o=!1,r=Rn,c=new Si}else c=e?[]:l;t:for(;++i<a;){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,o&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue t;e&&c.push(d),l.push(h)}else r(c,d,n)||(c!==l&&c.push(d),l.push(h))}return l}function Vr(t,e){return null==(t=ia(t,e=Zr(e,t)))||delete t[da(Ta(e))]}function Gr(t,e,n,i){return Lr(t,e,n(Qi(t,e)),i)}function Wr(t,e,n,i){for(var r=t.length,s=i?r:-1;(i?s--:++s<r)&&e(t[s],s,t););return n?Ir(t,i?0:s,i?s+1:r):Ir(t,i?s+1:0,i?r:s)}function Hr(t,e){var n=t;return n instanceof xi&&(n=n.value()),pn(e,(function(t,e){return e.func.apply(e.thisArg,dn([t],e.args))}),n)}function jr(t,e,n){var r=t.length;if(r<2)return r?Br(t[0]):[];for(var s=-1,a=i(r);++s<r;)for(var o=t[s],l=-1;++l<r;)l!=s&&(a[s]=Vi(a[s]||o,t[l],e,n));return Br(qi(a,1),e,n)}function Xr(t,e,n){for(var i=-1,s=t.length,a=e.length,o={};++i<s;){var l=i<a?e[i]:r;n(o,t[i],l)}return o}function qr(t){return Mo(t)?t:[]}function Yr(t){return"function"==typeof t?t:Il}function Zr(t,e){return xo(t)?t:Ks(t,e)?[t]:ha(Yo(t))}var Kr=Ar;function Jr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Ir(t,e,n)}var $r=Ie||function(t){return He.clearTimeout(t)};function Qr(t,e){if(e)return t.slice();var n=t.length,i=be?be(n):new t.constructor(n);return t.copy(i),i}function ts(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}function es(t,e){var n=e?ts(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ns(t,e){if(t!==e){var n=t!==r,i=null===t,s=t==t,a=ko(t),o=e!==r,l=null===e,c=e==e,u=ko(e);if(!l&&!u&&!a&&t>e||a&&o&&c&&!l&&!u||i&&o&&c||!n&&c||!s)return 1;if(!i&&!a&&!u&&t<e||u&&n&&s&&!i&&!a||l&&n&&s||!o&&s||!c)return-1}return 0}function is(t,e,n,r){for(var s=-1,a=t.length,o=n.length,l=-1,c=e.length,u=Yn(a-o,0),h=i(c+u),d=!r;++l<c;)h[l]=e[l];for(;++s<o;)(d||s<a)&&(h[n[s]]=t[s]);for(;u--;)h[l++]=t[s++];return h}function rs(t,e,n,r){for(var s=-1,a=t.length,o=-1,l=n.length,c=-1,u=e.length,h=Yn(a-l,0),d=i(h+u),p=!r;++s<h;)d[s]=t[s];for(var f=s;++c<u;)d[f+c]=e[c];for(;++o<l;)(p||s<a)&&(d[f+n[o]]=t[s++]);return d}function ss(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function as(t,e,n,i){var s=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var l=e[a],c=i?i(n[l],t[l],l,n,t):r;c===r&&(c=t[l]),s?Ni(n,l,c):Ri(n,l,c)}return n}function os(t,e){return function(n,i){var r=xo(n)?rn:Ii,s=e?e():{};return r(n,t,ks(i,2),s)}}function ls(t){return Ar((function(e,n){var i=-1,s=n.length,a=s>1?n[s-1]:r,o=s>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(s--,a):r,o&&Zs(n[0],n[1],o)&&(a=s<3?r:a,s=1),e=ne(e);++i<s;){var l=n[i];l&&t(e,l,i,a)}return e}))}function cs(t,e){return function(n,i){if(null==n)return n;if(!wo(n))return t(n,i);for(var r=n.length,s=e?r:-1,a=ne(n);(e?s--:++s<r)&&!1!==i(a[s],s,a););return n}}function us(t){return function(e,n,i){for(var r=-1,s=ne(e),a=i(e),o=a.length;o--;){var l=a[t?o:++r];if(!1===n(s[l],l,s))break}return e}}function hs(t){return function(e){var n=Un(e=Yo(e))?Hn(e):r,i=n?n[0]:e.charAt(0),s=n?Jr(n,1).join(""):e.slice(1);return i[t]()+s}}function ds(t){return function(e){return pn(El(yl(e).replace(Le,"")),t,"")}}function ps(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vi(t.prototype),i=t.apply(n,e);return Po(i)?i:n}}function fs(t){return function(e,n,i){var s=ne(e);if(!wo(e)){var a=ks(n,3);e=ol(e),n=function(t){return a(s[t],t,s)}}var o=t(e,n,i);return o>-1?s[a?e[o]:o]:r}}function ms(t){return Ds((function(e){var n=e.length,i=n,s=yi.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new se(o);if(s&&!l&&"wrapper"==zs(a))var l=new yi([],!0)}for(i=l?i:n;++i<n;){var c=zs(a=e[i]),u="wrapper"==c?Ns(a):r;l=u&&Js(u[0])&&u[1]==(S|x|w|T)&&!u[4].length&&1==u[9]?l[zs(u[0])].apply(l,u[3]):1==a.length&&Js(a)?l[c]():l.thru(a)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&xo(i))return l.plant(i).value();for(var r=0,s=n?e[r].apply(this,t):i;++r<n;)s=e[r].call(this,s);return s}}))}function gs(t,e,n,s,a,o,l,c,u,h){var d=e&S,p=e&v,f=e&_,m=e&(x|b),g=e&A,y=f?r:ps(t);return function v(){for(var _=arguments.length,x=i(_),b=_;b--;)x[b]=arguments[b];if(m)var w=Us(v),M=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(x,w);if(s&&(x=is(x,s,a,m)),o&&(x=rs(x,o,l,m)),_-=M,m&&_<h){var S=Bn(x,w);return Ms(t,e,gs,v.placeholder,n,x,S,c,u,h-_)}var T=p?n:this,A=f?T[t]:t;return _=x.length,c?x=function(t,e){var n=t.length,i=Zn(e.length,n),s=ss(t);for(;i--;){var a=e[i];t[i]=Ys(a,n)?s[a]:r}return t}(x,c):g&&_>1&&x.reverse(),d&&u<_&&(x.length=u),this&&this!==He&&this instanceof v&&(A=y||ps(A)),A.apply(T,x)}}function vs(t,e){return function(n,i){return function(t,e,n,i){return Ki(t,(function(t,r,s){e(i,n(t),r,s)})),i}(n,t,e(i),{})}}function _s(t,e){return function(n,i){var s;if(n===r&&i===r)return e;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=Fr(n),i=Fr(i)):(n=kr(n),i=kr(i)),s=t(n,i)}return s}}function ys(t){return Ds((function(e){return e=hn(e,Ln(ks())),Ar((function(n){var i=this;return t(e,(function(t){return nn(t,i,n)}))}))}))}function xs(t,e){var n=(e=e===r?" ":Fr(e)).length;if(n<2)return n?Tr(e,t):e;var i=Tr(e,We(t/Wn(e)));return Un(e)?Jr(Hn(i),0,t).join(""):i.slice(0,t)}function bs(t){return function(e,n,s){return s&&"number"!=typeof s&&Zs(e,n,s)&&(n=s=r),e=Wo(e),n===r?(n=e,e=0):n=Wo(n),function(t,e,n,r){for(var s=-1,a=Yn(We((e-t)/(n||1)),0),o=i(a);a--;)o[r?a:++s]=t,t+=n;return o}(e,n,s=s===r?e<n?1:-1:Wo(s),t)}}function ws(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Xo(e),n=Xo(n)),t(e,n)}}function Ms(t,e,n,i,s,a,o,l,c,u){var h=e&x;e|=h?w:M,(e&=~(h?M:w))&y||(e&=~(v|_));var d=[t,e,s,h?a:r,h?o:r,h?r:a,h?r:o,l,c,u],p=n.apply(r,d);return Js(t)&&sa(p,d),p.placeholder=i,la(p,t,e)}function Ss(t){var e=ee[t];return function(t,n){if(t=Xo(t),(n=null==n?0:Zn(Ho(n),292))&&Ze(t)){var i=(Yo(t)+"e").split("e");return+((i=(Yo(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Ts=ii&&1/Vn(new ii([,-0]))[1]==I?function(t){return new ii(t)}:kl;function As(t){return function(e){var n=Hs(e);return n==K?kn(e):n==it?Gn(e):function(t,e){return hn(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Es(t,e,n,s,a,l,c,u){var d=e&_;if(!d&&"function"!=typeof t)throw new se(o);var p=s?s.length:0;if(p||(e&=~(w|M),s=a=r),c=c===r?c:Yn(Ho(c),0),u=u===r?u:Ho(u),p-=a?a.length:0,e&M){var f=s,m=a;s=a=r}var g=d?r:Ns(t),A=[t,e,n,s,a,f,m,l,c,u];if(g&&function(t,e){var n=t[1],i=e[1],r=n|i,s=r<(v|_|S),a=i==S&&n==x||i==S&&n==T&&t[7].length<=e[8]||i==(S|T)&&e[7].length<=e[8]&&n==x;if(!s&&!a)return t;i&v&&(t[2]=e[2],r|=n&v?0:y);var o=e[3];if(o){var l=t[3];t[3]=l?is(l,o,e[4]):o,t[4]=l?Bn(t[3],h):e[4]}(o=e[5])&&(l=t[5],t[5]=l?rs(l,o,e[6]):o,t[6]=l?Bn(t[5],h):e[6]);(o=e[7])&&(t[7]=o);i&S&&(t[8]=null==t[8]?e[8]:Zn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(A,g),t=A[0],e=A[1],n=A[2],s=A[3],a=A[4],!(u=A[9]=A[9]===r?d?0:t.length:Yn(A[9]-p,0))&&e&(x|b)&&(e&=~(x|b)),e&&e!=v)E=e==x||e==b?function(t,e,n){var s=ps(t);return function a(){for(var o=arguments.length,l=i(o),c=o,u=Us(a);c--;)l[c]=arguments[c];var h=o<3&&l[0]!==u&&l[o-1]!==u?[]:Bn(l,u);return(o-=h.length)<n?Ms(t,e,gs,a.placeholder,r,l,h,r,r,n-o):nn(this&&this!==He&&this instanceof a?s:t,this,l)}}(t,e,u):e!=w&&e!=(v|w)||a.length?gs.apply(r,A):function(t,e,n,r){var s=e&v,a=ps(t);return function e(){for(var o=-1,l=arguments.length,c=-1,u=r.length,h=i(u+l),d=this&&this!==He&&this instanceof e?a:t;++c<u;)h[c]=r[c];for(;l--;)h[c++]=arguments[++o];return nn(d,s?n:this,h)}}(t,e,n,s);else var E=function(t,e,n){var i=e&v,r=ps(t);return function e(){return(this&&this!==He&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return la((g?Pr:sa)(E,A),t,e)}function Cs(t,e,n,i){return t===r||go(t,le[n])&&!he.call(i,n)?e:t}function Ls(t,e,n,i,s,a){return Po(t)&&Po(e)&&(a.set(e,t),_r(t,e,r,Ls,a),a.delete(e)),t}function Ps(t){return Oo(t)?r:t}function Rs(t,e,n,i,s,a){var o=n&m,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var d=-1,p=!0,f=n&g?new Si:r;for(a.set(t,e),a.set(e,t);++d<l;){var v=t[d],_=e[d];if(i)var y=o?i(_,v,d,e,t,a):i(v,_,d,t,e,a);if(y!==r){if(y)continue;p=!1;break}if(f){if(!mn(e,(function(t,e){if(!Rn(f,e)&&(v===t||s(v,t,n,i,a)))return f.push(e)}))){p=!1;break}}else if(v!==_&&!s(v,_,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Ds(t){return oa(na(t,r,xa),t+"")}function Is(t){return tr(t,ol,Gs)}function Os(t){return tr(t,ll,Ws)}var Ns=ai?function(t){return ai.get(t)}:kl;function zs(t){for(var e=t.name+"",n=oi[e],i=he.call(oi,e)?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==t)return r.name}return e}function Us(t){return(he.call(gi,"placeholder")?gi:t).placeholder}function ks(){var t=gi.iteratee||Ol;return t=t===Ol?hr:t,arguments.length?t(arguments[0],arguments[1]):t}function Fs(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Bs(t){for(var e=ol(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ta(r)]}return e}function Vs(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return ur(n)?n:r}var Gs=Xe?function(t){return null==t?[]:(t=ne(t),ln(Xe(t),(function(e){return Se.call(t,e)})))}:jl,Ws=Xe?function(t){for(var e=[];t;)dn(e,Gs(t)),t=we(t);return e}:jl,Hs=er;function js(t,e,n){for(var i=-1,r=(e=Zr(e,t)).length,s=!1;++i<r;){var a=da(e[i]);if(!(s=null!=t&&n(t,a)))break;t=t[a]}return s||++i!=r?s:!!(r=null==t?0:t.length)&&Lo(r)&&Ys(a,r)&&(xo(t)||yo(t))}function Xs(t){return"function"!=typeof t.constructor||Qs(t)?{}:vi(we(t))}function qs(t){return xo(t)||yo(t)||!!(Ae&&t&&t[Ae])}function Ys(t,e){var n=typeof t;return!!(e=null==e?O:e)&&("number"==n||"symbol"!=n&&Zt.test(t))&&t>-1&&t%1==0&&t<e}function Zs(t,e,n){if(!Po(n))return!1;var i=typeof e;return!!("number"==i?wo(n)&&Ys(e,n.length):"string"==i&&e in n)&&go(n[e],t)}function Ks(t,e){if(xo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ko(t))||(Rt.test(t)||!Pt.test(t)||null!=e&&t in ne(e))}function Js(t){var e=zs(t),n=gi[e];if("function"!=typeof n||!(e in xi.prototype))return!1;if(t===n)return!0;var i=Ns(n);return!!i&&t===i[0]}(ti&&Hs(new ti(new ArrayBuffer(1)))!=ut||ei&&Hs(new ei)!=K||ni&&Hs(ni.resolve())!=tt||ii&&Hs(new ii)!=it||ri&&Hs(new ri)!=ot)&&(Hs=function(t){var e=er(t),n=e==Q?t.constructor:r,i=n?pa(n):"";if(i)switch(i){case li:return ut;case ci:return K;case ui:return tt;case hi:return it;case di:return ot}return e});var $s=ce?Eo:Xl;function Qs(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||le)}function ta(t){return t==t&&!Po(t)}function ea(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in ne(n)))}}function na(t,e,n){return e=Yn(e===r?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=Yn(r.length-e,0),o=i(a);++s<a;)o[s]=r[e+s];s=-1;for(var l=i(e+1);++s<e;)l[s]=r[s];return l[e]=n(o),nn(t,this,l)}}function ia(t,e){return e.length<2?t:Qi(t,Ir(e,0,-1))}function ra(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var sa=ca(Pr),aa=Ge||function(t,e){return He.setTimeout(t,e)},oa=ca(Rr);function la(t,e,n){var i=e+"";return oa(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ut,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return sn(B,(function(n){var i="_."+n[0];e&n[1]&&!cn(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(kt);return e?e[1].split(Ft):[]}(i),n)))}function ca(t){var e=0,n=0;return function(){var i=Kn(),s=P-(i-n);if(n=i,s>0){if(++e>=L)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ua(t,e){var n=-1,i=t.length,s=i-1;for(e=e===r?i:e;++n<e;){var a=Sr(n,s),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}var ha=function(t){var e=co(t,(function(t){return n.size===u&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Dt,(function(t,n,i,r){e.push(i?r.replace(Gt,"$1"):n||t)})),e}));function da(t){if("string"==typeof t||ko(t))return t;var e=t+"";return"0"==e&&1/t==-I?"-0":e}function pa(t){if(null!=t){try{return ue.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function fa(t){if(t instanceof xi)return t.clone();var e=new yi(t.__wrapped__,t.__chain__);return e.__actions__=ss(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ma=Ar((function(t,e){return Mo(t)?Vi(t,qi(e,1,Mo,!0)):[]})),ga=Ar((function(t,e){var n=Ta(e);return Mo(n)&&(n=r),Mo(t)?Vi(t,qi(e,1,Mo,!0),ks(n,2)):[]})),va=Ar((function(t,e){var n=Ta(e);return Mo(n)&&(n=r),Mo(t)?Vi(t,qi(e,1,Mo,!0),r,n):[]}));function _a(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ho(n);return r<0&&(r=Yn(i+r,0)),_n(t,ks(e,3),r)}function ya(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var s=i-1;return n!==r&&(s=Ho(n),s=n<0?Yn(i+s,0):Zn(s,i-1)),_n(t,ks(e,3),s,!0)}function xa(t){return(null==t?0:t.length)?qi(t,1):[]}function ba(t){return t&&t.length?t[0]:r}var wa=Ar((function(t){var e=hn(t,qr);return e.length&&e[0]===t[0]?sr(e):[]})),Ma=Ar((function(t){var e=Ta(t),n=hn(t,qr);return e===Ta(n)?e=r:n.pop(),n.length&&n[0]===t[0]?sr(n,ks(e,2)):[]})),Sa=Ar((function(t){var e=Ta(t),n=hn(t,qr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?sr(n,r,e):[]}));function Ta(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Aa=Ar(Ea);function Ea(t,e){return t&&t.length&&e&&e.length?wr(t,e):t}var Ca=Ds((function(t,e){var n=null==t?0:t.length,i=zi(t,e);return Mr(t,hn(e,(function(t){return Ys(t,n)?+t:t})).sort(ns)),i}));function La(t){return null==t?t:Qn.call(t)}var Pa=Ar((function(t){return Br(qi(t,1,Mo,!0))})),Ra=Ar((function(t){var e=Ta(t);return Mo(e)&&(e=r),Br(qi(t,1,Mo,!0),ks(e,2))})),Da=Ar((function(t){var e=Ta(t);return e="function"==typeof e?e:r,Br(qi(t,1,Mo,!0),r,e)}));function Ia(t){if(!t||!t.length)return[];var e=0;return t=ln(t,(function(t){if(Mo(t))return e=Yn(t.length,e),!0})),En(e,(function(e){return hn(t,Mn(e))}))}function Oa(t,e){if(!t||!t.length)return[];var n=Ia(t);return null==e?n:hn(n,(function(t){return nn(e,r,t)}))}var Na=Ar((function(t,e){return Mo(t)?Vi(t,e):[]})),za=Ar((function(t){return jr(ln(t,Mo))})),Ua=Ar((function(t){var e=Ta(t);return Mo(e)&&(e=r),jr(ln(t,Mo),ks(e,2))})),ka=Ar((function(t){var e=Ta(t);return e="function"==typeof e?e:r,jr(ln(t,Mo),r,e)})),Fa=Ar(Ia);var Ba=Ar((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,Oa(t,n)}));function Va(t){var e=gi(t);return e.__chain__=!0,e}function Ga(t,e){return e(t)}var Wa=Ds((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,s=function(e){return zi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof xi&&Ys(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Ga,args:[s],thisArg:r}),new yi(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(s)}));var Ha=os((function(t,e,n){he.call(t,n)?++t[n]:Ni(t,n,1)}));var ja=fs(_a),Xa=fs(ya);function qa(t,e){return(xo(t)?sn:Gi)(t,ks(e,3))}function Ya(t,e){return(xo(t)?an:Wi)(t,ks(e,3))}var Za=os((function(t,e,n){he.call(t,n)?t[n].push(e):Ni(t,n,[e])}));var Ka=Ar((function(t,e,n){var r=-1,s="function"==typeof e,a=wo(t)?i(t.length):[];return Gi(t,(function(t){a[++r]=s?nn(e,t,n):ar(t,e,n)})),a})),Ja=os((function(t,e,n){Ni(t,n,e)}));function $a(t,e){return(xo(t)?hn:mr)(t,ks(e,3))}var Qa=os((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var to=Ar((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Zs(t,e[0],e[1])?e=[]:n>2&&Zs(e[0],e[1],e[2])&&(e=[e[0]]),xr(t,qi(e,1),[])})),eo=Fe||function(){return He.Date.now()};function no(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Es(t,S,r,r,r,r,e)}function io(t,e){var n;if("function"!=typeof e)throw new se(o);return t=Ho(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var ro=Ar((function(t,e,n){var i=v;if(n.length){var r=Bn(n,Us(ro));i|=w}return Es(t,i,e,n,r)})),so=Ar((function(t,e,n){var i=v|_;if(n.length){var r=Bn(n,Us(so));i|=w}return Es(e,i,t,n,r)}));function ao(t,e,n){var i,s,a,l,c,u,h=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new se(o);function m(e){var n=i,a=s;return i=s=r,h=e,l=t.apply(a,n)}function g(t){var n=t-u;return u===r||n>=e||n<0||p&&t-h>=a}function v(){var t=eo();if(g(t))return _(t);c=aa(v,function(t){var n=e-(t-u);return p?Zn(n,a-(t-h)):n}(t))}function _(t){return c=r,f&&i?m(t):(i=s=r,l)}function y(){var t=eo(),n=g(t);if(i=arguments,s=this,u=t,n){if(c===r)return function(t){return h=t,c=aa(v,e),d?m(t):l}(u);if(p)return $r(c),c=aa(v,e),m(u)}return c===r&&(c=aa(v,e)),l}return e=Xo(e)||0,Po(n)&&(d=!!n.leading,a=(p="maxWait"in n)?Yn(Xo(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){c!==r&&$r(c),h=0,i=u=s=c=r},y.flush=function(){return c===r?l:_(eo())},y}var oo=Ar((function(t,e){return Bi(t,1,e)})),lo=Ar((function(t,e,n){return Bi(t,Xo(e)||0,n)}));function co(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new se(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var a=t.apply(this,i);return n.cache=s.set(r,a)||s,a};return n.cache=new(co.Cache||Mi),n}function uo(t){if("function"!=typeof t)throw new se(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}co.Cache=Mi;var ho=Kr((function(t,e){var n=(e=1==e.length&&xo(e[0])?hn(e[0],Ln(ks())):hn(qi(e,1),Ln(ks()))).length;return Ar((function(i){for(var r=-1,s=Zn(i.length,n);++r<s;)i[r]=e[r].call(this,i[r]);return nn(t,this,i)}))})),po=Ar((function(t,e){var n=Bn(e,Us(po));return Es(t,w,r,e,n)})),fo=Ar((function(t,e){var n=Bn(e,Us(fo));return Es(t,M,r,e,n)})),mo=Ds((function(t,e){return Es(t,T,r,r,r,e)}));function go(t,e){return t===e||t!=t&&e!=e}var vo=ws(nr),_o=ws((function(t,e){return t>=e})),yo=or(function(){return arguments}())?or:function(t){return Ro(t)&&he.call(t,"callee")&&!Se.call(t,"callee")},xo=i.isArray,bo=Ke?Ln(Ke):function(t){return Ro(t)&&er(t)==ct};function wo(t){return null!=t&&Lo(t.length)&&!Eo(t)}function Mo(t){return Ro(t)&&wo(t)}var So=Ye||Xl,To=Je?Ln(Je):function(t){return Ro(t)&&er(t)==j};function Ao(t){if(!Ro(t))return!1;var e=er(t);return e==q||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Oo(t)}function Eo(t){if(!Po(t))return!1;var e=er(t);return e==Y||e==Z||e==W||e==et}function Co(t){return"number"==typeof t&&t==Ho(t)}function Lo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=O}function Po(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ro(t){return null!=t&&"object"==typeof t}var Do=$e?Ln($e):function(t){return Ro(t)&&Hs(t)==K};function Io(t){return"number"==typeof t||Ro(t)&&er(t)==J}function Oo(t){if(!Ro(t)||er(t)!=Q)return!1;var e=we(t);if(null===e)return!0;var n=he.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==me}var No=Qe?Ln(Qe):function(t){return Ro(t)&&er(t)==nt};var zo=tn?Ln(tn):function(t){return Ro(t)&&Hs(t)==it};function Uo(t){return"string"==typeof t||!xo(t)&&Ro(t)&&er(t)==rt}function ko(t){return"symbol"==typeof t||Ro(t)&&er(t)==st}var Fo=en?Ln(en):function(t){return Ro(t)&&Lo(t.length)&&!!Ue[er(t)]};var Bo=ws(fr),Vo=ws((function(t,e){return t<=e}));function Go(t){if(!t)return[];if(wo(t))return Uo(t)?Hn(t):ss(t);if(Ee&&t[Ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ee]());var e=Hs(t);return(e==K?kn:e==it?Vn:gl)(t)}function Wo(t){return t?(t=Xo(t))===I||t===-I?(t<0?-1:1)*N:t==t?t:0:0===t?t:0}function Ho(t){var e=Wo(t),n=e%1;return e==e?n?e-n:e:0}function jo(t){return t?Ui(Ho(t),0,U):0}function Xo(t){if("number"==typeof t)return t;if(ko(t))return z;if(Po(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Po(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Cn(t);var n=Xt.test(t);return n||Yt.test(t)?Ve(t.slice(2),n?2:8):jt.test(t)?z:+t}function qo(t){return as(t,ll(t))}function Yo(t){return null==t?"":Fr(t)}var Zo=ls((function(t,e){if(Qs(e)||wo(e))as(e,ol(e),t);else for(var n in e)he.call(e,n)&&Ri(t,n,e[n])})),Ko=ls((function(t,e){as(e,ll(e),t)})),Jo=ls((function(t,e,n,i){as(e,ll(e),t,i)})),$o=ls((function(t,e,n,i){as(e,ol(e),t,i)})),Qo=Ds(zi);var tl=Ar((function(t,e){t=ne(t);var n=-1,i=e.length,s=i>2?e[2]:r;for(s&&Zs(e[0],e[1],s)&&(i=1);++n<i;)for(var a=e[n],o=ll(a),l=-1,c=o.length;++l<c;){var u=o[l],h=t[u];(h===r||go(h,le[u])&&!he.call(t,u))&&(t[u]=a[u])}return t})),el=Ar((function(t){return t.push(r,Ls),nn(ul,r,t)}));function nl(t,e,n){var i=null==t?r:Qi(t,e);return i===r?n:i}function il(t,e){return null!=t&&js(t,e,rr)}var rl=vs((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n}),Pl(Il)),sl=vs((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),he.call(t,e)?t[e].push(n):t[e]=[n]}),ks),al=Ar(ar);function ol(t){return wo(t)?Ai(t):dr(t)}function ll(t){return wo(t)?Ai(t,!0):pr(t)}var cl=ls((function(t,e,n){_r(t,e,n)})),ul=ls((function(t,e,n,i){_r(t,e,n,i)})),hl=Ds((function(t,e){var n={};if(null==t)return n;var i=!1;e=hn(e,(function(e){return e=Zr(e,t),i||(i=e.length>1),e})),as(t,Os(t),n),i&&(n=ki(n,d|p|f,Ps));for(var r=e.length;r--;)Vr(n,e[r]);return n}));var dl=Ds((function(t,e){return null==t?{}:function(t,e){return br(t,e,(function(e,n){return il(t,n)}))}(t,e)}));function pl(t,e){if(null==t)return{};var n=hn(Os(t),(function(t){return[t]}));return e=ks(e),br(t,n,(function(t,n){return e(t,n[0])}))}var fl=As(ol),ml=As(ll);function gl(t){return null==t?[]:Pn(t,ol(t))}var vl=ds((function(t,e,n){return e=e.toLowerCase(),t+(n?_l(e):e)}));function _l(t){return Al(Yo(t).toLowerCase())}function yl(t){return(t=Yo(t))&&t.replace(Kt,On).replace(Pe,"")}var xl=ds((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),bl=ds((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),wl=hs("toLowerCase");var Ml=ds((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Sl=ds((function(t,e,n){return t+(n?" ":"")+Al(e)}));var Tl=ds((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Al=hs("toUpperCase");function El(t,e,n){return t=Yo(t),(e=n?r:e)===r?function(t){return Oe.test(t)}(t)?function(t){return t.match(De)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(e)||[]}var Cl=Ar((function(t,e){try{return nn(t,r,e)}catch(t){return Ao(t)?t:new Qt(t)}})),Ll=Ds((function(t,e){return sn(e,(function(e){e=da(e),Ni(t,e,ro(t[e],t))})),t}));function Pl(t){return function(){return t}}var Rl=ms(),Dl=ms(!0);function Il(t){return t}function Ol(t){return hr("function"==typeof t?t:ki(t,d))}var Nl=Ar((function(t,e){return function(n){return ar(n,t,e)}})),zl=Ar((function(t,e){return function(n){return ar(t,n,e)}}));function Ul(t,e,n){var i=ol(e),r=$i(e,i);null!=n||Po(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=$i(e,ol(e)));var s=!(Po(n)&&"chain"in n&&!n.chain),a=Eo(t);return sn(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__);return(n.__actions__=ss(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,dn([this.value()],arguments))})})),t}function kl(){}var Fl=ys(hn),Bl=ys(on),Vl=ys(mn);function Gl(t){return Ks(t)?Mn(da(t)):function(t){return function(e){return Qi(e,t)}}(t)}var Wl=bs(),Hl=bs(!0);function jl(){return[]}function Xl(){return!1}var ql=_s((function(t,e){return t+e}),0),Yl=Ss("ceil"),Zl=_s((function(t,e){return t/e}),1),Kl=Ss("floor");var Jl,$l=_s((function(t,e){return t*e}),1),Ql=Ss("round"),tc=_s((function(t,e){return t-e}),0);return gi.after=function(t,e){if("function"!=typeof e)throw new se(o);return t=Ho(t),function(){if(--t<1)return e.apply(this,arguments)}},gi.ary=no,gi.assign=Zo,gi.assignIn=Ko,gi.assignInWith=Jo,gi.assignWith=$o,gi.at=Qo,gi.before=io,gi.bind=ro,gi.bindAll=Ll,gi.bindKey=so,gi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return xo(t)?t:[t]},gi.chain=Va,gi.chunk=function(t,e,n){e=(n?Zs(t,e,n):e===r)?1:Yn(Ho(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var a=0,o=0,l=i(We(s/e));a<s;)l[o++]=Ir(t,a,a+=e);return l},gi.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var s=t[e];s&&(r[i++]=s)}return r},gi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return dn(xo(n)?ss(n):[n],qi(e,1))},gi.cond=function(t){var e=null==t?0:t.length,n=ks();return t=e?hn(t,(function(t){if("function"!=typeof t[1])throw new se(o);return[n(t[0]),t[1]]})):[],Ar((function(n){for(var i=-1;++i<e;){var r=t[i];if(nn(r[0],this,n))return nn(r[1],this,n)}}))},gi.conforms=function(t){return function(t){var e=ol(t);return function(n){return Fi(n,t,e)}}(ki(t,d))},gi.constant=Pl,gi.countBy=Ha,gi.create=function(t,e){var n=vi(t);return null==e?n:Oi(n,e)},gi.curry=function t(e,n,i){var s=Es(e,x,r,r,r,r,r,n=i?r:n);return s.placeholder=t.placeholder,s},gi.curryRight=function t(e,n,i){var s=Es(e,b,r,r,r,r,r,n=i?r:n);return s.placeholder=t.placeholder,s},gi.debounce=ao,gi.defaults=tl,gi.defaultsDeep=el,gi.defer=oo,gi.delay=lo,gi.difference=ma,gi.differenceBy=ga,gi.differenceWith=va,gi.drop=function(t,e,n){var i=null==t?0:t.length;return i?Ir(t,(e=n||e===r?1:Ho(e))<0?0:e,i):[]},gi.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Ir(t,0,(e=i-(e=n||e===r?1:Ho(e)))<0?0:e):[]},gi.dropRightWhile=function(t,e){return t&&t.length?Wr(t,ks(e,3),!0,!0):[]},gi.dropWhile=function(t,e){return t&&t.length?Wr(t,ks(e,3),!0):[]},gi.fill=function(t,e,n,i){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&Zs(t,e,n)&&(n=0,i=s),function(t,e,n,i){var s=t.length;for((n=Ho(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:Ho(i))<0&&(i+=s),i=n>i?0:jo(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},gi.filter=function(t,e){return(xo(t)?ln:Xi)(t,ks(e,3))},gi.flatMap=function(t,e){return qi($a(t,e),1)},gi.flatMapDeep=function(t,e){return qi($a(t,e),I)},gi.flatMapDepth=function(t,e,n){return n=n===r?1:Ho(n),qi($a(t,e),n)},gi.flatten=xa,gi.flattenDeep=function(t){return(null==t?0:t.length)?qi(t,I):[]},gi.flattenDepth=function(t,e){return(null==t?0:t.length)?qi(t,e=e===r?1:Ho(e)):[]},gi.flip=function(t){return Es(t,A)},gi.flow=Rl,gi.flowRight=Dl,gi.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},gi.functions=function(t){return null==t?[]:$i(t,ol(t))},gi.functionsIn=function(t){return null==t?[]:$i(t,ll(t))},gi.groupBy=Za,gi.initial=function(t){return(null==t?0:t.length)?Ir(t,0,-1):[]},gi.intersection=wa,gi.intersectionBy=Ma,gi.intersectionWith=Sa,gi.invert=rl,gi.invertBy=sl,gi.invokeMap=Ka,gi.iteratee=Ol,gi.keyBy=Ja,gi.keys=ol,gi.keysIn=ll,gi.map=$a,gi.mapKeys=function(t,e){var n={};return e=ks(e,3),Ki(t,(function(t,i,r){Ni(n,e(t,i,r),t)})),n},gi.mapValues=function(t,e){var n={};return e=ks(e,3),Ki(t,(function(t,i,r){Ni(n,i,e(t,i,r))})),n},gi.matches=function(t){return gr(ki(t,d))},gi.matchesProperty=function(t,e){return vr(t,ki(e,d))},gi.memoize=co,gi.merge=cl,gi.mergeWith=ul,gi.method=Nl,gi.methodOf=zl,gi.mixin=Ul,gi.negate=uo,gi.nthArg=function(t){return t=Ho(t),Ar((function(e){return yr(e,t)}))},gi.omit=hl,gi.omitBy=function(t,e){return pl(t,uo(ks(e)))},gi.once=function(t){return io(2,t)},gi.orderBy=function(t,e,n,i){return null==t?[]:(xo(e)||(e=null==e?[]:[e]),xo(n=i?r:n)||(n=null==n?[]:[n]),xr(t,e,n))},gi.over=Fl,gi.overArgs=ho,gi.overEvery=Bl,gi.overSome=Vl,gi.partial=po,gi.partialRight=fo,gi.partition=Qa,gi.pick=dl,gi.pickBy=pl,gi.property=Gl,gi.propertyOf=function(t){return function(e){return null==t?r:Qi(t,e)}},gi.pull=Aa,gi.pullAll=Ea,gi.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?wr(t,e,ks(n,2)):t},gi.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?wr(t,e,r,n):t},gi.pullAt=Ca,gi.range=Wl,gi.rangeRight=Hl,gi.rearg=mo,gi.reject=function(t,e){return(xo(t)?ln:Xi)(t,uo(ks(e,3)))},gi.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],s=t.length;for(e=ks(e,3);++i<s;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return Mr(t,r),n},gi.rest=function(t,e){if("function"!=typeof t)throw new se(o);return Ar(t,e=e===r?e:Ho(e))},gi.reverse=La,gi.sampleSize=function(t,e,n){return e=(n?Zs(t,e,n):e===r)?1:Ho(e),(xo(t)?Ci:Cr)(t,e)},gi.set=function(t,e,n){return null==t?t:Lr(t,e,n)},gi.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Lr(t,e,n,i)},gi.shuffle=function(t){return(xo(t)?Li:Dr)(t)},gi.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Zs(t,e,n)?(e=0,n=i):(e=null==e?0:Ho(e),n=n===r?i:Ho(n)),Ir(t,e,n)):[]},gi.sortBy=to,gi.sortedUniq=function(t){return t&&t.length?Ur(t):[]},gi.sortedUniqBy=function(t,e){return t&&t.length?Ur(t,ks(e,2)):[]},gi.split=function(t,e,n){return n&&"number"!=typeof n&&Zs(t,e,n)&&(e=n=r),(n=n===r?U:n>>>0)?(t=Yo(t))&&("string"==typeof e||null!=e&&!No(e))&&!(e=Fr(e))&&Un(t)?Jr(Hn(t),0,n):t.split(e,n):[]},gi.spread=function(t,e){if("function"!=typeof t)throw new se(o);return e=null==e?0:Yn(Ho(e),0),Ar((function(n){var i=n[e],r=Jr(n,0,e);return i&&dn(r,i),nn(t,this,r)}))},gi.tail=function(t){var e=null==t?0:t.length;return e?Ir(t,1,e):[]},gi.take=function(t,e,n){return t&&t.length?Ir(t,0,(e=n||e===r?1:Ho(e))<0?0:e):[]},gi.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Ir(t,(e=i-(e=n||e===r?1:Ho(e)))<0?0:e,i):[]},gi.takeRightWhile=function(t,e){return t&&t.length?Wr(t,ks(e,3),!1,!0):[]},gi.takeWhile=function(t,e){return t&&t.length?Wr(t,ks(e,3)):[]},gi.tap=function(t,e){return e(t),t},gi.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new se(o);return Po(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ao(t,e,{leading:i,maxWait:e,trailing:r})},gi.thru=Ga,gi.toArray=Go,gi.toPairs=fl,gi.toPairsIn=ml,gi.toPath=function(t){return xo(t)?hn(t,da):ko(t)?[t]:ss(ha(Yo(t)))},gi.toPlainObject=qo,gi.transform=function(t,e,n){var i=xo(t),r=i||So(t)||Fo(t);if(e=ks(e,4),null==n){var s=t&&t.constructor;n=r?i?new s:[]:Po(t)&&Eo(s)?vi(we(t)):{}}return(r?sn:Ki)(t,(function(t,i,r){return e(n,t,i,r)})),n},gi.unary=function(t){return no(t,1)},gi.union=Pa,gi.unionBy=Ra,gi.unionWith=Da,gi.uniq=function(t){return t&&t.length?Br(t):[]},gi.uniqBy=function(t,e){return t&&t.length?Br(t,ks(e,2)):[]},gi.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Br(t,r,e):[]},gi.unset=function(t,e){return null==t||Vr(t,e)},gi.unzip=Ia,gi.unzipWith=Oa,gi.update=function(t,e,n){return null==t?t:Gr(t,e,Yr(n))},gi.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Gr(t,e,Yr(n),i)},gi.values=gl,gi.valuesIn=function(t){return null==t?[]:Pn(t,ll(t))},gi.without=Na,gi.words=El,gi.wrap=function(t,e){return po(Yr(e),t)},gi.xor=za,gi.xorBy=Ua,gi.xorWith=ka,gi.zip=Fa,gi.zipObject=function(t,e){return Xr(t||[],e||[],Ri)},gi.zipObjectDeep=function(t,e){return Xr(t||[],e||[],Lr)},gi.zipWith=Ba,gi.entries=fl,gi.entriesIn=ml,gi.extend=Ko,gi.extendWith=Jo,Ul(gi,gi),gi.add=ql,gi.attempt=Cl,gi.camelCase=vl,gi.capitalize=_l,gi.ceil=Yl,gi.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Xo(n))==n?n:0),e!==r&&(e=(e=Xo(e))==e?e:0),Ui(Xo(t),e,n)},gi.clone=function(t){return ki(t,f)},gi.cloneDeep=function(t){return ki(t,d|f)},gi.cloneDeepWith=function(t,e){return ki(t,d|f,e="function"==typeof e?e:r)},gi.cloneWith=function(t,e){return ki(t,f,e="function"==typeof e?e:r)},gi.conformsTo=function(t,e){return null==e||Fi(t,e,ol(e))},gi.deburr=yl,gi.defaultTo=function(t,e){return null==t||t!=t?e:t},gi.divide=Zl,gi.endsWith=function(t,e,n){t=Yo(t),e=Fr(e);var i=t.length,s=n=n===r?i:Ui(Ho(n),0,i);return(n-=e.length)>=0&&t.slice(n,s)==e},gi.eq=go,gi.escape=function(t){return(t=Yo(t))&&At.test(t)?t.replace(St,Nn):t},gi.escapeRegExp=function(t){return(t=Yo(t))&&Ot.test(t)?t.replace(It,"\\$&"):t},gi.every=function(t,e,n){var i=xo(t)?on:Hi;return n&&Zs(t,e,n)&&(e=r),i(t,ks(e,3))},gi.find=ja,gi.findIndex=_a,gi.findKey=function(t,e){return vn(t,ks(e,3),Ki)},gi.findLast=Xa,gi.findLastIndex=ya,gi.findLastKey=function(t,e){return vn(t,ks(e,3),Ji)},gi.floor=Kl,gi.forEach=qa,gi.forEachRight=Ya,gi.forIn=function(t,e){return null==t?t:Yi(t,ks(e,3),ll)},gi.forInRight=function(t,e){return null==t?t:Zi(t,ks(e,3),ll)},gi.forOwn=function(t,e){return t&&Ki(t,ks(e,3))},gi.forOwnRight=function(t,e){return t&&Ji(t,ks(e,3))},gi.get=nl,gi.gt=vo,gi.gte=_o,gi.has=function(t,e){return null!=t&&js(t,e,ir)},gi.hasIn=il,gi.head=ba,gi.identity=Il,gi.includes=function(t,e,n,i){t=wo(t)?t:gl(t),n=n&&!i?Ho(n):0;var r=t.length;return n<0&&(n=Yn(r+n,0)),Uo(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&yn(t,e,n)>-1},gi.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ho(n);return r<0&&(r=Yn(i+r,0)),yn(t,e,r)},gi.inRange=function(t,e,n){return e=Wo(e),n===r?(n=e,e=0):n=Wo(n),function(t,e,n){return t>=Zn(e,n)&&t<Yn(e,n)}(t=Xo(t),e,n)},gi.invoke=al,gi.isArguments=yo,gi.isArray=xo,gi.isArrayBuffer=bo,gi.isArrayLike=wo,gi.isArrayLikeObject=Mo,gi.isBoolean=function(t){return!0===t||!1===t||Ro(t)&&er(t)==H},gi.isBuffer=So,gi.isDate=To,gi.isElement=function(t){return Ro(t)&&1===t.nodeType&&!Oo(t)},gi.isEmpty=function(t){if(null==t)return!0;if(wo(t)&&(xo(t)||"string"==typeof t||"function"==typeof t.splice||So(t)||Fo(t)||yo(t)))return!t.length;var e=Hs(t);if(e==K||e==it)return!t.size;if(Qs(t))return!dr(t).length;for(var n in t)if(he.call(t,n))return!1;return!0},gi.isEqual=function(t,e){return lr(t,e)},gi.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?lr(t,e,r,n):!!i},gi.isError=Ao,gi.isFinite=function(t){return"number"==typeof t&&Ze(t)},gi.isFunction=Eo,gi.isInteger=Co,gi.isLength=Lo,gi.isMap=Do,gi.isMatch=function(t,e){return t===e||cr(t,e,Bs(e))},gi.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,cr(t,e,Bs(e),n)},gi.isNaN=function(t){return Io(t)&&t!=+t},gi.isNative=function(t){if($s(t))throw new Qt(a);return ur(t)},gi.isNil=function(t){return null==t},gi.isNull=function(t){return null===t},gi.isNumber=Io,gi.isObject=Po,gi.isObjectLike=Ro,gi.isPlainObject=Oo,gi.isRegExp=No,gi.isSafeInteger=function(t){return Co(t)&&t>=-O&&t<=O},gi.isSet=zo,gi.isString=Uo,gi.isSymbol=ko,gi.isTypedArray=Fo,gi.isUndefined=function(t){return t===r},gi.isWeakMap=function(t){return Ro(t)&&Hs(t)==ot},gi.isWeakSet=function(t){return Ro(t)&&er(t)==lt},gi.join=function(t,e){return null==t?"":gn.call(t,e)},gi.kebabCase=xl,gi.last=Ta,gi.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var s=i;return n!==r&&(s=(s=Ho(n))<0?Yn(i+s,0):Zn(s,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,s):_n(t,bn,s,!0)},gi.lowerCase=bl,gi.lowerFirst=wl,gi.lt=Bo,gi.lte=Vo,gi.max=function(t){return t&&t.length?ji(t,Il,nr):r},gi.maxBy=function(t,e){return t&&t.length?ji(t,ks(e,2),nr):r},gi.mean=function(t){return wn(t,Il)},gi.meanBy=function(t,e){return wn(t,ks(e,2))},gi.min=function(t){return t&&t.length?ji(t,Il,fr):r},gi.minBy=function(t,e){return t&&t.length?ji(t,ks(e,2),fr):r},gi.stubArray=jl,gi.stubFalse=Xl,gi.stubObject=function(){return{}},gi.stubString=function(){return""},gi.stubTrue=function(){return!0},gi.multiply=$l,gi.nth=function(t,e){return t&&t.length?yr(t,Ho(e)):r},gi.noConflict=function(){return He._===this&&(He._=ge),this},gi.noop=kl,gi.now=eo,gi.pad=function(t,e,n){t=Yo(t);var i=(e=Ho(e))?Wn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return xs(je(r),n)+t+xs(We(r),n)},gi.padEnd=function(t,e,n){t=Yo(t);var i=(e=Ho(e))?Wn(t):0;return e&&i<e?t+xs(e-i,n):t},gi.padStart=function(t,e,n){t=Yo(t);var i=(e=Ho(e))?Wn(t):0;return e&&i<e?xs(e-i,n)+t:t},gi.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Jn(Yo(t).replace(Nt,""),e||0)},gi.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Zs(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Wo(t),e===r?(e=t,t=0):e=Wo(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var s=$n();return Zn(t+s*(e-t+Be("1e-"+((s+"").length-1))),e)}return Sr(t,e)},gi.reduce=function(t,e,n){var i=xo(t)?pn:Tn,r=arguments.length<3;return i(t,ks(e,4),n,r,Gi)},gi.reduceRight=function(t,e,n){var i=xo(t)?fn:Tn,r=arguments.length<3;return i(t,ks(e,4),n,r,Wi)},gi.repeat=function(t,e,n){return e=(n?Zs(t,e,n):e===r)?1:Ho(e),Tr(Yo(t),e)},gi.replace=function(){var t=arguments,e=Yo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},gi.result=function(t,e,n){var i=-1,s=(e=Zr(e,t)).length;for(s||(s=1,t=r);++i<s;){var a=null==t?r:t[da(e[i])];a===r&&(i=s,a=n),t=Eo(a)?a.call(t):a}return t},gi.round=Ql,gi.runInContext=t,gi.sample=function(t){return(xo(t)?Ei:Er)(t)},gi.size=function(t){if(null==t)return 0;if(wo(t))return Uo(t)?Wn(t):t.length;var e=Hs(t);return e==K||e==it?t.size:dr(t).length},gi.snakeCase=Ml,gi.some=function(t,e,n){var i=xo(t)?mn:Or;return n&&Zs(t,e,n)&&(e=r),i(t,ks(e,3))},gi.sortedIndex=function(t,e){return Nr(t,e)},gi.sortedIndexBy=function(t,e,n){return zr(t,e,ks(n,2))},gi.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Nr(t,e);if(i<n&&go(t[i],e))return i}return-1},gi.sortedLastIndex=function(t,e){return Nr(t,e,!0)},gi.sortedLastIndexBy=function(t,e,n){return zr(t,e,ks(n,2),!0)},gi.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Nr(t,e,!0)-1;if(go(t[n],e))return n}return-1},gi.startCase=Sl,gi.startsWith=function(t,e,n){return t=Yo(t),n=null==n?0:Ui(Ho(n),0,t.length),e=Fr(e),t.slice(n,n+e.length)==e},gi.subtract=tc,gi.sum=function(t){return t&&t.length?An(t,Il):0},gi.sumBy=function(t,e){return t&&t.length?An(t,ks(e,2)):0},gi.template=function(t,e,n){var i=gi.templateSettings;n&&Zs(t,e,n)&&(e=r),t=Yo(t),e=Jo({},e,i,Cs);var s,a,o=Jo({},e.imports,i.imports,Cs),c=ol(o),u=Pn(o,c),h=0,d=e.interpolate||Jt,p="__p += '",f=ie((e.escape||Jt).source+"|"+d.source+"|"+(d===Lt?Wt:Jt).source+"|"+(e.evaluate||Jt).source+"|$","g"),m="//# sourceURL="+(he.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ze+"]")+"\n";t.replace(f,(function(e,n,i,r,o,l){return i||(i=r),p+=t.slice(h,l).replace($t,zn),n&&(s=!0,p+="' +\n__e("+n+") +\n'"),o&&(a=!0,p+="';\n"+o+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),p+="';\n";var g=he.call(e,"variable")&&e.variable;if(g){if(Vt.test(g))throw new Qt(l)}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(xt,""):p).replace(bt,"$1").replace(wt,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Cl((function(){return te(c,m+"return "+p).apply(r,u)}));if(v.source=p,Ao(v))throw v;return v},gi.times=function(t,e){if((t=Ho(t))<1||t>O)return[];var n=U,i=Zn(t,U);e=ks(e),t-=U;for(var r=En(i,e);++n<t;)e(n);return r},gi.toFinite=Wo,gi.toInteger=Ho,gi.toLength=jo,gi.toLower=function(t){return Yo(t).toLowerCase()},gi.toNumber=Xo,gi.toSafeInteger=function(t){return t?Ui(Ho(t),-O,O):0===t?t:0},gi.toString=Yo,gi.toUpper=function(t){return Yo(t).toUpperCase()},gi.trim=function(t,e,n){if((t=Yo(t))&&(n||e===r))return Cn(t);if(!t||!(e=Fr(e)))return t;var i=Hn(t),s=Hn(e);return Jr(i,Dn(i,s),In(i,s)+1).join("")},gi.trimEnd=function(t,e,n){if((t=Yo(t))&&(n||e===r))return t.slice(0,jn(t)+1);if(!t||!(e=Fr(e)))return t;var i=Hn(t);return Jr(i,0,In(i,Hn(e))+1).join("")},gi.trimStart=function(t,e,n){if((t=Yo(t))&&(n||e===r))return t.replace(Nt,"");if(!t||!(e=Fr(e)))return t;var i=Hn(t);return Jr(i,Dn(i,Hn(e))).join("")},gi.truncate=function(t,e){var n=E,i=C;if(Po(e)){var s="separator"in e?e.separator:s;n="length"in e?Ho(e.length):n,i="omission"in e?Fr(e.omission):i}var a=(t=Yo(t)).length;if(Un(t)){var o=Hn(t);a=o.length}if(n>=a)return t;var l=n-Wn(i);if(l<1)return i;var c=o?Jr(o,0,l).join(""):t.slice(0,l);if(s===r)return c+i;if(o&&(l+=c.length-l),No(s)){if(t.slice(l).search(s)){var u,h=c;for(s.global||(s=ie(s.source,Yo(Ht.exec(s))+"g")),s.lastIndex=0;u=s.exec(h);)var d=u.index;c=c.slice(0,d===r?l:d)}}else if(t.indexOf(Fr(s),l)!=l){var p=c.lastIndexOf(s);p>-1&&(c=c.slice(0,p))}return c+i},gi.unescape=function(t){return(t=Yo(t))&&Tt.test(t)?t.replace(Mt,Xn):t},gi.uniqueId=function(t){var e=++de;return Yo(t)+e},gi.upperCase=Tl,gi.upperFirst=Al,gi.each=qa,gi.eachRight=Ya,gi.first=ba,Ul(gi,(Jl={},Ki(gi,(function(t,e){he.call(gi.prototype,e)||(Jl[e]=t)})),Jl),{chain:!1}),gi.VERSION="4.17.21",sn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){gi[t].placeholder=gi})),sn(["drop","take"],(function(t,e){xi.prototype[t]=function(n){n=n===r?1:Yn(Ho(n),0);var i=this.__filtered__&&!e?new xi(this):this.clone();return i.__filtered__?i.__takeCount__=Zn(n,i.__takeCount__):i.__views__.push({size:Zn(n,U),type:t+(i.__dir__<0?"Right":"")}),i},xi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),sn(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=n==R||3==n;xi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ks(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),sn(["head","last"],(function(t,e){var n="take"+(e?"Right":"");xi.prototype[t]=function(){return this[n](1).value()[0]}})),sn(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");xi.prototype[t]=function(){return this.__filtered__?new xi(this):this[n](1)}})),xi.prototype.compact=function(){return this.filter(Il)},xi.prototype.find=function(t){return this.filter(t).head()},xi.prototype.findLast=function(t){return this.reverse().find(t)},xi.prototype.invokeMap=Ar((function(t,e){return"function"==typeof t?new xi(this):this.map((function(n){return ar(n,t,e)}))})),xi.prototype.reject=function(t){return this.filter(uo(ks(t)))},xi.prototype.slice=function(t,e){t=Ho(t);var n=this;return n.__filtered__&&(t>0||e<0)?new xi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=Ho(e))<0?n.dropRight(-e):n.take(e-t)),n)},xi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},xi.prototype.toArray=function(){return this.take(U)},Ki(xi.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),s=gi[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);s&&(gi.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,l=e instanceof xi,c=o[0],u=l||xo(e),h=function(t){var e=s.apply(gi,dn([t],o));return i&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length,f=a&&!d,m=l&&!p;if(!a&&u){e=m?e:new xi(this);var g=t.apply(e,o);return g.__actions__.push({func:Ga,args:[h],thisArg:r}),new yi(g,d)}return f&&m?t.apply(this,o):(g=this.thru(h),f?i?g.value()[0]:g.value():g)})})),sn(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);gi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(xo(r)?r:[],t)}return this[n]((function(n){return e.apply(xo(n)?n:[],t)}))}})),Ki(xi.prototype,(function(t,e){var n=gi[e];if(n){var i=n.name+"";he.call(oi,i)||(oi[i]=[]),oi[i].push({name:e,func:n})}})),oi[gs(r,_).name]=[{name:"wrapper",func:r}],xi.prototype.clone=function(){var t=new xi(this.__wrapped__);return t.__actions__=ss(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ss(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ss(this.__views__),t},xi.prototype.reverse=function(){if(this.__filtered__){var t=new xi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},xi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=xo(t),i=e<0,r=n?t.length:0,s=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var s=n[i],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Zn(e,t+a);break;case"takeRight":t=Yn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=s.start,o=s.end,l=o-a,c=i?o:a-1,u=this.__iteratees__,h=u.length,d=0,p=Zn(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return Hr(t,this.__actions__);var f=[];t:for(;l--&&d<p;){for(var m=-1,g=t[c+=e];++m<h;){var v=u[m],_=v.iteratee,y=v.type,x=_(g);if(y==D)g=x;else if(!x){if(y==R)continue t;break t}}f[d++]=g}return f},gi.prototype.at=Wa,gi.prototype.chain=function(){return Va(this)},gi.prototype.commit=function(){return new yi(this.value(),this.__chain__)},gi.prototype.next=function(){this.__values__===r&&(this.__values__=Go(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},gi.prototype.plant=function(t){for(var e,n=this;n instanceof _i;){var i=fa(n);i.__index__=0,i.__values__=r,e?s.__wrapped__=i:e=i;var s=i;n=n.__wrapped__}return s.__wrapped__=t,e},gi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof xi){var e=t;return this.__actions__.length&&(e=new xi(this)),(e=e.reverse()).__actions__.push({func:Ga,args:[La],thisArg:r}),new yi(e,this.__chain__)}return this.thru(La)},gi.prototype.toJSON=gi.prototype.valueOf=gi.prototype.value=function(){return Hr(this.__wrapped__,this.__actions__)},gi.prototype.first=gi.prototype.head,Ee&&(gi.prototype[Ee]=function(){return this}),gi}();He._=qn,(i=function(){return qn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},13054:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}function s(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return bf}});n(57658),n(23767),n(8585),n(68696),n(30541);const a="150",o={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},l={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},c=0,u=1,h=2,d=1,p=2,f=3,m=0,g=1,v=2,y=0,x=1,b=2,w=3,M=4,S=5,T=100,A=101,E=102,C=103,L=104,P=200,R=201,D=202,I=203,O=204,N=205,z=206,U=207,k=208,F=209,B=210,V=0,G=1,W=2,H=3,j=4,X=5,q=6,Y=7,Z=0,K=1,J=2,$=0,Q=1,tt=2,et=3,nt=4,it=5,rt=301,st=302,at=303,ot=304,lt=306,ct=1e3,ut=1001,ht=1002,dt=1003,pt=1004,ft=1005,mt=1006,gt=1007,vt=1008,_t=1009,yt=1010,xt=1011,bt=1012,wt=1013,Mt=1014,St=1015,Tt=1016,At=1017,Et=1018,Ct=1020,Lt=1021,Pt=1023,Rt=1024,Dt=1025,It=1026,Ot=1027,Nt=1028,zt=1029,Ut=1030,kt=1031,Ft=1033,Bt=33776,Vt=33777,Gt=33778,Wt=33779,Ht=35840,jt=35841,Xt=35842,qt=35843,Yt=36196,Zt=37492,Kt=37496,Jt=37808,$t=37809,Qt=37810,te=37811,ee=37812,ne=37813,ie=37814,re=37815,se=37816,ae=37817,oe=37818,le=37819,ce=37820,ue=37821,he=36492,de=36283,pe=36284,fe=36285,me=36286,ge=2300,ve=2301,_e=2302,ye=2400,xe=2401,be=2402,we=0,Me=1,Se=2,Te=3e3,Ae=3001,Ee=3201,Ce=0,Le=1,Pe="srgb",Re="srgb-linear",De="display-p3",Ie=7680,Oe=35044,Ne="300 es",ze=1035;class Ue{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const ke=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Fe=1234567;const Be=Math.PI/180,Ve=180/Math.PI;function Ge(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ke[255&t]+ke[t>>8&255]+ke[t>>16&255]+ke[t>>24&255]+"-"+ke[255&e]+ke[e>>8&255]+"-"+ke[e>>16&15|64]+ke[e>>24&255]+"-"+ke[63&n|128]+ke[n>>8&255]+"-"+ke[n>>16&255]+ke[n>>24&255]+ke[255&i]+ke[i>>8&255]+ke[i>>16&255]+ke[i>>24&255]).toLowerCase()}function We(t,e,n){return Math.max(e,Math.min(n,t))}function He(t,e){return(t%e+e)%e}function je(t,e,n){return(1-n)*t+n*e}function Xe(t){return 0==(t&t-1)&&0!==t}function qe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Ye(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Ze(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ke(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Je={DEG2RAD:Be,RAD2DEG:Ve,generateUUID:Ge,clamp:We,euclideanModulo:He,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:je,damp:function(t,e,n,i){return je(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(He(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Fe=t);let e=Fe+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*Be},radToDeg:function(t){return t*Ve},isPowerOfTwo:Xe,ceilPowerOfTwo:qe,floorPowerOfTwo:Ye,setQuaternionFromProperEuler:function(t,e,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+i)/2),u=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),p=s((i-e)/2),f=a((i-e)/2);switch(r){case"XYX":t.set(o*u,l*h,l*d,o*c);break;case"YZY":t.set(l*d,o*u,l*h,o*c);break;case"ZXZ":t.set(l*h,l*d,o*u,o*c);break;case"XZX":t.set(o*u,l*f,l*p,o*c);break;case"YXY":t.set(l*p,o*u,l*f,o*c);break;case"ZYZ":t.set(l*f,l*p,o*u,o*c)}},normalize:Ke,denormalize:Ze};class $e{constructor(t=0,e=0){$e.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qe{constructor(){Qe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,i,r,s,a,o,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],_=i[4],y=i[7],x=i[2],b=i[5],w=i[8];return r[0]=s*f+a*v+o*x,r[3]=s*m+a*_+o*b,r[6]=s*g+a*y+o*w,r[1]=l*f+c*v+u*x,r[4]=l*m+c*_+u*b,r[7]=l*g+c*y+u*w,r[2]=h*f+d*v+p*x,r[5]=h*m+d*_+p*b,r[8]=h*g+d*y+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8];return e*s*c-e*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=c*s-a*l,h=a*o-c*r,d=l*r-s*o,p=e*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(i*l-c*n)*f,t[2]=(a*n-i*s)*f,t[3]=h*f,t[4]=(c*e-i*o)*f,t[5]=(i*r-a*e)*f,t[6]=d*f,t[7]=(n*o-l*e)*f,t[8]=(s*e-n*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+t,-i*l,i*o,-i*(-l*s+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(tn.makeScale(t,e)),this}rotate(t){return this.premultiply(tn.makeRotation(-t)),this}translate(t,e){return this.premultiply(tn.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const tn=new Qe;function en(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function nn(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}class rn{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return t[e+0]=o,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(u!==f||o!==h||l!==d||c!==p){let t=1-a;const e=o*h+l*d+c*p+u*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*t+h*r,l=l*t+d*r,c=c*t+p*r,u=u*t+f*r,t===1-a){const t=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=t,l*=t,c*=t,u*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],h=r[s+1],d=r[s+2],p=r[s+3];return t[e]=a*p+c*u+o*d-l*h,t[e+1]=o*p+c*h+l*u-a*d,t[e+2]=l*p+c*d+a*h-o*u,t[e+3]=c*p-a*u-o*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,i=t._y,r=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=o(n/2),d=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],a=e[5],o=e[9],l=e[2],c=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-o)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-o)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(We(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,a=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class sn{constructor(t=0,e=0,n=0){sn.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(on.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(on.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,a=t.z,o=t.w,l=o*e+s*i-a*n,c=o*n+a*e-r*i,u=o*i+r*n-s*e,h=-r*e-s*n-a*i;return this.x=l*o+h*-r+c*-a-u*-s,this.y=c*o+h*-s+u*-r-l*-a,this.z=u*o+h*-a+l*-s-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return an.copy(this).projectOnVector(t),this.sub(an)}reflect(t){return this.sub(an.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(We(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const an=new sn,on=new rn;function ln(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function cn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const un=(new Qe).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),hn=(new Qe).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),dn=new sn;const pn={[Re]:t=>t,[Pe]:t=>t.convertSRGBToLinear(),[De]:function(t){return t.convertSRGBToLinear(),dn.set(t.r,t.g,t.b).applyMatrix3(hn),t.setRGB(dn.x,dn.y,dn.z)}},fn={[Re]:t=>t,[Pe]:t=>t.convertLinearToSRGB(),[De]:function(t){return dn.set(t.r,t.g,t.b).applyMatrix3(un),t.setRGB(dn.x,dn.y,dn.z).convertLinearToSRGB()}},mn={enabled:!1,get legacyMode(){return!this.enabled},set legacyMode(t){this.enabled=!t},get workingColorSpace(){return Re},set workingColorSpace(t){},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const i=pn[e],r=fn[n];if(void 0===i||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let gn;class vn{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===gn&&(gn=nn("canvas")),gn.width=t.width,gn.height=t.height;const n=gn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=gn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=nn("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*ln(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*ln(e[t]/255)):e[t]=ln(e[t]);return{data:e,width:t.width,height:t.height}}return t}}class _n{constructor(t=null){this.isSource=!0,this.uuid=Ge(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(yn(i[e].image)):t.push(yn(i[e]))}else t=yn(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function yn(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?vn.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}let xn=0;class bn extends Ue{constructor(t=bn.DEFAULT_IMAGE,e=bn.DEFAULT_MAPPING,n=ut,i=ut,r=mt,s=vt,a=Pt,o=_t,l=bn.DEFAULT_ANISOTROPY,c=Te){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xn++}),this.uuid=Ge(),this.name="",this.source=new _n(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new $e(0,0),this.repeat=new $e(1,1),this.center=new $e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ct:t.x=t.x-Math.floor(t.x);break;case ut:t.x=t.x<0?0:1;break;case ht:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ct:t.y=t.y-Math.floor(t.y);break;case ut:t.y=t.y<0?0:1;break;case ht:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}bn.DEFAULT_IMAGE=null,bn.DEFAULT_MAPPING=300,bn.DEFAULT_ANISOTROPY=1;class wn{constructor(t=0,e=0,n=0,i=1){wn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,a=.1,o=t.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,o=(d+1)/2,v=(g+1)/2,_=(c+h)/4,y=(u+f)/4,x=(p+m)/4;return t>o&&t>v?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=_/n,r=y/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=_/i,r=x/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=y/r,i=x/r),this.set(n,i,r,e),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Mn extends Ue{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new wn(0,0,t,e),this.scissorTest=!1,this.viewport=new wn(0,0,t,e);const i={width:t,height:e,depth:1};this.texture=new bn(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:mt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new _n(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sn extends bn{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=dt,this.minFilter=dt,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tn extends bn{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=dt,this.minFilter=dt,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class An{constructor(t=new sn(1/0,1/0,1/0),e=new sn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],c=t[o+1],u=t[o+2];l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,s,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),c=t.getY(o),u=t.getZ(o);l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,s,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Cn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,i=e.count;n<i;n++)Cn.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Cn)}else null===n.boundingBox&&n.computeBoundingBox(),Ln.copy(n.boundingBox),Ln.applyMatrix4(t.matrixWorld),this.union(Ln);const i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Cn),Cn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(zn),Un.subVectors(this.max,zn),Pn.subVectors(t.a,zn),Rn.subVectors(t.b,zn),Dn.subVectors(t.c,zn),In.subVectors(Rn,Pn),On.subVectors(Dn,Rn),Nn.subVectors(Pn,Dn);let e=[0,-In.z,In.y,0,-On.z,On.y,0,-Nn.z,Nn.y,In.z,0,-In.x,On.z,0,-On.x,Nn.z,0,-Nn.x,-In.y,In.x,0,-On.y,On.x,0,-Nn.y,Nn.x,0];return!!Bn(e,Pn,Rn,Dn,Un)&&(e=[1,0,0,0,1,0,0,0,1],!!Bn(e,Pn,Rn,Dn,Un)&&(kn.crossVectors(In,On),e=[kn.x,kn.y,kn.z],Bn(e,Pn,Rn,Dn,Un)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Cn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Cn).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(En[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),En[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),En[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),En[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),En[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),En[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),En[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),En[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(En)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const En=[new sn,new sn,new sn,new sn,new sn,new sn,new sn,new sn],Cn=new sn,Ln=new An,Pn=new sn,Rn=new sn,Dn=new sn,In=new sn,On=new sn,Nn=new sn,zn=new sn,Un=new sn,kn=new sn,Fn=new sn;function Bn(t,e,n,i,r){for(let s=0,a=t.length-3;s<=a;s+=3){Fn.fromArray(t,s);const a=r.x*Math.abs(Fn.x)+r.y*Math.abs(Fn.y)+r.z*Math.abs(Fn.z),o=e.dot(Fn),l=n.dot(Fn),c=i.dot(Fn);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const Vn=new An,Gn=new sn,Wn=new sn;class Hn{constructor(t=new sn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Vn.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Gn.subVectors(t,this.center);const e=Gn.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(Gn,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Wn.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Gn.copy(t.center).add(Wn)),this.expandByPoint(Gn.copy(t.center).sub(Wn))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const jn=new sn,Xn=new sn,qn=new sn,Yn=new sn,Zn=new sn,Kn=new sn,Jn=new sn;class $n{constructor(t=new sn,e=new sn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,jn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=jn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(jn.copy(this.origin).addScaledVector(this.direction,e),jn.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){Xn.copy(t).add(e).multiplyScalar(.5),qn.copy(e).sub(t).normalize(),Yn.copy(this.origin).sub(Xn);const r=.5*t.distanceTo(e),s=-this.direction.dot(qn),a=Yn.dot(this.direction),o=-Yn.dot(qn),l=Yn.lengthSq(),c=Math.abs(1-s*s);let u,h,d,p;if(c>0)if(u=s*o-a,h=s*a-o,p=r*c,u>=0)if(h>=-p)if(h<=p){const t=1/c;u*=t,h*=t,d=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h=-r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h<=-p?(u=Math.max(0,-(-s*r+a)),h=u>0?-r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-o),r),d=h*(h+2*o)+l):(u=Math.max(0,-(s*r+a)),h=u>0?r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l);else h=s>0?-r:r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Xn).addScaledVector(qn,h),d}intersectSphere(t,e){jn.subVectors(t.center,this.origin);const n=jn.dot(this.direction),i=jn.dot(jn)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,s=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,s=(t.min.y-h.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(t.min.z-h.z)*u,o=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,o=(t.min.z-h.z)*u),n>o||a>i?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,jn)}intersectTriangle(t,e,n,i,r){Zn.subVectors(e,t),Kn.subVectors(n,t),Jn.crossVectors(Zn,Kn);let s,a=this.direction.dot(Jn);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}Yn.subVectors(this.origin,t);const o=s*this.direction.dot(Kn.crossVectors(Yn,Kn));if(o<0)return null;const l=s*this.direction.dot(Zn.cross(Yn));if(l<0)return null;if(o+l>a)return null;const c=-s*Yn.dot(Jn);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Qn{constructor(){Qn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,i,r,s,a,o,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Qn).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/ti.setFromMatrixColumn(t,0).length(),r=1/ti.setFromMatrixColumn(t,1).length(),s=1/ti.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=s*c,n=s*u,i=a*c,r=a*u;e[0]=o*c,e[4]=-o*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*o,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*c,n=o*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=s*l,e[1]=s*u,e[5]=s*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*c,n=o*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-s*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=s*c,e[9]=r-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*c,n=s*u,i=a*c,r=a*u;e[0]=o*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=o*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,n=s*l,i=a*o,r=a*l;e[0]=o*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=s*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=s*o,n=s*l,i=a*o,r=a*l;e[0]=o*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=s*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ni,t,ii)}lookAt(t,e,n){const i=this.elements;return ai.subVectors(t,e),0===ai.lengthSq()&&(ai.z=1),ai.normalize(),ri.crossVectors(n,ai),0===ri.lengthSq()&&(1===Math.abs(n.z)?ai.x+=1e-4:ai.z+=1e-4,ai.normalize(),ri.crossVectors(n,ai)),ri.normalize(),si.crossVectors(ai,ri),i[0]=ri.x,i[4]=si.x,i[8]=ai.x,i[1]=ri.y,i[5]=si.y,i[9]=ai.y,i[2]=ri.z,i[6]=si.z,i[10]=ai.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],x=n[15],b=i[0],w=i[4],M=i[8],S=i[12],T=i[1],A=i[5],E=i[9],C=i[13],L=i[2],P=i[6],R=i[10],D=i[14],I=i[3],O=i[7],N=i[11],z=i[15];return r[0]=s*b+a*T+o*L+l*I,r[4]=s*w+a*A+o*P+l*O,r[8]=s*M+a*E+o*R+l*N,r[12]=s*S+a*C+o*D+l*z,r[1]=c*b+u*T+h*L+d*I,r[5]=c*w+u*A+h*P+d*O,r[9]=c*M+u*E+h*R+d*N,r[13]=c*S+u*C+h*D+d*z,r[2]=p*b+f*T+m*L+g*I,r[6]=p*w+f*A+m*P+g*O,r[10]=p*M+f*E+m*R+g*N,r[14]=p*S+f*C+m*D+g*z,r[3]=v*b+_*T+y*L+x*I,r[7]=v*w+_*A+y*P+x*O,r[11]=v*M+_*E+y*R+x*N,r[15]=v*S+_*C+y*D+x*z,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*o*u-i*l*u-r*a*h+n*l*h+i*a*d-n*o*d)+t[7]*(+e*o*d-e*l*h+r*s*h-i*s*d+i*l*c-r*o*c)+t[11]*(+e*l*u-e*a*d-r*s*u+n*s*d+r*a*c-n*l*c)+t[15]*(-i*a*c-e*o*u+e*a*h+i*s*u-n*s*h+n*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*l-f*h*l+f*o*d-a*m*d-u*o*g+a*h*g,_=p*h*l-c*m*l-p*o*d+s*m*d+c*o*g-s*h*g,y=c*f*l-p*u*l+p*a*d-s*f*d-c*a*g+s*u*g,x=p*u*o-c*f*o-p*a*h+s*f*h+c*a*m-s*u*m,b=e*v+n*_+i*y+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=v*w,t[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*w,t[2]=(a*m*r-f*o*r+f*i*l-n*m*l-a*i*g+n*o*g)*w,t[3]=(u*o*r-a*h*r-u*i*l+n*h*l+a*i*d-n*o*d)*w,t[4]=_*w,t[5]=(c*m*r-p*h*r+p*i*d-e*m*d-c*i*g+e*h*g)*w,t[6]=(p*o*r-s*m*r-p*i*l+e*m*l+s*i*g-e*o*g)*w,t[7]=(s*h*r-c*o*r+c*i*l-e*h*l-s*i*d+e*o*d)*w,t[8]=y*w,t[9]=(p*u*r-c*f*r-p*n*d+e*f*d+c*n*g-e*u*g)*w,t[10]=(s*f*r-p*a*r+p*n*l-e*f*l-s*n*g+e*a*g)*w,t[11]=(c*a*r-s*u*r-c*n*l+e*u*l+s*n*d-e*a*d)*w,t[12]=x*w,t[13]=(c*f*i-p*u*i+p*n*h-e*f*h-c*n*m+e*u*m)*w,t[14]=(p*a*i-s*f*i-p*n*o+e*f*o+s*n*m-e*a*m)*w,t[15]=(s*u*i-c*a*i+c*n*o-e*u*o-s*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,a=t.y,o=t.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,c=s+s,u=a+a,h=r*l,d=r*c,p=r*u,f=s*c,m=s*u,g=a*u,v=o*l,_=o*c,y=o*u,x=n.x,b=n.y,w=n.z;return i[0]=(1-(f+g))*x,i[1]=(d+y)*x,i[2]=(p-_)*x,i[3]=0,i[4]=(d-y)*b,i[5]=(1-(h+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+_)*w,i[9]=(m-v)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=ti.set(i[0],i[1],i[2]).length();const s=ti.set(i[4],i[5],i[6]).length(),a=ti.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],ei.copy(this);const o=1/r,l=1/s,c=1/a;return ei.elements[0]*=o,ei.elements[1]*=o,ei.elements[2]*=o,ei.elements[4]*=l,ei.elements[5]*=l,ei.elements[6]*=l,ei.elements[8]*=c,ei.elements[9]*=c,ei.elements[10]*=c,e.setFromRotationMatrix(ei),n.x=r,n.y=s,n.z=a,this}makePerspective(t,e,n,i,r,s){const a=this.elements,o=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,r,s){const a=this.elements,o=1/(e-t),l=1/(n-i),c=1/(s-r),u=(e+t)*o,h=(n+i)*l,d=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const ti=new sn,ei=new Qn,ni=new sn(0,0,0),ii=new sn(1,1,1),ri=new sn,si=new sn,ai=new sn,oi=new Qn,li=new rn;class ci{constructor(t=0,e=0,n=0,i=ci.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(We(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-We(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(We(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-We(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(We(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-We(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return oi.makeRotationFromQuaternion(t),this.setFromRotationMatrix(oi,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return li.setFromEuler(this),this.setFromQuaternion(li,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ci.DEFAULT_ORDER="XYZ";class ui{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let hi=0;const di=new sn,pi=new rn,fi=new Qn,mi=new sn,gi=new sn,vi=new sn,_i=new rn,yi=new sn(1,0,0),xi=new sn(0,1,0),bi=new sn(0,0,1),wi={type:"added"},Mi={type:"removed"};class Si extends Ue{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hi++}),this.uuid=Ge(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Si.DEFAULT_UP.clone();const t=new sn,e=new ci,n=new rn,i=new sn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Qn},normalMatrix:{value:new Qe}}),this.matrix=new Qn,this.matrixWorld=new Qn,this.matrixAutoUpdate=Si.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Si.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ui,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return pi.setFromAxisAngle(t,e),this.quaternion.multiply(pi),this}rotateOnWorldAxis(t,e){return pi.setFromAxisAngle(t,e),this.quaternion.premultiply(pi),this}rotateX(t){return this.rotateOnAxis(yi,t)}rotateY(t){return this.rotateOnAxis(xi,t)}rotateZ(t){return this.rotateOnAxis(bi,t)}translateOnAxis(t,e){return di.copy(t).applyQuaternion(this.quaternion),this.position.add(di.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(yi,t)}translateY(t){return this.translateOnAxis(xi,t)}translateZ(t){return this.translateOnAxis(bi,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(fi.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?mi.copy(t):mi.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),gi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fi.lookAt(gi,mi,this.up):fi.lookAt(mi,gi,this.up),this.quaternion.setFromRotationMatrix(fi),i&&(fi.extractRotation(i.matrixWorld),pi.setFromRotationMatrix(fi),this.quaternion.premultiply(pi.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(wi)),this}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Mi)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Mi)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),fi.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),fi.multiply(t.parent.matrixWorld)),t.applyMatrix4(fi),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(t,e);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gi,t,vi),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gi,_i,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){const i=e[n];!0!==i.matrixWorldAutoUpdate&&!0!==t||i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),a=s(t.images),o=s(t.shapes),l=s(t.skeletons),c=s(t.animations),u=s(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Si.DEFAULT_UP=new sn(0,1,0),Si.DEFAULT_MATRIX_AUTO_UPDATE=!0,Si.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ti=new sn,Ai=new sn,Ei=new sn,Ci=new sn,Li=new sn,Pi=new sn,Ri=new sn,Di=new sn,Ii=new sn,Oi=new sn;class Ni{constructor(t=new sn,e=new sn,n=new sn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Ti.subVectors(t,e),i.cross(Ti);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Ti.subVectors(i,e),Ai.subVectors(n,e),Ei.subVectors(t,e);const s=Ti.dot(Ti),a=Ti.dot(Ai),o=Ti.dot(Ei),l=Ai.dot(Ai),c=Ai.dot(Ei),u=s*l-a*a;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*o-a*c)*h,p=(s*c-a*o)*h;return r.set(1-d-p,p,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Ci),Ci.x>=0&&Ci.y>=0&&Ci.x+Ci.y<=1}static getUV(t,e,n,i,r,s,a,o){return this.getBarycoord(t,e,n,i,Ci),o.set(0,0),o.addScaledVector(r,Ci.x),o.addScaledVector(s,Ci.y),o.addScaledVector(a,Ci.z),o}static isFrontFacing(t,e,n,i){return Ti.subVectors(n,e),Ai.subVectors(t,e),Ti.cross(Ai).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ti.subVectors(this.c,this.b),Ai.subVectors(this.a,this.b),.5*Ti.cross(Ai).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ni.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ni.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return Ni.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return Ni.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ni.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,a;Li.subVectors(i,n),Pi.subVectors(r,n),Di.subVectors(t,n);const o=Li.dot(Di),l=Pi.dot(Di);if(o<=0&&l<=0)return e.copy(n);Ii.subVectors(t,i);const c=Li.dot(Ii),u=Pi.dot(Ii);if(c>=0&&u<=c)return e.copy(i);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),e.copy(n).addScaledVector(Li,s);Oi.subVectors(t,r);const d=Li.dot(Oi),p=Pi.dot(Oi);if(p>=0&&d<=p)return e.copy(r);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(n).addScaledVector(Pi,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return Ri.subVectors(r,i),a=(u-c)/(u-c+(d-p)),e.copy(i).addScaledVector(Ri,a);const g=1/(m+f+h);return s=f*g,a=h*g,e.copy(n).addScaledVector(Li,s).addScaledVector(Pi,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let zi=0;class Ui extends Ue{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:zi++}),this.uuid=Ge(),this.name="",this.type="Material",this.blending=x,this.side=m,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=N,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ie,this.stencilZFail=Ie,this.stencilZPass=Ie,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n)continue;const i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),this.side!==m&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fi={h:0,s:0,l:0},Bi={h:0,s:0,l:0};function Vi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Gi{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Pe){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,mn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,i=mn.workingColorSpace){return this.r=t,this.g=e,this.b=n,mn.toWorkingColorSpace(this,i),this}setHSL(t,e,n,i=mn.workingColorSpace){if(t=He(t,1),e=We(e,0,1),n=We(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Vi(r,i,t+1/3),this.g=Vi(r,i,t),this.b=Vi(r,i,t-1/3)}return mn.toWorkingColorSpace(this,i),this}setStyle(t,e=Pe){function n(t){void 0!==t&&parseFloat(t)}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let t;const r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,mn.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,mn.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const i=parseFloat(t[1])/360,r=parseFloat(t[2])/100,s=parseFloat(t[3])/100;return n(t[4]),this.setHSL(i,r,s,e)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=i[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,mn.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,mn.toWorkingColorSpace(this,e),this}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Pe){const n=ki[t.toLowerCase()];return void 0!==n&&this.setHex(n,e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ln(t.r),this.g=ln(t.g),this.b=ln(t.b),this}copyLinearToSRGB(t){return this.r=cn(t.r),this.g=cn(t.g),this.b=cn(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Pe){return mn.fromWorkingColorSpace(Wi.copy(this),t),We(255*Wi.r,0,255)<<16^We(255*Wi.g,0,255)<<8^We(255*Wi.b,0,255)<<0}getHexString(t=Pe){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=mn.workingColorSpace){mn.fromWorkingColorSpace(Wi.copy(this),e);const n=Wi.r,i=Wi.g,r=Wi.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const t=s-a;switch(l=c<=.5?t/(s+a):t/(2-s-a),s){case n:o=(i-r)/t+(i<r?6:0);break;case i:o=(r-n)/t+2;break;case r:o=(n-i)/t+4}o/=6}return t.h=o,t.s=l,t.l=c,t}getRGB(t,e=mn.workingColorSpace){return mn.fromWorkingColorSpace(Wi.copy(this),e),t.r=Wi.r,t.g=Wi.g,t.b=Wi.b,t}getStyle(t=Pe){mn.fromWorkingColorSpace(Wi.copy(this),t);const e=Wi.r,n=Wi.g,i=Wi.b;return t!==Pe?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${255*e|0},${255*n|0},${255*i|0})`}offsetHSL(t,e,n){return this.getHSL(Fi),Fi.h+=t,Fi.s+=e,Fi.l+=n,this.setHSL(Fi.h,Fi.s,Fi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Fi),t.getHSL(Bi);const n=je(Fi.h,Bi.h,e),i=je(Fi.s,Bi.s,e),r=je(Fi.l,Bi.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wi=new Gi;Gi.NAMES=ki;class Hi extends Ui{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Gi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ji=new sn,Xi=new $e;class qi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Oe,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Xi.fromBufferAttribute(this,e),Xi.applyMatrix3(t),this.setXY(e,Xi.x,Xi.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)ji.fromBufferAttribute(this,e),ji.applyMatrix3(t),this.setXYZ(e,ji.x,ji.y,ji.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ji.fromBufferAttribute(this,e),ji.applyMatrix4(t),this.setXYZ(e,ji.x,ji.y,ji.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ji.fromBufferAttribute(this,e),ji.applyNormalMatrix(t),this.setXYZ(e,ji.x,ji.y,ji.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ji.fromBufferAttribute(this,e),ji.transformDirection(t),this.setXYZ(e,ji.x,ji.y,ji.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ze(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ke(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ze(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ke(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ze(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ke(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ze(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ke(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Ke(e,this.array),n=Ke(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Ke(e,this.array),n=Ke(n,this.array),i=Ke(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Ke(e,this.array),n=Ke(n,this.array),i=Ke(i,this.array),r=Ke(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Oe&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){}copyVector2sArray(){}copyVector3sArray(){}copyVector4sArray(){}}class Yi extends qi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Zi extends qi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Ki extends qi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Ji=0;const $i=new Qn,Qi=new Si,tr=new sn,er=new An,nr=new An,ir=new sn;class rr extends Ue{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ji++}),this.uuid=Ge(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(en(t)?Zi:Yi)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Qe).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return $i.makeRotationFromQuaternion(t),this.applyMatrix4($i),this}rotateX(t){return $i.makeRotationX(t),this.applyMatrix4($i),this}rotateY(t){return $i.makeRotationY(t),this.applyMatrix4($i),this}rotateZ(t){return $i.makeRotationZ(t),this.applyMatrix4($i),this}translate(t,e,n){return $i.makeTranslation(t,e,n),this.applyMatrix4($i),this}scale(t,e,n){return $i.makeScale(t,e,n),this.applyMatrix4($i),this}lookAt(t){return Qi.lookAt(t),Qi.updateMatrix(),this.applyMatrix4(Qi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tr).negate(),this.translate(tr.x,tr.y,tr.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Ki(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new An);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new sn(-1/0,-1/0,-1/0),new sn(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];er.setFromBufferAttribute(n),this.morphTargetsRelative?(ir.addVectors(this.boundingBox.min,er.min),this.boundingBox.expandByPoint(ir),ir.addVectors(this.boundingBox.max,er.max),this.boundingBox.expandByPoint(ir)):(this.boundingBox.expandByPoint(er.min),this.boundingBox.expandByPoint(er.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Hn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new sn,1/0);else if(t){const n=this.boundingSphere.center;if(er.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];nr.setFromBufferAttribute(n),this.morphTargetsRelative?(ir.addVectors(er.min,nr.min),er.expandByPoint(ir),ir.addVectors(er.max,nr.max),er.expandByPoint(ir)):(er.expandByPoint(nr.min),er.expandByPoint(nr.max))}er.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)ir.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(ir));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],a=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)ir.fromBufferAttribute(s,e),a&&(tr.fromBufferAttribute(t,e),ir.add(tr)),i=Math.max(i,n.distanceToSquared(ir))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return;const n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new qi(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let t=0;t<a;t++)l[t]=new sn,c[t]=new sn;const u=new sn,h=new sn,d=new sn,p=new $e,f=new $e,m=new $e,g=new sn,v=new sn;function _(t,e,n){u.fromArray(i,3*t),h.fromArray(i,3*e),d.fromArray(i,3*n),p.fromArray(s,2*t),f.fromArray(s,2*e),m.fromArray(s,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(v),c[e].add(v),c[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let t=0,e=y.length;t<e;++t){const e=y[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)_(n[t+0],n[t+1],n[t+2])}const x=new sn,b=new sn,w=new sn,M=new sn;function S(t){w.fromArray(r,3*t),M.copy(w);const e=l[t];x.copy(e),x.sub(w.multiplyScalar(w.dot(e))).normalize(),b.crossVectors(M,e);const n=b.dot(c[t])<0?-1:1;o[4*t]=x.x,o[4*t+1]=x.y,o[4*t+2]=x.z,o[4*t+3]=n}for(let t=0,e=y.length;t<e;++t){const e=y[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)S(n[t+0]),S(n[t+1]),S(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new qi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new sn,r=new sn,s=new sn,a=new sn,o=new sn,l=new sn,c=new sn,u=new sn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,f),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)ir.fromBufferAttribute(t,e),ir.normalize(),t.setXYZ(e,ir.x,ir.y,ir.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let a=0,o=0;for(let r=0,l=e.length;r<l;r++){a=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)s[o++]=n[a++]}return new qi(s,i,r)}if(null===this.index)return this;const e=new rr,n=this.index.array,i=this.attributes;for(const r in i){const s=t(i[r],n);e.setAttribute(r,s)}const r=this.morphAttributes;for(const i in r){const s=[],a=r[i];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],n);s.push(i)}e.morphAttributes[i]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,n=s.length;t<n;t++){const n=s[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],s=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];s.push(i.toJSON(t.data))}s.length>0&&(i[e]=s,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sr=new Qn,ar=new $n,or=new Hn,lr=new sn,cr=new sn,ur=new sn,hr=new sn,dr=new sn,pr=new sn,fr=new $e,mr=new $e,gr=new $e,vr=new sn,_r=new sn;class yr extends Si{constructor(t=new rr,e=new Hi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(r&&a){pr.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(dr.fromBufferAttribute(o,t),s?pr.addScaledVector(dr,i):pr.addScaledVector(dr.sub(e),i))}e.add(pr)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),or.copy(n.boundingSphere),or.applyMatrix4(r),ar.copy(t.ray).recast(t.near),!1===or.containsPoint(ar.origin)){if(null===ar.intersectSphere(or,lr))return;if(ar.origin.distanceToSquared(lr)>(t.far-t.near)**2)return}if(sr.copy(r).invert(),ar.copy(t.ray).applyMatrix4(sr),null!==n.boundingBox&&!1===ar.intersectsBox(n.boundingBox))return;let s;const a=n.index,o=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,h=n.drawRange;if(null!==a)if(Array.isArray(i))for(let n=0,r=u.length;n<r;n++){const r=u[n],o=i[r.materialIndex];for(let n=Math.max(r.start,h.start),i=Math.min(a.count,Math.min(r.start+r.count,h.start+h.count));n<i;n+=3){const i=a.getX(n),u=a.getX(n+1),h=a.getX(n+2);s=xr(this,o,t,ar,l,c,i,u,h),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=r.materialIndex,e.push(s))}}else{for(let n=Math.max(0,h.start),r=Math.min(a.count,h.start+h.count);n<r;n+=3){const r=a.getX(n),o=a.getX(n+1),u=a.getX(n+2);s=xr(this,i,t,ar,l,c,r,o,u),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,r=u.length;n<r;n++){const r=u[n],a=i[r.materialIndex];for(let n=Math.max(r.start,h.start),i=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));n<i;n+=3){s=xr(this,a,t,ar,l,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=r.materialIndex,e.push(s))}}else{for(let n=Math.max(0,h.start),r=Math.min(o.count,h.start+h.count);n<r;n+=3){s=xr(this,i,t,ar,l,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),e.push(s))}}}}function xr(t,e,n,i,r,s,a,o,l){t.getVertexPosition(a,cr),t.getVertexPosition(o,ur),t.getVertexPosition(l,hr);const c=function(t,e,n,i,r,s,a,o){let l;if(l=e.side===g?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,e.side===m,o),null===l)return null;_r.copy(o),_r.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(_r);return c<n.near||c>n.far?null:{distance:c,point:_r.clone(),object:t}}(t,e,n,i,cr,ur,hr,vr);if(c){r&&(fr.fromBufferAttribute(r,a),mr.fromBufferAttribute(r,o),gr.fromBufferAttribute(r,l),c.uv=Ni.getUV(vr,cr,ur,hr,fr,mr,gr,new $e)),s&&(fr.fromBufferAttribute(s,a),mr.fromBufferAttribute(s,o),gr.fromBufferAttribute(s,l),c.uv2=Ni.getUV(vr,cr,ur,hr,fr,mr,gr,new $e));const t={a:a,b:o,c:l,normal:new sn,materialIndex:0};Ni.getNormal(cr,ur,hr,t.normal),c.face=t}return c}class br extends rr{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let h=0,d=0;function p(t,e,n,i,r,s,p,f,m,g,v){const _=s/m,y=p/g,x=s/2,b=p/2,w=f/2,M=m+1,S=g+1;let T=0,A=0;const E=new sn;for(let s=0;s<S;s++){const a=s*y-b;for(let o=0;o<M;o++){const h=o*_-x;E[t]=h*i,E[e]=a*r,E[n]=w,l.push(E.x,E.y,E.z),E[t]=0,E[e]=0,E[n]=f>0?1:-1,c.push(E.x,E.y,E.z),u.push(o/m),u.push(1-s/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+M*t,i=h+e+M*(t+1),r=h+(e+1)+M*(t+1),s=h+(e+1)+M*t;o.push(n,i,s),o.push(i,r,s),A+=6}a.addGroup(d,A,v),d+=A,h+=T}p("z","y","x",-1,-1,n,e,t,s,r,0),p("z","y","x",1,-1,n,e,-t,s,r,1),p("x","z","y",1,1,t,n,e,i,s,2),p("x","z","y",1,-1,t,n,-e,i,s,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new Ki(l,3)),this.setAttribute("normal",new Ki(c,3)),this.setAttribute("uv",new Ki(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new br(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function wr(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Mr(t){const e={};for(let n=0;n<t.length;n++){const i=wr(t[n]);for(const t in i)e[t]=i[t]}return e}function Sr(t){return null===t.getRenderTarget()&&t.outputEncoding===Ae?Pe:Re}const Tr={clone:wr,merge:Mr};class Ar extends Ui{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=wr(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Er extends Si{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qn,this.projectionMatrix=new Qn,this.projectionMatrixInverse=new Qn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Cr extends Er{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Ve*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Be*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ve*Math.atan(Math.tan(.5*Be*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Be*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/a,i*=s.width/t,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Lr=-90;class Pr extends Si{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new Cr(Lr,1,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const r=new Cr(Lr,1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const s=new Cr(Lr,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new Cr(Lr,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const o=new Cr(Lr,1,t,e);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new Cr(Lr,1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,a,o,l]=this.children,c=t.getRenderTarget(),u=t.toneMapping,h=t.xr.enabled;t.toneMapping=$,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,o),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=u,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Rr extends bn{constructor(t,e,n,i,r,s,a,o,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:rt,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Dr extends Mn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new Rr(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:mt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new br(5,5,5),r=new Ar({name:"CubemapFromEquirect",uniforms:wr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:g,blending:y});r.uniforms.tEquirect.value=e;const s=new yr(i,r),a=e.minFilter;e.minFilter===vt&&(e.minFilter=mt);return new Pr(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}const Ir=new sn,Or=new sn,Nr=new Qe;class zr{constructor(t=new sn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Ir.subVectors(n,e).cross(Or.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Ir),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Nr.getNormalMatrix(t),i=this.coplanarPoint(Ir).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ur=new Hn,kr=new sn;class Fr{constructor(t=new zr,e=new zr,n=new zr,i=new zr,r=new zr,s=new zr){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],_=n[15];return e[0].setComponents(a-i,u-o,f-h,_-m).normalize(),e[1].setComponents(a+i,u+o,f+h,_+m).normalize(),e[2].setComponents(a+r,u+l,f+d,_+g).normalize(),e[3].setComponents(a-r,u-l,f-d,_-g).normalize(),e[4].setComponents(a-s,u-c,f-p,_-v).normalize(),e[5].setComponents(a+s,u+c,f+p,_+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ur.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ur)}intersectsSprite(t){return Ur.center.set(0,0,0),Ur.radius=.7071067811865476,Ur.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ur)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(kr.x=i.normal.x>0?t.max.x:t.min.x,kr.y=i.normal.y>0?t.max.y:t.min.y,kr.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(kr)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Br(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Vr(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);void 0===s?i.set(e,function(e,i){const r=e.array,s=e.usage,a=t.createBuffer();let o;if(t.bindBuffer(i,a),t.bufferData(i,r,s),e.onUploadCallback(),r instanceof Float32Array)o=5126;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(r instanceof Int16Array)o=5122;else if(r instanceof Uint32Array)o=5125;else if(r instanceof Int32Array)o=5124;else if(r instanceof Int8Array)o=5120;else if(r instanceof Uint8Array)o=5121;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=5121}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(!function(e,i,r){const s=i.array,a=i.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,s):(n?t.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):t.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,e,r),s.version=e.version)}}}class Gr extends rr{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,u=t/a,h=e/o,d=[],p=[],f=[],m=[];for(let t=0;t<c;t++){const e=t*h-s;for(let n=0;n<l;n++){const i=n*u-r;p.push(i,-e,0),f.push(0,0,1),m.push(n/a),m.push(1-t/o)}}for(let t=0;t<o;t++)for(let e=0;e<a;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),s=e+1+l*t;d.push(n,i,s),d.push(i,r,s)}this.setIndex(d),this.setAttribute("position",new Ki(p,3)),this.setAttribute("normal",new Ki(f,3)),this.setAttribute("uv",new Ki(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Gr(t.width,t.height,t.widthSegments,t.heightSegments)}}const Wr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Hr={common:{diffuse:{value:new Gi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qe},uv2Transform:{value:new Qe},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new $e(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qe}},sprite:{diffuse:{value:new Gi(16777215)},opacity:{value:1},center:{value:new $e(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qe}}},jr={basic:{uniforms:Mr([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.fog]),vertexShader:Wr.meshbasic_vert,fragmentShader:Wr.meshbasic_frag},lambert:{uniforms:Mr([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,Hr.lights,{emissive:{value:new Gi(0)}}]),vertexShader:Wr.meshlambert_vert,fragmentShader:Wr.meshlambert_frag},phong:{uniforms:Mr([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,Hr.lights,{emissive:{value:new Gi(0)},specular:{value:new Gi(1118481)},shininess:{value:30}}]),vertexShader:Wr.meshphong_vert,fragmentShader:Wr.meshphong_frag},standard:{uniforms:Mr([Hr.common,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.roughnessmap,Hr.metalnessmap,Hr.fog,Hr.lights,{emissive:{value:new Gi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wr.meshphysical_vert,fragmentShader:Wr.meshphysical_frag},toon:{uniforms:Mr([Hr.common,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.gradientmap,Hr.fog,Hr.lights,{emissive:{value:new Gi(0)}}]),vertexShader:Wr.meshtoon_vert,fragmentShader:Wr.meshtoon_frag},matcap:{uniforms:Mr([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,{matcap:{value:null}}]),vertexShader:Wr.meshmatcap_vert,fragmentShader:Wr.meshmatcap_frag},points:{uniforms:Mr([Hr.points,Hr.fog]),vertexShader:Wr.points_vert,fragmentShader:Wr.points_frag},dashed:{uniforms:Mr([Hr.common,Hr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wr.linedashed_vert,fragmentShader:Wr.linedashed_frag},depth:{uniforms:Mr([Hr.common,Hr.displacementmap]),vertexShader:Wr.depth_vert,fragmentShader:Wr.depth_frag},normal:{uniforms:Mr([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,{opacity:{value:1}}]),vertexShader:Wr.meshnormal_vert,fragmentShader:Wr.meshnormal_frag},sprite:{uniforms:Mr([Hr.sprite,Hr.fog]),vertexShader:Wr.sprite_vert,fragmentShader:Wr.sprite_frag},background:{uniforms:{uvTransform:{value:new Qe},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wr.background_vert,fragmentShader:Wr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Wr.backgroundCube_vert,fragmentShader:Wr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wr.cube_vert,fragmentShader:Wr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wr.equirect_vert,fragmentShader:Wr.equirect_frag},distanceRGBA:{uniforms:Mr([Hr.common,Hr.displacementmap,{referencePosition:{value:new sn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wr.distanceRGBA_vert,fragmentShader:Wr.distanceRGBA_frag},shadow:{uniforms:Mr([Hr.lights,Hr.fog,{color:{value:new Gi(0)},opacity:{value:1}}]),vertexShader:Wr.shadow_vert,fragmentShader:Wr.shadow_frag}};jr.physical={uniforms:Mr([jr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new $e(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Gi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new $e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Gi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Gi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wr.meshphysical_vert,fragmentShader:Wr.meshphysical_frag};const Xr={r:0,b:0,g:0};function qr(t,e,n,i,r,s,a){const o=new Gi(0);let l,c,u=!0===s?0:1,h=null,d=0,p=null;function f(e,n){e.getRGB(Xr,Sr(t)),i.buffers.color.setClear(Xr.r,Xr.g,Xr.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),u=e,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,f(o,u)},render:function(i,s){let a=!1,v=!0===s.isScene?s.background:null;if(v&&v.isTexture){v=(s.backgroundBlurriness>0?n:e).get(v)}const _=t.xr,y=_.getSession&&_.getSession();y&&"additive"===y.environmentBlendMode&&(v=null),null===v?f(o,u):v&&v.isColor&&(f(v,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.mapping===lt)?(void 0===c&&(c=new yr(new br(1,1,1),new Ar({name:"BackgroundCubeMaterial",uniforms:wr(jr.backgroundCube.uniforms),vertexShader:jr.backgroundCube.vertexShader,fragmentShader:jr.backgroundCube.fragmentShader,side:g,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,c.material.toneMapped=v.encoding!==Ae,h===v&&d===v.version&&p===t.toneMapping||(c.material.needsUpdate=!0,h=v,d=v.version,p=t.toneMapping),c.layers.enableAll(),i.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new yr(new Gr(2,2),new Ar({name:"BackgroundMaterial",uniforms:wr(jr.background.uniforms),vertexShader:jr.background.vertexShader,fragmentShader:jr.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,l.material.toneMapped=v.encoding!==Ae,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&p===t.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,p=t.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null))}}}function Yr(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=p(null);let c=l,u=!1;function h(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function d(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function p(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function f(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){g(t,0)}function g(n,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),o[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function _(e,n,r,s,a,o){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,s,a,o):t.vertexAttribIPointer(e,n,r,a,o)}function y(){x(),u=!0,c!==l&&(c=l,h(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,y,x){let b=!1;if(a){const e=function(e,n,r){const a=!0===r.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=p(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),c[a]=u);return u}(y,d,l);c!==e&&(c=e,h(c.object)),b=function(t,e,n,i){const r=c.attributes,s=e.attributes;let a=0;const o=n.getAttributes();for(const e in o){if(o[e].location>=0){const n=r[e];let i=s[e];if(void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(r,y,d,x),b&&function(t,e,n,i){const r={},s=e.attributes;let a=0;const o=n.getAttributes();for(const e in o){if(o[e].location>=0){let n=s[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[e]=i,a++}}c.attributes=r,c.attributesNum=a,c.index=i}(r,y,d,x)}else{const t=!0===l.wireframe;c.geometry===y.id&&c.program===d.id&&c.wireframe===t||(c.geometry=y.id,c.program=d.id,c.wireframe=t,b=!0)}null!==x&&n.update(x,34963),(b||u)&&(u=!1,function(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const e in c){const i=c[e];if(i.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const e=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)g(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)m(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)_(i.location+t,a/i.locationSize,u,e,l*h,(d+a/i.locationSize*t)*h)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)g(i.location+t,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<i.locationSize;t++)m(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)_(i.location+t,a/i.locationSize,u,e,a*h,a/i.locationSize*t*h)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}v()}(r,l,d,y),null!==x&&t.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const t in o){const e=o[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const n=o[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)d(i[t].object),delete i[t];delete n[t.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function Zr(t,e,n,i){const r=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),n.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return;l[c](s,i,a,o),n.update(a,s,o)}}function Kr(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;let a=void 0!==n.precision?n.precision:"highp";const o=r(a);o!==a&&(a=o);const l=s||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),_=h>0,y=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:_,floatFragmentTextures:y,floatVertexTextures:_&&y,maxSamples:s?t.getParameter(36183):0}}function Jr(t){const e=this;let n=null,i=0,r=!1,s=!1;const a=new zr,o=new Qe,l={value:null,needsUpdate:!1};function c(t,n,i,r){const s=null!==t?t.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const e=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,n=i;e!==s;++e,n+=4)a.copy(t[e]).applyMatrix4(r,o),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(t,e){n=c(t,e,0)},this.setState=function(a,o,u){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=t.get(a);if(!r||null===h||0===h.length||s&&!p)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);e.numPlanes=i,e.numIntersection=0}();else{const t=s?0:i,e=4*t;let r=f.clippingState||null;l.value=r,r=c(h,o,e,u);for(let t=0;t!==e;++t)r[t]=n[t];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function $r(t){let e=new WeakMap;function n(t,e){return e===at?t.mapping=rt:e===ot&&(t.mapping=st),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===at||s===ot){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new Dr(s.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}class Qr extends Er{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,a=i+e,o=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const ts=4,es=[.125,.215,.35,.446,.526,.582],ns=20,is=new Qr,rs=new Gi;let ss=null;const as=(1+Math.sqrt(5))/2,os=1/as,ls=[new sn(1,1,1),new sn(-1,1,1),new sn(1,1,-1),new sn(-1,1,-1),new sn(0,as,os),new sn(0,as,-os),new sn(os,0,as),new sn(-os,0,as),new sn(as,os,0),new sn(-as,os,0)];class cs{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){ss=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ps(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ds(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(ss),t.scissorTest=!1,hs(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===rt||t.mapping===st?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),ss=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:mt,minFilter:mt,generateMipmaps:!1,type:Tt,format:Pt,encoding:Te,depthBuffer:!1},i=us(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=us(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const s=t-ts+1+es.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>t-ts?o=es[a-t+ts-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),_=new Float32Array(m*p*d),y=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(i,f*p*t),_.set(h,m*p*t);const r=[t,t,t,t,t,t];y.set(r,g*p*t)}const x=new rr;x.setAttribute("position",new qi(v,f)),x.setAttribute("uv",new qi(_,m)),x.setAttribute("faceIndex",new qi(y,g)),e.push(x),r>ts&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(ns),r=new sn(0,1,0),s=new Ar({name:"SphericalGaussianBlur",defines:{n:ns,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:fs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1});return s}(i,t,e)}return i}_compileMaterial(t){const e=new yr(this._lodPlanes[0],t);this._renderer.compile(e,is)}_sceneToCubeUV(t,e,n,i){const r=new Cr(90,1,e,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(rs),o.toneMapping=$,o.autoClear=!1;const u=new Hi({name:"PMREM.Background",side:g,depthWrite:!1,depthTest:!1}),h=new yr(new br,u);let d=!1;const p=t.background;p?p.isColor&&(u.color.copy(p),t.background=null,d=!0):(u.color.copy(rs),d=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(r.up.set(0,s[e],0),r.lookAt(a[e],0,0)):1===n?(r.up.set(0,0,s[e]),r.lookAt(0,a[e],0)):(r.up.set(0,s[e],0),r.lookAt(0,0,a[e]));const l=this._cubeSize;hs(i,n*l,e>2?l:0,l,l),o.setRenderTarget(i),d&&o.render(h,r),o.render(t,r)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===rt||t.mapping===st;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=ps()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ds());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new yr(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const a=this._cubeSize;hs(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(s,is)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),i=ls[(e-1)%ls.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial,c=new yr(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/(2*ns-1),p=r/d,f=isFinite(r)?1+Math.floor(3*p):ns,m=[];let g=0;for(let t=0;t<ns;++t){const e=t/p,n=Math.exp(-e*e/2);m.push(n),0===t?g+=n:t<f&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const _=this._sizeLods[i];hs(e,3*_*(i>v-ts?i-v+ts:0),4*(this._cubeSize-_),3*_,2*_),o.setRenderTarget(e),o.render(c,is)}}function us(t,e,n){const i=new Mn(t,e,n);return i.texture.mapping=lt,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function hs(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function ds(){return new Ar({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:fs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}function ps(){return new Ar({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:fs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:y,depthTest:!1,depthWrite:!1})}function fs(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function ms(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===at||s===ot,o=s===rt||s===st;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new cs(t)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(s)){null===n&&(n=new cs(t));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function gs(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return e}}}function vs(t,e,n,i){const r={},s=new WeakMap;function a(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const t in o.attributes)e.remove(o.attributes[t]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(e.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const o=new(en(n)?Zi:Yi)(n,1);o.version=a;const l=s.get(t);l&&e.remove(l),s.set(t,o)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&o(t)}else o(t);return s.get(t)}}}function _s(t,e,n,i){const r=i.isWebGL2;let s,a,o;this.setMode=function(t){s=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,a,e*o),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return;u[h](s,l,a,i*o,c),n.update(l,s,c)}}function ys(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t}}}}function xs(t,e){return t[0]-e[0]}function bs(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ws(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new wn,o=[];for(let t=0;t<8;t++)o[t]=[t,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0;let f=s.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,_=void 0!==c.morphAttributes.normal,y=void 0!==c.morphAttributes.color,x=c.morphAttributes.position||[],b=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let M=0;!0===v&&(M=1),!0===_&&(M=2),!0===y&&(M=3);let S=c.attributes.position.count*M,T=1;S>e.maxTextureSize&&(T=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const A=new Float32Array(S*T*4*p),E=new Sn(A,S,T,p);E.type=St,E.needsUpdate=!0;const C=4*M;for(let P=0;P<p;P++){const R=x[P],D=b[P],I=w[P],O=S*T*4*P;for(let N=0;N<R.count;N++){const z=N*C;!0===v&&(a.fromBufferAttribute(R,N),A[O+z+0]=a.x,A[O+z+1]=a.y,A[O+z+2]=a.z,A[O+z+3]=0),!0===_&&(a.fromBufferAttribute(D,N),A[O+z+4]=a.x,A[O+z+5]=a.y,A[O+z+6]=a.z,A[O+z+7]=0),!0===y&&(a.fromBufferAttribute(I,N),A[O+z+8]=a.x,A[O+z+9]=a.y,A[O+z+10]=a.z,A[O+z+11]=4===I.itemSize?a.w:1)}}function L(){E.dispose(),s.delete(c),c.removeEventListener("dispose",L)}f={count:p,texture:E,size:new $e(S,T)},s.set(c,f),c.addEventListener("dispose",L)}let m=0;for(let U=0;U<h.length;U++)m+=h[U];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(t,"morphTargetBaseInfluence",g),u.getUniforms().setValue(t,"morphTargetInfluences",h),u.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}else{const k=void 0===h?0:h.length;let F=i[c.id];if(void 0===F||F.length!==k){F=[];for(let H=0;H<k;H++)F[H]=[H,0];i[c.id]=F}for(let j=0;j<k;j++){const X=F[j];X[0]=j,X[1]=h[j]}F.sort(bs);for(let q=0;q<8;q++)q<k&&F[q][1]?(o[q][0]=F[q][0],o[q][1]=F[q][1]):(o[q][0]=Number.MAX_SAFE_INTEGER,o[q][1]=0);o.sort(xs);const B=c.morphAttributes.position,V=c.morphAttributes.normal;let G=0;for(let Y=0;Y<8;Y++){const Z=o[Y],K=Z[0],J=Z[1];K!==Number.MAX_SAFE_INTEGER&&J?(B&&c.getAttribute("morphTarget"+Y)!==B[K]&&c.setAttribute("morphTarget"+Y,B[K]),V&&c.getAttribute("morphNormal"+Y)!==V[K]&&c.setAttribute("morphNormal"+Y,V[K]),r[Y]=J,G+=J):(B&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),V&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),r[Y]=0)}const W=c.morphTargetsRelative?1:1-G;u.getUniforms().setValue(t,"morphTargetBaseInfluence",W),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function Ms(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const a=i.render.frame,o=t.geometry,l=e.get(t,o);return r.get(l)!==a&&(e.update(l),r.set(l,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}const Ss=new bn,Ts=new Sn,As=new Tn,Es=new Rr,Cs=[],Ls=[],Ps=new Float32Array(16),Rs=new Float32Array(9),Ds=new Float32Array(4);function Is(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=Cs[r];if(void 0===s&&(s=new Float32Array(r),Cs[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function Os(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ns(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function zs(t,e){let n=Ls[e];void 0===n&&(n=new Int32Array(e),Ls[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Us(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ks(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Os(n,e))return;t.uniform2fv(this.addr,e),Ns(n,e)}}function Fs(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Os(n,e))return;t.uniform3fv(this.addr,e),Ns(n,e)}}function Bs(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Os(n,e))return;t.uniform4fv(this.addr,e),Ns(n,e)}}function Vs(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Os(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ns(n,e)}else{if(Os(n,i))return;Ds.set(i),t.uniformMatrix2fv(this.addr,!1,Ds),Ns(n,i)}}function Gs(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Os(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ns(n,e)}else{if(Os(n,i))return;Rs.set(i),t.uniformMatrix3fv(this.addr,!1,Rs),Ns(n,i)}}function Ws(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Os(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ns(n,e)}else{if(Os(n,i))return;Ps.set(i),t.uniformMatrix4fv(this.addr,!1,Ps),Ns(n,i)}}function Hs(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function js(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Os(n,e))return;t.uniform2iv(this.addr,e),Ns(n,e)}}function Xs(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Os(n,e))return;t.uniform3iv(this.addr,e),Ns(n,e)}}function qs(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Os(n,e))return;t.uniform4iv(this.addr,e),Ns(n,e)}}function Ys(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Zs(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Os(n,e))return;t.uniform2uiv(this.addr,e),Ns(n,e)}}function Ks(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Os(n,e))return;t.uniform3uiv(this.addr,e),Ns(n,e)}}function Js(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Os(n,e))return;t.uniform4uiv(this.addr,e),Ns(n,e)}}function $s(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Ss,r)}function Qs(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||As,r)}function ta(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Es,r)}function ea(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Ts,r)}function na(t,e){t.uniform1fv(this.addr,e)}function ia(t,e){const n=Is(e,this.size,2);t.uniform2fv(this.addr,n)}function ra(t,e){const n=Is(e,this.size,3);t.uniform3fv(this.addr,n)}function sa(t,e){const n=Is(e,this.size,4);t.uniform4fv(this.addr,n)}function aa(t,e){const n=Is(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function oa(t,e){const n=Is(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function la(t,e){const n=Is(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ca(t,e){t.uniform1iv(this.addr,e)}function ua(t,e){t.uniform2iv(this.addr,e)}function ha(t,e){t.uniform3iv(this.addr,e)}function da(t,e){t.uniform4iv(this.addr,e)}function pa(t,e){t.uniform1uiv(this.addr,e)}function fa(t,e){t.uniform2uiv(this.addr,e)}function ma(t,e){t.uniform3uiv(this.addr,e)}function ga(t,e){t.uniform4uiv(this.addr,e)}function va(t,e,n){const i=this.cache,r=e.length,s=zs(n,r);Os(i,s)||(t.uniform1iv(this.addr,s),Ns(i,s));for(let t=0;t!==r;++t)n.setTexture2D(e[t]||Ss,s[t])}function _a(t,e,n){const i=this.cache,r=e.length,s=zs(n,r);Os(i,s)||(t.uniform1iv(this.addr,s),Ns(i,s));for(let t=0;t!==r;++t)n.setTexture3D(e[t]||As,s[t])}function ya(t,e,n){const i=this.cache,r=e.length,s=zs(n,r);Os(i,s)||(t.uniform1iv(this.addr,s),Ns(i,s));for(let t=0;t!==r;++t)n.setTextureCube(e[t]||Es,s[t])}function xa(t,e,n){const i=this.cache,r=e.length,s=zs(n,r);Os(i,s)||(t.uniform1iv(this.addr,s),Ns(i,s));for(let t=0;t!==r;++t)n.setTexture2DArray(e[t]||Ts,s[t])}class ba{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Us;case 35664:return ks;case 35665:return Fs;case 35666:return Bs;case 35674:return Vs;case 35675:return Gs;case 35676:return Ws;case 5124:case 35670:return Hs;case 35667:case 35671:return js;case 35668:case 35672:return Xs;case 35669:case 35673:return qs;case 5125:return Ys;case 36294:return Zs;case 36295:return Ks;case 36296:return Js;case 35678:case 36198:case 36298:case 36306:case 35682:return $s;case 35679:case 36299:case 36307:return Qs;case 35680:case 36300:case 36308:case 36293:return ta;case 36289:case 36303:case 36311:case 36292:return ea}}(e.type)}}class wa{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return na;case 35664:return ia;case 35665:return ra;case 35666:return sa;case 35674:return aa;case 35675:return oa;case 35676:return la;case 5124:case 35670:return ca;case 35667:case 35671:return ua;case 35668:case 35672:return ha;case 35669:case 35673:return da;case 5125:return pa;case 36294:return fa;case 36295:return ma;case 36296:return ga;case 35678:case 36198:case 36298:case 36306:case 35682:return va;case 35679:case 36299:case 36307:return _a;case 35680:case 36300:case 36308:case 36293:return ya;case 36289:case 36303:case 36311:case 36292:return xa}}(e.type)}}class Ma{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}}}const Sa=/(\w+)(\])?(\[|\.)?/g;function Ta(t,e){t.seq.push(e),t.map[e.id]=e}function Aa(t,e,n){const i=t.name,r=i.length;for(Sa.lastIndex=0;;){const s=Sa.exec(i),a=Sa.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){Ta(n,void 0===c?new ba(o,t,e):new wa(o,t,e));break}{let t=n.map[o];void 0===t&&(t=new Ma(o),Ta(n,t)),n=t}}}class Ea{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);Aa(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function Ca(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let La=0;function Pa(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let t=r;t<s;t++){const r=t+1;i.push(`${r===e?">":" "} ${r}: ${n[t]}`)}return i.join("\n")}(t.getShaderSource(e),i)}return r}function Ra(t,e){const n=function(t){switch(t){case Te:return["Linear","( value )"];case Ae:return["sRGB","( value )"];default:return["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Da(t,e){let n;switch(e){case Q:n="Linear";break;case tt:n="Reinhard";break;case et:n="OptimizedCineon";break;case nt:n="ACESFilmic";break;case it:n="Custom";break;default:n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ia(t){return""!==t}function Oa(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Na(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const za=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ua(t){return t.replace(za,ka)}function ka(t,e){const n=Wr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ua(n)}const Fa=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ba(t){return t.replace(Fa,Va)}function Va(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function Ga(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Wa(t,e,n,i){const r=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===p?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===f&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case rt:case st:e="ENVMAP_TYPE_CUBE";break;case lt:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===st&&(e="ENVMAP_MODE_REFRACTION");return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Z:e="ENVMAP_BLENDING_MULTIPLY";break;case K:e="ENVMAP_BLENDING_MIX";break;case J:e="ENVMAP_BLENDING_ADD"}return e}(n),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ia).join("\n")}(n),v=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),_=r.createProgram();let y,x,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(y=[v].filter(Ia).join("\n"),y.length>0&&(y+="\n"),x=[g,v].filter(Ia).join("\n"),x.length>0&&(x+="\n")):(y=[Ga(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ia).join("\n"),x=[g,Ga(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==$?"#define TONE_MAPPING":"",n.toneMapping!==$?Wr.tonemapping_pars_fragment:"",n.toneMapping!==$?Da("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Wr.encodings_pars_fragment,Ra("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ia).join("\n")),a=Ua(a),a=Oa(a,n),a=Na(a,n),o=Ua(o),o=Oa(o,n),o=Na(o,n),a=Ba(a),o=Ba(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,x=["#define varying in",n.glslVersion===Ne?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ne?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const w=b+x+o,M=Ca(r,35633,b+y+a),S=Ca(r,35632,w);if(r.attachShader(_,M),r.attachShader(_,S),void 0!==n.index0AttributeName?r.bindAttribLocation(_,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(_).trim(),e=r.getShaderInfoLog(M).trim(),n=r.getShaderInfoLog(S).trim();let i=!0,s=!0;if(!1===r.getProgramParameter(_,35714)){i=!1;Pa(r,M,"vertex"),Pa(r,S,"fragment")}else""!==t||""!==e&&""!==n||(s=!1);s&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:y},fragmentShader:{log:n,prefix:x}})}let T,A;return r.deleteShader(M),r.deleteShader(S),this.getUniforms=function(){return void 0===T&&(T=new Ea(r,_)),T},this.getAttributes=function(){return void 0===A&&(A=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}(r,_)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=La++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=S,this}let Ha=0;class ja{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Xa(t),e.set(t,n)),n}}class Xa{constructor(t){this.id=Ha++,this.code=t,this.usedTimes=0}}function qa(t,e,n,i,r,s,a){const o=new ui,l=new ja,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,o,c,m,_){const y=m.fog,b=_.geometry,w=s.isMeshStandardMaterial?m.environment:null,M=(s.isMeshStandardMaterial?n:e).get(s.envMap||w),S=M&&M.mapping===lt?M.image.height:null,T=f[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),s.precision);const A=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,E=void 0!==A?A.length:0;let C,L,P,R,D=0;if(void 0!==b.morphAttributes.position&&(D=1),void 0!==b.morphAttributes.normal&&(D=2),void 0!==b.morphAttributes.color&&(D=3),T){const t=jr[T];C=t.vertexShader,L=t.fragmentShader}else C=s.vertexShader,L=s.fragmentShader,l.update(s),P=l.getVertexShaderID(s),R=l.getFragmentShaderID(s);const I=t.getRenderTarget(),O=s.alphaTest>0,N=s.clearcoat>0,z=s.iridescence>0;return{isWebGL2:u,shaderID:T,shaderName:s.type,vertexShader:C,fragmentShader:L,defines:s.defines,customVertexShaderID:P,customFragmentShaderID:R,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:d,outputEncoding:null===I?t.outputEncoding:!0===I.isXRRenderTarget?I.texture.encoding:Te,map:!!s.map,matcap:!!s.matcap,envMap:!!M,envMapMode:M&&M.mapping,envMapCubeUVHeight:S,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===Le,tangentSpaceNormalMap:s.normalMapType===Ce,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===Ae,clearcoat:N,clearcoatMap:N&&!!s.clearcoatMap,clearcoatRoughnessMap:N&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!s.clearcoatNormalMap,iridescence:z,iridescenceMap:z&&!!s.iridescenceMap,iridescenceThicknessMap:z&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===x,alphaMap:!!s.alphaMap,alphaTest:O,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!b.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!y,useFog:!0===s.fog,fogExp2:y&&y.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:E,morphTextureStride:D,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:$,useLegacyLights:t.useLegacyLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===v,flipSided:s.side===g,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0);e.supportsVertexTextures&&o.enable(1);e.instancing&&o.enable(2);e.instancingColor&&o.enable(3);e.map&&o.enable(4);e.matcap&&o.enable(5);e.envMap&&o.enable(6);e.lightMap&&o.enable(7);e.aoMap&&o.enable(8);e.emissiveMap&&o.enable(9);e.bumpMap&&o.enable(10);e.normalMap&&o.enable(11);e.objectSpaceNormalMap&&o.enable(12);e.tangentSpaceNormalMap&&o.enable(13);e.clearcoat&&o.enable(14);e.clearcoatMap&&o.enable(15);e.clearcoatRoughnessMap&&o.enable(16);e.clearcoatNormalMap&&o.enable(17);e.iridescence&&o.enable(18);e.iridescenceMap&&o.enable(19);e.iridescenceThicknessMap&&o.enable(20);e.displacementMap&&o.enable(21);e.specularMap&&o.enable(22);e.roughnessMap&&o.enable(23);e.metalnessMap&&o.enable(24);e.gradientMap&&o.enable(25);e.alphaMap&&o.enable(26);e.alphaTest&&o.enable(27);e.vertexColors&&o.enable(28);e.vertexAlphas&&o.enable(29);e.vertexUvs&&o.enable(30);e.vertexTangents&&o.enable(31);e.uvsVertexOnly&&o.enable(32);t.push(o.mask),o.disableAll(),e.fog&&o.enable(0);e.useFog&&o.enable(1);e.flatShading&&o.enable(2);e.logarithmicDepthBuffer&&o.enable(3);e.skinning&&o.enable(4);e.morphTargets&&o.enable(5);e.morphNormals&&o.enable(6);e.morphColors&&o.enable(7);e.premultipliedAlpha&&o.enable(8);e.shadowMapEnabled&&o.enable(9);e.useLegacyLights&&o.enable(10);e.doubleSided&&o.enable(11);e.flipSided&&o.enable(12);e.useDepthPacking&&o.enable(13);e.dithering&&o.enable(14);e.specularIntensityMap&&o.enable(15);e.specularColorMap&&o.enable(16);e.transmission&&o.enable(17);e.transmissionMap&&o.enable(18);e.thicknessMap&&o.enable(19);e.sheen&&o.enable(20);e.sheenColorMap&&o.enable(21);e.sheenRoughnessMap&&o.enable(22);e.decodeVideoTexture&&o.enable(23);e.opaque&&o.enable(24);t.push(o.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;if(e){const t=jr[e];n=Tr.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=c.length;t<e;t++){const e=c[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Wa(t,n,e,s),c.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function Ya(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Za(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ka(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ja(){const t=[];let e=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,a,o,l,c){const u=s(t,e,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(t,e,a,o,l,c){const u=s(t,e,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Za),i.length>1&&i.sort(e||Ka),r.length>1&&r.sort(e||Ka)}}}function $a(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new Ja,t.set(e,[r])):n>=i.length?(r=new Ja,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function Qa(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new sn,color:new Gi};break;case"SpotLight":n={position:new sn,direction:new sn,color:new Gi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new sn,color:new Gi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new sn,skyColor:new Gi,groundColor:new Gi};break;case"RectAreaLight":n={color:new Gi,position:new sn,halfWidth:new sn,halfHeight:new sn}}return t[e.id]=n,n}}}let to=0;function eo(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function no(t,e){const n=new Qa,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)r.probe.push(new sn);const s=new sn,a=new Qn,o=new Qn;return{setup:function(s,a){let o=0,l=0,c=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,_=0,y=0;s.sort(eo);const x=!0===a?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],a=e.color,b=e.intensity,w=e.distance,M=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=a.r*b*x,l+=a.g*b*x,c+=a.b*b*x;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=M,r.directionalShadowMatrix[u]=e.shadow.matrix,m++}r.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(b*x),t.distance=w,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[d]=t;const s=e.shadow;if(e.map&&(r.spotLightMap[_]=e.map,_++,s.updateMatrices(e),e.castShadow&&y++),r.spotLightMatrix[d]=s.matrix,e.castShadow){const t=i.get(e);t.shadowBias=s.bias,t.shadowNormalBias=s.normalBias,t.shadowRadius=s.radius,t.shadowMapSize=s.mapSize,r.spotShadow[d]=t,r.spotShadowMap[d]=M,v++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*x),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=M,r.pointShadowMatrix[h]=e.shadow.matrix,g++}r.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*x),t.groundColor.copy(e.groundColor).multiplyScalar(b*x),r.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=Hr.LTC_FLOAT_1,r.rectAreaLTC2=Hr.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")&&(r.rectAreaLTC1=Hr.LTC_HALF_1,r.rectAreaLTC2=Hr.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const b=r.hash;b.directionalLength===u&&b.pointLength===h&&b.spotLength===d&&b.rectAreaLength===p&&b.hemiLength===f&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v&&b.numSpotMaps===_||(r.directional.length=u,r.spot.length=d,r.rectArea.length=p,r.point.length=h,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+_-y,r.spotLightMap.length=_,r.numSpotLightShadowsWithMaps=y,b.directionalLength=u,b.pointLength=h,b.spotLength=d,b.rectAreaLength=p,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,b.numSpotMaps=_,r.version=to++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(h),n++}else if(d.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),o.identity(),a.copy(d.matrixWorld),a.premultiply(h),o.extractRotation(a),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(h),i++}else if(d.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(h),u++}}},state:r}}function io(t,e){const n=new no(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function ro(t,e){let n=new WeakMap;return{get:function(i,r=0){const s=n.get(i);let a;return void 0===s?(a=new io(t,e),n.set(i,[a])):r>=s.length?(a=new io(t,e),s.push(a)):a=s[r],a},dispose:function(){n=new WeakMap}}}class so extends Ui{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ao extends Ui{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new sn,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const oo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",lo="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function co(t,e,n){let i=new Fr;const r=new $e,s=new $e,a=new wn,o=new so({depthPacking:Ee}),l=new ao,c={},u=n.maxTextureSize,h={[m]:g,[g]:m,[v]:v},p=new Ar({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $e},radius:{value:4}},vertexShader:oo,fragmentShader:lo}),_=p.clone();_.defines.HORIZONTAL_PASS=1;const x=new rr;x.setAttribute("position",new qi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new yr(x,p),w=this;function M(n,i){const s=e.update(b);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,_.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Mn(r.x,r.y)),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,s,p,b,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,s,_,b,null)}function S(e,n,i,r,s,a){let u=null;const d=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==d)u=d;else if(u=!0===i.isPointLight?l:o,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=u.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=u.clone(),i[e]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===f?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=r,u.farDistance=s),u}function T(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===f)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=r[c.materialIndex];if(u&&u.visible){const e=S(n,u,a,s.near,s.far,o);t.renderBufferDirect(s,null,i,e,n,c)}}}else if(r.visible){const e=S(n,r,a,s.near,s.far,o);t.renderBufferDirect(s,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)T(l[t],r,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d,this.render=function(e,n,o){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(y),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=e.length;l<c;l++){const c=e[l],h=c.shadow;if(void 0===h)continue;if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const p=h.getFrameExtents();if(r.multiply(p),s.copy(h.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/p.x),r.x=s.x*p.x,h.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/p.y),r.y=s.y*p.y,h.mapSize.y=s.y)),null===h.map){const t=this.type!==f?{minFilter:dt,magFilter:dt}:{};h.map=new Mn(r.x,r.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const m=h.getViewportCount();for(let t=0;t<m;t++){const e=h.getViewport(t);a.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),d.viewport(a),h.updateMatrices(c,t),i=h.getFrustum(),T(n,o,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===f&&M(h,o),h.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function uo(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new wn;let i=null;const r=new wn(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,a,o){!0===o&&(e*=a,i*=a,s*=a),n.set(e,i,s,a),!1===r.equals(n)&&(t.clearColor(e,i,s,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?bt(2929):wt(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){switch(e){case V:t.depthFunc(512);break;case G:t.depthFunc(519);break;case W:t.depthFunc(513);break;case H:t.depthFunc(515);break;case j:t.depthFunc(514);break;case X:t.depthFunc(518);break;case q:t.depthFunc(516);break;case Y:t.depthFunc(517);break;default:t.depthFunc(515)}i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},a=new function(){let e=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(t){e||(t?bt(2960):wt(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&s===a||(t.stencilFunc(e,n,a),i=e,r=n,s=a)},setOp:function(e,n,i){a===e&&o===n&&l===i||(t.stencilOp(e,n,i),a=e,o=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let d={},p={},f=new WeakMap,m=[],_=null,Z=!1,K=null,J=null,$=null,Q=null,tt=null,et=null,nt=null,it=!1,rt=null,st=null,at=null,ot=null,lt=null;const ct=t.getParameter(35661);let ut=!1,ht=0;const dt=t.getParameter(7938);-1!==dt.indexOf("WebGL")?(ht=parseFloat(/^WebGL (\d)/.exec(dt)[1]),ut=ht>=1):-1!==dt.indexOf("OpenGL ES")&&(ht=parseFloat(/^OpenGL ES (\d)/.exec(dt)[1]),ut=ht>=2);let pt=null,ft={};const mt=t.getParameter(3088),gt=t.getParameter(2978),vt=(new wn).fromArray(mt),_t=(new wn).fromArray(gt);function yt(e,n,i){const r=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return s}const xt={};function bt(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function wt(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}xt[3553]=yt(3553,3553,1),xt[34067]=yt(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),bt(2929),s.setFunc(H),At(!1),Et(u),bt(2884),Tt(y);const Mt={[T]:32774,[A]:32778,[E]:32779};if(i)Mt[C]=32775,Mt[L]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(Mt[C]=t.MIN_EXT,Mt[L]=t.MAX_EXT)}const St={[P]:0,[R]:1,[D]:768,[O]:770,[B]:776,[k]:774,[z]:772,[I]:769,[N]:771,[F]:775,[U]:773};function Tt(e,n,i,r,s,a,o,l){if(e!==y){if(!1===Z&&(bt(3042),Z=!0),e===S)s=s||n,a=a||i,o=o||r,n===J&&s===tt||(t.blendEquationSeparate(Mt[n],Mt[s]),J=n,tt=s),i===$&&r===Q&&a===et&&o===nt||(t.blendFuncSeparate(St[i],St[r],St[a],St[o]),$=i,Q=r,et=a,nt=o),K=e,it=!1;else if(e!==K||l!==it){if(J===T&&tt===T||(t.blendEquation(32774),J=T,tt=T),l)switch(e){case x:t.blendFuncSeparate(1,771,1,771);break;case b:t.blendFunc(1,1);break;case w:t.blendFuncSeparate(0,769,0,1);break;case M:t.blendFuncSeparate(0,768,0,770)}else switch(e){case x:t.blendFuncSeparate(770,771,1,771);break;case b:t.blendFunc(770,1);break;case w:t.blendFuncSeparate(0,769,0,1);break;case M:t.blendFunc(0,768)}$=null,Q=null,et=null,nt=null,K=e,it=l}}else!0===Z&&(wt(3042),Z=!1)}function At(e){rt!==e&&(e?t.frontFace(2304):t.frontFace(2305),rt=e)}function Et(e){e!==c?(bt(2884),e!==st&&(e===u?t.cullFace(1029):e===h?t.cullFace(1028):t.cullFace(1032))):wt(2884),st=e}function Ct(e,n,i){e?(bt(32823),ot===n&&lt===i||(t.polygonOffset(n,i),ot=n,lt=i)):wt(32823)}return{buffers:{color:r,depth:s,stencil:a},enable:bt,disable:wt,bindFramebuffer:function(e,n){return p[e]!==n&&(t.bindFramebuffer(e,n),p[e]=n,i&&(36009===e&&(p[36160]=n),36160===e&&(p[36009]=n)),!0)},drawBuffers:function(i,r){let s=m,a=!1;if(i)if(s=f.get(r),void 0===s&&(s=[],f.set(r,s)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(s.length!==t.length||36064!==s[0]){for(let e=0,n=t.length;e<n;e++)s[e]=36064+e;s.length=t.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0);else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(n.isWebGL2?t.drawBuffers(s):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return _!==e&&(t.useProgram(e),_=e,!0)},setBlending:Tt,setMaterial:function(t,e){t.side===v?wt(2884):bt(2884);let n=t.side===g;e&&(n=!n),At(n),t.blending===x&&!1===t.transparent?Tt(y):Tt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;a.setTest(i),i&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Ct(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?bt(32926):wt(32926)},setFlipSided:At,setCullFace:Et,setLineWidth:function(e){e!==at&&(ut&&t.lineWidth(e),at=e)},setPolygonOffset:Ct,setScissorTest:function(t){t?bt(3089):wt(3089)},activeTexture:function(e){void 0===e&&(e=33984+ct-1),pt!==e&&(t.activeTexture(e),pt=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===pt?33984+ct-1:pt);let r=ft[i];void 0===r&&(r={type:void 0,texture:void 0},ft[i]=r),r.type===e&&r.texture===n||(pt!==i&&(t.activeTexture(i),pt=i),t.bindTexture(e,n||xt[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=ft[pt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){}},updateUBOMapping:function(e,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=l.get(n).get(e);o.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){}},scissor:function(e){!1===vt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),vt.copy(e))},viewport:function(e){!1===_t.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),_t.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},pt=null,ft={},p={},f=new WeakMap,m=[],_=null,Z=!1,K=null,J=null,$=null,Q=null,tt=null,et=null,nt=null,it=!1,rt=null,st=null,at=null,ot=null,lt=null,vt.set(0,0,t.canvas.width,t.canvas.height),_t.set(0,0,t.canvas.width,t.canvas.height),r.reset(),s.reset(),a.reset()}}}function ho(t,e,n,i,r,s,a){const o=r.isWebGL2,l=(r.maxTextures,r.maxCubemapSize),c=r.maxTextureSize,u=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function v(t,e){return g?new OffscreenCanvas(t,e):nn("canvas")}function _(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Ye:Math.floor,s=i(r*t.width),a=i(r*t.height);void 0===f&&(f=v(s,a));const o=n?v(s,a):f;o.width=s,o.height=a;return o.getContext("2d").drawImage(t,0,0,s,a),o}return t}return t}function y(t){return Xe(t.width)&&Xe(t.height)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==dt&&t.minFilter!==mt}function b(e){t.generateMipmap(e)}function w(n,i,r,s,a=!1){if(!1===o)return i;if(null!==n&&void 0!==t[n])return t[n];let l=i;return 6403===i&&(5126===r&&(l=33326),5131===r&&(l=33325),5121===r&&(l=33321)),33319===i&&(5126===r&&(l=33328),5131===r&&(l=33327),5121===r&&(l=33323)),6408===i&&(5126===r&&(l=34836),5131===r&&(l=34842),5121===r&&(l=s===Ae&&!1===a?35907:32856),32819===r&&(l=32854),32820===r&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function M(t,e,n){return!0===x(t,n)||t.isFramebufferTexture&&t.minFilter!==dt&&t.minFilter!==mt?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function S(t){return t===dt||t===pt||t===ft?9728:9729}function T(t){const e=t.target;e.removeEventListener("dispose",T),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=m.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&E(t),0===Object.keys(r).length&&m.delete(n)}i.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function A(e){const n=e.target;n.removeEventListener("dispose",A),function(e){const n=e.texture,r=i.get(e),s=i.get(n);void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),a.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),a.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}(n)}function E(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete m.get(r)[n.__cacheKey],a.memory.textures--}let C=0;function L(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){const n=t.image;if(null===n);else if(!1!==n.complete)return void O(r,t,e)}n.bindTexture(3553,r.__webglTexture,33984+e)}const P={[ct]:10497,[ut]:33071,[ht]:33648},R={[dt]:9728,[pt]:9984,[ft]:9986,[mt]:9729,[gt]:9985,[vt]:9987};function D(n,s,a){if(a?(t.texParameteri(n,10242,P[s.wrapS]),t.texParameteri(n,10243,P[s.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,P[s.wrapR]),t.texParameteri(n,10240,R[s.magFilter]),t.texParameteri(n,10241,R[s.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),s.wrapS!==ut||s.wrapT,t.texParameteri(n,10240,S(s.magFilter)),t.texParameteri(n,10241,S(s.minFilter)),s.minFilter!==dt&&s.minFilter),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(s.magFilter===dt)return;if(s.minFilter!==ft&&s.minFilter!==vt)return;if(s.type===St&&!1===e.has("OES_texture_float_linear"))return;if(!1===o&&s.type===Tt&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function I(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const r=n.source;let s=m.get(r);void 0===s&&(s={},m.set(r,s));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(o!==e.__cacheKey){void 0===s[o]&&(s[o]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&E(n)),e.__cacheKey=o,e.__webglTexture=s[o].texture}return i}function O(e,r,a){let l=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=35866),r.isData3DTexture&&(l=32879);const u=I(e,r),h=r.source;n.bindTexture(l,e.__webglTexture,33984+a);const d=i.get(h);if(h.version!==d.__version||!0===u){n.activeTexture(33984+a),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!o&&(t.wrapS!==ut||t.wrapT!==ut||t.minFilter!==dt&&t.minFilter!==mt)}(r)&&!1===y(r.image);let i=_(r.image,e,!1,c);i=B(r,i);const p=y(i)||o,f=s.convert(r.format,r.encoding);let m,g=s.convert(r.type),v=w(r.internalFormat,f,g,r.encoding,r.isVideoTexture);D(l,r,p);const S=r.mipmaps,T=o&&!0!==r.isVideoTexture,A=void 0===d.__version||!0===u,E=M(r,i,p);if(r.isDepthTexture)v=6402,o?v=r.type===St?36012:r.type===Mt?33190:r.type===Ct?35056:33189:r.type,r.format===It&&6402===v&&r.type!==bt&&r.type!==Mt&&(r.type=Mt,g=s.convert(r.type)),r.format===Ot&&6402===v&&(v=34041,r.type!==Ct&&(r.type=Ct,g=s.convert(r.type))),A&&(T?n.texStorage2D(3553,1,v,i.width,i.height):n.texImage2D(3553,0,v,i.width,i.height,0,f,g,null));else if(r.isDataTexture)if(S.length>0&&p){T&&A&&n.texStorage2D(3553,E,v,S[0].width,S[0].height);for(let t=0,e=S.length;t<e;t++)m=S[t],T?n.texSubImage2D(3553,t,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,t,v,m.width,m.height,0,f,g,m.data);r.generateMipmaps=!1}else T?(A&&n.texStorage2D(3553,E,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,f,g,i.data)):n.texImage2D(3553,0,v,i.width,i.height,0,f,g,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){T&&A&&n.texStorage3D(35866,E,v,S[0].width,S[0].height,i.depth);for(let t=0,e=S.length;t<e;t++)m=S[t],r.format!==Pt?null!==f&&(T?n.compressedTexSubImage3D(35866,t,0,0,0,m.width,m.height,i.depth,f,m.data,0,0):n.compressedTexImage3D(35866,t,v,m.width,m.height,i.depth,0,m.data,0,0)):T?n.texSubImage3D(35866,t,0,0,0,m.width,m.height,i.depth,f,g,m.data):n.texImage3D(35866,t,v,m.width,m.height,i.depth,0,f,g,m.data)}else{T&&A&&n.texStorage2D(3553,E,v,S[0].width,S[0].height);for(let t=0,e=S.length;t<e;t++)m=S[t],r.format!==Pt?null!==f&&(T?n.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(3553,t,v,m.width,m.height,0,m.data)):T?n.texSubImage2D(3553,t,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,t,v,m.width,m.height,0,f,g,m.data)}else if(r.isDataArrayTexture)T?(A&&n.texStorage3D(35866,E,v,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):n.texImage3D(35866,0,v,i.width,i.height,i.depth,0,f,g,i.data);else if(r.isData3DTexture)T?(A&&n.texStorage3D(32879,E,v,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):n.texImage3D(32879,0,v,i.width,i.height,i.depth,0,f,g,i.data);else if(r.isFramebufferTexture){if(A)if(T)n.texStorage2D(3553,E,v,i.width,i.height);else{let t=i.width,e=i.height;for(let i=0;i<E;i++)n.texImage2D(3553,i,v,t,e,0,f,g,null),t>>=1,e>>=1}}else if(S.length>0&&p){T&&A&&n.texStorage2D(3553,E,v,S[0].width,S[0].height);for(let t=0,e=S.length;t<e;t++)m=S[t],T?n.texSubImage2D(3553,t,0,0,f,g,m):n.texImage2D(3553,t,v,f,g,m);r.generateMipmaps=!1}else T?(A&&n.texStorage2D(3553,E,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,f,g,i)):n.texImage2D(3553,0,v,f,g,i);x(r,p)&&b(l),d.__version=h.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function N(e,r,a,o,l){const c=s.convert(a.format,a.encoding),u=s.convert(a.type),d=w(a.internalFormat,c,u,a.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,d,r.width,r.height,0,c,u,null)),n.bindFramebuffer(36160,e),F(r)?h.framebufferTexture2DMultisampleEXT(36160,o,l,i.get(a).__webglTexture,0,k(r)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,o,l,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||F(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===St?r=36012:e.type===Mt&&(r=33190));const i=k(n);F(n)?h.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=k(n);i&&!1===F(n)?t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):F(n)?h.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<e.length;r++){const a=e[r],o=s.convert(a.format,a.encoding),l=s.convert(a.type),c=w(a.internalFormat,o,l,a.encoding),u=k(n);i&&!1===F(n)?t.renderbufferStorageMultisample(36161,u,c,n.width,n.height):F(n)?h.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):t.renderbufferStorage(36161,c,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function U(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),L(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,a=k(r);if(r.depthTexture.format===It)F(r)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==Ot)throw new Error("Unknown depthTexture format");F(r)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):t.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),z(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),z(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function k(t){return Math.min(u,t.samples)}function F(t){const n=i.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(t,n){const i=t.encoding,r=t.format;t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===ze||i!==Te&&i===Ae&&!1===o&&(!0===e.has("EXT_sRGB")&&r===Pt?(t.format=ze,t.minFilter=mt,t.generateMipmaps=!1):n=vn.sRGBToLinear(n)),n}this.allocateTextureUnit=function(){const t=C;return C+=1,t},this.resetTextureUnits=function(){C=0},this.setTexture2D=L,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?O(r,t,e):n.bindTexture(35866,r.__webglTexture,33984+e)},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?O(r,t,e):n.bindTexture(32879,r.__webglTexture,33984+e)},this.setTextureCube=function(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?function(e,r,a){if(6!==r.image.length)return;const c=I(e,r),u=r.source;n.bindTexture(34067,e.__webglTexture,33984+a);const h=i.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(33984+a),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||i?i?r.image[t].image:r.image[t]:_(r.image[t],!1,!0,l),d[t]=B(r,d[t]);const p=d[0],f=y(p)||o,m=s.convert(r.format,r.encoding),g=s.convert(r.type),v=w(r.internalFormat,m,g,r.encoding),S=o&&!0!==r.isVideoTexture,T=void 0===h.__version||!0===c;let A,E=M(r,p,f);if(D(34067,r,f),e){S&&T&&n.texStorage2D(34067,E,v,p.width,p.height);for(let t=0;t<6;t++){A=d[t].mipmaps;for(let e=0;e<A.length;e++){const i=A[e];r.format!==Pt?null!==m&&(S?n.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,m,i.data):n.compressedTexImage2D(34069+t,e,v,i.width,i.height,0,i.data)):S?n.texSubImage2D(34069+t,e,0,0,i.width,i.height,m,g,i.data):n.texImage2D(34069+t,e,v,i.width,i.height,0,m,g,i.data)}}}else{A=r.mipmaps,S&&T&&(A.length>0&&E++,n.texStorage2D(34067,E,v,d[0].width,d[0].height));for(let t=0;t<6;t++)if(i){S?n.texSubImage2D(34069+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):n.texImage2D(34069+t,0,v,d[t].width,d[t].height,0,m,g,d[t].data);for(let e=0;e<A.length;e++){const i=A[e].image[t].image;S?n.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,m,g,i.data):n.texImage2D(34069+t,e+1,v,i.width,i.height,0,m,g,i.data)}}else{S?n.texSubImage2D(34069+t,0,0,0,m,g,d[t]):n.texImage2D(34069+t,0,v,m,g,d[t]);for(let e=0;e<A.length;e++){const i=A[e];S?n.texSubImage2D(34069+t,e+1,0,0,m,g,i.image[t]):n.texImage2D(34069+t,e+1,v,m,g,i.image[t])}}}x(r,f)&&b(34067),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(a,e,r):n.bindTexture(34067,a.__webglTexture,33984+r)},this.rebindTextures=function(t,e,n){const r=i.get(t);void 0!==e&&N(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&U(t)},this.setupRenderTarget=function(e){const l=e.texture,c=i.get(e),u=i.get(l);e.addEventListener("dispose",A),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=y(e)||o;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),d&&r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),a.memory.textures++)}}if(o&&e.samples>0&&!1===F(e)){const i=d?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=s.convert(r.format,r.encoding),o=s.convert(r.type),l=w(r.internalFormat,a,o,r.encoding,!0===e.isXRRenderTarget),u=k(e);t.renderbufferStorageMultisample(36161,u,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),z(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),D(34067,l,p);for(let t=0;t<6;t++)N(c.__webglFramebuffer[t],e,l,36064,34069+t);x(l,p)&&b(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=i.get(s);n.bindTexture(3553,a.__webglTexture),D(3553,s,p),N(c.__webglFramebuffer,e,s,36064+r,3553),x(s,p)&&b(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&o&&(t=e.isWebGL3DRenderTarget?32879:35866),n.bindTexture(t,u.__webglTexture),D(t,l,p),N(c.__webglFramebuffer,e,l,36064,t),x(l,p)&&b(t),n.unbindTexture()}e.depthBuffer&&U(e)},this.updateRenderTargetMipmap=function(t){const e=y(t)||o,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,a=r.length;s<a;s++){const a=r[s];if(x(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(a).__webglTexture;n.bindTexture(e,r),b(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===F(e)){const r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],s=e.width,a=e.height;let o=16384;const l=[],c=e.stencilBuffer?33306:36096,u=i.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<r.length;e++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(36064+n),e.depthBuffer&&l.push(c);const p=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===p&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),h&&t.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===p&&(t.invalidateFramebuffer(36008,[c]),t.invalidateFramebuffer(36009,[c])),h){const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),d&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let e=0;e<r.length;e++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,u.__webglColorRenderbuffer[e]);const s=i.get(r[e]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,s,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=N,this.useMultisampledRTT=F}function po(t,e,n){const i=n.isWebGL2;return{convert:function(n,r=null){let s;if(n===_t)return 5121;if(n===At)return 32819;if(n===Et)return 32820;if(n===yt)return 5120;if(n===xt)return 5122;if(n===bt)return 5123;if(n===wt)return 5124;if(n===Mt)return 5125;if(n===St)return 5126;if(n===Tt)return i?5131:(s=e.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(n===Lt)return 6406;if(n===Pt)return 6408;if(n===Rt)return 6409;if(n===Dt)return 6410;if(n===It)return 6402;if(n===Ot)return 34041;if(n===ze)return s=e.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(n===Nt)return 6403;if(n===zt)return 36244;if(n===Ut)return 33319;if(n===kt)return 33320;if(n===Ft)return 36249;if(n===Bt||n===Vt||n===Gt||n===Wt)if(r===Ae){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Bt)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Vt)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Gt)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Wt)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Bt)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Vt)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Gt)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Wt)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ht||n===jt||n===Xt||n===qt){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===Ht)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===jt)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Xt)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===qt)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Yt)return s=e.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Zt||n===Kt){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===Zt)return r===Ae?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Kt)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===Jt||n===$t||n===Qt||n===te||n===ee||n===ne||n===ie||n===re||n===se||n===ae||n===oe||n===le||n===ce||n===ue){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===Jt)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===$t)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Qt)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===te)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ee)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ne)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ie)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===re)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===se)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ae)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===oe)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===le)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ce)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ue)return r===Ae?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===he){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(n===he)return r===Ae?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===de||n===pe||n===fe||n===me){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===he)return s.COMPRESSED_RED_RGTC1_EXT;if(n===pe)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===fe)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===me)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ct?i?34042:(s=e.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class fo extends Cr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class mo extends Si{constructor(){super(),this.isGroup=!0,this.type="Group"}}const go={type:"move"};class vo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new mo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new mo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new sn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new sn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new mo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new sn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new sn),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n),r=this._getHandJoint(l,i);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(go)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new mo;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class _o extends bn{constructor(t,e,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:It)!==It&&c!==Ot)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===It&&(n=Mt),void 0===n&&c===Ot&&(n=Ct),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:dt,this.minFilter=void 0!==o?o:dt,this.flipY=!1,this.generateMipmaps=!1}}class yo extends Ue{constructor(t,e){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=e.getContextAttributes();let m=null,g=null;const v=[],_=[],y=new Set,x=new Map,b=new Cr;b.layers.enable(1),b.viewport=new wn;const w=new Cr;w.layers.enable(2),w.viewport=new wn;const M=[b,w],S=new fo;S.layers.enable(1),S.layers.enable(2);let T=null,A=null;function E(t){const e=_.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function C(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",L);for(let t=0;t<v.length;t++){const e=_[t];null!==e&&(_[t]=null,v[t].disconnect(e))}T=null,A=null,t.setRenderTarget(m),d=null,h=null,u=null,i=null,g=null,O.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function L(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=_.indexOf(n);i>=0&&(_[i]=null,v[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=_.indexOf(n);if(-1===i){for(let t=0;t<v.length;t++){if(t>=_.length){_.push(n),i=t;break}if(null===_[t]){_[t]=n,i=t;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new vo,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new vo,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new vo,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,n.isPresenting},this.setReferenceSpaceType=function(t){a=t,n.isPresenting},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=t.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",C),i.addEventListener("inputsourceschange",L),!0!==f.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:d}),g=new Mn(d.framebufferWidth,d.framebufferHeight,{format:Pt,type:_t,encoding:t.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,s=null,a=null;f.depth&&(a=f.stencil?35056:33190,n=f.stencil?Ot:It,s=f.stencil?Ct:Mt);const o={colorFormat:32856,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,e),h=u.createProjectionLayer(o),i.updateRenderState({layers:[h]}),g=new Mn(h.textureWidth,h.textureHeight,{format:Pt,type:_t,depthTexture:new _o(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:t.outputEncoding,samples:f.antialias?4:0});t.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),O.setContext(i),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const P=new sn,R=new sn;function D(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;S.near=w.near=b.near=t.near,S.far=w.far=b.far=t.far,T===S.near&&A===S.far||(i.updateRenderState({depthNear:S.near,depthFar:S.far}),T=S.near,A=S.far);const e=t.parent,n=S.cameras;D(S,e);for(let t=0;t<n.length;t++)D(n[t],e);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),t.matrix.copy(S.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){P.setFromMatrixPosition(e.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=P.distanceTo(R),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,v=o+f,_=d-m,y=p+(i-m),x=l*o/v*g,b=c*o/v*g;t.projectionMatrix.makePerspective(_,y,x,b,g,v)}(S,b,w):S.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(t){o=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.getPlanes=function(){return y};let I=null;const O=new Br;O.setAnimationLoop((function(e,i){if(c=i.getViewerPose(l||s),p=i,null!==c){const e=c.views;null!==d&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let s=null;if(null!==d)s=d.getViewport(r);else{const e=u.getViewSubImage(h,r);s=e.viewport,0===i&&(t.setRenderTargetTextures(g,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let a=M[i];void 0===a&&(a=new Cr,a.layers.enable(i),a.viewport=new wn,M[i]=a),a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&S.matrix.copy(a.matrix),!0===n&&S.cameras.push(a)}}for(let t=0;t<v.length;t++){const e=_[t],n=v[t];null!==e&&void 0!==n&&n.update(e,i,l||s)}if(I&&I(e,i),i.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let t=null;for(const e of y)i.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(const e of t)y.delete(e),x.delete(e),n.dispatchEvent({type:"planeremoved",data:e});for(const t of i.detectedPlanes)if(y.has(t)){const e=x.get(t);t.lastChangedTime>e&&(x.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else y.add(t),x.set(t,i.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}p=null})),this.setAnimationLoop=function(t){I=t},this.dispose=function(){}}}function xo(t,e){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===g&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===g&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);const r=e.get(i).envMap;if(r&&(n.envMap.value=r,n.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*e}let s,a;i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.roughnessMap?s=i.roughnessMap:i.metalnessMap?s=i.metalnessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap?s=i.emissiveMap:i.clearcoatMap?s=i.clearcoatMap:i.clearcoatNormalMap?s=i.clearcoatNormalMap:i.clearcoatRoughnessMap?s=i.clearcoatRoughnessMap:i.iridescenceMap?s=i.iridescenceMap:i.iridescenceThicknessMap?s=i.iridescenceThicknessMap:i.specularIntensityMap?s=i.specularIntensityMap:i.specularColorMap?s=i.specularColorMap:i.transmissionMap?s=i.transmissionMap:i.thicknessMap?s=i.thicknessMap:i.sheenColorMap?s=i.sheenColorMap:i.sheenRoughnessMap&&(s=i.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Sr(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,i,r,s,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(t,i):i.isMeshToonMaterial?(n(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(n(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(n(t,i),function(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap);const i=e.get(n).envMap;i&&(t.envMapIntensity.value=n.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===g&&t.clearcoatNormalScale.value.negate()));e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,a)):i.isMeshMatcapMaterial?(n(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?n(t,i):i.isMeshDistanceMaterial?(n(t,i),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?n(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,s):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function bo(t,e,n,i){let r={},s={},a=[];const o=n.isWebGL2?t.getParameter(35375):0;function l(t,e,n){const i=t.value;if(void 0===n[e]){if("number"==typeof i)n[e]=i;else{const t=Array.isArray(i)?i:[i],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());n[e]=r}return!0}if("number"==typeof i){if(n[e]!==i)return n[e]=i,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],r=Array.isArray(i)?i:[i];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(r[e]))return n.copy(r[e]),!0}}return!1}function c(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture,e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const i=16;let r=0;for(let t=0,s=e.length;t<s;t++){const s=e[t],a={boundary:0,storage:0},o=Array.isArray(s.value)?s.value:[s.value];for(let t=0,e=o.length;t<e;t++){const e=c(o[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(s.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,t>0){r=n%i;0!==r&&i-r-a.boundary<0&&(n+=i-r,s.__offset=n)}n+=a.storage}r=n%i,r>0&&(n+=i-r);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<o;t++)if(-1===a.indexOf(t))return a.push(t),t;return 0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,s=e.usage;return t.bindBuffer(35345,i),t.bufferData(35345,r,s),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const p=h.program;i.updateUBOMapping(n,p);const f=e.render.frame;s[n.id]!==f&&(!function(e){const n=r[e.id],i=e.uniforms,s=e.__cache;t.bindBuffer(35345,n);for(let e=0,n=i.length;e<n;e++){const n=i[e];if(!0===l(n,e,s)){const e=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let r=0;for(let s=0;s<i.length;s++){const a=i[s],o=c(a);"number"==typeof a?(n.__data[0]=a,t.bufferSubData(35345,e+r,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,e,n.__data)}}t.bindBuffer(35345,null)}(n),s[n.id]=f)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);a=[],r={},s={}}}}function wo(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:function(){const t=nn("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0===t.depth||t.depth,r=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,o=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let d=null,p=null;const f=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Te,this.useLegacyLights=!0,this.toneMapping=$,this.toneMappingExposure=1;const y=this;let x=!1,b=0,w=0,M=null,S=-1,T=null;const A=new wn,E=new wn;let C=null,L=e.width,P=e.height,R=1,D=null,I=null;const O=new wn(0,0,L,P),N=new wn(0,0,L,P);let z=!1;const U=new Fr;let k=!1,F=!1,B=null;const V=new Qn,G=new sn,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===M?R:1}let j,X,q,Y,Z,K,J,Q,tt,et,nt,it,rt,st,at,ot,lt,ct,ut,ht,dt,pt,ft,mt,gt=n;function yt(t,n){for(let i=0;i<t.length;i++){const r=t[i],s=e.getContext(r,n);if(null!==s)return s}return null}try{const t={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${a}`),e.addEventListener("webglcontextlost",wt,!1),e.addEventListener("webglcontextrestored",Mt,!1),e.addEventListener("webglcontextcreationerror",At,!1),null===gt){const e=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&e.shift(),gt=yt(e,t),null===gt)throw yt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===gt.getShaderPrecisionFormat&&(gt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw t}function xt(){j=new gs(gt),X=new Kr(gt,j,t),j.init(X),pt=new po(gt,j,X),q=new uo(gt,j,X),Y=new ys,Z=new Ya,K=new ho(gt,j,q,Z,X,pt,Y),J=new $r(y),Q=new ms(y),tt=new Vr(gt,X),ft=new Yr(gt,j,tt,X),et=new vs(gt,tt,Y,ft),nt=new Ms(gt,et,tt,Y),ut=new ws(gt,X,K),ot=new Jr(Z),it=new qa(y,J,Q,j,X,ft,ot),rt=new xo(y,Z),st=new $a,at=new ro(j,X),ct=new qr(y,J,Q,q,nt,h,o),lt=new co(y,nt,X),mt=new bo(gt,Y,X,q),ht=new Zr(gt,j,Y,X),dt=new _s(gt,j,Y,X),Y.programs=it.programs,y.capabilities=X,y.extensions=j,y.properties=Z,y.renderLists=st,y.shadowMap=lt,y.state=q,y.info=Y}xt();const bt=new yo(y,gt);function wt(t){t.preventDefault(),x=!0}function Mt(){x=!1;const t=Y.autoReset,e=lt.enabled,n=lt.autoUpdate,i=lt.needsUpdate,r=lt.type;xt(),Y.autoReset=t,lt.enabled=e,lt.autoUpdate=n,lt.needsUpdate=i,lt.type=r}function At(t){}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){const e=Z.get(t).programs;void 0!==e&&(e.forEach((function(t){it.releaseProgram(t)})),t.isShaderMaterial&&it.releaseShaderCache(t))})(t),Z.remove(t)}(e)}this.xr=bt,this.getContext=function(){return gt},this.getContextAttributes=function(){return gt.getContextAttributes()},this.forceContextLoss=function(){const t=j.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=j.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(L,P,!1))},this.getSize=function(t){return t.set(L,P)},this.setSize=function(t,n,i=!0){bt.isPresenting||(L=t,P=n,e.width=Math.floor(t*R),e.height=Math.floor(n*R),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(L*R,P*R).floor()},this.setDrawingBufferSize=function(t,n,i){L=t,P=n,R=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(A)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),q.viewport(A.copy(O).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(N)},this.setScissor=function(t,e,n,i){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,n,i),q.scissor(E.copy(N).multiplyScalar(R).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(t){q.setScissorTest(z=t)},this.setOpaqueSort=function(t){D=t},this.setTransparentSort=function(t){I=t},this.getClearColor=function(t){return t.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(t=!0,e=!0,n=!0){let i=0;t&&(i|=16384),e&&(i|=256),n&&(i|=1024),gt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",wt,!1),e.removeEventListener("webglcontextrestored",Mt,!1),e.removeEventListener("webglcontextcreationerror",At,!1),st.dispose(),at.dispose(),Z.dispose(),J.dispose(),Q.dispose(),nt.dispose(),ft.dispose(),mt.dispose(),it.dispose(),bt.dispose(),bt.removeEventListener("sessionstart",Lt),bt.removeEventListener("sessionend",Rt),B&&(B.dispose(),B=null),Dt.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=W);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(t,e,n,i,r){!0!==e.isScene&&(e=W);K.resetTextureUnits();const s=e.fog,a=i.isMeshStandardMaterial?e.environment:null,o=null===M?y.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:Te,l=(i.isMeshStandardMaterial?Q:J).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,m=i.toneMapped?y.toneMapping:$,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,_=Z.get(i),x=p.state.lights;if(!0===k&&(!0===F||t!==T)){const e=t===T&&i.id===S;ot.setState(i,t,e)}let b=!1;i.version===_.__version?_.needsLights&&_.lightsStateVersion!==x.state.version||_.outputEncoding!==o||r.isInstancedMesh&&!1===_.instancing?b=!0:r.isInstancedMesh||!0!==_.instancing?r.isSkinnedMesh&&!1===_.skinning?b=!0:r.isSkinnedMesh||!0!==_.skinning?_.envMap!==l||!0===i.fog&&_.fog!==s?b=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===ot.numPlanes&&_.numIntersection===ot.numIntersection?(_.vertexAlphas!==c||_.vertexTangents!==u||_.morphTargets!==h||_.morphNormals!==d||_.morphColors!==f||_.toneMapping!==m||!0===X.isWebGL2&&_.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,_.__version=i.version);let w=_.currentProgram;!0===b&&(w=Ut(i,e,r));let A=!1,E=!1,C=!1;const L=w.getUniforms(),D=_.uniforms;q.useProgram(w.program)&&(A=!0,E=!0,C=!0);i.id!==S&&(S=i.id,E=!0);if(A||T!==t){if(L.setValue(gt,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&L.setValue(gt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),T!==t&&(T=t,E=!0,C=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=L.map.cameraPosition;void 0!==e&&e.setValue(gt,G.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&L.setValue(gt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&L.setValue(gt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){L.setOptional(gt,r,"bindMatrix"),L.setOptional(gt,r,"bindMatrixInverse");const t=r.skeleton;t&&X.floatVertexTextures&&(null===t.boneTexture&&t.computeBoneTexture(),L.setValue(gt,"boneTexture",t.boneTexture,K),L.setValue(gt,"boneTextureSize",t.boneTextureSize))}const I=n.morphAttributes;(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===X.isWebGL2)&&ut.update(r,n,w);(E||_.receiveShadow!==r.receiveShadow)&&(_.receiveShadow=r.receiveShadow,L.setValue(gt,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(D.envMap.value=l,D.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);E&&(L.setValue(gt,"toneMappingExposure",y.toneMappingExposure),_.needsLights&&(N=C,(O=D).ambientLightColor.needsUpdate=N,O.lightProbe.needsUpdate=N,O.directionalLights.needsUpdate=N,O.directionalLightShadows.needsUpdate=N,O.pointLights.needsUpdate=N,O.pointLightShadows.needsUpdate=N,O.spotLights.needsUpdate=N,O.spotLightShadows.needsUpdate=N,O.rectAreaLights.needsUpdate=N,O.hemisphereLights.needsUpdate=N),s&&!0===i.fog&&rt.refreshFogUniforms(D,s),rt.refreshMaterialUniforms(D,i,R,P,B),Ea.upload(gt,_.uniformsList,D,K));var O,N;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Ea.upload(gt,_.uniformsList,D,K),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&L.setValue(gt,"center",r.center);if(L.setValue(gt,"modelViewMatrix",r.modelViewMatrix),L.setValue(gt,"normalMatrix",r.normalMatrix),L.setValue(gt,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(X.isWebGL2){const n=t[e];mt.update(n,w),mt.bind(n,w)}}return w}(t,e,n,i,r);q.setMaterial(i,a);let l=n.index,c=1;!0===i.wireframe&&(l=et.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==s&&(d=Math.max(d,s.start*c),f=Math.min(f,(s.start+s.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):null!=h&&(d=Math.max(d,0),f=Math.min(f,h.count));const m=f-d;if(m<0||m===1/0)return;let g;ft.setup(r,i,o,n,l);let v=ht;if(null!==l&&(g=tt.get(l),v=dt,v.setIndex(g)),r.isMesh)!0===i.wireframe?(q.setLineWidth(i.wireframeLinewidth*H()),v.setMode(1)):v.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),q.setLineWidth(t*H()),r.isLineSegments?v.setMode(1):r.isLineLoop?v.setMode(2):v.setMode(3)}else r.isPoints?v.setMode(0):r.isSprite&&v.setMode(4);if(r.isInstancedMesh)v.renderInstances(d,m,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);v.renderInstances(d,m,e)}else v.render(d,m)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===v&&!1===t.forceSinglePass?(t.side=g,t.needsUpdate=!0,Ut(t,e,n),t.side=m,t.needsUpdate=!0,Ut(t,e,n),t.side=v):Ut(t,e,n)}p=at.get(t),p.init(),_.push(p),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(y.useLegacyLights),t.traverse((function(e){const i=e.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){n(i[r],t,e)}else n(i,t,e)})),_.pop(),p=null};let Ct=null;function Lt(){Dt.stop()}function Rt(){Dt.start()}const Dt=new Br;function It(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||U.intersectsSprite(t)){i&&G.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);const e=nt.update(t),r=t.material;r.visible&&d.push(t,e,r,n,G.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Y.render.frame&&(t.skeleton.update(),t.skeleton.frame=Y.render.frame),!t.frustumCulled||U.intersectsObject(t))){i&&G.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);const e=nt.update(t),r=t.material;if(Array.isArray(r)){const i=e.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&d.push(t,e,o,n,G.z,a)}}else r.visible&&d.push(t,e,r,n,G.z,null)}const r=t.children;for(let t=0,s=r.length;t<s;t++)It(r[t],e,n,i)}function Ot(t,e,n,i){const r=t.opaque,a=t.transmissive,o=t.transparent;p.setupLightsView(n),!0===k&&ot.setGlobalState(y.clippingPlanes,n),a.length>0&&function(t,e,n){const i=X.isWebGL2;null===B&&(B=new Mn(1024,1024,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?Tt:_t,minFilter:vt,samples:i&&!0===s?4:0}));const r=y.getRenderTarget();y.setRenderTarget(B),y.clear();const a=y.toneMapping;y.toneMapping=$,Nt(t,e,n),y.toneMapping=a,K.updateMultisampleRenderTarget(B),K.updateRenderTargetMipmap(B),y.setRenderTarget(r)}(r,e,n),i&&q.viewport(A.copy(i)),r.length>0&&Nt(r,e,n),a.length>0&&Nt(a,e,n),o.length>0&&Nt(o,e,n),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Nt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&zt(a,e,n,o,l,c)}}function zt(t,e,n,i,r,s){t.onBeforeRender(y,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(y,e,n,i,t,s),!0===r.transparent&&r.side===v&&!1===r.forceSinglePass?(r.side=g,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,s),r.side=m,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,s),r.side=v):y.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(y,e,n,i,r,s)}function Ut(t,e,n){!0!==e.isScene&&(e=W);const i=Z.get(t),r=p.state.lights,s=p.state.shadowsArray,a=r.state.version,o=it.getParameters(t,r.state,s,e,n),l=it.getProgramCacheKey(o);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?Q:J).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",Et),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return kt(t,o),u}else o.uniforms=it.getUniforms(t),t.onBuild(n,o,y),t.onBeforeCompile(o,y),u=it.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ot.uniform),kt(t,o),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=u.getUniforms(),f=Ea.seqWithValue(d.seq,h);return i.currentProgram=u,i.uniformsList=f,u}function kt(t,e){const n=Z.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Dt.setAnimationLoop((function(t){Ct&&Ct(t)})),"undefined"!=typeof self&&Dt.setContext(self),this.setAnimationLoop=function(t){Ct=t,bt.setAnimationLoop(t),null===t?Dt.stop():Dt.start()},bt.addEventListener("sessionstart",Lt),bt.addEventListener("sessionend",Rt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return;if(!0===x)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===bt.enabled&&!0===bt.isPresenting&&(!0===bt.cameraAutoUpdate&&bt.updateCamera(e),e=bt.getCamera()),!0===t.isScene&&t.onBeforeRender(y,t,e,M),p=at.get(t,_.length),p.init(),_.push(p),V.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),U.setFromProjectionMatrix(V),F=this.localClippingEnabled,k=ot.init(this.clippingPlanes,F),d=st.get(t,f.length),d.init(),f.push(d),It(t,e,0,y.sortObjects),d.finish(),!0===y.sortObjects&&d.sort(D,I),!0===k&&ot.beginShadows();const n=p.state.shadowsArray;if(lt.render(n,t,e),!0===k&&ot.endShadows(),!0===this.info.autoReset&&this.info.reset(),ct.render(d,t),p.setupLights(y.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Ot(d,t,i,i.viewport)}}else Ot(d,t,e);null!==M&&(K.updateMultisampleRenderTarget(M),K.updateRenderTargetMipmap(M)),!0===t.isScene&&t.onAfterRender(y,t,e),ft.resetDefaultState(),S=-1,T=null,_.pop(),p=_.length>0?_[_.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(t,e,n){Z.get(t.texture).__webglTexture=e,Z.get(t.depthTexture).__webglTexture=n;const i=Z.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===j.has("WEBGL_multisampled_render_to_texture")&&(i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=Z.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){M=t,b=e,w=n;let i=!0,r=null,s=!1,a=!1;if(t){const n=Z.get(t);void 0!==n.__useDefaultFramebuffer?(q.bindFramebuffer(36160,null),i=!1):void 0===n.__webglFramebuffer?K.setupRenderTarget(t):n.__hasExternalTextures&&K.rebindTextures(t,Z.get(t.texture).__webglTexture,Z.get(t.depthTexture).__webglTexture);const o=t.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=Z.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],s=!0):r=X.isWebGL2&&t.samples>0&&!1===K.useMultisampledRTT(t)?Z.get(t).__webglMultisampledFramebuffer:l,A.copy(t.viewport),E.copy(t.scissor),C=t.scissorTest}else A.copy(O).multiplyScalar(R).floor(),E.copy(N).multiplyScalar(R).floor(),C=z;if(q.bindFramebuffer(36160,r)&&X.drawBuffers&&i&&q.drawBuffers(t,r),q.viewport(A),q.scissor(E),q.setScissorTest(C),s){const i=Z.get(t.texture);gt.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(a){const i=Z.get(t.texture),r=e||0;gt.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}S=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,a){if(!t||!t.isWebGLRenderTarget)return;let o=Z.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){q.bindFramebuffer(36160,o);try{const a=t.texture,o=a.format,l=a.type;if(o!==Pt&&pt.convert(o)!==gt.getParameter(35739))return;const c=l===Tt&&(j.has("EXT_color_buffer_half_float")||X.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(l===_t||pt.convert(l)===gt.getParameter(35738)||l===St&&(X.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||c))return;e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&gt.readPixels(e,n,i,r,pt.convert(o),pt.convert(l),s)}finally{const t=null!==M?Z.get(M).__webglFramebuffer:null;q.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);K.setTexture2D(e,0),gt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,r,s),q.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,s=e.image.height,a=pt.convert(n.format),o=pt.convert(n.type);K.setTexture2D(n,0),gt.pixelStorei(37440,n.flipY),gt.pixelStorei(37441,n.premultiplyAlpha),gt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?gt.texSubImage2D(3553,i,t.x,t.y,r,s,a,o,e.image.data):e.isCompressedTexture?gt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):gt.texSubImage2D(3553,i,t.x,t.y,a,o,e.image),0===i&&n.generateMipmaps&&gt.generateMipmap(3553),q.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(y.isWebGL1Renderer)return;const s=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=pt.convert(i.format),c=pt.convert(i.type);let u;if(i.isData3DTexture)K.setTexture3D(i,0),u=32879;else{if(!i.isDataArrayTexture)return;K.setTexture2DArray(i,0),u=35866}gt.pixelStorei(37440,i.flipY),gt.pixelStorei(37441,i.premultiplyAlpha),gt.pixelStorei(3317,i.unpackAlignment);const h=gt.getParameter(3314),d=gt.getParameter(32878),p=gt.getParameter(3316),f=gt.getParameter(3315),m=gt.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;gt.pixelStorei(3314,g.width),gt.pixelStorei(32878,g.height),gt.pixelStorei(3316,t.min.x),gt.pixelStorei(3315,t.min.y),gt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?gt.texSubImage3D(u,r,e.x,e.y,e.z,s,a,o,l,c,g.data):n.isCompressedArrayTexture?gt.compressedTexSubImage3D(u,r,e.x,e.y,e.z,s,a,o,l,g.data):gt.texSubImage3D(u,r,e.x,e.y,e.z,s,a,o,l,c,g),gt.pixelStorei(3314,h),gt.pixelStorei(32878,d),gt.pixelStorei(3316,p),gt.pixelStorei(3315,f),gt.pixelStorei(32877,m),0===r&&i.generateMipmaps&&gt.generateMipmap(u),q.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?K.setTextureCube(t,0):t.isData3DTexture?K.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?K.setTexture2DArray(t,0):K.setTexture2D(t,0),q.unbindTexture()},this.resetState=function(){b=0,w=0,M=null,q.reset(),ft.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(wo.prototype,{physicallyCorrectLights:{get:function(){return!this.useLegacyLights},set:function(t){this.useLegacyLights=!t}}});(class extends wo{}).prototype.isWebGL1Renderer=!0;class Mo extends Si{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return this.matrixWorldAutoUpdate}set autoUpdate(t){this.matrixWorldAutoUpdate=t}}class So{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Oe,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ge()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ge()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ge()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const To=new sn;class Ao{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)To.fromBufferAttribute(this,e),To.applyMatrix4(t),this.setXYZ(e,To.x,To.y,To.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)To.fromBufferAttribute(this,e),To.applyNormalMatrix(t),this.setXYZ(e,To.x,To.y,To.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)To.fromBufferAttribute(this,e),To.transformDirection(t),this.setXYZ(e,To.x,To.y,To.z);return this}setX(t,e){return this.normalized&&(e=Ke(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Ke(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Ke(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Ke(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ze(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ze(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ze(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ze(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ke(e,this.array),n=Ke(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ke(e,this.array),n=Ke(n,this.array),i=Ke(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ke(e,this.array),n=Ke(n,this.array),i=Ke(i,this.array),r=Ke(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new qi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ao(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Eo extends Ui{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Gi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Co;const Lo=new sn,Po=new sn,Ro=new sn,Do=new $e,Io=new $e,Oo=new Qn,No=new sn,zo=new sn,Uo=new sn,ko=new $e,Fo=new $e,Bo=new $e;class Vo extends Si{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Co){Co=new rr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new So(t,5);Co.setIndex([0,1,2,0,2,3]),Co.setAttribute("position",new Ao(e,3,0,!1)),Co.setAttribute("uv",new Ao(e,2,3,!1))}this.geometry=Co,this.material=void 0!==t?t:new Eo,this.center=new $e(.5,.5)}raycast(t,e){t.camera,Po.setFromMatrixScale(this.matrixWorld),Oo.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ro.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Po.multiplyScalar(-Ro.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Go(No.set(-.5,-.5,0),Ro,s,Po,i,r),Go(zo.set(.5,-.5,0),Ro,s,Po,i,r),Go(Uo.set(.5,.5,0),Ro,s,Po,i,r),ko.set(0,0),Fo.set(1,0),Bo.set(1,1);let a=t.ray.intersectTriangle(No,zo,Uo,!1,Lo);if(null===a&&(Go(zo.set(-.5,.5,0),Ro,s,Po,i,r),Fo.set(0,1),a=t.ray.intersectTriangle(No,Uo,zo,!1,Lo),null===a))return;const o=t.ray.origin.distanceTo(Lo);o<t.near||o>t.far||e.push({distance:o,point:Lo.clone(),uv:Ni.getUV(Lo,No,zo,Uo,ko,Fo,Bo,new $e),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Go(t,e,n,i,r,s){Do.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Io.x=s*Do.x-r*Do.y,Io.y=r*Do.x+s*Do.y):Io.copy(Do),t.copy(e),t.x+=Io.x,t.y+=Io.y,t.applyMatrix4(Oo)}const Wo=new sn,Ho=new wn,jo=new wn,Xo=new sn,qo=new Qn;class Yo extends yr{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qn,this.bindMatrixInverse=new Qn}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new wn,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}boneTransform(t,e){const n=this.skeleton,i=this.geometry;Ho.fromBufferAttribute(i.attributes.skinIndex,t),jo.fromBufferAttribute(i.attributes.skinWeight,t),Wo.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=jo.getComponent(t);if(0!==i){const r=Ho.getComponent(t);qo.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(Xo.copy(Wo).applyMatrix4(qo),i)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Zo extends Si{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ko extends bn{constructor(t=null,e=1,n=1,i,r,s,a,o,l=dt,c=dt,u,h){super(null,s,a,o,l,c,i,r,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Jo=new Qn,$o=new Qn;class Qo{constructor(t=[],e=[]){this.uuid=Ge(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Qn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Qn;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:$o;Jo.multiplyMatrices(r,e[i]),Jo.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Qo(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=qe(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ko(e,t,t,Pt,St);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){let i=e[t.bones[n]];void 0===i&&(i=new Zo),this.bones.push(i),this.boneInverses.push((new Qn).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const s=n[i];t.boneInverses.push(s.toArray())}return t}}class tl extends qi{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const el=new Qn,nl=new Qn,il=[],rl=new Qn,sl=new yr;class al extends yr{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new tl(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let t=0;t<n;t++)this.setMatrixAt(t,rl)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(sl.geometry=this.geometry,sl.material=this.material,void 0!==sl.material)for(let r=0;r<i;r++){this.getMatrixAt(r,el),nl.multiplyMatrices(n,el),sl.matrixWorld=nl,sl.raycast(t,il);for(let t=0,n=il.length;t<n;t++){const n=il[t];n.instanceId=r,n.object=this,e.push(n)}il.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new tl(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ol extends Ui{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Gi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ll=new sn,cl=new sn,ul=new Qn,hl=new $n,dl=new Hn;class pl extends Si{constructor(t=new rr,e=new ol){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)ll.fromBufferAttribute(e,t-1),cl.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=ll.distanceTo(cl);t.setAttribute("lineDistance",new Ki(n,1))}return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),dl.copy(n.boundingSphere),dl.applyMatrix4(i),dl.radius+=r,!1===t.ray.intersectsSphere(dl))return;ul.copy(i).invert(),hl.copy(t.ray).applyMatrix4(ul);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new sn,c=new sn,u=new sn,h=new sn,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,s.start),i=Math.min(p.count,s.start+s.count)-1;n<i;n+=d){const i=p.getX(n),r=p.getX(n+1);l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,r);if(hl.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const s=t.ray.origin.distanceTo(h);s<t.near||s>t.far||e.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(f.count,s.start+s.count)-1;n<i;n+=d){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(hl.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(h);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const fl=new sn,ml=new sn;class gl extends pl{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)fl.fromBufferAttribute(e,t),ml.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+fl.distanceTo(ml);t.setAttribute("lineDistance",new Ki(n,1))}return this}}class vl extends pl{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class _l extends Ui{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Gi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const yl=new Qn,xl=new $n,bl=new Hn,wl=new sn;class Ml extends Si{constructor(t=new rr,e=new _l){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bl.copy(n.boundingSphere),bl.applyMatrix4(i),bl.radius+=r,!1===t.ray.intersectsSphere(bl))return;yl.copy(i).invert(),xl.copy(t.ray).applyMatrix4(yl);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);wl.fromBufferAttribute(c,r),Sl(wl,r,o,i,t,e,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)wl.fromBufferAttribute(c,n),Sl(wl,n,o,i,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Sl(t,e,n,i,r,s,a){const o=xl.distanceSqToPoint(t);if(o<n){const n=new sn;xl.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:e,face:null,object:a})}}class Tl extends bn{constructor(t,e,n,i,r,s,a,o,l){super(t,e,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:mt,this.magFilter=void 0!==r?r:mt,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Al{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let s;s=e||t*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=e||(s.isVector2?new $e:new sn);return o.copy(a).sub(s).normalize(),o}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new sn,i=[],r=[],s=[],a=new sn,o=new Qn;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new sn)}r[0]=new sn,s[0]=new sn;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),s[e]=s[e-1].clone(),a.crossVectors(i[e-1],i[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(We(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(o.makeRotationAxis(a,t))}s[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(We(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],e*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class El extends Al{constructor(t=0,e=0,n=1,i=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(t,e){const n=e||new $e,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function Cl(){let t=0,e=0,n=0,i=0;function r(r,s,a,o){t=r,e=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(t,e,n,i,s){r(e,n,s*(n-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,s,a,o){let l=(e-t)/s-(n-t)/(s+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+o)+(i-n)/o;l*=a,c*=a,r(e,n,l,c)},calc:function(r){const s=r*r;return t+e*r+n*s+i*(s*r)}}}const Ll=new sn,Pl=new Cl,Rl=new Cl,Dl=new Cl;function Il(t,e,n,i,r){const s=.5*(i-e),a=.5*(r-n),o=t*t;return(2*n-2*i+s+a)*(t*o)+(-3*n+3*i-2*s-a)*o+s*t+n}function Ol(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Nl(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}class zl extends Al{constructor(t=new $e,e=new $e,n=new $e,i=new $e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new $e){const n=e,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(Nl(t,i.x,r.x,s.x,a.x),Nl(t,i.y,r.y,s.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ul extends Al{constructor(t=new $e,e=new $e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new $e){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new $e){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class kl extends Al{constructor(t=new $e,e=new $e,n=new $e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new $e){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(Ol(t,i.x,r.x,s.x),Ol(t,i.y,r.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Fl extends Al{constructor(t=new sn,e=new sn,n=new sn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new sn){const n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(Ol(t,i.x,r.x,s.x),Ol(t,i.y,r.y,s.y),Ol(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Bl extends Al{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new $e){const n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),a=r-s,o=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],u=i[s>i.length-3?i.length-1:s+2];return n.set(Il(a,o.x,l.x,c.x,u.x),Il(a,o.y,l.y,c.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new $e).fromArray(n))}return this}}var Vl=Object.freeze({__proto__:null,ArcCurve:class extends El{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends Al{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new sn){const n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t;let a,o,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Ll.subVectors(i[0],i[1]).add(i[0]),a=Ll);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?o=i[(l+2)%r]:(Ll.subVectors(i[r-1],i[r-2]).add(i[r-1]),o=Ll),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(o),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),Pl.initNonuniformCatmullRom(a.x,u.x,h.x,o.x,e,n,i),Rl.initNonuniformCatmullRom(a.y,u.y,h.y,o.y,e,n,i),Dl.initNonuniformCatmullRom(a.z,u.z,h.z,o.z,e,n,i)}else"catmullrom"===this.curveType&&(Pl.initCatmullRom(a.x,u.x,h.x,o.x,this.tension),Rl.initCatmullRom(a.y,u.y,h.y,o.y,this.tension),Dl.initCatmullRom(a.z,u.z,h.z,o.z,this.tension));return n.set(Pl.calc(c),Rl.calc(c),Dl.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new sn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:zl,CubicBezierCurve3:class extends Al{constructor(t=new sn,e=new sn,n=new sn,i=new sn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new sn){const n=e,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(Nl(t,i.x,r.x,s.x,a.x),Nl(t,i.y,r.y,s.y,a.y),Nl(t,i.z,r.z,s.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:El,LineCurve:Ul,LineCurve3:class extends Al{constructor(t=new sn,e=new sn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new sn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new sn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:kl,QuadraticBezierCurve3:Fl,SplineCurve:Bl});class Gl extends Al{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ul(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-t/a;return s.getPointAt(o,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,o=s.getPoints(a);for(let t=0;t<o.length;t++){const i=o[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Vl[n.type]).fromJSON(n))}return this}}class Wl extends Gl{constructor(t){super(),this.type="Path",this.currentPoint=new $e,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Ul(this.currentPoint.clone(),new $e(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new kl(this.currentPoint.clone(),new $e(t,e),new $e(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){const a=new zl(this.currentPoint.clone(),new $e(t,e),new $e(n,i),new $e(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Bl(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+a,e+o,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,a,o),this}absellipse(t,e,n,i,r,s,a,o){const l=new El(t,e,n,i,r,s,a,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Hl extends rr{constructor(t=1,e=1,n=1,i=32,r=1,s=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const r=p,s=new $e,f=new sn;let v=0;const _=!0===n?t:e,y=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,m*y,0),h.push(0,y,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=i;t++){const e=t/i*o+a,n=Math.cos(e),r=Math.sin(e);f.x=_*r,f.y=m*y,f.z=_*n,u.push(f.x,f.y,f.z),h.push(0,y,0),s.x=.5*n+.5,s.y=.5*r*y+.5,d.push(s.x,s.y),p++}for(let t=0;t<i;t++){const e=r+t,i=x+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new sn,v=new sn;let _=0;const y=(e-t)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,_=g*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*o+a,l=Math.sin(r),f=Math.cos(r);v.x=_*l,v.y=-g*n+m,v.z=_*f,u.push(v.x,v.y,v.z),s.set(l,y,f).normalize(),h.push(s.x,s.y,s.z),d.push(e,1-g),c.push(p++)}f.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=f[e][t],i=f[e+1][t],r=f[e+1][t+1],s=f[e][t+1];c.push(n,i,s),c.push(i,r,s),_+=6}l.addGroup(g,_,0),g+=_}(),!1===s&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Ki(u,3)),this.setAttribute("normal",new Ki(h,3)),this.setAttribute("uv",new Ki(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Hl(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class jl extends Wl{constructor(t){super(t),this.uuid=Ge(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new Wl).fromJSON(n))}return this}}const Xl=function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=ql(t,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,d,p;if(i&&(s=function(t,e,n,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:t.length,c=ql(t,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(rc(c));for(r.sort(tc),s=0;s<r.length;s++)n=ec(r[s],n);return n}(t,e,s,n)),t.length>80*n){o=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)h=t[e],d=t[e+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return Zl(s,a,n,o,l,p,0),a};function ql(t,e,n,i,r){let s,a;if(r===function(t,e,n,i){let r=0;for(let s=e,a=n-i;s<n;s+=i)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}(t,e,n,i)>0)for(s=e;s<n;s+=i)a=fc(s,t[s],t[s+1],a);else for(s=n-i;s>=e;s-=i)a=fc(s,t[s],t[s+1],a);return a&&lc(a,a.next)&&(mc(a),a=a.next),a}function Yl(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!lc(i,i.next)&&0!==oc(i.prev,i,i.next))i=i.next;else{if(mc(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Zl(t,e,n,i,r,s,a){if(!t)return;!a&&s&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=ic(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,s,a,o,l,c=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,i=n,o=0,e=0;e<c&&(o++,i=i.nextZ,i);e++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,s);let o,l,c=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,s?Jl(t,i,r,s):Kl(t))e.push(o.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),mc(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Zl(t=$l(Yl(t),e,n),e,n,i,r,s,2):2===a&&Ql(t,e,n,i,r,s):Zl(Yl(t),e,n,i,r,s,1);break}}function Kl(t){const e=t.prev,n=t,i=t.next;if(oc(e,n,i)>=0)return!1;const r=e.x,s=n.x,a=i.x,o=e.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,d=r>s?r>a?r:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let f=i.next;for(;f!==e;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&sc(r,o,s,l,a,c,f.x,f.y)&&oc(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Jl(t,e,n,i){const r=t.prev,s=t,a=t.next;if(oc(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,p=o<l?o<c?o:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=ic(p,f,e,n,i),_=ic(m,g,e,n,i);let y=t.prevZ,x=t.nextZ;for(;y&&y.z>=v&&x&&x.z<=_;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==a&&sc(o,u,l,h,c,d,y.x,y.y)&&oc(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&sc(o,u,l,h,c,d,x.x,x.y)&&oc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==a&&sc(o,u,l,h,c,d,y.x,y.y)&&oc(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=_;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==r&&x!==a&&sc(o,u,l,h,c,d,x.x,x.y)&&oc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function $l(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!lc(r,s)&&cc(r,i,i.next,s)&&dc(r,s)&&dc(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),mc(i),mc(i.next),i=t=s),i=i.next}while(i!==t);return Yl(i)}function Ql(t,e,n,i,r,s){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&ac(a,t)){let o=pc(a,t);return a=Yl(a,a.next),o=Yl(o,o.next),Zl(a,e,n,i,r,s,0),void Zl(o,e,n,i,r,s,0)}t=t.next}a=a.next}while(a!==t)}function tc(t,e){return t.x-e.x}function ec(t,e){const n=function(t,e){let n,i=e,r=-1/0;const s=t.x,a=t.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const t=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=s&&t>r&&(r=t,n=i.x<i.next.x?i:i.next,t===s))return n}i=i.next}while(i!==e);if(!n)return null;const o=n,l=n.x,c=n.y;let u,h=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&sc(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(s-i.x),dc(i,t)&&(u<h||u===h&&(i.x>n.x||i.x===n.x&&nc(n,i)))&&(n=i,h=u)),i=i.next}while(i!==o);return n}(t,e);if(!n)return e;const i=pc(n,t);return Yl(i,i.next),Yl(n,n.next)}function nc(t,e){return oc(t.prev,t,e.prev)<0&&oc(e.next,t,t.next)<0}function ic(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function rc(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function sc(t,e,n,i,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(i-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function ac(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&cc(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(dc(t,e)&&dc(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(oc(t.prev,t,e.prev)||oc(t,e.prev,e))||lc(t,e)&&oc(t.prev,t,t.next)>0&&oc(e.prev,e,e.next)>0)}function oc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lc(t,e){return t.x===e.x&&t.y===e.y}function cc(t,e,n,i){const r=hc(oc(t,e,n)),s=hc(oc(t,e,i)),a=hc(oc(n,i,t)),o=hc(oc(n,i,e));return r!==s&&a!==o||(!(0!==r||!uc(t,n,e))||(!(0!==s||!uc(t,i,e))||(!(0!==a||!uc(n,t,i))||!(0!==o||!uc(n,e,i)))))}function uc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function hc(t){return t>0?1:t<0?-1:0}function dc(t,e){return oc(t.prev,t,t.next)<0?oc(t,e,t.next)>=0&&oc(t,t.prev,e)>=0:oc(t,e,t.prev)<0||oc(t,t.next,e)<0}function pc(t,e){const n=new gc(t.i,t.x,t.y),i=new gc(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function fc(t,e,n,i){const r=new gc(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function mc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class vc{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return vc.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];_c(t),yc(n,t);let s=t.length;e.forEach(_c);for(let t=0;t<e.length;t++)i.push(s),s+=e[t].length,yc(n,e[t]);const a=Xl(n,i);for(let t=0;t<a.length;t+=3)r.push(a.slice(t,t+3));return r}}function _c(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function yc(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class xc extends rr{constructor(t=new jl([new $e(0,.5),new $e(-.5,-.5),new $e(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(a,o,e),a+=o,o=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===vc.isClockWise(c)&&(c=c.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===vc.isClockWise(e)&&(u[t]=e.reverse())}const h=vc.triangulateShape(c,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],i=e[0]+a,r=e[1]+a,s=e[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new Ki(i,3)),this.setAttribute("normal",new Ki(r,3)),this.setAttribute("uv",new Ki(s,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new xc(n,t.curveSegments)}}class bc extends rr{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new sn,h=new sn,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let _=0;0==d&&0==s?_=.5/e:d==n&&o==Math.PI&&(_=-.5/e);for(let n=0;n<=e;n++){const o=n/e;u.x=-t*Math.cos(i+o*r)*Math.sin(s+v*a),u.y=t*Math.cos(s+v*a),u.z=t*Math.sin(i+o*r)*Math.sin(s+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(o+_,1-v),g.push(l++)}c.push(g)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=c[t][i+1],r=c[t][i],a=c[t+1][i],l=c[t+1][i+1];(0!==t||s>0)&&d.push(e,r,l),(t!==n-1||o<Math.PI)&&d.push(r,a,l)}this.setIndex(d),this.setAttribute("position",new Ki(p,3)),this.setAttribute("normal",new Ki(f,3)),this.setAttribute("uv",new Ki(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new bc(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class wc extends rr{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new sn,r=new sn;if(null!==t.index){const s=t.attributes.position,a=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,l=o.length;t<l;++t){const l=o[t],c=l.start;for(let t=c,o=c+l.count;t<o;t+=3)for(let o=0;o<3;o++){const l=a.getX(t+o),c=a.getX(t+(o+1)%3);i.fromBufferAttribute(s,l),r.fromBufferAttribute(s,c),!0===Mc(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const s=t.attributes.position;for(let t=0,a=s.count/3;t<a;t++)for(let a=0;a<3;a++){const o=3*t+a,l=3*t+(a+1)%3;i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,l),!0===Mc(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Ki(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function Mc(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}class Sc extends Ui{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Gi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Tc extends Sc{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return We(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Gi(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Gi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Gi(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class Ac extends Ui{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Gi(16777215),this.specular=new Gi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Ec extends Ui{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Gi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Z,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Cc(t,e,n){return Pc(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Lc(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Pc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Rc(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n}function Dc(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r}function Ic(t,e,n,i){let r=1,s=t[0];for(;void 0!==s&&void 0===s[i];)s=t[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(e.push(s.time),n.push.apply(n,a)),s=t[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(e.push(s.time),a.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(e.push(s.time),n.push(a)),s=t[r++]}while(void 0!==s)}class Oc{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let s;n:{i:if(!(t<i)){for(let s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}s=e.length;break n}if(t>=r)break t;{const a=e[1];t<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}s=n,n=0}}for(;n<s;){const i=n+s>>>1;t<e[i]?s=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Nc extends Oc{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ye,endingEnd:ye}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,s=t+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case xe:r=t,a=2*e-n;break;case be:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case xe:s=t,o=2*n-e;break;case be:s=1,o=n+i[1]-i[0];break;default:s=t-1,o=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,_=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let t=0;t!==a;++t)r[t]=g*s[c+t]+v*s[l+t]+_*s[o+t]+y*s[u+t];return r}}class zc extends Oc{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,l=o-a,c=(n-e)/(i-e),u=1-c;for(let t=0;t!==a;++t)r[t]=s[l+t]*u+s[o+t]*c;return r}}class Uc extends Oc{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class kc{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Lc(e,this.TimeBufferType),this.values=Lc(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Lc(t.times,Array),values:Lc(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Uc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new zc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Nc(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ge:e=this.InterpolantFactoryMethodDiscrete;break;case ve:e=this.InterpolantFactoryMethodLinear;break;case _e:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ge;case this.InterpolantFactoryMethodLinear:return ve;case this.InterpolantFactoryMethodSmooth:return _e}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const t=this.getValueSize();this.times=Cc(n,r,s),this.values=Cc(this.values,r*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(t=!1);let s=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){t=!1;break}if(null!==s&&s>i){t=!1;break}s=i}if(void 0!==i&&Pc(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){t=!1;break}}return t}optimize(){const t=Cc(this.times),e=Cc(this.values),n=this.getValueSize(),i=this.getInterpolation()===_e,r=t.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=t[a];if(o!==t[a+1]&&(1!==a||o!==t[0]))if(i)r=!0;else{const t=a*n,i=t-n,s=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[s+a]){r=!0;break}}}if(r){if(a!==s){t[s]=t[a];const i=a*n,r=s*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++s}}if(r>0){t[s]=t[r];for(let t=r*n,i=s*n,a=0;a!==n;++a)e[i+a]=e[t+a];++s}return s!==t.length?(this.times=Cc(t,0,s),this.values=Cc(e,0,s*n)):(this.times=t,this.values=e),this}clone(){const t=Cc(this.times,0),e=Cc(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}kc.prototype.TimeBufferType=Float32Array,kc.prototype.ValueBufferType=Float32Array,kc.prototype.DefaultInterpolation=ve;class Fc extends kc{}Fc.prototype.ValueTypeName="bool",Fc.prototype.ValueBufferType=Array,Fc.prototype.DefaultInterpolation=ge,Fc.prototype.InterpolantFactoryMethodLinear=void 0,Fc.prototype.InterpolantFactoryMethodSmooth=void 0;class Bc extends kc{}Bc.prototype.ValueTypeName="color";class Vc extends kc{}Vc.prototype.ValueTypeName="number";class Gc extends Oc{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-e)/(i-e);let l=t*a;for(let t=l+a;l!==t;l+=4)rn.slerpFlat(r,0,s,l-a,s,l,o);return r}}class Wc extends kc{InterpolantFactoryMethodLinear(t){return new Gc(this.times,this.values,this.getValueSize(),t)}}Wc.prototype.ValueTypeName="quaternion",Wc.prototype.DefaultInterpolation=ve,Wc.prototype.InterpolantFactoryMethodSmooth=void 0;class Hc extends kc{}Hc.prototype.ValueTypeName="string",Hc.prototype.ValueBufferType=Array,Hc.prototype.DefaultInterpolation=ge,Hc.prototype.InterpolantFactoryMethodLinear=void 0,Hc.prototype.InterpolantFactoryMethodSmooth=void 0;class jc extends kc{}jc.prototype.ValueTypeName="vector";class Xc{constructor(t,e=-1,n,i=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=Ge(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(qc(n[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(kc.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,s=[];for(let t=0;t<r;t++){let a=[],o=[];a.push((t+r-1)%r,t,(t+1)%r),o.push(0,1,0);const l=Rc(a);a=Dc(a,1,l),o=Dc(o,1,l),i||0!==a[0]||(a.push(r),o.push(o[0])),s.push(new Vc(".morphTargetInfluences["+e[t].name+"]",a,o).scale(1/n))}return new this(t,-1,s)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],s=n.name.match(r);if(s&&s.length>1){const t=s[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const s=[];for(const t in i)s.push(this.CreateFromMorphTargetSequence(t,i[t],e,n));return s}static parseAnimation(t,e){if(!t)return null;const n=function(t,e,n,i,r){if(0!==n.length){const s=[],a=[];Ic(n,s,a,i),0!==s.length&&r.push(new t(e,s,a))}},i=[],r=t.name||"default",s=t.fps||30,a=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],s=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),s.push(i.morphTarget===n?1:0)}i.push(new Vc(".morphTargetInfluence["+n+"]",t,s))}o=t.length*s}else{const s=".bones["+e[t].name+"]";n(jc,s+".position",r,"pos",i),n(Wc,s+".quaternion",r,"rot",i),n(jc,s+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vc;case"vector":case"vector2":case"vector3":case"vector4":return jc;case"color":return Bc;case"quaternion":return Wc;case"bool":case"boolean":return Fc;case"string":return Hc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Ic(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Yc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Zc{constructor(t,e,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===s&&void 0!==i.onStart&&i.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Kc=new Zc;class Jc{constructor(t){this.manager=void 0!==t?t:Kc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const $c={};class Qc extends Error{constructor(t,e){super(t),this.response=e}}class tu extends Jc{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Yc.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==$c[t])return void $c[t].push({onLoad:e,onProgress:n,onError:i});$c[t]=[],$c[t].push({onLoad:e,onProgress:n,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((e=>{if(200===e.status||0===e.status){if(e.status,"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=$c[t],i=e.body.getReader(),r=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(t){!function e(){i.read().then((({done:i,value:r})=>{if(i)t.close();else{o+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}}))}()}});return new Response(l)}throw new Qc(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{Yc.add(t,e);const n=$c[t];delete $c[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}})).catch((e=>{const n=$c[t];if(void 0===n)throw this.manager.itemError(t),e;delete $c[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class eu extends Jc{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Yc.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const a=nn("img");function o(){c(),Yc.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}class nu extends Jc{constructor(t){super(t)}load(t,e,n,i){const r=new bn,s=new eu(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class iu extends Si{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Gi(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const ru=new Qn,su=new sn,au=new sn;class ou{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $e(512,512),this.map=null,this.mapPass=null,this.matrix=new Qn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Fr,this._frameExtents=new $e(1,1),this._viewportCount=1,this._viewports=[new wn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;su.setFromMatrixPosition(t.matrixWorld),e.position.copy(su),au.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(au),e.updateMatrixWorld(),ru.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ru),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ru)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class lu extends ou{constructor(){super(new Cr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*Ve*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class cu extends iu{constructor(t,e,n=0,i=Math.PI/3,r=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Si.DEFAULT_UP),this.updateMatrix(),this.target=new Si,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new lu}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const uu=new Qn,hu=new sn,du=new sn;class pu extends ou{constructor(){super(new Cr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $e(4,2),this._viewportCount=6,this._viewports=[new wn(2,1,1,1),new wn(0,1,1,1),new wn(3,1,1,1),new wn(1,1,1,1),new wn(3,0,1,1),new wn(1,0,1,1)],this._cubeDirections=[new sn(1,0,0),new sn(-1,0,0),new sn(0,0,1),new sn(0,0,-1),new sn(0,1,0),new sn(0,-1,0)],this._cubeUps=[new sn(0,1,0),new sn(0,1,0),new sn(0,1,0),new sn(0,1,0),new sn(0,0,1),new sn(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),hu.setFromMatrixPosition(t.matrixWorld),n.position.copy(hu),du.copy(n.position),du.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(du),n.updateMatrixWorld(),i.makeTranslation(-hu.x,-hu.y,-hu.z),uu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uu)}}class fu extends iu{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new pu}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class mu extends ou{constructor(){super(new Qr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gu extends iu{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Si.DEFAULT_UP),this.updateMatrix(),this.target=new Si,this.shadow=new mu}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class vu extends iu{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class _u{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class yu extends rr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class xu extends Jc{constructor(t){super(t),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,s=Yc.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout((function(){e&&e(s),r.manager.itemEnd(t)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Yc.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}class bu{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=wu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=wu();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function wu(){return("undefined"==typeof performance?Date:performance).now()}const Mu="\\[\\]\\.:\\/",Su=new RegExp("["+Mu+"]","g"),Tu="[^"+Mu+"]",Au="[^"+Mu.replace("\\.","")+"]",Eu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Tu)+/(WCOD+)?/.source.replace("WCOD",Au)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Tu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Tu)+"$"),Cu=["material","materials","bones","map"];class Lu{constructor(t,e,n){this.path=e,this.parsedPath=n||Lu.parseTrackName(e),this.node=Lu.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Lu.Composite(t,e,n):new Lu(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Su,"")}static parseTrackName(t){const e=Eu.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==Cu.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const s=n(r.children);if(s)return s}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=Lu.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return;if(!t.material.map)return;t=t.material.map;break;default:if(void 0===t[n])return;t=t[n]}if(void 0!==i){if(void 0===t[i])return;t=t[i]}}const s=t[i];if(void 0===s){e.nodeName;return}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Lu.Composite=class{constructor(t,e,n){const i=n||Lu.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Lu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Lu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Lu.prototype.GetterByBindingType=[Lu.prototype._getValue_direct,Lu.prototype._getValue_array,Lu.prototype._getValue_arrayElement,Lu.prototype._getValue_toArray],Lu.prototype.SetterByBindingTypeAndVersioning=[[Lu.prototype._setValue_direct,Lu.prototype._setValue_direct_setNeedsUpdate,Lu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lu.prototype._setValue_array,Lu.prototype._setValue_array_setNeedsUpdate,Lu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lu.prototype._setValue_arrayElement,Lu.prototype._setValue_arrayElement_setNeedsUpdate,Lu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lu.prototype._setValue_fromArray,Lu.prototype._setValue_fromArray_setNeedsUpdate,Lu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class Pu extends So{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class Ru{constructor(t,e,n=0,i=1/0){this.ray=new $n(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new ui,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)}intersectObject(t,e=!0,n=[]){return Iu(t,this,n,e),n.sort(Du),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)Iu(t[i],this,n,e);return n.sort(Du),n}}function Du(t,e){return t.distance-e.distance}function Iu(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)Iu(i[t],e,n,!0)}}class Ou{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(We(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Nu=new sn,zu=new sn;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:a}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=a));const Uu=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const ku=Math.PI/180;Math.PI;function Fu(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Uu[255&t]+Uu[t>>8&255]+Uu[t>>16&255]+Uu[t>>24&255]+"-"+Uu[255&e]+Uu[e>>8&255]+"-"+Uu[e>>16&15|64]+Uu[e>>24&255]+"-"+Uu[63&n|128]+Uu[n>>8&255]+"-"+Uu[n>>16&255]+Uu[n>>24&255]+Uu[255&i]+Uu[i>>8&255]+Uu[i>>16&255]+Uu[i>>24&255]).toLowerCase()}function Bu(t){return t*ku}var Vu=n.p+"img/circle-point.85763c49.png",Gu=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(Gu(""))}catch(t){Gu=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)},function(t){return new Worker(t,{type:"module"})}}var Wu=Uint8Array,Hu=Uint16Array,ju=Uint32Array,Xu=new Wu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qu=new Wu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Yu=new Wu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zu=function(t,e){for(var n=new Hu(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new ju(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},Ku=Zu(Xu,2),Ju=Ku[0],$u=Ku[1];Ju[28]=258,$u[258]=28;for(var Qu=Zu(qu,0),th=Qu[0],eh=(Qu[1],new Hu(32768)),nh=0;nh<32768;++nh){var ih=(43690&nh)>>>1|(21845&nh)<<1;ih=(61680&(ih=(52428&ih)>>>2|(13107&ih)<<2))>>>4|(3855&ih)<<4,eh[nh]=((65280&ih)>>>8|(255&ih)<<8)>>>1}var rh=function(t,e,n){for(var i=t.length,r=0,s=new Hu(e);r<i;++r)++s[t[r]-1];var a,o=new Hu(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;if(n){a=new Hu(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],h=o[t[r]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[eh[h]>>>l]=c}else for(a=new Hu(i),r=0;r<i;++r)t[r]&&(a[r]=eh[o[t[r]-1]++]>>>15-t[r]);return a},sh=new Wu(288);for(nh=0;nh<144;++nh)sh[nh]=8;for(nh=144;nh<256;++nh)sh[nh]=9;for(nh=256;nh<280;++nh)sh[nh]=7;for(nh=280;nh<288;++nh)sh[nh]=8;var ah=new Wu(32);for(nh=0;nh<32;++nh)ah[nh]=5;var oh=rh(sh,9,1),lh=rh(ah,5,1),ch=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},uh=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&n},hh=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},dh=function(t){return(t/8|0)+(7&t&&1)},ph=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var i=new(t instanceof Hu?Hu:t instanceof ju?ju:Wu)(n-e);return i.set(t.subarray(e,n)),i},fh=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new Wu(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new Wu(3*i));var a=function(t){var n=e.length;if(t>n){var i=new Wu(Math.max(2*n,t));i.set(e),e=i}},o=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,d=n.m,p=n.n,f=8*i;do{if(!u){n.f=o=uh(t,l,1);var m=uh(t,l+1,3);if(l+=3,!m){var g=t[(E=dh(l)+4)-4]|t[E-3]<<8,v=E+g;if(v>i){if(s)throw"unexpected EOF";break}r&&a(c+g),e.set(t.subarray(E,v),c),n.b=c+=g,n.p=l=8*v;continue}if(1==m)u=oh,h=lh,d=9,p=5;else{if(2!=m)throw"invalid block type";var _=uh(t,l,31)+257,y=uh(t,l+10,15)+4,x=_+uh(t,l+5,31)+1;l+=14;for(var b=new Wu(x),w=new Wu(19),M=0;M<y;++M)w[Yu[M]]=uh(t,l+3*M,7);l+=3*y;var S=ch(w),T=(1<<S)-1,A=rh(w,S,1);for(M=0;M<x;){var E,C=A[uh(t,l,T)];if(l+=15&C,(E=C>>>4)<16)b[M++]=E;else{var L=0,P=0;for(16==E?(P=3+uh(t,l,3),l+=2,L=b[M-1]):17==E?(P=3+uh(t,l,7),l+=3):18==E&&(P=11+uh(t,l,127),l+=7);P--;)b[M++]=L}}var R=b.subarray(0,_),D=b.subarray(_);d=ch(R),p=ch(D),u=rh(R,d,1),h=rh(D,p,1)}if(l>f){if(s)throw"unexpected EOF";break}}r&&a(c+131072);for(var I=(1<<d)-1,O=(1<<p)-1,N=l;;N=l){var z=(L=u[hh(t,l)&I])>>>4;if((l+=15&L)>f){if(s)throw"unexpected EOF";break}if(!L)throw"invalid length/literal";if(z<256)e[c++]=z;else{if(256==z){N=l,u=null;break}var U=z-254;if(z>264){var k=Xu[M=z-257];U=uh(t,l,(1<<k)-1)+Ju[M],l+=k}var F=h[hh(t,l)&O],B=F>>>4;if(!F)throw"invalid distance";l+=15&F;D=th[B];if(B>3){k=qu[B];D+=hh(t,l)&(1<<k)-1,l+=k}if(l>f){if(s)throw"unexpected EOF";break}r&&a(c+131072);for(var V=c+U;c<V;c+=4)e[c]=e[c-D],e[c+1]=e[c+1-D],e[c+2]=e[c+2-D],e[c+3]=e[c+3-D];c=V}}n.l=u,n.p=N,n.b=c,u&&(o=1,n.m=d,n.d=h,n.n=p)}while(!o);return c==e.length?e:ph(e,0,c)},mh=new Wu(0),gh=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function vh(t,e){return fh((gh(t),t.subarray(2,-4)),e)}var _h="undefined"!=typeof TextDecoder&&new TextDecoder;try{_h.decode(mh,{stream:!0}),1}catch(t){}function yh(t,e,n){const i=n.length-t-1;if(e>=n[i])return i-1;if(e<=n[t])return t;let r=t,s=i,a=Math.floor((r+s)/2);for(;e<n[a]||e>=n[a+1];)e<n[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function xh(t,e,n,i){const r=[],s=[],a=[];r[0]=1;for(let o=1;o<=n;++o){s[o]=e-i[t+1-o],a[o]=i[t+o]-e;let n=0;for(let t=0;t<o;++t){const e=a[t+1],i=s[o-t],l=r[t]/(e+i);r[t]=n+e*l,n=i*l}r[o]=n}return r}function bh(t,e){let n=1;for(let e=2;e<=t;++e)n*=e;let i=1;for(let t=2;t<=e;++t)i*=t;for(let n=2;n<=t-e;++n)i*=n;return n/i}function wh(t,e,n,i,r){const s=function(t,e,n,i,r){const s=r<t?r:t,a=[],o=yh(t,i,e),l=function(t,e,n,i,r){const s=[];for(let t=0;t<=n;++t)s[t]=0;const a=[];for(let t=0;t<=i;++t)a[t]=s.slice(0);const o=[];for(let t=0;t<=n;++t)o[t]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let i=1;i<=n;++i){l[i]=e-r[t+1-i],c[i]=r[t+i]-e;let n=0;for(let t=0;t<i;++t){const e=c[t+1],r=l[i-t];o[i][t]=e+r;const s=o[t][i-1]/o[i][t];o[t][i]=n+e*s,n=r*s}o[i][i]=n}for(let t=0;t<=n;++t)a[0][t]=o[t][n];for(let t=0;t<=n;++t){let e=0,r=1;const l=[];for(let t=0;t<=n;++t)l[t]=s.slice(0);l[0][0]=1;for(let s=1;s<=i;++s){let i=0;const c=t-s,u=n-s;t>=s&&(l[r][0]=l[e][0]/o[u+1][c],i=l[r][0]*o[c][u]);const h=t-1<=u?s-1:n-t;for(let t=c>=-1?1:-c;t<=h;++t)l[r][t]=(l[e][t]-l[e][t-1])/o[u+1][c+t],i+=l[r][t]*o[c+t][u];t<=u&&(l[r][s]=-l[e][s-1]/o[u+1][t],i+=l[r][s]*o[t][u]),a[s][t]=i;const d=e;e=r,r=d}}let u=n;for(let t=1;t<=i;++t){for(let e=0;e<=n;++e)a[t][e]*=u;u*=n-t}return a}(o,i,t,s,e),c=[];for(let t=0;t<n.length;++t){const e=n[t].clone(),i=e.w;e.x*=i,e.y*=i,e.z*=i,c[t]=e}for(let e=0;e<=s;++e){const n=c[o-t].clone().multiplyScalar(l[e][0]);for(let i=1;i<=t;++i)n.add(c[o-t+i].clone().multiplyScalar(l[e][i]));a[e]=n}for(let t=s+1;t<=r+1;++t)a[t]=new wn(0,0,0);return a}(t,e,n,i,r);return function(t){const e=t.length,n=[],i=[];for(let r=0;r<e;++r){const e=t[r];n[r]=new sn(e.x,e.y,e.z),i[r]=e.w}const r=[];for(let t=0;t<e;++t){const e=n[t].clone();for(let n=1;n<=t;++n)e.sub(r[t-n].clone().multiplyScalar(bh(t,n)*i[n]));r[t]=e.divideScalar(i[0])}return r}(s)}class Mh extends Al{constructor(t,e,n,i,r){super(),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=i||0,this.endKnot=r||this.knots.length-1;for(let t=0;t<n.length;++t){const e=n[t];this.controlPoints[t]=new wn(e.x,e.y,e.z,e.w)}}getPoint(t,e=new sn){const n=e,i=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(t,e,n,i){const r=yh(t,i,e),s=xh(r,i,t,e),a=new wn(0,0,0,0);for(let e=0;e<=t;++e){const i=n[r-t+e],o=s[e],l=i.w*o;a.x+=i.x*l,a.y+=i.y*l,a.z+=i.z*l,a.w+=i.w*o}return a}(this.degree,this.knots,this.controlPoints,i);return 1!==r.w&&r.divideScalar(r.w),n.set(r.x,r.y,r.z)}getTangent(t,e=new sn){const n=e,i=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),r=wh(this.degree,this.knots,this.controlPoints,i,1);return n.copy(r[1]).normalize(),n}}let Sh,Th,Ah;class Eh extends Jc{constructor(t){super(t)}load(t,e,n,i){const r=this,s=""===r.path?_u.extractUrlBase(t):r.path,a=new tu(this.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(n){try{e(r.parse(n,s))}catch(e){i&&i(e),r.manager.itemError(t)}}),n,i)}parse(t,e){if(function(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===Hh(t,0,e.length)}(t))Sh=(new Dh).parse(t);else{const e=Hh(t);if(!function(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(e){const i=t[e-1];return t=t.slice(n+e),n++,i}for(let t=0;t<e.length;++t){if(i(1)===e[t])return!1}return!0}(e))throw new Error("THREE.FBXLoader: Unknown format.");if(Nh(e)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Nh(e));Sh=(new Rh).parse(e)}const n=new nu(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);return new Ch(n,this.manager).parse(Sh)}}class Ch{constructor(t,e){this.textureLoader=t,this.manager=e}parse(){Th=this.parseConnections();const t=this.parseImages(),e=this.parseTextures(t),n=this.parseMaterials(e),i=this.parseDeformers(),r=(new Lh).parse(i);return this.parseScene(i,r,n),Ah}parseConnections(){const t=new Map;if("Connections"in Sh){Sh.Connections.connections.forEach((function(e){const n=e[0],i=e[1],r=e[2];t.has(n)||t.set(n,{parents:[],children:[]});const s={ID:i,relationship:r};t.get(n).parents.push(s),t.has(i)||t.set(i,{parents:[],children:[]});const a={ID:n,relationship:r};t.get(i).children.push(a)}))}return t}parseImages(){const t={},e={};if("Video"in Sh.Objects){const n=Sh.Objects.Video;for(const i in n){const r=n[i];if(t[parseInt(i)]=r.RelativeFilename||r.Filename,"Content"in r){const t=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,s="string"==typeof r.Content&&""!==r.Content;if(t||s){const t=this.parseImage(n[i]);e[r.RelativeFilename||r.Filename]=t}}}}for(const n in t){const i=t[n];void 0!==e[i]?t[n]=e[i]:t[n]=t[n].split("\\").pop()}return t}parseImage(t){const e=t.Content,n=t.RelativeFilename||t.Filename;let i;switch(n.slice(n.lastIndexOf(".")+1).toLowerCase()){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":this.manager.getHandler(".tga"),i="image/tga";break;default:return}if("string"==typeof e)return"data:"+i+";base64,"+e;{const t=new Uint8Array(e);return window.URL.createObjectURL(new Blob([t],{type:i}))}}parseTextures(t){const e=new Map;if("Texture"in Sh.Objects){const n=Sh.Objects.Texture;for(const i in n){const r=this.parseTexture(n[i],t);e.set(parseInt(i),r)}}return e}parseTexture(t,e){const n=this.loadTexture(t,e);n.ID=t.id,n.name=t.attrName;const i=t.WrapModeU,r=t.WrapModeV,s=void 0!==i?i.value:0,a=void 0!==r?r.value:0;if(n.wrapS=0===s?ct:ut,n.wrapT=0===a?ct:ut,"Scaling"in t){const e=t.Scaling.value;n.repeat.x=e[0],n.repeat.y=e[1]}if("Translation"in t){const e=t.Translation.value;n.offset.x=e[0],n.offset.y=e[1]}return n}loadTexture(t,e){let n;const i=this.textureLoader.path,r=Th.get(t.id).children;let s;void 0!==r&&r.length>0&&void 0!==e[r[0].ID]&&(n=e[r[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const a=t.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?s=new bn:(t.setPath(this.textureLoader.path),s=t.load(n))}else s="psd"===a?new bn:this.textureLoader.load(n);return this.textureLoader.setPath(i),s}parseMaterials(t){const e=new Map;if("Material"in Sh.Objects){const n=Sh.Objects.Material;for(const i in n){const r=this.parseMaterial(n[i],t);null!==r&&e.set(parseInt(i),r)}}return e}parseMaterial(t,e){const n=t.id,i=t.attrName;let r=t.ShadingModel;if("object"==typeof r&&(r=r.value),!Th.has(n))return null;const s=this.parseParameters(t,e,n);let a;switch(r.toLowerCase()){case"phong":default:a=new Ac;break;case"lambert":a=new Ec}return a.setValues(s),a.name=i,a}parseParameters(t,e,n){const i={};t.BumpFactor&&(i.bumpScale=t.BumpFactor.value),t.Diffuse?i.color=(new Gi).fromArray(t.Diffuse.value):!t.DiffuseColor||"Color"!==t.DiffuseColor.type&&"ColorRGB"!==t.DiffuseColor.type||(i.color=(new Gi).fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(i.displacementScale=t.DisplacementFactor.value),t.Emissive?i.emissive=(new Gi).fromArray(t.Emissive.value):!t.EmissiveColor||"Color"!==t.EmissiveColor.type&&"ColorRGB"!==t.EmissiveColor.type||(i.emissive=(new Gi).fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(i.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(i.opacity=parseFloat(t.Opacity.value)),i.opacity<1&&(i.transparent=!0),t.ReflectionFactor&&(i.reflectivity=t.ReflectionFactor.value),t.Shininess&&(i.shininess=t.Shininess.value),t.Specular?i.specular=(new Gi).fromArray(t.Specular.value):t.SpecularColor&&"Color"===t.SpecularColor.type&&(i.specular=(new Gi).fromArray(t.SpecularColor.value));const r=this;return Th.get(n).children.forEach((function(t){switch(t.relationship){case"Bump":i.bumpMap=r.getTexture(e,t.ID);break;case"Maya|TEX_ao_map":i.aoMap=r.getTexture(e,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=r.getTexture(e,t.ID),void 0!==i.map&&(i.map.encoding=Ae);break;case"DisplacementColor":i.displacementMap=r.getTexture(e,t.ID);break;case"EmissiveColor":i.emissiveMap=r.getTexture(e,t.ID),void 0!==i.emissiveMap&&(i.emissiveMap.encoding=Ae);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=r.getTexture(e,t.ID);break;case"ReflectionColor":i.envMap=r.getTexture(e,t.ID),void 0!==i.envMap&&(i.envMap.mapping=at,i.envMap.encoding=Ae);break;case"SpecularColor":i.specularMap=r.getTexture(e,t.ID),void 0!==i.specularMap&&(i.specularMap.encoding=Ae);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=r.getTexture(e,t.ID),i.transparent=!0}})),i}getTexture(t,e){return"LayeredTexture"in Sh.Objects&&e in Sh.Objects.LayeredTexture&&(e=Th.get(e).children[0].ID),t.get(e)}parseDeformers(){const t={},e={};if("Deformer"in Sh.Objects){const n=Sh.Objects.Deformer;for(const i in n){const r=n[i],s=Th.get(parseInt(i));if("Skin"===r.attrType){const e=this.parseSkeleton(s,n);e.ID=i,s.parents.length,e.geometryID=s.parents[0].ID,t[i]=e}else if("BlendShape"===r.attrType){const t={id:i};t.rawTargets=this.parseMorphTargets(s,n),t.id=i,s.parents.length,e[i]=t}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){const n=[];return t.children.forEach((function(t){const i=e[t.ID];if("Cluster"!==i.attrType)return;const r={ID:t.ID,indices:[],weights:[],transformLink:(new Qn).fromArray(i.TransformLink.a)};"Indexes"in i&&(r.indices=i.Indexes.a,r.weights=i.Weights.a),n.push(r)})),{rawBones:n,bones:[]}}parseMorphTargets(t,e){const n=[];for(let i=0;i<t.children.length;i++){const r=t.children[i],s=e[r.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;a.geoID=Th.get(parseInt(r.ID)).children.filter((function(t){return void 0===t.relationship}))[0].ID,n.push(a)}return n}parseScene(t,e,n){Ah=new mo;const i=this.parseModels(t.skeletons,e,n),r=Sh.Objects.Model,s=this;i.forEach((function(t){const e=r[t.ID];s.setLookAtProperties(t,e);Th.get(t.ID).parents.forEach((function(e){const n=i.get(e.ID);void 0!==n&&n.add(t)})),null===t.parent&&Ah.add(t)})),this.bindSkeleton(t.skeletons,e,i),this.createAmbientLight(),Ah.traverse((function(t){if(t.userData.transformData){t.parent&&(t.userData.transformData.parentMatrix=t.parent.matrix,t.userData.transformData.parentMatrixWorld=t.parent.matrixWorld);const e=Vh(t.userData.transformData);t.applyMatrix4(e),t.updateWorldMatrix()}}));const a=(new Ph).parse();1===Ah.children.length&&Ah.children[0].isGroup&&(Ah.children[0].animations=a,Ah=Ah.children[0]),Ah.animations=a}parseModels(t,e,n){const i=new Map,r=Sh.Objects.Model;for(const s in r){const a=parseInt(s),o=r[s],l=Th.get(a);let c=this.buildSkeleton(l,t,a,o.attrName);if(!c){switch(o.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,e,n);break;case"NurbsCurve":c=this.createCurve(l,e);break;case"LimbNode":case"Root":c=new Zo;break;default:c=new mo}c.name=o.attrName?Lu.sanitizeNodeName(o.attrName):"",c.ID=a}this.getTransformData(c,o),i.set(a,c)}return i}buildSkeleton(t,e,n,i){let r=null;return t.parents.forEach((function(t){for(const s in e){const a=e[s];a.rawBones.forEach((function(e,s){if(e.ID===t.ID){const t=r;r=new Zo,r.matrixWorld.copy(e.transformLink),r.name=i?Lu.sanitizeNodeName(i):"",r.ID=n,a.bones[s]=r,null!==t&&r.add(t)}}))}})),r}createCamera(t){let e,n;if(t.children.forEach((function(t){const e=Sh.Objects.NodeAttribute[t.ID];void 0!==e&&(n=e)})),void 0===n)e=new Si;else{let t=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(t=1);let i=1;void 0!==n.NearPlane&&(i=n.NearPlane.value/1e3);let r=1e3;void 0!==n.FarPlane&&(r=n.FarPlane.value/1e3);let s=window.innerWidth,a=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(s=n.AspectWidth.value,a=n.AspectHeight.value);const o=s/a;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const c=n.FocalLength?n.FocalLength.value:null;switch(t){case 0:e=new Cr(l,o,i,r),null!==c&&e.setFocalLength(c);break;case 1:e=new Qr(-s/2,s/2,a/2,-a/2,i,r);break;default:e=new Si}}return e}createLight(t){let e,n;if(t.children.forEach((function(t){const e=Sh.Objects.NodeAttribute[t.ID];void 0!==e&&(n=e)})),void 0===n)e=new Si;else{let t;t=void 0===n.LightType?0:n.LightType.value;let i=16777215;void 0!==n.Color&&(i=(new Gi).fromArray(n.Color.value));let r=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(r=0);let s=0;void 0!==n.FarAttenuationEnd&&(s=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const a=1;switch(t){case 0:e=new fu(i,r,s,a);break;case 1:e=new gu(i,r);break;case 2:let t=Math.PI/3;void 0!==n.InnerAngle&&(t=Je.degToRad(n.InnerAngle.value));let o=0;void 0!==n.OuterAngle&&(o=Je.degToRad(n.OuterAngle.value),o=Math.max(o,1)),e=new cu(i,r,s,t,o,a);break;default:e=new fu(i,r)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(e.castShadow=!0)}return e}createMesh(t,e,n){let i,r=null,s=null;const a=[];return t.children.forEach((function(t){e.has(t.ID)&&(r=e.get(t.ID)),n.has(t.ID)&&a.push(n.get(t.ID))})),a.length>1?s=a:a.length>0?s=a[0]:(s=new Ac({color:13421772}),a.push(s)),"color"in r.attributes&&a.forEach((function(t){t.vertexColors=!0})),r.FBX_Deformer?(i=new Yo(r,s),i.normalizeSkinWeights()):i=new yr(r,s),i}createCurve(t,e){const n=t.children.reduce((function(t,n){return e.has(n.ID)&&(t=e.get(n.ID)),t}),null),i=new ol({color:3342591,linewidth:1});return new pl(n,i)}getTransformData(t,e){const n={};"InheritType"in e&&(n.inheritType=parseInt(e.InheritType.value)),n.eulerOrder="RotationOrder"in e?Gh(e.RotationOrder.value):"ZYX","Lcl_Translation"in e&&(n.translation=e.Lcl_Translation.value),"PreRotation"in e&&(n.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(n.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(n.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(n.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(n.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(n.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(n.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(n.rotationPivot=e.RotationPivot.value),t.userData.transformData=n}setLookAtProperties(t,e){if("LookAtProperty"in e){Th.get(t.ID).children.forEach((function(e){if("LookAtProperty"===e.relationship){const n=Sh.Objects.Model[e.ID];if("Lcl_Translation"in n){const e=n.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(e),Ah.add(t.target)):t.lookAt((new sn).fromArray(e))}}}))}}bindSkeleton(t,e,n){const i=this.parsePoseNodes();for(const r in t){const s=t[r];Th.get(parseInt(s.ID)).parents.forEach((function(t){if(e.has(t.ID)){const e=t.ID;Th.get(e).parents.forEach((function(t){if(n.has(t.ID)){n.get(t.ID).bind(new Qo(s.bones),i[t.ID])}}))}}))}}parsePoseNodes(){const t={};if("Pose"in Sh.Objects){const e=Sh.Objects.Pose;for(const n in e)if("BindPose"===e[n].attrType&&e[n].NbPoseNodes>0){const i=e[n].PoseNode;Array.isArray(i)?i.forEach((function(e){t[e.Node]=(new Qn).fromArray(e.Matrix.a)})):t[i.Node]=(new Qn).fromArray(i.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in Sh&&"AmbientColor"in Sh.GlobalSettings){const t=Sh.GlobalSettings.AmbientColor.value,e=t[0],n=t[1],i=t[2];if(0!==e||0!==n||0!==i){const t=new Gi(e,n,i);Ah.add(new vu(t,1))}}}}class Lh{constructor(){this.negativeMaterialIndices=!1}parse(t){const e=new Map;if("Geometry"in Sh.Objects){const n=Sh.Objects.Geometry;for(const i in n){const r=Th.get(parseInt(i)),s=this.parseGeometry(r,n[i],t);e.set(parseInt(i),s)}}return this.negativeMaterialIndices,e}parseGeometry(t,e,n){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,n);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,n){const i=n.skeletons,r=[],s=t.parents.map((function(t){return Sh.Objects.Model[t.ID]}));if(0===s.length)return;const a=t.children.reduce((function(t,e){return void 0!==i[e.ID]&&(t=i[e.ID]),t}),null);t.children.forEach((function(t){void 0!==n.morphTargets[t.ID]&&r.push(n.morphTargets[t.ID])}));const o=s[0],l={};"RotationOrder"in o&&(l.eulerOrder=Gh(o.RotationOrder.value)),"InheritType"in o&&(l.inheritType=parseInt(o.InheritType.value)),"GeometricTranslation"in o&&(l.translation=o.GeometricTranslation.value),"GeometricRotation"in o&&(l.rotation=o.GeometricRotation.value),"GeometricScaling"in o&&(l.scale=o.GeometricScaling.value);const c=Vh(l);return this.genGeometry(e,a,r,c)}genGeometry(t,e,n,i){const r=new rr;t.attrName&&(r.name=t.attrName);const s=this.parseGeoNode(t,e),a=this.genBuffers(s),o=new Ki(a.vertex,3);if(o.applyMatrix4(i),r.setAttribute("position",o),a.colors.length>0&&r.setAttribute("color",new Ki(a.colors,3)),e&&(r.setAttribute("skinIndex",new Yi(a.weightsIndices,4)),r.setAttribute("skinWeight",new Ki(a.vertexWeights,4)),r.FBX_Deformer=e),a.normal.length>0){const t=(new Qe).getNormalMatrix(i),e=new Ki(a.normal,3);e.applyNormalMatrix(t),r.setAttribute("normal",e)}if(a.uvs.forEach((function(t,e){let n="uv"+(e+1).toString();0===e&&(n="uv"),r.setAttribute(n,new Ki(a.uvs[e],2))})),s.material&&"AllSame"!==s.material.mappingType){let t=a.materialIndex[0],e=0;if(a.materialIndex.forEach((function(n,i){n!==t&&(r.addGroup(e,i-e,t),t=n,e=i)})),r.groups.length>0){const e=r.groups[r.groups.length-1],n=e.start+e.count;n!==a.materialIndex.length&&r.addGroup(n,a.materialIndex.length-n,t)}0===r.groups.length&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,t,n,i),r}parseGeoNode(t,e){const n={};if(n.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],n.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(n.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(n.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(n.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){n.uv=[];let e=0;for(;t.LayerElementUV[e];)t.LayerElementUV[e].UV&&n.uv.push(this.parseUVs(t.LayerElementUV[e])),e++}return n.weightTable={},null!==e&&(n.skeleton=e,e.rawBones.forEach((function(t,e){t.indices.forEach((function(i,r){void 0===n.weightTable[i]&&(n.weightTable[i]=[]),n.weightTable[i].push({id:e,weight:t.weights[r]})}))}))),n}genBuffers(t){const e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,r=!1,s=[],a=[],o=[],l=[],c=[],u=[];const h=this;return t.vertexIndices.forEach((function(d,p){let f,m=!1;d<0&&(d^=-1,m=!0);let g=[],v=[];if(s.push(3*d,3*d+1,3*d+2),t.color){const e=kh(p,n,d,t.color);o.push(e[0],e[1],e[2])}if(t.skeleton){if(void 0!==t.weightTable[d]&&t.weightTable[d].forEach((function(t){v.push(t.weight),g.push(t.id)})),v.length>4){r||(r=!0);const t=[0,0,0,0],e=[0,0,0,0];v.forEach((function(n,i){let r=n,s=g[i];e.forEach((function(e,n,i){if(r>e){i[n]=r,r=e;const a=t[n];t[n]=s,s=a}}))})),g=t,v=e}for(;v.length<4;)v.push(0),g.push(0);for(let t=0;t<4;++t)c.push(v[t]),u.push(g[t])}if(t.normal){const e=kh(p,n,d,t.normal);a.push(e[0],e[1],e[2])}t.material&&"AllSame"!==t.material.mappingType&&(f=kh(p,n,d,t.material)[0],f<0&&(h.negativeMaterialIndices=!0,f=0)),t.uv&&t.uv.forEach((function(t,e){const i=kh(p,n,d,t);void 0===l[e]&&(l[e]=[]),l[e].push(i[0]),l[e].push(i[1])})),i++,m&&(h.genFace(e,t,s,f,a,o,l,c,u,i),n++,i=0,s=[],a=[],o=[],l=[],c=[],u=[])})),e}genFace(t,e,n,i,r,s,a,o,l,c){for(let u=2;u<c;u++)t.vertex.push(e.vertexPositions[n[0]]),t.vertex.push(e.vertexPositions[n[1]]),t.vertex.push(e.vertexPositions[n[2]]),t.vertex.push(e.vertexPositions[n[3*(u-1)]]),t.vertex.push(e.vertexPositions[n[3*(u-1)+1]]),t.vertex.push(e.vertexPositions[n[3*(u-1)+2]]),t.vertex.push(e.vertexPositions[n[3*u]]),t.vertex.push(e.vertexPositions[n[3*u+1]]),t.vertex.push(e.vertexPositions[n[3*u+2]]),e.skeleton&&(t.vertexWeights.push(o[0]),t.vertexWeights.push(o[1]),t.vertexWeights.push(o[2]),t.vertexWeights.push(o[3]),t.vertexWeights.push(o[4*(u-1)]),t.vertexWeights.push(o[4*(u-1)+1]),t.vertexWeights.push(o[4*(u-1)+2]),t.vertexWeights.push(o[4*(u-1)+3]),t.vertexWeights.push(o[4*u]),t.vertexWeights.push(o[4*u+1]),t.vertexWeights.push(o[4*u+2]),t.vertexWeights.push(o[4*u+3]),t.weightsIndices.push(l[0]),t.weightsIndices.push(l[1]),t.weightsIndices.push(l[2]),t.weightsIndices.push(l[3]),t.weightsIndices.push(l[4*(u-1)]),t.weightsIndices.push(l[4*(u-1)+1]),t.weightsIndices.push(l[4*(u-1)+2]),t.weightsIndices.push(l[4*(u-1)+3]),t.weightsIndices.push(l[4*u]),t.weightsIndices.push(l[4*u+1]),t.weightsIndices.push(l[4*u+2]),t.weightsIndices.push(l[4*u+3])),e.color&&(t.colors.push(s[0]),t.colors.push(s[1]),t.colors.push(s[2]),t.colors.push(s[3*(u-1)]),t.colors.push(s[3*(u-1)+1]),t.colors.push(s[3*(u-1)+2]),t.colors.push(s[3*u]),t.colors.push(s[3*u+1]),t.colors.push(s[3*u+2])),e.material&&"AllSame"!==e.material.mappingType&&(t.materialIndex.push(i),t.materialIndex.push(i),t.materialIndex.push(i)),e.normal&&(t.normal.push(r[0]),t.normal.push(r[1]),t.normal.push(r[2]),t.normal.push(r[3*(u-1)]),t.normal.push(r[3*(u-1)+1]),t.normal.push(r[3*(u-1)+2]),t.normal.push(r[3*u]),t.normal.push(r[3*u+1]),t.normal.push(r[3*u+2])),e.uv&&e.uv.forEach((function(e,n){void 0===t.uvs[n]&&(t.uvs[n]=[]),t.uvs[n].push(a[n][0]),t.uvs[n].push(a[n][1]),t.uvs[n].push(a[n][2*(u-1)]),t.uvs[n].push(a[n][2*(u-1)+1]),t.uvs[n].push(a[n][2*u]),t.uvs[n].push(a[n][2*u+1])}))}addMorphTargets(t,e,n,i){if(0===n.length)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const r=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const s=Sh.Objects.Geometry[n.geoID];void 0!==s&&r.genMorphGeometry(t,e,s,i,n.name)}))}))}genMorphGeometry(t,e,n,i,r){const s=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],a=void 0!==n.Vertices?n.Vertices.a:[],o=void 0!==n.Indexes?n.Indexes.a:[],l=3*t.attributes.position.count,c=new Float32Array(l);for(let t=0;t<o.length;t++){const e=3*o[t];c[e]=a[3*t],c[e+1]=a[3*t+1],c[e+2]=a[3*t+2]}const u={vertexIndices:s,vertexPositions:c},h=this.genBuffers(u),d=new Ki(h.vertex,3);d.name=r||n.attrName,d.applyMatrix4(i),t.morphAttributes.position.push(d)}parseNormals(t){const e=t.MappingInformationType,n=t.ReferenceInformationType,i=t.Normals.a;let r=[];return"IndexToDirect"===n&&("NormalIndex"in t?r=t.NormalIndex.a:"NormalsIndex"in t&&(r=t.NormalsIndex.a)),{dataSize:3,buffer:i,indices:r,mappingType:e,referenceType:n}}parseUVs(t){const e=t.MappingInformationType,n=t.ReferenceInformationType,i=t.UV.a;let r=[];return"IndexToDirect"===n&&(r=t.UVIndex.a),{dataSize:2,buffer:i,indices:r,mappingType:e,referenceType:n}}parseVertexColors(t){const e=t.MappingInformationType,n=t.ReferenceInformationType,i=t.Colors.a;let r=[];return"IndexToDirect"===n&&(r=t.ColorIndex.a),{dataSize:4,buffer:i,indices:r,mappingType:e,referenceType:n}}parseMaterialIndices(t){const e=t.MappingInformationType,n=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=t.Materials.a,r=[];for(let t=0;t<i.length;++t)r.push(t);return{dataSize:1,buffer:i,indices:r,mappingType:e,referenceType:n}}parseNurbsGeometry(t){const e=parseInt(t.Order);if(isNaN(e))return new rr;const n=e-1,i=t.KnotVector.a,r=[],s=t.Points.a;for(let t=0,e=s.length;t<e;t+=4)r.push((new wn).fromArray(s,t));let a,o;if("Closed"===t.Form)r.push(r[0]);else if("Periodic"===t.Form){a=n,o=i.length-1-a;for(let t=0;t<n;++t)r.push(r[t])}const l=new Mh(n,i,r,a,o).getPoints(12*r.length);return(new rr).setFromPoints(l)}}class Ph{parse(){const t=[],e=this.parseClips();if(void 0!==e)for(const n in e){const i=e[n],r=this.addClip(i);t.push(r)}return t}parseClips(){if(void 0===Sh.Objects.AnimationCurve)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){const t=Sh.Objects.AnimationCurveNode,e=new Map;for(const n in t){const i=t[n];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){const t={id:i.id,attr:i.attrName,curves:{}};e.set(t.id,t)}}return e}parseAnimationCurves(t){const e=Sh.Objects.AnimationCurve;for(const n in e){const i={id:e[n].id,times:e[n].KeyTime.a.map(zh),values:e[n].KeyValueFloat.a},r=Th.get(i.id);if(void 0!==r){const e=r.parents[0].ID,n=r.parents[0].relationship;n.match(/X/)?t.get(e).curves.x=i:n.match(/Y/)?t.get(e).curves.y=i:n.match(/Z/)?t.get(e).curves.z=i:n.match(/d|DeformPercent/)&&t.has(e)&&(t.get(e).curves.morph=i)}}}parseAnimationLayers(t){const e=Sh.Objects.AnimationLayer,n=new Map;for(const i in e){const e=[],r=Th.get(parseInt(i));if(void 0!==r){r.children.forEach((function(n,i){if(t.has(n.ID)){const r=t.get(n.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===e[i]){const t=Th.get(n.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID;if(void 0!==t){const n=Sh.Objects.Model[t.toString()];if(void 0===n)return;const r={modelName:n.attrName?Lu.sanitizeNodeName(n.attrName):"",ID:n.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ah.traverse((function(t){t.ID===n.id&&(r.transform=t.matrix,t.userData.transformData&&(r.eulerOrder=t.userData.transformData.eulerOrder))})),r.transform||(r.transform=new Qn),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),e[i]=r}}e[i]&&(e[i][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===e[i]){const t=Th.get(n.ID).parents.filter((function(t){return void 0!==t.relationship}))[0].ID,r=Th.get(t).parents[0].ID,s=Th.get(r).parents[0].ID,a=Th.get(s).parents[0].ID,o=Sh.Objects.Model[a],l={modelName:o.attrName?Lu.sanitizeNodeName(o.attrName):"",morphName:Sh.Objects.Deformer[t].attrName};e[i]=l}e[i][r.attr]=r}}})),n.set(parseInt(i),e)}}return n}parseAnimStacks(t){const e=Sh.Objects.AnimationStack,n={};for(const i in e){const r=Th.get(parseInt(i)).children;r.length;const s=t.get(r[0].ID);n[i]={name:e[i].attrName,layer:s}}return n}addClip(t){let e=[];const n=this;return t.layer.forEach((function(t){e=e.concat(n.generateTracks(t))})),new Xc(t.name,-1,e)}generateTracks(t){const e=[];let n=new sn,i=new rn,r=new sn;if(t.transform&&t.transform.decompose(n,i,r),n=n.toArray(),i=(new ci).setFromQuaternion(i,t.eulerOrder).toArray(),r=r.toArray(),void 0!==t.T&&Object.keys(t.T.curves).length>0){const i=this.generateVectorTrack(t.modelName,t.T.curves,n,"position");void 0!==i&&e.push(i)}if(void 0!==t.R&&Object.keys(t.R.curves).length>0){const n=this.generateRotationTrack(t.modelName,t.R.curves,i,t.preRotation,t.postRotation,t.eulerOrder);void 0!==n&&e.push(n)}if(void 0!==t.S&&Object.keys(t.S.curves).length>0){const n=this.generateVectorTrack(t.modelName,t.S.curves,r,"scale");void 0!==n&&e.push(n)}if(void 0!==t.DeformPercent){const n=this.generateMorphTrack(t);void 0!==n&&e.push(n)}return e}generateVectorTrack(t,e,n,i){const r=this.getTimesForAllAxes(e),s=this.getKeyframeTrackValues(r,e,n);return new jc(t+"."+i,r,s)}generateRotationTrack(t,e,n,i,r,s){void 0!==e.x&&(this.interpolateRotations(e.x),e.x.values=e.x.values.map(Je.degToRad)),void 0!==e.y&&(this.interpolateRotations(e.y),e.y.values=e.y.values.map(Je.degToRad)),void 0!==e.z&&(this.interpolateRotations(e.z),e.z.values=e.z.values.map(Je.degToRad));const a=this.getTimesForAllAxes(e),o=this.getKeyframeTrackValues(a,e,n);void 0!==i&&((i=i.map(Je.degToRad)).push(s),i=(new ci).fromArray(i),i=(new rn).setFromEuler(i)),void 0!==r&&((r=r.map(Je.degToRad)).push(s),r=(new ci).fromArray(r),r=(new rn).setFromEuler(r).invert());const l=new rn,c=new ci,u=[];for(let t=0;t<o.length;t+=3)c.set(o[t],o[t+1],o[t+2],s),l.setFromEuler(c),void 0!==i&&l.premultiply(i),void 0!==r&&l.multiply(r),l.toArray(u,t/3*4);return new Wc(t+".quaternion",a,u)}generateMorphTrack(t){const e=t.DeformPercent.curves.morph,n=e.values.map((function(t){return t/100})),i=Ah.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new Vc(t.modelName+".morphTargetInfluences["+i+"]",e.times,n)}getTimesForAllAxes(t){let e=[];if(void 0!==t.x&&(e=e.concat(t.x.times)),void 0!==t.y&&(e=e.concat(t.y.times)),void 0!==t.z&&(e=e.concat(t.z.times)),e=e.sort((function(t,e){return t-e})),e.length>1){let t=1,n=e[0];for(let i=1;i<e.length;i++){const r=e[i];r!==n&&(e[t]=r,n=r,t++)}e=e.slice(0,t)}return e}getKeyframeTrackValues(t,e,n){const i=n,r=[];let s=-1,a=-1,o=-1;return t.forEach((function(t){if(e.x&&(s=e.x.times.indexOf(t)),e.y&&(a=e.y.times.indexOf(t)),e.z&&(o=e.z.times.indexOf(t)),-1!==s){const t=e.x.values[s];r.push(t),i[0]=t}else r.push(i[0]);if(-1!==a){const t=e.y.values[a];r.push(t),i[1]=t}else r.push(i[1]);if(-1!==o){const t=e.z.values[o];r.push(t),i[2]=t}else r.push(i[2])})),r}interpolateRotations(t){for(let e=1;e<t.values.length;e++){const n=t.values[e-1],i=t.values[e]-n,r=Math.abs(i);if(r>=180){const s=r/180,a=i/s;let o=n+a;const l=t.times[e-1],c=(t.times[e]-l)/s;let u=l+c;const h=[],d=[];for(;u<t.times[e];)h.push(u),u+=c,d.push(o),o+=a;t.times=jh(t.times,e,h),t.values=jh(t.values,e,d)}}}}class Rh{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new Oh,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const e=this,n=t.split(/[\r\n]+/);return n.forEach((function(t,i){const r=t.match(/^[\s\t]*;/),s=t.match(/^[\s\t]*$/);if(r||s)return;const a=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),o=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=t.match("^\\t{"+(e.currentIndent-1)+"}}");a?e.parseNodeBegin(t,a):o?e.parseNodeProperty(t,o,n[++i]):l?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)})),this.allNodes}parseNodeBegin(t,e){const n=e[1].trim().replace(/^"/,"").replace(/"$/,""),i=e[2].split(",").map((function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")})),r={name:n},s=this.parseNodeAttr(i),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,r):n in a?("PoseNode"===n?a.PoseNode.push(r):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==s.id&&(a[n][s.id]=r)):"number"==typeof s.id?(a[n]={},a[n][s.id]=r):"Properties70"!==n&&(a[n]="PoseNode"===n?[r]:r),"number"==typeof s.id&&(r.id=s.id),""!==s.name&&(r.attrName=s.name),""!==s.type&&(r.attrType=s.type),this.pushStack(r)}parseNodeAttr(t){let e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));let n="",i="";return t.length>1&&(n=t[1].replace(/^(\w+)::/,""),i=t[2]),{id:e,name:n,type:i}}parseNodeProperty(t,e,n){let i=e[1].replace(/^"/,"").replace(/"$/,"").trim(),r=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===r&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if("Properties70"!==s.name){if("C"===i){const t=r.split(",").slice(1),e=parseInt(t[0]),n=parseInt(t[1]);let a=r.split(",").slice(3);a=a.map((function(t){return t.trim().replace(/^"/,"")})),i="connections",r=[e,n],function(t,e){for(let n=0,i=t.length,r=e.length;n<r;n++,i++)t[i]=e[n]}(r,a),void 0===s[i]&&(s[i]=[])}"Node"===i&&(s.id=r),i in s&&Array.isArray(s[i])?s[i].push(r):"a"!==i?s[i]=r:s.a=r,this.setCurrentProp(s,i),"a"===i&&","!==r.slice(-1)&&(s.a=Wh(r))}else this.parseNodeSpecialProperty(t,i,r)}parseNodePropertyContinued(t){const e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=Wh(e.a))}parseNodeSpecialProperty(t,e,n){const i=n.split('",').map((function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")})),r=i[0],s=i[1],a=i[2],o=i[3];let l=i[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=Wh(l)}this.getPrevNode()[r]={type:s,type2:a,flag:o,value:l},this.setCurrentProp(this.getPrevNode(),r)}}class Dh{parse(t){const e=new Ih(t);e.skip(23);const n=e.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new Oh;for(;!this.endOfContent(e);){const t=this.parseNode(e,n);null!==t&&i.add(t.name,t)}return i}endOfContent(t){return t.size()%16==0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){const n={},i=e>=7500?t.getUint64():t.getUint32(),r=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();const s=t.getUint8(),a=t.getString(s);if(0===i)return null;const o=[];for(let e=0;e<r;e++)o.push(this.parseProperty(t));const l=o.length>0?o[0]:"",c=o.length>1?o[1]:"",u=o.length>2?o[2]:"";for(n.singleProperty=1===r&&t.getOffset()===i;i>t.getOffset();){const i=this.parseNode(t,e);null!==i&&this.parseSubNode(a,n,i)}return n.propertyList=o,"number"==typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(t,e,n){if(!0===n.singleProperty){const t=n.propertyList[0];Array.isArray(t)?(e[n.name]=n,n.a=t):e[n.name]=t}else if("Connections"===t&&"C"===n.name){const t=[];n.propertyList.forEach((function(e,n){0!==n&&t.push(e)})),void 0===e.connections&&(e.connections=[]),e.connections.push(t)}else if("Properties70"===n.name){Object.keys(n).forEach((function(t){e[t]=n[t]}))}else if("Properties70"===t&&"P"===n.name){let t=n.propertyList[0],i=n.propertyList[1];const r=n.propertyList[2],s=n.propertyList[3];let a;0===t.indexOf("Lcl ")&&(t=t.replace("Lcl ","Lcl_")),0===i.indexOf("Lcl ")&&(i=i.replace("Lcl ","Lcl_")),a="Color"===i||"ColorRGB"===i||"Vector"===i||"Vector3D"===i||0===i.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],e[t]={type:i,type2:r,flag:s,value:a}}else void 0===e[n.name]?"number"==typeof n.id?(e[n.name]={},e[n.name][n.id]=n):e[n.name]=n:"PoseNode"===n.name?(Array.isArray(e[n.name])||(e[n.name]=[e[n.name]]),e[n.name].push(n)):void 0===e[n.name][n.id]&&(e[n.name][n.id]=n)}parseProperty(t){const e=t.getString(1);let n;switch(e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return n=t.getUint32(),t.getArrayBuffer(n);case"S":return n=t.getUint32(),t.getString(n);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=t.getUint32(),r=t.getUint32(),s=t.getUint32();if(0===r)switch(e){case"b":case"c":return t.getBooleanArray(i);case"d":return t.getFloat64Array(i);case"f":return t.getFloat32Array(i);case"i":return t.getInt32Array(i);case"l":return t.getInt64Array(i)}const a=vh(new Uint8Array(t.getArrayBuffer(s))),o=new Ih(a.buffer);switch(e){case"b":case"c":return o.getBooleanArray(i);case"d":return o.getFloat64Array(i);case"f":return o.getFloat32Array(i);case"i":return o.getInt32Array(i);case"l":return o.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+e)}}}class Ih{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(t){const e=[];for(let n=0;n<t;n++)e.push(this.getBoolean());return e}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const e=[];for(let n=0;n<t;n++)e.push(this.getInt32());return e}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e?(e=4294967295&~e,t=4294967295&~t,4294967295===t&&(e=e+1&4294967295),t=t+1&4294967295,-(4294967296*e+t)):4294967296*e+t}getInt64Array(t){const e=[];for(let n=0;n<t;n++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const e=[];for(let n=0;n<t;n++)e.push(this.getFloat32());return e}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const e=[];for(let n=0;n<t;n++)e.push(this.getFloat64());return e}getArrayBuffer(t){const e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){const e=this.offset;let n=new Uint8Array(this.dv.buffer,e,t);this.skip(t);const i=n.indexOf(0);return i>=0&&(n=new Uint8Array(this.dv.buffer,e,i)),this._textDecoder.decode(n)}}class Oh{add(t,e){this[t]=e}}function Nh(t){const e=t.match(/FBXVersion: (\d+)/);if(e){return parseInt(e[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function zh(t){return t/46186158e3}const Uh=[];function kh(t,e,n,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=t;break;case"ByPolygon":r=e;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0]}"IndexToDirect"===i.referenceType&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return function(t,e,n,i){for(let r=n,s=0;r<i;r++,s++)t[s]=e[r];return t}(Uh,i.buffer,s,a)}const Fh=new ci,Bh=new sn;function Vh(t){const e=new Qn,n=new Qn,i=new Qn,r=new Qn,s=new Qn,a=new Qn,o=new Qn,l=new Qn,c=new Qn,u=new Qn,h=new Qn,d=new Qn,p=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(Bh.fromArray(t.translation)),t.preRotation){const e=t.preRotation.map(Je.degToRad);e.push(t.eulerOrder||ci.DEFAULT_ORDER),n.makeRotationFromEuler(Fh.fromArray(e))}if(t.rotation){const e=t.rotation.map(Je.degToRad);e.push(t.eulerOrder||ci.DEFAULT_ORDER),i.makeRotationFromEuler(Fh.fromArray(e))}if(t.postRotation){const e=t.postRotation.map(Je.degToRad);e.push(t.eulerOrder||ci.DEFAULT_ORDER),r.makeRotationFromEuler(Fh.fromArray(e)),r.invert()}t.scale&&s.scale(Bh.fromArray(t.scale)),t.scalingOffset&&o.setPosition(Bh.fromArray(t.scalingOffset)),t.scalingPivot&&a.setPosition(Bh.fromArray(t.scalingPivot)),t.rotationOffset&&l.setPosition(Bh.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(Bh.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(h.copy(t.parentMatrix),u.copy(t.parentMatrixWorld));const f=n.clone().multiply(i).multiply(r),m=new Qn;m.extractRotation(u);const g=new Qn;g.copyPosition(u);const v=g.clone().invert().multiply(u),_=m.clone().invert().multiply(v),y=s,x=new Qn;if(0===p)x.copy(m).multiply(f).multiply(_).multiply(y);else if(1===p)x.copy(m).multiply(_).multiply(f).multiply(y);else{const t=(new Qn).scale((new sn).setFromMatrixScale(h)).clone().invert(),e=_.clone().multiply(t);x.copy(m).multiply(f).multiply(e).multiply(y)}const b=c.clone().invert(),w=a.clone().invert();let M=e.clone().multiply(l).multiply(c).multiply(n).multiply(i).multiply(r).multiply(b).multiply(o).multiply(a).multiply(s).multiply(w);const S=(new Qn).copyPosition(M),T=u.clone().multiply(S);return d.copyPosition(T),M=d.clone().multiply(x),M.premultiply(u.invert()),M}function Gh(t){const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(t=t||0)?e[0]:e[t]}function Wh(t){return t.split(",").map((function(t){return parseFloat(t)}))}function Hh(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.byteLength),(new TextDecoder).decode(new Uint8Array(t,e,n))}function jh(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))}function Xh(t,e=!1){const n=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},a={},o=t[0].morphTargetsRelative,l=new rr;let c=0;for(let u=0;u<t.length;++u){const h=t[u];let d=0;if(n!==(null!==h.index))return null;for(const t in h.attributes){if(!i.has(t))return null;void 0===s[t]&&(s[t]=[]),s[t].push(h.attributes[t]),d++}if(d!==i.size)return null;if(o!==h.morphTargetsRelative)return null;for(const t in h.morphAttributes){if(!r.has(t))return null;void 0===a[t]&&(a[t]=[]),a[t].push(h.morphAttributes[t])}if(e){let t;if(n)t=h.index.count;else{if(void 0===h.attributes.position)return null;t=h.attributes.position.count}l.addGroup(c,t,u),c+=t}}if(n){let e=0;const n=[];for(let i=0;i<t.length;++i){const r=t[i].index;for(let t=0;t<r.count;++t)n.push(r.getX(t)+e);e+=t[i].attributes.position.count}l.setIndex(n)}for(const t in s){const e=qh(s[t]);if(!e)return null;l.setAttribute(t,e)}for(const t in a){const e=a[t][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[t]=[];for(let n=0;n<e;++n){const e=[];for(let i=0;i<a[t].length;++i)e.push(a[t][i][n]);const i=qh(e);if(!i)return null;l.morphAttributes[t].push(i)}}return l}function qh(t){let e,n,i,r=0;for(let s=0;s<t.length;++s){const a=t[s];if(a.isInterleavedBufferAttribute)return null;if(void 0===e&&(e=a.array.constructor),e!==a.array.constructor)return null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return null;if(void 0===i&&(i=a.normalized),i!==a.normalized)return null;r+=a.array.length}const s=new e(r);let a=0;for(let e=0;e<t.length;++e)s.set(t[e].array,a),a+=t[e].array.length;return new qi(s,n,i)}function Yh(t,e){if(e===we)return t;if(e===Se||e===Me){let n=t.getIndex();if(null===n){const e=[],i=t.getAttribute("position");if(void 0===i)return t;for(let t=0;t<i.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,r=[];if(e===Se)for(let t=1;t<=i;t++)r.push(n.getX(0)),r.push(n.getX(t)),r.push(n.getX(t+1));else for(let t=0;t<i;t++)t%2==0?(r.push(n.getX(t)),r.push(n.getX(t+1)),r.push(n.getX(t+2))):(r.push(n.getX(t+2)),r.push(n.getX(t+1)),r.push(n.getX(t)));r.length;const s=t.clone();return s.setIndex(r),s.clearGroups(),s}return t}class Zh extends Jc{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new ed(t)})),this.register((function(t){return new ld(t)})),this.register((function(t){return new cd(t)})),this.register((function(t){return new ud(t)})),this.register((function(t){return new id(t)})),this.register((function(t){return new rd(t)})),this.register((function(t){return new sd(t)})),this.register((function(t){return new ad(t)})),this.register((function(t){return new td(t)})),this.register((function(t){return new od(t)})),this.register((function(t){return new nd(t)})),this.register((function(t){return new $h(t)})),this.register((function(t){return new hd(t)})),this.register((function(t){return new dd(t)}))}load(t,e,n,i){const r=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:_u.extractUrlBase(t),this.manager.itemStart(t);const a=function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)},o=new tu(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{r.parse(n,s,(function(n){e(n),r.manager.itemEnd(t)}),a)}catch(t){a(t)}}),n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const s={},a={},o=new TextDecoder;if("string"==typeof t)r=JSON.parse(t);else if(t instanceof ArrayBuffer){if(o.decode(new Uint8Array(t,0,4))===pd){try{s[Jh.KHR_BINARY_GLTF]=new gd(t)}catch(t){return void(i&&i(t))}r=JSON.parse(s[Jh.KHR_BINARY_GLTF].content)}else r=JSON.parse(o.decode(t))}else r=t;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Vd(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](l);a[e.name]=e,s[e.name]=!0}if(r.extensionsUsed)for(let t=0;t<r.extensionsUsed.length;++t){const e=r.extensionsUsed[t],n=r.extensionsRequired||[];switch(e){case Jh.KHR_MATERIALS_UNLIT:s[e]=new Qh;break;case Jh.KHR_DRACO_MESH_COMPRESSION:s[e]=new vd(r,this.dracoLoader);break;case Jh.KHR_TEXTURE_TRANSFORM:s[e]=new _d;break;case Jh.KHR_MESH_QUANTIZATION:s[e]=new yd;break;default:n.indexOf(e)>=0&&a[e]}}l.setExtensions(s),l.setPlugins(a),l.parse(n,i)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,e,i,r)}))}}function Kh(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Jh={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class $h{constructor(t){this.parser=t,this.name=Jh.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let a;const o=new Gi(16777215);void 0!==s.color&&o.fromArray(s.color);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new gu(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new fu(o),a.distance=l;break;case"spot":a=new cu(o),a.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,Nd(a,s),void 0!==s.intensity&&(a.intensity=s.intensity),a.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(a),e.cache.add(n,i),i}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))}}class Qh{constructor(){this.name=Jh.KHR_MATERIALS_UNLIT}getMaterialType(){return Hi}extendParams(t,e,n){const i=[];t.color=new Gi(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture,Ae))}return Promise.all(i)}}class td{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(e.emissiveIntensity=i),Promise.resolve()}}class ed{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const t=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new $e(t,t)}return Promise.all(r)}}class nd{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.iridescenceFactor&&(e.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&r.push(n.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(e.iridescenceIOR=s.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&r.push(n.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(r)}}class id{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new Gi(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&e.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(e.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(e,"sheenColorMap",s.sheenColorTexture,Ae)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class rd{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(e.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class sd{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return e.attenuationColor=new Gi(a[0],a[1],a[2]),Promise.all(r)}}class ad{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class od{constructor(t){this.parser=t,this.name=Jh.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Tc:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];e.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(e,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return e.specularColor=new Gi(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&r.push(n.assignTexture(e,"specularColorMap",s.specularColorTexture,Ae)),Promise.all(r)}}class ld{constructor(t){this.parser=t,this.name=Jh.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,s)}}class cd{constructor(t){this.parser=t,this.name=Jh.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(o=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class ud{constructor(t){this.parser=t,this.name=Jh.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const s=r.extensions[e],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(o=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class hd{constructor(t){this.name=Jh.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],i=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){const n=t.byteOffset||0,i=t.byteLength||0,s=t.count,a=t.byteStride,o=new Uint8Array(e,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(s,a,o,t.mode,t.filter).then((function(t){return t.buffer})):r.ready.then((function(){const e=new ArrayBuffer(s*a);return r.decodeGltfBuffer(new Uint8Array(e),s,a,o,t.mode,t.filter),e}))}))}return null}}class dd{constructor(t){this.name=Jh.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=e.meshes[n.mesh];for(const t of i.primitives)if(t.mode!==Md.TRIANGLES&&t.mode!==Md.TRIANGLE_STRIP&&t.mode!==Md.TRIANGLE_FAN&&void 0!==t.mode)return null;const r=n.extensions[this.name].attributes,s=[],a={};for(const t in r)s.push(this.parser.getDependency("accessor",r[t]).then((e=>(a[t]=e,a[t]))));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then((t=>{const e=t.pop(),n=e.isGroup?e.children:[e],i=t[0].count,r=[];for(const t of n){const e=new Qn,n=new sn,s=new rn,o=new sn(1,1,1),l=new al(t.geometry,t.material,i);for(let t=0;t<i;t++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,t),a.ROTATION&&s.fromBufferAttribute(a.ROTATION,t),a.SCALE&&o.fromBufferAttribute(a.SCALE,t),l.setMatrixAt(t,e.compose(n,s,o));for(const e in a)"TRANSLATION"!==e&&"ROTATION"!==e&&"SCALE"!==e&&t.geometry.setAttribute(e,a[e]);Si.prototype.copy.call(l,t),l.frustumCulled=!1,this.parser.assignFinalMaterial(l),r.push(l)}return e.isGroup?(e.clear(),e.add(...r),e):r[0]})))}}const pd="glTF",fd=1313821514,md=5130562;class gd{constructor(t){this.name=Jh.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==pd)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(t,12);let s=0;for(;s<i;){const e=r.getUint32(s,!0);s+=4;const i=r.getUint32(s,!0);if(s+=4,i===fd){const i=new Uint8Array(t,12+s,e);this.content=n.decode(i)}else if(i===md){const n=12+s;this.body=t.slice(n,n+e)}s+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class vd{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jh.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},o={},l={};for(const t in s){const e=Cd[t]||t.toLowerCase();a[e]=s[t]}for(const e in t.attributes){const i=Cd[e]||e.toLowerCase();if(void 0!==s[e]){const r=n.accessors[t.attributes[e]],s=Sd[r.componentType];l[i]=s.name,o[i]=!0===r.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],i=o[e];void 0!==i&&(n.normalized=i)}e(t)}),a,l)}))}))}}class _d{constructor(){this.name=Jh.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return e.texCoord,void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class yd{constructor(){this.name=Jh.KHR_MESH_QUANTIZATION}}class xd extends Oc{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let t=0;t!==i;t++)e[t]=n[r+t];return e}interpolate_(t,e,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=i-e,u=(n-e)/c,h=u*u,d=h*u,p=t*l,f=p-l,m=-2*d+3*h,g=d-h,v=1-m,_=g-h+u;for(let t=0;t!==a;t++){const e=s[f+t+a],n=s[f+t+o]*c,i=s[p+t+a],l=s[p+t]*c;r[t]=v*e+_*n+m*i+g*l}return r}}const bd=new rn;class wd extends xd{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return bd.fromArray(r).normalize().toArray(r),r}}const Md={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Sd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Td={9728:dt,9729:mt,9984:pt,9985:gt,9986:ft,9987:vt},Ad={33071:ut,33648:ht,10497:ct},Ed={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Cd={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ld={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Pd={CUBICSPLINE:void 0,LINEAR:ve,STEP:ge},Rd="OPAQUE",Dd="MASK",Id="BLEND";function Od(t,e,n){for(const i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Nd(t,e){void 0!==e.extras&&"object"==typeof e.extras&&Object.assign(t.userData,e.extras)}function zd(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,i=n.length;e<i;e++)t.morphTargetDictionary[n[e]]=e}}}function Ud(t){const e=t.extensions&&t.extensions[Jh.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+kd(e.attributes):t.indices+":"+kd(t.attributes)+":"+t.mode,n}function kd(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function Fd(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Bd=new Qn;class Vd{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Kh,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&r<98?this.textureLoader=new nu(this.options.manager):this.textureLoader=new xu(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new tu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const s={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};Od(r,s,i),Nd(s,i),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(s)}))).then((function(){t(s)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n].joints;for(let e=0,n=i.length;e<n;e++)t[i[e]].isBone=!0}for(let e=0,i=t.length;e<i;e++){const i=t[e];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[n,i]of t.children.entries())r(i,e.children[n])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this._invokeOne((function(t){return t.loadNode&&t.loadNode(e)}));break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":i=this.loadCamera(e);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(t,e)})),!i)throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[Jh.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,r){n.load(_u.resolveURL(e.uri,i.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse){const t=Ed[i.type],e=Sd[i.componentType],n=!0===i.normalized,r=new e(i.count*t);return Promise.resolve(new qi(r,t,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],s=Ed[i.type],a=Sd[i.componentType],o=a.BYTES_PER_ELEMENT,l=o*s,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let d,p;if(u&&u!==l){const t=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(d=new a(r,t*u,i.count*u/o),l=new So(d,u/o),e.cache.add(n,l)),p=new Ao(l,s,c%u/o,h)}else d=null===r?new a(i.count*s):new a(r,c,i.count*s),p=new qi(d,s,h);if(void 0!==i.sparse){const e=Ed.SCALAR,n=Sd[i.sparse.indices.componentType],o=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(t[1],o,i.sparse.count*e),u=new a(t[2],l,i.sparse.count*s);null!==r&&(p=new qi(p.array.slice(),p.itemSize,p.normalized));for(let t=0,e=c.length;t<e;t++){const e=c[t];if(p.setX(e,u[t*s]),s>=2&&p.setY(e,u[t*s+1]),s>=3&&p.setZ(e,u[t*s+2]),s>=4&&p.setW(e,u[t*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t].source,r=e.images[i];let s=this.textureLoader;if(r.uri){const t=n.manager.getHandler(r.uri);null!==t&&(s=t)}return this.loadTextureImage(t,i,s)}loadTextureImage(t,e,n){const i=this,r=this.json,s=r.textures[t],a=r.images[e],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(e,n).then((function(e){e.flipY=!1,e.name=s.name||a.name||"";const n=(r.samplers||{})[s.sampler]||{};return e.magFilter=Td[n.magFilter]||mt,e.minFilter=Td[n.minFilter]||vt,e.wrapS=Ad[n.wrapS]||ct,e.wrapT=Ad[n.wrapT]||ct,i.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[o]=l,l}loadImageSource(t,e){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const s=i.images[t],a=self.URL||self.webkitURL;let o=s.uri||"",l=!1;if(void 0!==s.bufferView)o=n.getDependency("bufferView",s.bufferView).then((function(t){l=!0;const e=new Blob([t],{type:s.mimeType});return o=a.createObjectURL(e),o}));else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const c=Promise.resolve(o).then((function(t){return new Promise((function(n,i){let s=n;!0===e.isImageBitmapLoader&&(s=function(t){const e=new bn(t);e.needsUpdate=!0,n(e)}),e.load(_u.resolveURL(t,r.path),s,void 0,i)}))})).then((function(t){var e;return!0===l&&a.revokeObjectURL(o),t.userData.mimeType=s.mimeType||((e=s.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw t}));return this.sourceCache[t]=c,c}assignTexture(t,e,n,i){const r=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(void 0!==n.texCoord&&0!=n.texCoord&&("aoMap"!==e||n.texCoord),r.extensions[Jh.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[Jh.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=r.associations.get(s);s=r.extensions[Jh.KHR_TEXTURE_TRANSFORM].extendTexture(s,t),r.associations.set(s,e)}}return void 0!==i&&(s.encoding=i),t[e]=s,s}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,s=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new _l,Ui.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new ol,Ui.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(i||r||s){let t="ClonedMaterial:"+n.uuid+":";i&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),s&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),r&&(e.vertexColors=!0),s&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return Sc}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let s;const a={},o=[];if((r.extensions||{})[Jh.KHR_MATERIALS_UNLIT]){const t=i[Jh.KHR_MATERIALS_UNLIT];s=t.getMaterialType(),o.push(t.extendParams(a,r,e))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new Gi(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;a.color.fromArray(t),a.opacity=t[3]}void 0!==n.baseColorTexture&&o.push(e.assignTexture(a,"map",n.baseColorTexture,Ae)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(e.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),o.push(e.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),o.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,a)}))))}!0===r.doubleSided&&(a.side=v);const l=r.alphaMode||Rd;if(l===Id?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===Dd&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==Hi&&(o.push(e.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new $e(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;a.normalScale.set(t,t)}return void 0!==r.occlusionTexture&&s!==Hi&&(o.push(e.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==Hi&&(a.emissive=(new Gi).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&s!==Hi&&o.push(e.assignTexture(a,"emissiveMap",r.emissiveTexture,Ae)),Promise.all(o).then((function(){const n=new s(a);return r.name&&(n.name=r.name),Nd(n,r),e.associations.set(n,{materials:t}),r.extensions&&Od(i,n,r),n}))}createUniqueName(t){const e=Lu.sanitizeNodeName(t||"");let n=e;for(let t=1;this.nodeNamesUsed[n];++t)n=e+"_"+t;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(t){return n[Jh.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return Gd(n,t,e)}))}const s=[];for(let n=0,a=t.length;n<a;n++){const a=t[n],o=Ud(a),l=i[o];if(l)s.push(l.promise);else{let t;t=a.extensions&&a.extensions[Jh.KHR_DRACO_MESH_COMPRESSION]?r(a):Gd(new rr,a,e),i[o]={primitive:a,promise:t},s.push(t)}}return Promise.all(s)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],s=r.primitives,a=[];for(let t=0,e=s.length;t<e;t++){const e=void 0===s[t].material?(void 0===(o=this.cache).DefaultMaterial&&(o.DefaultMaterial=new Sc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:m})),o.DefaultMaterial):this.getDependency("material",s[t].material);a.push(e)}var o;return a.push(e.loadGeometries(s)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let n=0,c=o.length;n<c;n++){const c=o[n],u=s[n];let h;const d=a[n];if(u.mode===Md.TRIANGLES||u.mode===Md.TRIANGLE_STRIP||u.mode===Md.TRIANGLE_FAN||void 0===u.mode)h=!0===r.isSkinnedMesh?new Yo(c,d):new yr(c,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),u.mode===Md.TRIANGLE_STRIP?h.geometry=Yh(h.geometry,Me):u.mode===Md.TRIANGLE_FAN&&(h.geometry=Yh(h.geometry,Se));else if(u.mode===Md.LINES)h=new gl(c,d);else if(u.mode===Md.LINE_STRIP)h=new pl(c,d);else if(u.mode===Md.LINE_LOOP)h=new vl(c,d);else{if(u.mode!==Md.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);h=new Ml(c,d)}Object.keys(h.geometry.morphAttributes).length>0&&zd(h,r),h.name=e.createUniqueName(r.name||"mesh_"+t),Nd(h,r),u.extensions&&Od(i,h,u),e.assignFinalMaterial(h),l.push(h)}for(let n=0,i=l.length;n<i;n++)e.associations.set(l[n],{meshes:t,primitives:n});if(1===l.length)return l[0];const c=new mo;e.associations.set(c,{meshes:t});for(let t=0,e=l.length;t<e;t++)c.add(l[t]);return c}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new Cr(Je.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new Qr(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Nd(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let t=0,i=e.joints.length;t<i;t++)n.push(this._loadNodeShallow(e.joints[t]));return void 0!==e.inverseBindMatrices?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(t){const e=t.pop(),n=t,i=[],r=[];for(let t=0,s=n.length;t<s;t++){const s=n[t];if(s){i.push(s);const n=new Qn;null!==e&&n.fromArray(e.array,16*t),r.push(n)}}return new Qo(i,r)}))}loadAnimation(t){const e=this.json.animations[t],n=[],i=[],r=[],s=[],a=[];for(let t=0,o=e.channels.length;t<o;t++){const o=e.channels[t],l=e.samplers[o.sampler],c=o.target,u=c.node,h=void 0!==e.parameters?e.parameters[l.input]:l.input,d=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),i.push(this.getDependency("accessor",h)),r.push(this.getDependency("accessor",d)),s.push(l),a.push(c)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(s),Promise.all(a)]).then((function(n){const i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=[];for(let t=0,e=i.length;t<e;t++){const e=i[t],n=r[t],c=s[t],u=a[t],h=o[t];if(void 0===e)continue;let d;switch(e.updateMatrix(),Ld[h.path]){case Ld.weights:d=Vc;break;case Ld.rotation:d=Wc;break;default:d=jc}const p=e.name?e.name:e.uuid,f=void 0!==u.interpolation?Pd[u.interpolation]:ve,m=[];Ld[h.path]===Ld.weights?e.traverse((function(t){t.morphTargetInfluences&&m.push(t.name?t.name:t.uuid)})):m.push(p);let g=c.array;if(c.normalized){const t=Fd(g.constructor),e=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)e[n]=g[n]*t;g=e}for(let t=0,e=m.length;t<e;t++){const e=new d(m[t]+"."+Ld[h.path],n.array,g,f);"CUBICSPLINE"===u.interpolation&&(e.createInterpolant=function(t){return new(this instanceof Wc?wd:xd)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const c=e.name?e.name:"animation_"+t;return new Xc(c,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,i.mesh,t);return void 0!==i.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=i.weights.length;e<n;e++)t.morphTargetInfluences[e]=i.weights[e]})),e}))}loadNode(t){const e=this,n=this.json.nodes[t],i=e._loadNodeShallow(t),r=[],s=n.children||[];for(let t=0,n=s.length;t<n;t++)r.push(e.getDependency("node",s[t]));const a=void 0===n.skin?Promise.resolve(null):e.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),a]).then((function(t){const e=t[0],n=t[1],i=t[2];null!==i&&e.traverse((function(t){t.isSkinnedMesh&&t.bind(i,Bd)}));for(let t=0,i=n.length;t<i;t++)e.add(n[t]);return e}))}_loadNodeShallow(t){const e=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const r=e.nodes[t],s=r.name?i.createUniqueName(r.name):"",a=[],o=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return o&&a.push(o),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){a.push(t)})),this.nodeCache[t]=Promise.all(a).then((function(e){let a;if(a=!0===r.isBone?new Zo:e.length>1?new mo:1===e.length?e[0]:new Si,a!==e[0])for(let t=0,n=e.length;t<n;t++)a.add(e[t]);if(r.name&&(a.userData.name=r.name,a.name=s),Nd(a,r),r.extensions&&Od(n,a,r),void 0!==r.matrix){const t=new Qn;t.fromArray(r.matrix),a.applyMatrix4(t)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=t,a})),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],i=this,r=new mo;n.name&&(r.name=i.createUniqueName(n.name)),Nd(r,n),n.extensions&&Od(e,r,n);const s=n.nodes||[],a=[];for(let t=0,e=s.length;t<e;t++)a.push(i.getDependency("node",s[t]));return Promise.all(a).then((function(t){for(let e=0,n=t.length;e<n;e++)r.add(t[e]);return i.associations=(t=>{const e=new Map;for(const[t,n]of i.associations)(t instanceof Ui||t instanceof bn)&&e.set(t,n);return t.traverse((t=>{const n=i.associations.get(t);null!=n&&e.set(t,n)})),e})(r),r}))}}function Gd(t,e,n){const i=e.attributes,r=[];function s(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(const e in i){const n=Cd[e]||e.toLowerCase();n in t.attributes||r.push(s(i[e],n))}if(void 0!==e.indices&&!t.index){const i=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(i)}return Nd(t,e),function(t,e,n){const i=e.attributes,r=new An;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,s=t.max;if(void 0===e||void 0===s)return;if(r.set(new sn(e[0],e[1],e[2]),new sn(s[0],s[1],s[2])),t.normalized){const e=Fd(Sd[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const s=e.targets;if(void 0!==s){const t=new sn,e=new sn;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,a=i.max;if(void 0!==s&&void 0!==a){if(e.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),e.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),e.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),i.normalized){const t=Fd(Sd[i.componentType]);e.multiplyScalar(t)}t.max(e)}}}r.expandByVector(t)}t.boundingBox=r;const a=new Hn;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=a}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){let i=!1,r=!1,s=!1;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(r=!0),void 0!==n.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const u=e[c];if(i){const e=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):t.attributes.position;a.push(e)}if(r){const e=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):t.attributes.normal;o.push(e)}if(s){const e=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(e)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then((function(e){const n=e[0],a=e[1],o=e[2];return i&&(t.morphAttributes.position=n),r&&(t.morphAttributes.normal=a),s&&(t.morphAttributes.color=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}class Wd extends Jc{constructor(t){super(t)}load(t,e,n,i){const r=this,s=""===this.path?_u.extractUrlBase(t):this.path,a=new tu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){try{e(r.parse(n,s))}catch(e){i&&i(e),r.manager.itemError(t)}}),n,i)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,e){const n=t.split("\n");let i={};const r=/\s+/,s={};for(let t=0;t<n.length;t++){let e=n[t];if(e=e.trim(),0===e.length||"#"===e.charAt(0))continue;const a=e.indexOf(" ");let o=a>=0?e.substring(0,a):e;o=o.toLowerCase();let l=a>=0?e.substring(a+1):"";if(l=l.trim(),"newmtl"===o)i={name:l},s[l]=i;else if("ka"===o||"kd"===o||"ks"===o||"ke"===o){const t=l.split(r,3);i[o]=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])]}else i[o]=l}const a=new Hd(this.resourcePath||e,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(s),a}}class Hd{constructor(t="",e={}){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:m,this.wrap=void 0!==this.options.wrap?this.options.wrap:ct}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const e={};for(const n in t){const i=t[n],r={};e[n]=r;for(const t in i){let e=!0,n=i[t];const s=t.toLowerCase();switch(s){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(n=[n[0]/255,n[1]/255,n[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===n[0]&&0===n[1]&&0===n[2]&&(e=!1)}e&&(r[s]=n)}}return e}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray}create(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const e=this,n=this.materialsInfo[t],i={name:t,side:this.side};function r(t,n){if(i[t])return;const r=e.getTextureParams(n,i),s=e.loadTexture((a=e.baseUrl,"string"!=typeof(o=r.url)||""===o?"":/^https?:\/\//i.test(o)?o:a+o));var a,o;s.repeat.copy(r.scale),s.offset.copy(r.offset),s.wrapS=e.wrap,s.wrapT=e.wrap,"map"!==t&&"emissiveMap"!==t||(s.encoding=Ae),i[t]=s}for(const t in n){const e=n[t];let s;if(""!==e)switch(t.toLowerCase()){case"kd":i.color=(new Gi).fromArray(e).convertSRGBToLinear();break;case"ks":i.specular=(new Gi).fromArray(e).convertSRGBToLinear();break;case"ke":i.emissive=(new Gi).fromArray(e).convertSRGBToLinear();break;case"map_kd":r("map",e);break;case"map_ks":r("specularMap",e);break;case"map_ke":r("emissiveMap",e);break;case"norm":r("normalMap",e);break;case"map_bump":case"bump":r("bumpMap",e);break;case"map_d":r("alphaMap",e),i.transparent=!0;break;case"ns":i.shininess=parseFloat(e);break;case"d":s=parseFloat(e),s<1&&(i.opacity=s,i.transparent=!0);break;case"tr":s=parseFloat(e),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(i.opacity=1-s,i.transparent=!0)}}return this.materials[t]=new Ac(i),this.materials[t]}getTextureParams(t,e){const n={scale:new $e(1,1),offset:new $e(0,0)},i=t.split(/\s+/);let r;return r=i.indexOf("-bm"),r>=0&&(e.bumpScale=parseFloat(i[r+1]),i.splice(r,2)),r=i.indexOf("-s"),r>=0&&(n.scale.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),r=i.indexOf("-o"),r>=0&&(n.offset.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),n.url=i.join(" ").trim(),n}loadTexture(t,e,n,i,r){const s=void 0!==this.manager?this.manager:Kc;let a=s.getHandler(t);null===a&&(a=new nu(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const o=a.load(t,n,i,r);return void 0!==e&&(o.mapping=e),o}}const jd=/^[og]\s*(.+)?/,Xd=/^mtllib /,qd=/^usemtl /,Yd=/^usemap /,Zd=/\s+/,Kd=new sn,Jd=new sn,$d=new sn,Qd=new sn,tp=new sn,ep=new Gi;function np(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,e){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){const e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){const e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(let t=this.materials.length-1;t>=0;t--)this.materials[t].groupCount<=0&&this.materials.splice(t,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){const t=n.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){const n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){const i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addFaceNormal:function(t,e,n){const i=this.vertices,r=this.object.geometry.normals;Kd.fromArray(i,t),Jd.fromArray(i,e),$d.fromArray(i,n),tp.subVectors($d,Jd),Qd.subVectors(Kd,Jd),tp.cross(Qd),tp.normalize(),r.push(tp.x,tp.y,tp.z),r.push(tp.x,tp.y,tp.z),r.push(tp.x,tp.y,tp.z)},addColor:function(t,e,n){const i=this.colors,r=this.object.geometry.colors;void 0!==i[t]&&r.push(i[t+0],i[t+1],i[t+2]),void 0!==i[e]&&r.push(i[e+0],i[e+1],i[e+2]),void 0!==i[n]&&r.push(i[n+0],i[n+1],i[n+2])},addUV:function(t,e,n){const i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,i,r,s,a,o,l){const c=this.vertices.length;let u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(e,c),d=this.parseVertexIndex(n,c);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==a&&""!==a){const t=this.normals.length;u=this.parseNormalIndex(a,t),h=this.parseNormalIndex(o,t),d=this.parseNormalIndex(l,t),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==i&&""!==i){const t=this.uvs.length;u=this.parseUVIndex(i,t),h=this.parseUVIndex(r,t),d=this.parseUVIndex(s,t),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,i=t.length;n<i;n++){const i=this.parseVertexIndex(t[n],e);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,i=this.uvs.length;for(let e=0,i=t.length;e<i;e++)this.addVertexLine(this.parseVertexIndex(t[e],n));for(let t=0,n=e.length;t<n;t++)this.addUVLine(this.parseUVIndex(e[t],i))}};return t.startObject("",!1),t}class ip extends Jc{constructor(t){super(t),this.materials=null}load(t,e,n,i){const r=this,s=new tu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{e(r.parse(n))}catch(e){i&&i(e),r.manager.itemError(t)}}),n,i)}setMaterials(t){return this.materials=t,this}parse(t){const e=new np;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let i=[];for(let t=0,r=n.length;t<r;t++){const r=n[t].trimStart();if(0===r.length)continue;const s=r.charAt(0);if("#"!==s)if("v"===s){const t=r.split(Zd);switch(t[0]){case"v":e.vertices.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),t.length>=7?(ep.setRGB(parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6])).convertSRGBToLinear(),e.colors.push(ep.r,ep.g,ep.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));break;case"vt":e.uvs.push(parseFloat(t[1]),parseFloat(t[2]))}}else if("f"===s){const t=r.slice(1).trim().split(Zd),n=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.length>0){const t=i.split("/");n.push(t)}}const i=n[0];for(let t=1,r=n.length-1;t<r;t++){const r=n[t],s=n[t+1];e.addFace(i[0],r[0],s[0],i[1],r[1],s[1],i[2],r[2],s[2])}}else if("l"===s){const t=r.substring(1).trim().split(" ");let n=[];const i=[];if(-1===r.indexOf("/"))n=t;else for(let e=0,r=t.length;e<r;e++){const r=t[e].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}e.addLineGeometry(n,i)}else if("p"===s){const t=r.slice(1).trim().split(" ");e.addPointGeometry(t)}else if(null!==(i=jd.exec(r))){const t=(" "+i[0].slice(1).trim()).slice(1);e.startObject(t)}else if(qd.test(r))e.object.startMaterial(r.substring(7).trim(),e.materialLibraries);else if(Xd.test(r))e.materialLibraries.push(r.substring(7).trim());else if(Yd.test(r));else if("s"===s){if(i=r.split(" "),i.length>1){const t=i[1].trim().toLowerCase();e.object.smooth="0"!==t&&"off"!==t}else e.object.smooth=!0;const t=e.object.currentMaterial();t&&(t.smooth=e.object.smooth)}else if("\0"===r)continue}e.finalize();const r=new mo;r.materialLibraries=[].concat(e.materialLibraries);if(!0===!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let t=0,n=e.objects.length;t<n;t++){const n=e.objects[t],i=n.geometry,s=n.materials,a="Line"===i.type,o="Points"===i.type;let l=!1;if(0===i.vertices.length)continue;const c=new rr;c.setAttribute("position",new Ki(i.vertices,3)),i.normals.length>0&&c.setAttribute("normal",new Ki(i.normals,3)),i.colors.length>0&&(l=!0,c.setAttribute("color",new Ki(i.colors,3))),!0===i.hasUVIndices&&c.setAttribute("uv",new Ki(i.uvs,2));const u=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],i=n.name+"_"+n.smooth+"_"+l;let r=e.materials[i];if(null!==this.materials)if(r=this.materials.create(n.name),!a||!r||r instanceof ol){if(o&&r&&!(r instanceof _l)){const t=new _l({size:10,sizeAttenuation:!1});Ui.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,r=t}}else{const t=new ol;Ui.prototype.copy.call(t,r),t.color.copy(r.color),r=t}void 0===r&&(r=a?new ol:o?new _l({size:1,sizeAttenuation:!1}):new Ac,r.name=n.name,r.flatShading=!n.smooth,r.vertexColors=l,e.materials[i]=r),u.push(r)}let h;if(u.length>1){for(let t=0,e=s.length;t<e;t++){const e=s[t];c.addGroup(e.groupStart,e.groupCount,t)}h=a?new gl(c,u):o?new Ml(c,u):new yr(c,u)}else h=a?new gl(c,u[0]):o?new Ml(c,u[0]):new yr(c,u[0]);h.name=n.name,r.add(h)}else if(e.vertices.length>0){const t=new _l({size:1,sizeAttenuation:!1}),n=new rr;n.setAttribute("position",new Ki(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(n.setAttribute("color",new Ki(e.colors,3)),t.vertexColors=!0);const i=new Ml(n,t);r.add(i)}return r}}const rp=new WeakMap;class sp extends Jc{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){const r=new tu(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,(t=>{this.parse(t,e,i)}),n,i)}parse(t,e,n){this.decodeDracoFile(t,e,null,null,Pe).catch(n)}decodeDracoFile(t,e,n,i,r=Re){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:r};return this.decodeGeometry(t,s).then(e)}decodeGeometry(t,e){const n=JSON.stringify(e);if(rp.has(t)){const e=rp.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,s=t.byteLength,a=this._getWorker(r,s).then((n=>(i=n,new Promise(((n,s)=>{i._callbacks[r]={resolve:n,reject:s},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return a.catch((()=>!0)).then((()=>{i&&r&&this._releaseTask(i,r)})),rp.set(t,{key:n,promise:a}),a}_createGeometry(t){const e=new rr;t.index&&e.setIndex(new qi(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n],r=i.name,s=i.array,a=i.itemSize,o=new qi(s,a);"color"===r&&this._assignVertexColorSpace(o,i.vertexColorSpace),e.setAttribute(r,o)}return e}_assignVertexColorSpace(t,e){if(e!==Pe)return;const n=new Gi;for(let e=0,i=t.count;e<i;e++)n.fromBufferAttribute(t,e).convertSRGBToLinear(),t.setXYZ(e,n.r,n.g,n.b)}_loadLibrary(t,e){const n=new tu(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise(((e,i)=>{n.load(t,e,void 0,i)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const i=ap.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n)}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function ap(){let t,e;function n(t,e,n,i,r,s){const a=s.num_components(),o=n.num_points()*a,l=o*r.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,r),u=t._malloc(l);e.GetAttributeDataArrayForAllPoints(n,s,c,l,u);const h=new r(t.HEAPF32.buffer,u,o).slice();return t._free(u),{name:i,array:h,itemSize:a}}onmessage=function(i){const r=i.data;switch(r.type){case"init":t=r.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const i=r.buffer,s=r.taskConfig;e.then((t=>{const e=t.draco,a=new e.Decoder;try{const t=function(t,e,i,r){const s=r.attributeIDs,a=r.attributeTypes;let o,l;const c=e.GetEncodedGeometryType(i);if(c===t.TRIANGULAR_MESH)o=new t.Mesh,l=e.DecodeArrayToMesh(i,i.byteLength,o);else{if(c!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new t.PointCloud,l=e.DecodeArrayToPointCloud(i,i.byteLength,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const i in s){const l=self[a[i]];let c,h;if(r.useUniqueIDs)h=s[i],c=e.GetAttributeByUniqueId(o,h);else{if(h=e.GetAttributeId(o,t[s[i]]),-1===h)continue;c=e.GetAttribute(o,h)}const d=n(t,e,o,i,l,c);"color"===i&&(d.vertexColorSpace=r.vertexColorSpace),u.attributes.push(d)}c===t.TRIANGULAR_MESH&&(u.index=function(t,e,n){const i=n.num_faces(),r=3*i,s=4*r,a=t._malloc(s);e.GetTrianglesUInt32Array(n,s,a);const o=new Uint32Array(t.HEAPF32.buffer,a,r).slice();return t._free(a),{array:o,itemSize:1}}(t,e,o));return t.destroy(o),u}(e,a,new Int8Array(i),s),o=t.attributes.map((t=>t.array.buffer));t.index&&o.push(t.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:t},o)}catch(t){self.postMessage({type:"error",id:r.id,error:t.message})}finally{e.destroy(a)}}))}}}var op=new class extends Ue{constructor(){super(),s(this,"anisotropy",1),s(this,"textureMap",new Map),s(this,"textureLoader",new nu),s(this,"fbxLoader",new Eh),s(this,"objLoader",new ip),s(this,"mtlLoader",new Wd),s(this,"gltfLoader",(()=>{const t=new Zh,e=new sp;return e.setDecoderPath("./draco/"),t.setDRACOLoader(e),t})()),s(this,"onload",!0),Kc.onStart=()=>{this.onload=!1},Kc.onProgress=()=>{this.dispatchEvent({type:"progress"})},Kc.onLoad=()=>{this.onload=!0}}setAnisotropy(t){this.anisotropy=t}getTexture(t){let e=this.textureMap.get(t);if(!e){if(/\.mp4$/.test(t)){const n=document.createElement("video");n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.playsInline=!0,n.src=t,document.addEventListener("pointerup",(()=>{n.pause(),n.play()})),e=new Tl(n)}else e=this.textureLoader.load(t,(t=>{t.image.crossOrigin="anonymous"}));this.textureMap.set(t,e)}return e.wrapS=e.wrapT=ct,e.anisotropy=this.anisotropy,e}};class lp extends yr{constructor(){super(lp.geometry,lp.material)}}s(lp,"geometry",(()=>{const t=new Gr(50,50,1,1);return t.rotateX(Bu(90)),t})()),s(lp,"material",new Ac({side:v,color:65535,map:op.getTexture(Vu),transparent:!0,opacity:1}));var cp=n.p+"img/scene-bg2.4240e41e.png";class up extends yr{constructor(){super(),s(this,"geometry",(()=>{const t=new Gr(200,200,1,1);return t.rotateX(Bu(-90)),t})()),s(this,"renderOrder",-1),s(this,"material",new Ac({color:16777215,map:op.getTexture(cp),transparent:!0,opacity:1,depthTest:!0}))}}var hp=n(90754);const dp=new An,pp=new sn;class fp extends yu{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new Ki([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new Ki([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(t){const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new Pu(e,6,1);return this.setAttribute("instanceStart",new Ao(n,3,0)),this.setAttribute("instanceEnd",new Ao(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));const n=new Pu(e,6,1);return this.setAttribute("instanceColorStart",new Ao(n,3,0)),this.setAttribute("instanceColorEnd",new Ao(n,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new wc(t.geometry)),this}fromLineSegments(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new An);const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),dp.setFromBufferAttribute(e),this.boundingBox.union(dp))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Hn),null===this.boundingBox&&this.computeBoundingBox();const t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let r=0,s=t.count;r<s;r++)pp.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(pp)),pp.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(pp));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}toJSON(){}applyMatrix(t){return this.applyMatrix4(t)}}Hr.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new $e(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},jr.line={uniforms:Tr.merge([Hr.common,Hr.fog,Hr.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class mp extends Ar{constructor(t){super({type:"LineMaterial",uniforms:Tr.clone(jr.line.uniforms),vertexShader:jr.line.vertexShader,fragmentShader:jr.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}const gp=new sn,vp=new sn,_p=new wn,yp=new wn,xp=new wn,bp=new sn,wp=new Qn,Mp=new class{constructor(t=new sn,e=new sn){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Nu.subVectors(t,this.start),zu.subVectors(this.end,this.start);const n=zu.dot(zu);let i=zu.dot(Nu)/n;return e&&(i=We(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},Sp=new sn,Tp=new An,Ap=new Hn,Ep=new wn;let Cp,Lp;function Pp(t,e,n){return Ep.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Ep.multiplyScalar(1/Ep.w),Ep.x=Lp/n.width,Ep.y=Lp/n.height,Ep.applyMatrix4(t.projectionMatrixInverse),Ep.multiplyScalar(1/Ep.w),Math.abs(Math.max(Ep.x,Ep.y))}class Rp extends yr{constructor(t=new fp,e=new mp({color:16777215*Math.random()})){super(t,e),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,i=new Float32Array(2*e.count);for(let t=0,r=0,s=e.count;t<s;t++,r+=2)gp.fromBufferAttribute(e,t),vp.fromBufferAttribute(n,t),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+gp.distanceTo(vp);const r=new Pu(i,2,1);return t.setAttribute("instanceDistanceStart",new Ao(r,1,0)),t.setAttribute("instanceDistanceEnd",new Ao(r,1,1)),this}raycast(t,e){const n=this.material.worldUnits,i=t.camera,r=void 0!==t.params.Line2&&t.params.Line2.threshold||0;Cp=t.ray;const s=this.matrixWorld,a=this.geometry,o=this.material;let l,c;if(Lp=o.linewidth+r,null===a.boundingSphere&&a.computeBoundingSphere(),Ap.copy(a.boundingSphere).applyMatrix4(s),n)l=.5*Lp;else{l=Pp(i,Math.max(i.near,Ap.distanceToPoint(Cp.origin)),o.resolution)}if(Ap.radius+=l,!1!==Cp.intersectsSphere(Ap)){if(null===a.boundingBox&&a.computeBoundingBox(),Tp.copy(a.boundingBox).applyMatrix4(s),n)c=.5*Lp;else{c=Pp(i,Math.max(i.near,Tp.distanceToPoint(Cp.origin)),o.resolution)}Tp.expandByScalar(c),!1!==Cp.intersectsBox(Tp)&&(n?function(t,e){const n=t.matrixWorld,i=t.geometry,r=i.attributes.instanceStart,s=i.attributes.instanceEnd;for(let a=0,o=Math.min(i.instanceCount,r.count);a<o;a++){Mp.start.fromBufferAttribute(r,a),Mp.end.fromBufferAttribute(s,a),Mp.applyMatrix4(n);const i=new sn,o=new sn;Cp.distanceSqToSegment(Mp.start,Mp.end,o,i),o.distanceTo(i)<.5*Lp&&e.push({point:o,pointOnLine:i,distance:Cp.origin.distanceTo(o),object:t,face:null,faceIndex:a,uv:null,uv2:null})}}(this,e):function(t,e,n){const i=e.projectionMatrix,r=t.material.resolution,s=t.matrixWorld,a=t.geometry,o=a.attributes.instanceStart,l=a.attributes.instanceEnd,c=Math.min(a.instanceCount,o.count),u=-e.near;Cp.at(1,xp),xp.w=1,xp.applyMatrix4(e.matrixWorldInverse),xp.applyMatrix4(i),xp.multiplyScalar(1/xp.w),xp.x*=r.x/2,xp.y*=r.y/2,xp.z=0,bp.copy(xp),wp.multiplyMatrices(e.matrixWorldInverse,s);for(let e=0,a=c;e<a;e++){if(_p.fromBufferAttribute(o,e),yp.fromBufferAttribute(l,e),_p.w=1,yp.w=1,_p.applyMatrix4(wp),yp.applyMatrix4(wp),_p.z>u&&yp.z>u)continue;if(_p.z>u){const t=_p.z-yp.z,e=(_p.z-u)/t;_p.lerp(yp,e)}else if(yp.z>u){const t=yp.z-_p.z,e=(yp.z-u)/t;yp.lerp(_p,e)}_p.applyMatrix4(i),yp.applyMatrix4(i),_p.multiplyScalar(1/_p.w),yp.multiplyScalar(1/yp.w),_p.x*=r.x/2,_p.y*=r.y/2,yp.x*=r.x/2,yp.y*=r.y/2,Mp.start.copy(_p),Mp.start.z=0,Mp.end.copy(yp),Mp.end.z=0;const a=Mp.closestPointToPointParameter(bp,!0);Mp.at(a,Sp);const c=Je.lerp(_p.z,yp.z,a),h=c>=-1&&c<=1,d=bp.distanceTo(Sp)<.5*Lp;if(h&&d){Mp.start.fromBufferAttribute(o,e),Mp.end.fromBufferAttribute(l,e),Mp.start.applyMatrix4(s),Mp.end.applyMatrix4(s);const i=new sn,r=new sn;Cp.distanceSqToSegment(Mp.start,Mp.end,r,i),n.push({point:r,pointOnLine:i,distance:Cp.origin.distanceTo(r),object:t,face:null,faceIndex:e,uv:null,uv2:null})}}}(this,i,e))}}}class Dp extends fp{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const e=t.length-3,n=new Float32Array(2*e);for(let i=0;i<e;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return super.setPositions(n),this}setColors(t){const e=t.length-3,n=new Float32Array(2*e);for(let i=0;i<e;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return super.setColors(n),this}fromLine(t){const e=t.geometry;return this.setPositions(e.attributes.position.array),this}}class Ip extends Rp{constructor(t=new Dp,e=new mp({color:16777215*Math.random()})){super(t,e),this.isLine2=!0,this.type="Line2"}}var Op=n(45871),Np=n(74806);class zp extends yr{constructor(t,e){super(void 0,e),s(this,"pointerWidthRadius",[]),this.updateGeometry(t)}computerMatrix(t,e,n){return zp.temp1Matrix4.identity(),zp.temp1Matrix4.multiply(zp.temp2Matrix4.lookAt(zp.temp1Vector3.set(t[0],t[1],t[2]),zp.temp2Vector3.set(e[0],t[1],e[2]),zp.temp3Vector3.set(0,1,0))),zp.temp1Matrix4.scale(zp.temp1Vector3.set(...n)),zp.temp1Matrix4.transpose().toArray()}computerGradient(t,e){t=(0,Np.filter)(t,(t=>(0,Np.isNumber)(t)));let n=(0,Np.clamp)(e,0,1),i=t.length;for(let e=i-1;e>=0;e--){if(n===e/(i-1))return t[e];if(n>e/(i-1))return n-=e/(i-1),n*=1/((e+1)/(i-1)-e/(i-1)),(t[e+1]-t[e])*n+t[e]}return 0}computerPointerWidthRadius(t,e){t.length<2||(t.length<3&&(e=!1),this.pointerWidthRadius=[],t=(0,Np.cloneDeep)(t),e&&Object.defineProperties(t,{[-1]:{value:(0,Np.last)(t),configurable:!1,enumerable:!1,writable:!1},[t.length]:{value:(0,Np.first)(t),configurable:!1,enumerable:!1,writable:!1}}),t.map(((n,i)=>{const{vector3:r,radius:s=.1,segments:a=0,scale:o={x:1,y:1}}=n;if(t[i-1]&&t[i+1]){let e=zp.temp1Vector3.set(...r).sub(zp.tempVector3.set(...t[i-1].vector3)).normalize().clone(),n=zp.temp2Vector3.set(...t[i+1].vector3).sub(zp.tempVector3.set(...r)).normalize().clone(),l=e.clone().multiplyScalar(-1).angleTo(n),c=s/Math.tan(l/2),u=new sn(...r).sub(e.clone().multiplyScalar(c)),h=new sn(...r).add(n.clone().multiplyScalar(c)).clone().sub(u),d=s/Math.sin(l/2),p=n.clone().add(e).multiplyScalar(.5).sub(e).setLength(d).add(zp.tempVector3.set(...r)),f=zp.temp1Vector3.set(-e.z,0,e.x).angleTo(zp.temp2Vector3.set(n.x,0,n.z))<Math.PI/2;if(0===zp.temp1Vector3.set(e.x,0,e.z).angleTo(zp.temp2Vector3.set(n.x,0,n.z))){let{x:t=1,y:e=1}=o,n=(0,Np.last)(this.pointerWidthRadius).matrix;this.pointerWidthRadius.push({vector3:r,matrix:zp.temp1Matrix4.identity().extractRotation(zp.temp2Matrix4.set(...n)).multiply(zp.temp3Matrix4.identity().scale(zp.temp1Vector3.set(1,e,t))).transpose().toArray()})}else if(0===a){let{x:t=1,y:e=1}=o;this.pointerWidthRadius.push({vector3:r,matrix:this.computerMatrix(f?p.toArray():r,f?r:p.toArray(),[1,e,t])})}else for(let e=0;e<=a;e++){let n=e*((Math.PI-l)/a),r=Math.PI-n-l/2,c=s*Math.sin(n)/Math.sin(r),d=h.clone().setLength(c).add(u).clone().sub(p).setLength(s).add(p),{x:m=1,y:g=1}=(0,Np.get)(t[i-1],["scale"])||{},{x:v=1,y:_=1}=(0,Np.get)(t[i+1],["scale"])||{},{x:y=1,y:x=1}=o;y=this.computerGradient([(m+y)/2,y,(y+v)/2],e/a),x=this.computerGradient([(g+x)/2,x,(x+_)/2],e/a),this.pointerWidthRadius.push({vector3:d.toArray(),matrix:this.computerMatrix(f?p.toArray():d.toArray(),f?d.toArray():p.toArray(),[1,x,y])})}}else if(i===t.length-1)if(e)this.pointerWidthRadius.push((0,Np.first)(this.pointerWidthRadius));else{let t=(0,Np.last)(this.pointerWidthRadius),e=zp.temp1Vector3.set(...r).sub(zp.temp3Vector3.set(...t.vector3)).normalize(),n=zp.temp2Vector3.set(e.z,0,-e.x).add(zp.temp3Vector3.set(...r)).toArray(),{x:i=1,y:s=1}=o;this.pointerWidthRadius.push({vector3:r,matrix:this.computerMatrix(r,n,[1,s,i])})}else{let{x:e=1,y:n=1}=o,s=zp.temp1Vector3.set(...t[i+1].vector3).sub(zp.temp2Vector3.set(...r)).normalize(),a=zp.temp1Vector3.set(s.z,0,-s.x).add(zp.temp2Vector3.set(...r)).toArray();this.pointerWidthRadius.push({vector3:r,matrix:this.computerMatrix(r,a,[1,n,e])})}})))}computerPathLength(t){let e=0;return t.map(((n,i)=>{i<t.length-1&&(zp.temp1Vector3.set(...n),zp.temp2Vector3.set(...t[i+1]),e+=zp.temp1Vector3.distanceTo(zp.temp2Vector3))})),e}setExtrudeMesh(t,e,n,i,r,s){let a=this.computerPathLength(s.map((t=>[...t,0]))),o=this.computerPathLength([t,n]),l=[],c=[];return s.map(((u,h)=>{if(h<s.length-1){let d=zp.tempVector3.set(0,u[1],-u[0]).applyMatrix4(zp.temp1Matrix4.set(...e)).add(zp.temp1Vector3.set(...t)).toArray(),p=zp.tempVector3.set(0,s[h+1][1],-s[h+1][0]).applyMatrix4(zp.temp1Matrix4.set(...e)).add(zp.temp1Vector3.set(...t)).toArray(),f=zp.tempVector3.set(0,s[h+1][1],-s[h+1][0]).applyMatrix4(zp.temp1Matrix4.set(...i)).add(zp.temp1Vector3.set(...n)).toArray(),m=zp.tempVector3.set(0,u[1],-u[0]).applyMatrix4(zp.temp1Matrix4.set(...i)).add(zp.temp1Vector3.set(...n)).toArray();l.push(...d,...p,...f,...d,...f,...m);let g=this.computerPathLength([(0,Np.first)(s),...s.slice(0,h+1)].map((t=>[...t,0])))/a,v=this.computerPathLength([(0,Np.first)(s),...s.slice(0,h+2)].map((t=>[...t,0])))/a,_=[r/a,g],y=[r/a,v],x=[(r+o)/a,v],b=[(r+o)/a,g];c.push(..._,...y,...x,..._,...x,...b)}})),{geometryPoint:l,uvPoint:c}}updateGeometry(t){const{paths:e,shapePath:n,closed:i}=t;this.computerPointerWidthRadius(e,i);let r=[],s=[];for(let t=0;t<this.pointerWidthRadius.length-1;t++){let e=this.pointerWidthRadius[t],i=this.pointerWidthRadius[t+1],a=this.computerPathLength(this.pointerWidthRadius.slice(0,t+1).map((t=>t.vector3)));const{geometryPoint:o,uvPoint:l}=this.setExtrudeMesh(e.vector3,e.matrix,i.vector3,i.matrix,a,n);r.push(...o),s.push(...l)}let a=new rr,o=new Float32Array(r),l=new qi(o,3,!1);a.setAttribute("position",l);let c=new Float32Array(s),u=new qi(c,2,!1);a.setAttribute("uv",u),a.computeVertexNormals(),this.geometry.dispose(),this.geometry=a,this.dispatchEvent({type:"loaded"})}}s(zp,"temp1Vector2",new $e),s(zp,"temp2Vector2",new $e),s(zp,"temp3Vector2",new $e),s(zp,"tempVector3",new sn),s(zp,"temp1Vector3",new sn),s(zp,"temp2Vector3",new sn),s(zp,"temp3Vector3",new sn),s(zp,"temp1Matrix4",new Qn),s(zp,"temp2Matrix4",new Qn),s(zp,"temp3Matrix4",new Qn);var Up=new class extends Ue{constructor(){super(),s(this,"isProd",!0),s(this,"isDev",!1),s(this,"_timeTemp",performance.now()),s(this,"_accumulate",0),s(this,"_box3",new An),s(this,"_size",new sn),s(this,"_center",new sn),s(this,"_clock",new bu),s(this,"_keepZoomDoms",[]),s(this,"workList",[]),s(this,"clock",new bu),this.requestAnimationFrame()}requestAnimationFrame(){this._accumulate+=1;const t=this._timeTemp=performance.now();this.dispatchEvent({type:"requestAnimationFrame",timeTemp:t,accumulate:this._accumulate}),this._computerDomZoom();let e=this.workList.splice(0,1)[0];e&&e(),setTimeout((()=>{this.requestAnimationFrame()}),45-this._clock.getDelta())}_computerDomZoom(){this._keepZoomDoms=this._keepZoomDoms.filter((t=>this.inDocument(t.dom))),this._keepZoomDoms.map(((t,e)=>{let n=t.dom.parentNode,i=Math.min(n.clientWidth/t.width,n.clientHeight/t.height);Object.assign(t.dom.style,{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${i})`,width:`${t.width}px`,height:`${t.height}px`})}))}keepZoom(t,e=1920,n=1080){t&&(this._keepZoomDoms=this._keepZoomDoms.filter((e=>e.dom!==t)),this._keepZoomDoms.push({dom:t,width:e,height:n}),t.dataset.a="这个元素缩放比例由 threeUtils.keepZoom 方法设置",this._computerDomZoom())}addWork(t,e=!1){t&&!this.workList.includes(t)&&(e?this.workList.splice(1,0,t):this.workList.push(t))}inDocument(t){return null!==t&&(null!==t.parentNode&&(t.parentNode===document||this.inDocument(t.parentNode)))}getCenter(t){return t instanceof Si?(this._box3.setFromObject(t),this._box3.getCenter(this._center)):t instanceof rr&&(t.computeBoundingBox(),t.boundingBox.getCenter(this._center)),this._center}getSize(t){return t instanceof Si?(this._box3.setFromObject(t),this._box3.getSize(this._size)):t instanceof rr&&(t.computeBoundingBox(),t.boundingBox.getSize(this._size)),this._size}alignBottom(t,e=0){t instanceof Si?(this._box3.setFromObject(t),this._box3.getCenter(this._center),this._box3.getSize(this._size),t.position.y-=this._center.y-.5*this._size.y,t.position.y+=e,t.updateMatrixWorld(!0)):t instanceof rr&&(t.computeBoundingBox(),t.translate(0,-t.boundingBox.min.y+e,0))}centerObject3D(t){t instanceof Si?(this._box3.setFromObject(t),this._box3.getCenter(this._center),t.position.sub(this._center),t.updateMatrixWorld(!0)):t instanceof rr&&t.center()}center(t){this.centerObject3D(t)}scaleTo(t,e=1){const n=this.getSize(t),i=e/Math.max(n.x,n.y,n.z);t instanceof Si?t.scale.multiplyScalar(i):t instanceof rr&&t.scale(i,i,i)}rand(t,e){return Math.floor(Math.random()*(e-t+1)+t)}};function kp(t,e){const n=1-e,i=t[1]*n+t[2]*e;return((t[0]*n+t[1]*e)*n+i*e)*n+(i*n+(t[2]*n+t[3]*e)*e)*e}class Fp{constructor(t={},e=[.8,0,.2,1],n=500){s(this,"_keys",[]),s(this,"_bezier",[.8,0,.2,1]),s(this,"_Xbezier",[0,.8,.2,1]),s(this,"_Ybezier",[0,0,1,1]),s(this,"timeTemp",performance.now()),s(this,"_duration",0),s(this,"_delay",0),s(this,"_",{}),s(this,"onChangeCall",(t=>{})),s(this,"runbindThis",this.run.bind(this)),s(this,"_isDone",!1),this.setDuration(n),this.setBezier(e),this.reset(t)}setBezier(t=[.8,0,.2,1]){return this._bezier=[...t],this._Xbezier=[0,t[0],t[2],1],this._Ybezier=[0,t[1],t[3],1],this}setDuration(t=500){return this._duration=t,this}setDelay(t=0){return this._delay=t,this}run({timeTemp:t}){return this.timeTemp=t,!this.onChangeCall||this.isDone()?Up.removeEventListener("requestAnimationFrame",this.runbindThis):this.onChangeCall(this.getJson()),this}onChange(t){return this.onChangeCall=t,this.onChangeCall(this.getJson()),this}get(t){if(t=String(t),this._keys.includes(t)&&this.timeTemp<this._[t+"_startTime"]+this._duration){let e=this._[t+"_start"],n=this._[t+"_end"],i=Math.min(1,Math.max(0,(this.timeTemp-this._[t+"_startTime"])/this._duration)),r=0;for(;kp(this._Xbezier,r+.1)<i;)r+=.1;for(;kp(this._Xbezier,r+.01)<i;)r+=.01;for(;kp(this._Xbezier,r+.001)<i;)r+=.001;return r=Math.min(1,Math.max(0,r)),kp(this._Ybezier,r)*(n-e)+e}return this._keys.includes(t)&&this.timeTemp>=this._[t+"_startTime"]+this._duration?this._[t+"_end"]:0}async set(t){let e=performance.now()+this._delay;for(let n in t)this._keys.includes(n)&&Math.abs(t[n]-this._[n+"_end"])>.001?(this._[n+"_start"]=this.get(n),this._[n+"_end"]=t[n],this._[n+"_startTime"]=e,this._isDone=!1):this._keys.includes(n)||(this._[n+"_start"]=t[n],this._[n+"_end"]=t[n],this._[n+"_startTime"]=e-this._duration,this._isDone=!1),this._keys.includes(n)||this._keys.push(n);return this._isDone||(Up.removeEventListener("requestAnimationFrame",this.runbindThis),Up.addEventListener("requestAnimationFrame",this.runbindThis),await new Promise((t=>setTimeout(t,this._duration+50)))),this}reset(t){for(let e in t)this._keys.includes(e)||this._keys.push(e),this._[e+"_start"]=t[e],this._[e+"_end"]=t[e],this._[e+"_startTime"]=-this._duration;return this.onChangeCall&&this.onChangeCall(this.getJson()),this._isDone=!0,this}getKeys(){return[...this._keys]}hasKey(t){return this._keys.includes(t)}getJson(){let t=this.getKeys(),e={};return t.map((t=>{e[t]=this.get(t)})),e}isDone(){if(this._isDone)return!0;let t=!1;for(let e in this._keys)if(t=this._[this._keys[e]+"_startTime"]+this._duration<this.timeTemp,!t)return!1;return!!this._isDone||(this._isDone=!0,!1)}}class Bp extends Vo{constructor(t="",e=10,n="rgba(255, 255, 255, 1)"){super(new Eo),this._text=`${t}`,this._textHeight=e,this._color=n,this._backgroundColor=!1,this._padding=0,this._borderWidth=0,this._borderRadius=0,this._borderColor="white",this._strokeWidth=0,this._strokeColor="white",this._fontFace="Arial",this._fontSize=90,this._fontWeight="normal",this._canvas=document.createElement("canvas"),this._genCanvas()}get text(){return this._text}set text(t){this._text=t,this._genCanvas()}get textHeight(){return this._textHeight}set textHeight(t){this._textHeight=t,this._genCanvas()}get color(){return this._color}set color(t){this._color=t,this._genCanvas()}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t,this._genCanvas()}get padding(){return this._padding}set padding(t){this._padding=t,this._genCanvas()}get borderWidth(){return this._borderWidth}set borderWidth(t){this._borderWidth=t,this._genCanvas()}get borderRadius(){return this._borderRadius}set borderRadius(t){this._borderRadius=t,this._genCanvas()}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor=t,this._genCanvas()}get fontFace(){return this._fontFace}set fontFace(t){this._fontFace=t,this._genCanvas()}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t,this._genCanvas()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this._genCanvas()}get strokeWidth(){return this._strokeWidth}set strokeWidth(t){this._strokeWidth=t,this._genCanvas()}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this._genCanvas()}_genCanvas(){const t=this._canvas,e=t.getContext("2d"),n=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],i=n.map((t=>t*this.fontSize*.1)),r=(Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius]).map((t=>t*this.fontSize*.1)),s=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],a=s.map((t=>t*this.fontSize*.1)),o=this.text.split("\n"),l=`${this.fontWeight} ${this.fontSize}px ${this.fontFace}`;e.font=l;const c=Math.max(...o.map((t=>e.measureText(t).width))),u=this.fontSize*o.length;if(t.width=c+2*i[0]+2*a[0],t.height=u+2*i[1]+2*a[1],this.borderWidth){if(e.strokeStyle=this.borderColor,i[0]){const n=i[0]/2;e.lineWidth=i[0],e.beginPath(),e.moveTo(n,r[0]),e.lineTo(n,t.height-r[3]),e.moveTo(t.width-n,r[1]),e.lineTo(t.width-n,t.height-r[2]),e.stroke()}if(i[1]){const n=i[1]/2;e.lineWidth=i[1],e.beginPath(),e.moveTo(Math.max(i[0],r[0]),n),e.lineTo(t.width-Math.max(i[0],r[1]),n),e.moveTo(Math.max(i[0],r[3]),t.height-n),e.lineTo(t.width-Math.max(i[0],r[2]),t.height-n),e.stroke()}if(this.borderRadius){const n=Math.max(...i),s=n/2;e.lineWidth=n,e.beginPath(),[!!r[0]&&[r[0],s,s,r[0]],!!r[1]&&[t.width-r[1],t.width-s,s,r[1]],!!r[2]&&[t.width-r[2],t.width-s,t.height-s,t.height-r[2]],!!r[3]&&[r[3],s,t.height-s,t.height-r[3]]].filter((t=>t)).forEach((([t,n,i,r])=>{e.moveTo(t,i),e.quadraticCurveTo(n,i,n,r)})),e.stroke()}}this.backgroundColor&&(e.fillStyle=this.backgroundColor,this.borderRadius?(e.beginPath(),e.moveTo(i[0],r[0]),[[i[0],r[0],t.width-r[1],i[1],i[1],i[1]],[t.width-i[0],t.width-i[0],t.width-i[0],i[1],r[1],t.height-r[2]],[t.width-i[0],t.width-r[2],r[3],t.height-i[1],t.height-i[1],t.height-i[1]],[i[0],i[0],i[0],t.height-i[1],t.height-r[3],r[0]]].forEach((([t,n,i,r,s,a])=>{e.quadraticCurveTo(t,r,n,s),e.lineTo(i,a)})),e.closePath(),e.fill()):e.fillRect(i[0],i[1],t.width-2*i[0],t.height-2*i[1])),e.translate(...i),e.translate(...a),e.font=l,e.fillStyle=this.color,e.textBaseline="bottom";const h=this.strokeWidth>0;h&&(e.lineWidth=this.strokeWidth*this.fontSize/10,e.strokeStyle=this.strokeColor),o.forEach(((t,n)=>{const i=(c-e.measureText(t).width)/2,r=(n+1)*this.fontSize;h&&e.strokeText(t,i,r),e.fillText(t,i,r)})),this.material.map&&this.material.map.dispose();const d=this.material.map=new bn(t);d.minFilter=mt,d.needsUpdate=!0;const p=this.textHeight*o.length+2*n[1]+2*s[1];this.scale.set(p*t.width/t.height,p,0)}}class Vp extends Bp{constructor(t="SpriteText",e,n){super(t,e,n),this.text=`${t}\n\n\n`,this.renderOrder=100,this.padding=4,this.borderRadius=4,this.borderWidth=0,this.textHeight=20,this.strokeWidth=0,this.strokeColor="#444",this.material.map&&(this.material.map.anisotropy=16,this.material.transparent=!0,this.material.depthTest=!1,this.material.sizeAttenuation=!1)}_genCanvas(){super._genCanvas(),this.scale.multiplyScalar(8e-4),this.parent&&this.scale.divide(this.parent.scale),(async()=>{for(;!Vp.Icon1PNG.complete;)await new Promise((t=>setTimeout(t,200)));super._genCanvas(),this.scale.multiplyScalar(8e-4),this.parent&&this.scale.divide(this.parent.scale);const t=this._canvas,{width:e,height:n}=t,i=t.getContext("2d");i.globalCompositeOperation="destination-over",i.setTransform(1,0,0,1,0,0);const{width:r,height:s}=Vp.Icon1PNG;i.drawImage(Vp.Icon1PNG,0,0,r,s,.5*(e-8*r),.5*n-8*s,8*r,8*s),this.material.map.needsUpdate=!0})()}}s(Vp,"Icon1PNG",(()=>{const t=new Image;return t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAQCAMAAADOBMQXAAAANlBMVEUAAAD////////////////////////////////////////////////////////////////////xY8b8AAAAEnRSTlMACiAWPC1dTG19oZCFUrG5z8DFPDqDAAAAV0lEQVQY03XMVw7AIAwDUCeMLkZ7/8tWEYoI0L5PyzZ+0EpiN2tlHhEgOFisz94ioAlbFwCVo8roeFcMIx9NhkXpEokw8KfwmKRSSsLM1ac6LOId8cHsXy/fA1g4LPaKAAAAAElFTkSuQmCC",t})());class Gp extends yr{constructor(){super(Gp.geometry),s(this,"material",new Ar({uniforms:{frame:{value:0},color:{value:new Gi(65535)}},vertexShader:`\n            ${Wr.common}\n            ${Wr.logdepthbuf_pars_vertex}\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                ${Wr.logdepthbuf_vertex}\n            }\n        `,fragmentShader:`\n            ${Wr.logdepthbuf_pars_fragment}\n            uniform float frame;\n            uniform vec3 color;\n            varying vec2 vUv;\n\n            float pi = 3.1415926;\n\n            float lineWidth = 0.05;\n\n            vec3 fragColor(){\n                 return color;\n            }\n\n            float opacity1(){\n\n                vec2 center = vec2(0.5);\n\n                float distanceToCenter = distance( center, vUv );\n\n                float rang = fract(frame / 200.0) / 2.0;\n\n                float opacity = 0.0;\n\n                if(distanceToCenter < (rang - lineWidth) ){\n                    opacity =  0.6;\n                }else{\n                    opacity =  0.0;\n                }\n\n                opacity = max(opacity, (1.0 - smoothstep( 0.0 , lineWidth , abs(distanceToCenter - (rang - lineWidth) )  ) ) );\n\n                opacity *= cos(rang * pi);\n\n                return opacity;\n            }\n\n            float opacity2(){\n\n                vec2 center = vec2(0.5);\n\n                float distanceToCenter = distance( center, vUv );\n\n                float rang = fract(frame / 200.0 + 0.5) / 2.0;\n\n                float opacity = 0.0;\n\n                if(distanceToCenter < (rang - lineWidth) ){\n                    opacity =  0.6;\n                }else{\n                    opacity =  0.0;\n                }\n\n                opacity = max(opacity, (1.0 - smoothstep( 0.0 , lineWidth , abs(distanceToCenter - (rang - lineWidth) )  ) ) );\n\n                opacity *= cos(rang * pi);\n\n                return opacity;\n            }\n\n            void main() {\n                ${Wr.logdepthbuf_fragment}\n                gl_FragColor = vec4(fragColor(),max(  opacity1(), opacity2() ));\n\n                if(gl_FragColor.a < 0.1){\n                    discard;\n                }\n\n            }\n        `,side:m,depthTest:!0,depthWrite:!0,transparent:!0})),s(this,"renderOrder",1),s(this,"onBeforeRender",((t,e,n,i,r,s)=>{this.material.uniforms.frame.value=t.info.render.frame}))}setColor(t){this.material.uniforms.color.value.set(t)}}s(Gp,"geometry",(()=>{const t=new Gr(3,3,1,1);return t.rotateX(Math.PI/-2),t.translate(0,.01,0),t})());class Wp extends yr{constructor(){super(),s(this,"type","greenAlermMesh"),s(this,"mark",(()=>{const t=new Gp;return t.setColor("#1C864B"),this.add(t),t})()),this.loadModal()}async loadModal(){const t=await op.gltfLoader.loadAsync("/glb/green_triangle.glb");t.scene.children[1].material.metalness=.5,t.scene.children[1].material.roughness=.5,t.scene.children[1].material.emissive.set("#1C864B"),t.scene.children[1].material.color.set("#1C864B"),t.scene.children[1].castShadow=!0,t.scene.children[1].userData={cursor:"pointer",enableEvent:!0},t.scene.children[1].addEventListener("click",(t=>this.dispatchEvent(t))),t.scene.children[1].addEventListener("mouseenter",(t=>this.dispatchEvent(t))),t.scene.children[1].addEventListener("mouseleave",(t=>this.dispatchEvent(t))),Up.scaleTo(t.scene,1.5),this.add(t.scene),this.dispatchEvent({type:"loaded"})}}class Hp extends yr{constructor(){super(Hp.geometry,Hp.material),s(this,"look",new sn(0,0,0)),s(this,"renderOrder",2),s(this,"onBeforeRender",((t,e,n,i,r,s)=>{this.look.copy(n.position).setY(this.position.y),this.lookAt(this.look)}))}}s(Hp,"geometry",(()=>{const t=new Hl(.1,.1,8,32,1,!1,0,2*Math.PI);return t.translate(0,4,0),t})()),s(Hp,"material",new Ar({uniforms:{color:{value:new Gi(65535)}},vertexShader:`\n            ${Wr.common}\n            ${Wr.logdepthbuf_pars_vertex}\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                ${Wr.logdepthbuf_vertex}\n            }\n        `,fragmentShader:`\n            ${Wr.logdepthbuf_pars_fragment}\n            uniform vec3 color;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = vec4(color, vUv.y);\n                ${Wr.logdepthbuf_fragment}\n            }\n        `,depthTest:!0,depthWrite:!0,transparent:!0}));class jp extends yr{constructor(t="planeText"){super(jp.geometry),s(this,"type","PlaneText"),s(this,"spriteText",new Bp("")),s(this,"material",new Hi({transparent:!0,side:v,map:this.spriteText.material.map})),this.set({text:t})}set(t){for(let e in t)this.spriteText[e]=t[e];this.scale.copy(this.spriteText.scale),this.scale.max(new sn(1,1,1)),this.material.map=this.spriteText.material.map}get(t){return this.spriteText[t]}}s(jp,"geometry",new Gr(1,1,1,1));class Xp extends yr{constructor(t){super(),s(this,"type","numberLabel"),s(this,"planeText",(()=>{const t=new jp;return t.set({backgroundColor:"#000000aa",padding:3}),t.renderOrder=12,t.material.depthTest=!1,this.add(t),t})()),s(this,"onBeforeRender",((t,e,n,i,r,s)=>{n.getWorldQuaternion(Xp.quaternion),this.rotation.setFromQuaternion(Xp.quaternion),this.updateMatrixWorld()})),this.setText(t)}setText(t){this.planeText.set({text:t}),this.planeText.scale.multiplyScalar(.08),Xp.box.setFromObject(this.planeText),Xp.box.getSize(Xp.size),this.planeText.position.set(Xp.size.x/2-.1,0,.3)}}s(Xp,"box",new An),s(Xp,"size",new sn),s(Xp,"quaternion",new rn);class qp extends yr{constructor(){super(),s(this,"castShadow",!0),s(this,"type","redAlermMesh"),s(this,"mark",(()=>{const t=new Gp;return t.setColor("#E20524"),this.add(t),t})()),this.loadModal()}async loadModal(){const t=await op.gltfLoader.loadAsync("/glb/rad_triangle.glb");t.scene.children[1].material.metalness=0,t.scene.children[1].material.roughness=0,t.scene.children[1].material.emissive.set("#E20524"),t.scene.children[1].material.color.set("#E20524"),t.scene.children[1].castShadow=!0,t.scene.children[1].userData={cursor:"pointer",enableEvent:!0},t.scene.children[1].addEventListener("click",(t=>this.dispatchEvent(t))),t.scene.children[1].addEventListener("mouseenter",(t=>this.dispatchEvent(t))),t.scene.children[1].addEventListener("mouseleave",(t=>this.dispatchEvent(t))),Up.scaleTo(t.scene,1.5),this.add(t.scene),this.dispatchEvent({type:"loaded"})}}class Yp extends yr{constructor(){super(),s(this,"castShadow",!0),s(this,"type","yellowAlermMesh"),s(this,"mark",(()=>{const t=new Gp;return t.setColor("#F28401"),this.add(t),t})()),this.loadModal()}async loadModal(){const t=await op.gltfLoader.loadAsync("/glb/yellow_triangle.glb");t.scene.children[1].material.metalness=.9,t.scene.children[1].material.roughness=.5,t.scene.children[1].material.emissive.set("#F28401"),t.scene.children[1].material.color.set("#F28401"),t.scene.children[1].castShadow=!0,t.scene.children[1].userData={cursor:"pointer",enableEvent:!0},t.scene.children[1].addEventListener("click",(t=>this.dispatchEvent(t))),t.scene.children[1].addEventListener("mouseenter",(t=>this.dispatchEvent(t))),t.scene.children[1].addEventListener("mouseleave",(t=>this.dispatchEvent(t))),Up.scaleTo(t.scene,1.5),this.add(t.scene),this.dispatchEvent({type:"loaded"})}}var Zp=n.p+"img/ning_de_map.4d9d9667.png",Kp=(n.p,JSON.parse('{"R2":[{"type":"Feature","id":"ningde_polygon.1","geometry":{"type":"MultiPolygon","coordinates":[[[[119.76959808,27.30675501],[119.77056792,27.305676],[119.77064784,27.30483],[119.77105896,27.30389697],[119.77114788,27.30305304],[119.77130088,27.30196503],[119.77155612,27.30089097],[119.77178616,27.30022596],[119.772297,27.29972601],[119.77321608,27.29926503],[119.77446708,27.29898297],[119.77523388,27.29904597],[119.77595208,27.299061],[119.77700796,27.29837403],[119.77903692,27.29732796],[119.77995996,27.29697201],[119.78091792,27.29689101],[119.78153604,27.29667096],[119.78313192,27.29573001],[119.78420904,27.29496897],[119.784627,27.29416896],[119.78438796,27.29303001],[119.78386884,27.29195199],[119.78319096,27.290673],[119.78207388,27.28923498],[119.78091684,27.28771704],[119.77944084,27.28584],[119.778543,27.28452096],[119.77751916,27.28282698],[119.77698708,27.28174401],[119.77628796,27.28012599],[119.77537104,27.27874701],[119.77395408,27.277209],[119.77201512,27.27576801],[119.77057584,27.27129303],[119.77364412,27.26984097],[119.77509996,27.26610903],[119.77289784,27.26059896],[119.76824304,27.26069499],[119.75901804,27.26411904],[119.75489784,27.26466399],[119.75173092,27.26241102],[119.75062896,27.25965603],[119.75726484,27.25582302],[119.765061,27.25060104],[119.76756588,27.24820803],[119.77007112,27.24620103],[119.77224696,27.24505704],[119.77410096,27.243621],[119.775834,27.24070104],[119.77586208,27.240453],[119.77393608,27.23439204],[119.77121412,27.22917303],[119.76803208,27.22580397],[119.76504912,27.22036104],[119.76007212,27.21726504],[119.75234292,27.20779704],[119.750391,27.20255598],[119.74731588,27.19564704],[119.74493016,27.19612197],[119.74188384,27.19849401],[119.73771216,27.19718496],[119.73347208,27.19309797],[119.73127788,27.18804798],[119.73011904,27.18297702],[119.73213216,27.18062604],[119.74085712,27.17768403],[119.74390308,27.17531199],[119.74375512,27.16929702],[119.74151808,27.162396],[119.73680712,27.16017102],[119.73210804,27.15840702],[119.72873412,27.14736096],[119.73142692,27.143019],[119.73212208,27.14283396],[119.73314412,27.14237901],[119.73385404,27.14145903],[119.73398292,27.13956903],[119.73373092,27.13859703],[119.73476196,27.137277],[119.73546288,27.13665501],[119.73796596,27.13488498],[119.74129992,27.13373703],[119.74200084,27.13316598],[119.74239,27.13248198],[119.74277088,27.13144698],[119.744892,27.1287],[119.74586004,27.12652299],[119.74554,27.12555],[119.74451796,27.12337101],[119.744334,27.122283],[119.74439592,27.12136401],[119.74491396,27.12062097],[119.74721688,27.11919402],[119.75089392,27.11824398],[119.76163092,27.11826198],[119.772954,27.11664504],[119.77392888,27.11430999],[119.77122312,27.10927404],[119.77061616,27.10558296],[119.77303608,27.09905301],[119.77358508,27.09643104],[119.77508808,27.09588798],[119.77853904,27.09507897],[119.78332092,27.09478998],[119.78264304,27.088893],[119.78276616,27.08666703],[119.792421,27.07812504],[119.79581004,27.07114896],[119.80812204,27.06279003],[119.81185308,27.05924502],[119.81302092,27.05530698],[119.81459592,27.04791303],[119.81835288,27.04505598],[119.82575304,27.04417398],[119.82822912,27.04135203],[119.82549312,27.03544803],[119.822697,27.02770803],[119.82054996,27.02408697],[119.81749392,27.01635399],[119.81629008,27.00994797],[119.81950092,27.006417],[119.82258288,27.00656802],[119.82603708,27.01084401],[119.82840012,27.01261998],[119.83323816,27.01180503],[119.83980708,27.00910296],[119.84658408,27.00455796],[119.85232212,26.99935299],[119.85652116,26.994186],[119.85861312,26.99084898],[119.86044912,26.99084196],[119.86122708,26.99039601],[119.86344108,26.98990299],[119.86545888,26.98834698],[119.86761708,26.98494003],[119.86534908,26.98398198],[119.86364412,26.98313697],[119.86266312,26.98131096],[119.86130808,26.97949296],[119.85869304,26.97955002],[119.856969,26.97790797],[119.85333804,26.97479604],[119.850264,26.97150402],[119.84736096,26.967537],[119.84837508,26.96327298],[119.85037092,26.960877],[119.85033708,26.95953402],[119.848797,26.95771998],[119.84576616,26.956107],[119.84200488,26.95518198],[119.83733208,26.955117],[119.83506912,26.95432698],[119.83484916,26.95298796],[119.83629708,26.95110804],[119.83847508,26.94854097],[119.83911696,26.94432699],[119.84141304,26.93902698],[119.844513,26.93593503],[119.84519592,26.9334],[119.8431,26.93176704],[119.83895388,26.93034603],[119.835216,26.93026098],[119.83256784,26.92897497],[119.83116312,26.92510101],[119.83330404,26.92102203],[119.83489992,26.91762696],[119.83408596,26.91495801],[119.83220892,26.90710398],[119.83349988,26.90640396],[119.83583304,26.90261496],[119.83560012,26.90077203],[119.83445496,26.89978896],[119.83183308,26.89951104],[119.82753108,26.89927002],[119.82736512,26.89912701],[119.82865104,26.89218702],[119.83267404,26.88105096],[119.83630104,26.87406102],[119.84009904,26.864541],[119.84330196,26.86031901],[119.84563008,26.85805101],[119.84900508,26.85202002],[119.85082308,26.84842803],[119.85141096,26.84681703],[119.85126408,26.84571903],[119.850606,26.84484099],[119.84703084,26.84331099],[119.83374504,26.83758798],[119.82600612,26.83335699],[119.80556784,26.82768303],[119.79622404,26.82359703],[119.78862804,26.81840799],[119.78277984,26.80875198],[119.78059608,26.80026102],[119.78132292,26.79001101],[119.783808,26.77551498],[119.78599896,26.75215899],[119.78571996,26.74014201],[119.787192,26.72241102],[119.78777088,26.710407],[119.78908704,26.70249897],[119.79098388,26.698545],[119.79317484,26.69400198],[119.797488,26.68803003],[119.78755308,26.69097303],[119.78331696,26.69127102],[119.77425288,26.69010696],[119.75978304,26.68703796],[119.74153788,26.68438998],[119.72953188,26.68386897],[119.72103804,26.68444398],[119.71107396,26.68662702],[119.70638208,26.68910904],[119.69509284,26.69670297],[119.68088112,26.71000002],[119.67362316,26.71732998],[119.66470488,26.72612001],[119.662506,26.72955801],[119.66016816,26.73599499],[119.65884696,26.74001898],[119.65753188,26.74429803],[119.65337892,26.74467999],[119.65026492,26.74428597],[119.64598308,26.74492704],[119.64264696,26.75053404],[119.61448992,26.74981602],[119.61221508,26.75127798],[119.61090504,26.75398599],[119.610315,26.75728098],[119.61046296,26.76064896],[119.61192996,26.76438297],[119.61287604,26.77005702],[119.61317196,26.77474296],[119.61244296,26.776791],[119.61082908,26.77861998],[119.60739216,26.77964598],[119.59989588,26.78078898],[119.59785792,26.781228],[119.59712892,26.78163597],[119.59587108,26.78299101],[119.59506504,26.78414301],[119.59490016,26.78520303],[119.59738092,26.79157899],[119.59982712,26.79657903],[119.604123,26.80360704],[119.60858304,26.80740999],[119.61490212,26.813475],[119.621466,26.81907498],[119.62878696,26.82420003],[119.63111508,26.82605403],[119.63250504,26.82810396],[119.63279196,26.82962604],[119.63235816,26.83088703],[119.63126304,26.83231101],[119.63020392,26.83381203],[119.62825812,26.83501704],[119.62654704,26.83573803],[119.61504288,26.83713996],[119.606832,26.83663299],[119.60160084,26.84204001],[119.60300592,26.84637396],[119.608812,26.85221604],[119.60936316,26.85574998],[119.61054504,26.85668103],[119.61426816,26.86010499],[119.61716004,26.86284099],[119.62230912,26.86808304],[119.62121688,26.86944501],[119.61985392,26.87040999],[119.61983988,26.87096304],[119.61901584,26.87171499],[119.61839196,26.87201298],[119.61765396,26.87199804],[119.61687708,26.87169402],[119.59493904,26.86734099],[119.58944292,26.87016798],[119.58832512,26.87129901],[119.580732,26.87423499],[119.57334912,26.87602104],[119.56261788,26.87650902],[119.55731004,26.87893398],[119.55751884,26.88628401],[119.56027212,26.89356996],[119.56286196,26.90407899],[119.56392792,26.91485298],[119.55908916,26.92485099],[119.55136788,26.93262402],[119.54397816,26.94291903],[119.53925388,26.947863],[119.53221192,26.95240503],[119.52563796,26.95509504],[119.52321696,26.96021397],[119.51676612,26.96749902],[119.51045316,26.97018498],[119.50329312,26.970138],[119.49532812,26.96895702],[119.48841792,26.96844096],[119.48568516,26.96889798],[119.48271804,26.97197796],[119.48007204,26.97688503],[119.477529,26.98477398],[119.47672512,26.99100198],[119.47541004,26.99747397],[119.47304016,27.00329103],[119.46858408,27.00756198],[119.46197304,27.00937098],[119.45287512,27.01309104],[119.45059704,27.01407402],[119.44809504,27.01598697],[119.44748916,27.02083104],[119.44692684,27.02682099],[119.452608,27.03515103],[119.44478808,27.03928896],[119.440197,27.040113],[119.43664488,27.04136598],[119.43282312,27.042165],[119.42737092,27.04071402],[119.41686108,27.03388797],[119.40697008,27.03048597],[119.40387984,27.03034404],[119.39802912,27.03233997],[119.394279,27.03542697],[119.39364504,27.03934899],[119.40085188,27.04719501],[119.41236108,27.05997303],[119.41425216,27.06267699],[119.417202,27.06627096],[119.424825,27.07111098],[119.43546912,27.07425],[119.44560384,27.07762896],[119.45184804,27.08019603],[119.45195208,27.08357598],[119.45266308,27.08702802],[119.45887092,27.09834498],[119.45801412,27.10017603],[119.45551212,27.10037304],[119.44433304,27.09903501],[119.43584208,27.09899901],[119.426976,27.09834903],[119.42458308,27.09817101],[119.419623,27.10384596],[119.417724,27.11024901],[119.41890408,27.11623302],[119.41579116,27.11802996],[119.40542208,27.11008602],[119.40311304,27.110286],[119.40050916,27.11277504],[119.39755788,27.12030696],[119.398401,27.13042098],[119.39420808,27.13586904],[119.39136012,27.144108],[119.39393196,27.16063299],[119.39523516,27.16840899],[119.397537,27.176436],[119.41326288,27.17862903],[119.42150292,27.17936802],[119.430207,27.17825598],[119.43717516,27.17970399],[119.437929,27.188649],[119.43827604,27.19208601],[119.44506888,27.19652598],[119.44925208,27.19964196],[119.46642696,27.20888496],[119.47389516,27.21008196],[119.48121396,27.21541698],[119.48937912,27.22371399],[119.49416208,27.23003199],[119.50267212,27.23188599],[119.51238312,27.23095404],[119.52134316,27.23072697],[119.53102104,27.22841802],[119.54194704,27.22469796],[119.55397608,27.223713],[119.56423608,27.22392396],[119.573946,27.22231197],[119.58691896,27.21764304],[119.59063812,27.21318804],[119.59351596,27.20554002],[119.596482,27.20133603],[119.603448,27.20255499],[119.61133596,27.20881296],[119.61431388,27.21426102],[119.61751788,27.21832596],[119.618352,27.22956903],[119.61596484,27.23651298],[119.61799704,27.24450903],[119.61576792,27.26569998],[119.620674,27.27547101],[119.62017108,27.28513197],[119.619684,27.29137104],[119.62119708,27.29288304],[119.62798488,27.29507697],[119.62956096,27.29597499],[119.62859112,27.29876904],[119.62506204,27.30299796],[119.62151208,27.30630096],[119.61733608,27.30498804],[119.614671,27.30179601],[119.60996796,27.30003003],[119.60375616,27.30014496],[119.59861284,27.30162897],[119.59814988,27.30395196],[119.59665084,27.30629502],[119.59514208,27.30817503],[119.59421112,27.30904299],[119.595717,27.31054401],[119.59744716,27.31100103],[119.599308,27.31048803],[119.60232696,27.30935196],[119.60559792,27.30798099],[119.60764992,27.30769704],[119.608488,27.30809601],[119.60867988,27.30873303],[119.60867196,27.30999402],[119.60736804,27.31755501],[119.60761212,27.32002299],[119.60778096,27.32787198],[119.607255,27.33124896],[119.60769708,27.33451497],[119.60826804,27.337347],[119.61200196,27.34257699],[119.614635,27.34438104],[119.61927612,27.34337097],[119.622429,27.34516602],[119.624589,27.34883001],[119.62621404,27.35232102],[119.62694988,27.35278596],[119.62855296,27.35468298],[119.628666,27.35487702],[119.63197008,27.356328],[119.63872908,27.35871102],[119.649627,27.36100404],[119.65892688,27.36172503],[119.66718492,27.36200898],[119.67653088,27.36433899],[119.68597188,27.36988299],[119.69443008,27.376596],[119.69670816,27.38435796],[119.69733096,27.38832597],[119.69911584,27.388989],[119.701332,27.38929698],[119.70392184,27.38913597],[119.70561708,27.38968398],[119.70590292,27.39071898],[119.70673812,27.392904],[119.70886716,27.39529503],[119.71253412,27.39638502],[119.71918008,27.39765501],[119.720457,27.39705399],[119.72209788,27.395172],[119.72500704,27.39222504],[119.72756916,27.390906],[119.72883708,27.38960901],[119.73059892,27.38772504],[119.73342096,27.38639898],[119.73561696,27.38624202],[119.73705804,27.38656197],[119.73922092,27.38731698],[119.73943584,27.38709504],[119.73957696,27.38679804],[119.73973212,27.38583504],[119.74002912,27.384597],[119.74076496,27.38292597],[119.74110804,27.38153601],[119.74119984,27.38074896],[119.74109796,27.379674],[119.74092192,27.37852497],[119.74040316,27.37712601],[119.74021812,27.37650501],[119.74018104,27.37604196],[119.74028292,27.37568997],[119.74052304,27.37531899],[119.74083804,27.37524501],[119.74145004,27.37544004],[119.74236912,27.37607499],[119.74366296,27.37708101],[119.744487,27.37746099],[119.74659012,27.37809198],[119.74748796,27.37826802],[119.74849704,27.37814796],[119.74919112,27.37793502],[119.74988592,27.377388],[119.75044104,27.37675899],[119.75075604,27.37595304],[119.75085792,27.37509102],[119.75073696,27.37394199],[119.75045904,27.37321902],[119.74981104,27.37253403],[119.74913496,27.37206999],[119.74724604,27.37106001],[119.74625604,27.37037403],[119.74530204,27.36967896],[119.74427388,27.36851103],[119.74310712,27.36701001],[119.74194,27.36570303],[119.74047588,27.36422001],[119.740032,27.36357102],[119.73987396,27.36314496],[119.73985596,27.36279297],[119.74007808,27.36250596],[119.74048596,27.36219996],[119.741643,27.36194103],[119.74288392,27.36143199],[119.74408812,27.36111798],[119.746098,27.36058104],[119.74698612,27.36024804],[119.747412,27.35997003],[119.74760712,27.35962704],[119.74769892,27.35909001],[119.74807908,27.35720901],[119.74860612,27.35468001],[119.74907808,27.35328996],[119.749689,27.35253999],[119.749995,27.35176203],[119.75029092,27.35104896],[119.75067108,27.35041896],[119.75104116,27.35009397],[119.75159592,27.34986303],[119.75267016,27.34977996],[119.75369796,27.34993701],[119.75463288,27.34993701],[119.75564988,27.34962102],[119.75626908,27.34924104],[119.75697288,27.34863903],[119.757537,27.34804602],[119.75789808,27.34771203],[119.75842584,27.34729497],[119.75890716,27.34702596],[119.75968404,27.34681896],[119.761128,27.34697898],[119.76302484,27.34720101],[119.76458004,27.34741404],[119.76555996,27.34758999],[119.76628212,27.34763598],[119.76714288,27.34745004],[119.76796584,27.34707897],[119.76852096,27.34652304],[119.76914088,27.345429],[119.76950088,27.34406703],[119.76953796,27.34341804],[119.76936192,27.34277004],[119.76879816,27.34156602],[119.76810408,27.340362],[119.767752,27.339417],[119.76761304,27.33849],[119.76770592,27.33744303],[119.76787188,27.336897],[119.76838992,27.33572898],[119.769417,27.334404],[119.77050888,27.33327297],[119.77186788,27.33216003],[119.77319088,27.33142698],[119.77413408,27.33122304],[119.77481808,27.33122196],[119.77628904,27.33156396],[119.777103,27.33161904],[119.77836012,27.33134904],[119.77958988,27.33099597],[119.78103312,27.33069798],[119.781477,27.33049404],[119.78193888,27.33008598],[119.78287884,27.32919399],[119.78358084,27.32858604],[119.78429904,27.32776902],[119.78519184,27.32637699],[119.78532,27.32557797],[119.78522388,27.32453802],[119.78498484,27.323595],[119.78409096,27.32281299],[119.78188884,27.32166396],[119.78038908,27.32093001],[119.77939908,27.320211],[119.77864992,27.32002002],[119.77797888,27.32018004],[119.77727688,27.32150799],[119.776527,27.32320404],[119.77531488,27.32483502],[119.77411788,27.32601996],[119.77309584,27.32680404],[119.77216992,27.32709204],[119.77140384,27.32693301],[119.77078104,27.32654898],[119.77011216,27.32540904],[119.76979104,27.32439096],[119.76977484,27.32325597],[119.77012584,27.32079303],[119.77044588,27.31943403],[119.77090812,27.31818699],[119.77106796,27.31578804],[119.77127496,27.31409298],[119.77129008,27.313047],[119.77117884,27.31225401],[119.770956,27.31163103],[119.77038108,27.31099104],[119.76910308,27.30987297],[119.768625,27.30921804],[119.768481,27.30873798],[119.76849684,27.30828996],[119.76875208,27.30776202],[119.76916716,27.30718701],[119.76959808,27.30675501]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"福安市","id":3,"province":"福建省","code":350981,"centroid":[119.653942632097,27.0366195378685],"center":[119.603942632097,27.0366195378685]}},{"type":"Feature","id":"ningde_polygon.2","geometry":{"type":"MultiPolygon","coordinates":[[[[120.69324684,26.92652697],[120.693285,26.92625499],[120.69318096,26.92602999],[120.69301212,26.92594503],[120.692655,26.926029],[120.69185688,26.92643103],[120.69163188,26.92642104],[120.69146196,26.92631799],[120.69121788,26.92613898],[120.69075816,26.92601604],[120.69011016,26.92609002],[120.689838,26.92622097],[120.68964,26.92658601],[120.68977212,26.92677402],[120.689856,26.92702701],[120.68975304,26.92723401],[120.68947116,26.92735497],[120.68910504,26.92758897],[120.68890812,26.927973],[120.688992,26.92845099],[120.68923608,26.928864],[120.68956512,26.92905201],[120.69012888,26.92908198],[120.69046692,26.929017],[120.69109584,26.92870803],[120.69148104,26.92847403],[120.691557,26.92818396],[120.69165096,26.92797804],[120.69181908,26.92781901],[120.69212904,26.92769697],[120.69246708,26.92750104],[120.69299304,26.92700496],[120.69324684,26.92652697]]],[[[120.69011988,26.92955997],[120.68969688,26.929521],[120.68936784,26.92969902],[120.68928396,26.92988604],[120.68908596,26.93014902],[120.68903988,26.93050497],[120.68908596,26.93077704],[120.68934012,26.930862],[120.68960292,26.93083401],[120.69008208,26.93070396],[120.69038304,26.93045997],[120.69051408,26.93025396],[120.69051408,26.929917],[120.69011988,26.92955997]]],[[[120.31631496,26.93368503],[120.316572,26.93338596],[120.31729992,26.93355804],[120.318372,26.93347497],[120.319272,26.93300598],[120.32012916,26.93339199],[120.32025804,26.93403504],[120.32098596,26.93531997],[120.32167212,26.93609199],[120.32274312,26.93626596],[120.32390088,26.935326],[120.32411508,26.93442699],[120.32364312,26.93386998],[120.323043,26.933355],[120.32278596,26.93241297],[120.32308584,26.93181402],[120.323943,26.93172996],[120.32510112,26.93168901],[120.32600112,26.93104902],[120.32608608,26.93053503],[120.325743,26.93006397],[120.32497188,26.93027601],[120.32458596,26.93027601],[120.32432892,26.92984698],[120.32398584,26.92933299],[120.32321508,26.92928898],[120.32205696,26.92988604],[120.321243,26.93069802],[120.31978608,26.93103696],[120.31815708,26.93064897],[120.31751412,26.93004903],[120.31742916,26.92936296],[120.31614288,26.92914696],[120.31588584,26.92867599],[120.31592904,26.92794798],[120.31597188,26.92696401],[120.31549992,26.92657701],[120.31464312,26.92644804],[120.31387092,26.92640304],[120.31357104,26.92605996],[120.31387092,26.92524699],[120.31472808,26.92400796],[120.31472808,26.923365],[120.31459992,26.92268001],[120.31395696,26.92216503],[120.31301412,26.92195002],[120.31168608,26.92258902],[120.310614,26.92284498],[120.30851412,26.92326897],[120.30692904,26.922753],[120.30500088,26.92257804],[120.30444396,26.92334799],[120.30371604,26.92403199],[120.30285888,26.92398699],[120.30225912,26.92351602],[120.30131592,26.92334304],[120.30080184,26.92381302],[120.30093108,26.92458396],[120.30054588,26.92484001],[120.29938812,26.92445301],[120.29831712,26.92487997],[120.29677596,26.924877],[120.29561892,26.92449],[120.29471892,26.92384704],[120.29364792,26.92397403],[120.288852,26.92666503],[120.28611096,26.928459],[120.28392684,26.93008404],[120.28317804,26.93158101],[120.28386312,26.933166],[120.28609008,26.93372499],[120.28741704,26.933598],[120.28797396,26.93304198],[120.28917312,26.93278701],[120.29045796,26.93334501],[120.29354208,26.93454696],[120.29504112,26.93476404],[120.29688288,26.93566503],[120.30063192,26.93639799],[120.302046,26.93657196],[120.30234588,26.93717199],[120.30187392,26.93747097],[120.30144588,26.93815497],[120.302046,26.93884104],[120.30470208,26.93931597],[120.30641604,26.93927601],[120.30890112,26.93910897],[120.31014384,26.93855403],[120.31160112,26.93804301],[120.31580088,26.93740896],[120.31772904,26.93698398],[120.31807212,26.93608596],[120.31802892,26.93514402],[120.31742916,26.93450097],[120.31652916,26.93411397],[120.31631496,26.93368503]]],[[[120.37852908,26.95738599],[120.37896792,26.95714497],[120.37988808,26.95738797],[120.38076612,26.95830903],[120.38140188,26.95951503],[120.38210316,26.95999797],[120.38368212,26.96021901],[120.38753988,26.95969602],[120.39207696,26.95884399],[120.39258096,26.95820904],[120.39273396,26.95735404],[120.39266808,26.95643397],[120.39209784,26.95584204],[120.39104592,26.95570902],[120.38975316,26.95608099],[120.388635,26.95632102],[120.38699196,26.956386],[120.38618088,26.95607802],[120.38567616,26.95553001],[120.38521608,26.95496004],[120.384054,26.95460796],[120.38302404,26.95456296],[120.38240988,26.95447503],[120.38184,26.95414599],[120.38137884,26.95359699],[120.38047992,26.95350897],[120.37971204,26.95406499],[120.379077,26.95401099],[120.37874796,26.95368204],[120.37863888,26.95330899],[120.378573,26.95287096],[120.37817808,26.95256397],[120.37721292,26.95254102],[120.37657716,26.95339503],[120.37649004,26.95449096],[120.37659912,26.95499496],[120.37703796,26.95558698],[120.37673088,26.95628799],[120.37556916,26.95674699],[120.37502088,26.95689999],[120.37451616,26.95733703],[120.37444992,26.95773204],[120.37412196,26.95797297],[120.373749,26.95830102],[120.37357296,26.95878297],[120.37363884,26.959572],[120.37429692,26.96042799],[120.375657,26.96088996],[120.37659984,26.96082498],[120.37752108,26.96003703],[120.37754304,26.95942296],[120.37756392,26.95880997],[120.37791492,26.95813101],[120.37848516,26.95775904],[120.37852908,26.95738599]]],[[[120.51367416,26.96688603],[120.51335016,26.96415903],[120.512979,26.96325201],[120.51161316,26.96256],[120.51043596,26.96239098],[120.508488,26.96157999],[120.50748612,26.96108004],[120.50678196,26.96101596],[120.50630496,26.96132097],[120.50595792,26.96252697],[120.50577288,26.96421303],[120.50593812,26.96498199],[120.50657496,26.96535801],[120.50828316,26.96502402],[120.50907912,26.96492097],[120.50982108,26.96501196],[120.51183096,26.96732298],[120.512898,26.96749002],[120.51367416,26.96688603]]],[[[120.39673788,26.92832796],[120.39564312,26.92645101],[120.39275088,26.92574604],[120.38610492,26.92707003],[120.38235192,26.92761399],[120.38016096,26.92737702],[120.374451,26.92393002],[120.36537504,26.91782001],[120.36060108,26.91687402],[120.35488788,26.91741204],[120.34310688,26.92219896],[120.33520092,26.92781397],[120.32588592,26.93686599],[120.32236296,26.94022101],[120.31954596,26.94475098],[120.31919388,26.94776004],[120.32091612,26.95613004],[120.32334288,26.96027796],[120.32804088,26.96403996],[120.33900108,26.97039396],[120.34499004,26.97177402],[120.35422584,26.97093],[120.36275712,26.967582],[120.37050288,26.961885],[120.37519692,26.95547997],[120.377934,26.94516201],[120.38051412,26.94023901],[120.38364288,26.93852199],[120.39032808,26.93606499],[120.39439284,26.93387799],[120.39634692,26.93122101],[120.39673788,26.92832796]]],[[[120.49072308,26.97331797],[120.49101396,26.973306],[120.49124904,26.97357501],[120.49152804,26.97381],[120.49232184,26.97388596],[120.492702,26.97377301],[120.49284708,26.97351399],[120.49301484,26.97347997],[120.49313796,26.97358104],[120.49315992,26.97396201],[120.49332804,26.97454503],[120.493719,26.97494796],[120.49430004,26.97505803],[120.49518312,26.97499998],[120.49602696,26.97466104],[120.49671996,26.97418701],[120.49675416,26.97374898],[120.49650792,26.97304302],[120.49612812,26.97243804],[120.49564716,26.972316],[120.49541208,26.97205896],[120.49524504,26.97150897],[120.49525584,26.97113898],[120.49517808,26.97081399],[120.49491492,26.97049998],[120.49440084,26.97013197],[120.49364088,26.97001002],[120.49321608,26.97009003],[120.49246692,26.97046299],[120.49210908,26.97057603],[120.49179588,26.970543],[120.49139412,26.97042096],[120.49113708,26.97014097],[120.49068996,26.97012],[120.49034292,26.97022197],[120.49005312,26.97024501],[120.48972804,26.97017904],[120.48927012,26.96995602],[120.48905808,26.96972103],[120.48896808,26.969418],[120.48850404,26.96916096],[120.48802416,26.96928597],[120.48772284,26.96957802],[120.487752,26.97019596],[120.487599,26.97075099],[120.48732288,26.97108003],[120.48730812,26.97138702],[120.487023,26.97207201],[120.48704604,26.97265602],[120.48725808,26.97291297],[120.48750396,26.97302502],[120.48749316,26.97337296],[120.48756012,26.97375402],[120.48802992,26.97485202],[120.48838704,26.97515397],[120.48892416,26.97520896],[120.48948288,26.97507297],[120.48979608,26.97473502],[120.489885,26.97438699],[120.48987384,26.97412896],[120.48994116,26.97391503],[120.49015392,26.97376896],[120.49028712,26.97374601],[120.49047792,26.97363297],[120.49056684,26.97343101],[120.49072308,26.97331797]]],[[[120.472839,26.98490304],[120.47339808,26.98482303],[120.47413608,26.98489998],[120.47476212,26.98483104],[120.47544396,26.98443603],[120.475746,26.98360497],[120.47556708,26.983089],[120.47562288,26.98278597],[120.47598108,26.98250499],[120.47618196,26.98188696],[120.47610312,26.98142697],[120.47572296,26.98092297],[120.47513112,26.98056504],[120.47476212,26.98054398],[120.47428116,26.98071399],[120.47327496,26.98137801],[120.47271588,26.98142499],[120.47244696,26.98132401],[120.47185512,26.98118001],[120.47104908,26.98123797],[120.47029992,26.98149798],[120.46970808,26.98155603],[120.46941684,26.981433],[120.46885812,26.98132203],[120.46826484,26.98133499],[120.46718088,26.98116903],[120.466755,26.98119297],[120.46654296,26.98144002],[120.46655412,26.98179903],[120.46676688,26.98209099],[120.46816512,26.98261497],[120.46888008,26.98294896],[120.46945104,26.98295904],[120.47002092,26.98304796],[120.47056884,26.98335999],[120.47098212,26.983359],[120.47141916,26.98357104],[120.47150808,26.98417701],[120.47212296,26.98471404],[120.472839,26.98490304]]],[[[120.72042792,26.99057196],[120.72056688,26.99003799],[120.72102192,26.98956297],[120.72169584,26.98958403],[120.72326112,26.990001],[120.72381588,26.99045703],[120.72468708,26.99069598],[120.725559,26.99053803],[120.725757,26.989866],[120.72567816,26.98938999],[120.72543984,26.98913304],[120.72538116,26.98883604],[120.72540096,26.98832097],[120.72498408,26.98760799],[120.72478608,26.98740999],[120.72478608,26.98713297],[120.725163,26.98703397],[120.72619296,26.98697601],[120.72718296,26.98632396],[120.72732192,26.98563096],[120.72695508,26.985087],[120.72609288,26.98477002],[120.72488508,26.984421],[120.72345588,26.98432398],[120.72206088,26.98399296],[120.72127896,26.98350696],[120.72007116,26.98352496],[120.719358,26.98398],[120.71896092,26.98447401],[120.71872404,26.98445403],[120.71842596,26.984196],[120.71832696,26.98383996],[120.71842596,26.98342398],[120.71878308,26.98290999],[120.71882196,26.98217802],[120.71878308,26.98174197],[120.71939688,26.98146603],[120.72098196,26.98156701],[120.72276504,26.98148997],[120.72345912,26.98113402],[120.72345804,26.98069896],[120.723201,26.98024302],[120.72232908,26.98018299],[120.72197304,26.979984],[120.72163608,26.97950898],[120.72117996,26.97911199],[120.72052584,26.97917103],[120.71965392,26.97952599],[120.71933712,26.97946596],[120.71896092,26.97912999],[120.71876292,26.97869403],[120.718872,26.97819903],[120.71934684,26.97766497],[120.72049596,26.97711201],[120.72093192,26.97669702],[120.72101112,26.976024],[120.72107088,26.97531201],[120.72053592,26.97471702],[120.72006,26.97461802],[120.71928708,26.974755],[120.71871288,26.97477498],[120.71805912,26.97453603],[120.717504,26.97404103],[120.71714796,26.97360498],[120.716712,26.97316902],[120.71617596,26.97308901],[120.71526516,26.97342399],[120.71488896,26.973819],[120.71443284,26.97419502],[120.71274804,26.97464799],[120.71183688,26.97555699],[120.71171808,26.97613101],[120.71179692,26.97694299],[120.71163888,26.97739803],[120.71189592,26.97779403],[120.71300616,26.97807303],[120.71401704,26.97825204],[120.71478996,26.97860898],[120.71480904,26.97906501],[120.714552,26.97949998],[120.71423484,26.979678],[120.71365992,26.97993396],[120.71348208,26.98044804],[120.71387808,26.98094403],[120.71417508,26.98134003],[120.71407608,26.98167699],[120.71368008,26.98205202],[120.71320488,26.98288299],[120.71292696,26.98325802],[120.71257092,26.98323804],[120.71205504,26.98309899],[120.71165904,26.98325703],[120.71102508,26.98396803],[120.71097504,26.98470099],[120.71143116,26.98515702],[120.71228292,26.98569198],[120.71313504,26.98587198],[120.713571,26.98606998],[120.71424888,26.98634799],[120.71434104,26.98668198],[120.71392488,26.98717797],[120.71375208,26.98759404],[120.71351196,26.98789104],[120.71332584,26.98825203],[120.71332512,26.98863696],[120.71351196,26.98913799],[120.71347992,26.99006103],[120.71391084,26.990784],[120.71459592,26.991],[120.71519712,26.99072397],[120.71567196,26.990487],[120.71608812,26.99078499],[120.71648484,26.99100297],[120.717,26.99092404],[120.71717892,26.99068698],[120.71747592,26.99054901],[120.71802996,26.99074701],[120.71854584,26.99157897],[120.71899692,26.991918],[120.71964312,26.991918],[120.72034116,26.991729],[120.72046788,26.99128503],[120.72042792,26.99057196]]],[[[120.69979092,27.00823599],[120.70006884,27.007821],[120.70056384,27.00754398],[120.70113912,27.00744597],[120.70177308,27.00768501],[120.70221012,27.00766602],[120.70258596,27.00740898],[120.70270512,27.00711297],[120.70300212,27.00707301],[120.70333908,27.007371],[120.70377612,27.00772803],[120.70427112,27.00766899],[120.70476684,27.00731403],[120.70524204,27.00682002],[120.70563912,27.00672102],[120.70607508,27.00682101],[120.70657008,27.00739602],[120.70686816,27.007515],[120.70752192,27.00739701],[120.708117,27.007002],[120.70819584,27.00656703],[120.708216,27.00607203],[120.708414,27.00581499],[120.709107,27.00553896],[120.70938492,27.00528201],[120.71001888,27.00484803],[120.71001888,27.00462996],[120.70968192,27.00435204],[120.70894896,27.00435096],[120.70819512,27.00468603],[120.70767996,27.00488403],[120.70730412,27.00468504],[120.70698696,27.00411102],[120.70643112,27.00296199],[120.70599696,27.00285399],[120.70566216,27.002772],[120.70549908,27.00257904],[120.70547892,27.00233604],[120.70542888,27.00211302],[120.70470312,27.001476],[120.70472292,27.00117099],[120.70499616,27.00100296],[120.70541988,27.00099999],[120.70575792,27.00135702],[120.70599516,27.00191196],[120.70623312,27.00203103],[120.70657008,27.00195201],[120.706749,27.00171504],[120.70692684,27.001656],[120.70752192,27.00173601],[120.70811592,27.00157896],[120.70815588,27.00126198],[120.70799712,27.00098496],[120.70764,27.00050904],[120.70682712,26.99995401],[120.70674792,26.99971596],[120.70690704,26.99945901],[120.70722384,26.99920197],[120.707244,26.99892504],[120.70702584,26.99858799],[120.70635192,26.99803296],[120.70565784,26.99817003],[120.70484496,26.99834697],[120.70395288,26.99834598],[120.70355688,26.99820603],[120.70300212,26.99776998],[120.70266516,26.99771004],[120.70215,26.99784801],[120.70161396,26.997768],[120.701376,26.99753004],[120.70135692,26.99725302],[120.70139616,26.99644104],[120.70115784,26.99610399],[120.70062288,26.99564796],[120.69968112,26.99489403],[120.69956196,26.99471601],[120.69962208,26.99428104],[120.69987912,26.99386596],[120.69966096,26.99343],[120.69924516,26.99311203],[120.69809496,26.99275401],[120.69641016,26.99257302],[120.69543888,26.99272998],[120.69506196,26.99332299],[120.69518112,26.99419401],[120.695697,26.99486802],[120.69547812,26.99540199],[120.69520092,26.995995],[120.69539892,26.996985],[120.69603396,26.99756001],[120.69660888,26.99799696],[120.69641088,26.99886699],[120.69654912,26.99910504],[120.69635112,26.99944101],[120.69565704,26.99973702],[120.69457704,27.00102204],[120.694617,27.00175401],[120.69441792,27.002862],[120.69326808,27.00408798],[120.69287208,27.00497799],[120.69311004,27.00551304],[120.69362592,27.00567198],[120.69443808,27.00555399],[120.69604404,27.006111],[120.69640116,27.00627003],[120.69642096,27.00718101],[120.69624312,27.00797202],[120.69620316,27.00860598],[120.69642096,27.008883],[120.69685692,27.00888399],[120.69719388,27.00870696],[120.69741204,27.00823203],[120.69757116,27.00795501],[120.69802692,27.007956],[120.69830412,27.00829296],[120.69858204,27.00880803],[120.69919692,27.008928],[120.69963288,27.00865098],[120.69979092,27.00823599]]],[[[120.425301,27.10386198],[120.42533196,27.10308897],[120.42462096,27.10172898],[120.42354096,27.10070901],[120.421935,27.09903996],[120.42165708,27.09839097],[120.42165708,27.09792702],[120.42125496,27.09743202],[120.42073008,27.09746397],[120.41949492,27.09761904],[120.41887716,27.09765],[120.41733312,27.09709398],[120.41560296,27.09647604],[120.41554104,27.09601299],[120.41551008,27.09545598],[120.41498484,27.09502299],[120.41381088,27.09499302],[120.411711,27.09548802],[120.41056692,27.09598302],[120.40951716,27.09592101],[120.408435,27.09527202],[120.40701408,27.09446796],[120.40512912,27.09363303],[120.40435584,27.09360198],[120.40367616,27.09378702],[120.403305,27.09483903],[120.40392312,27.096138],[120.405438,27.09768402],[120.40689096,27.09842697],[120.408714,27.09991098],[120.40948584,27.10099404],[120.411,27.10226196],[120.41319384,27.10322001],[120.41625204,27.103806],[120.41822916,27.10399104],[120.42113184,27.10377297],[120.422151,27.10420497],[120.42301608,27.10488501],[120.42366408,27.105039],[120.42465192,27.10476],[120.42514692,27.10445004],[120.425301,27.10386198]]],[[[120.26444004,27.42152796],[120.26378808,27.41800302],[120.26292912,27.41707998],[120.26010888,27.41535],[120.25820916,27.41267799],[120.258027,27.41004],[120.25982196,27.40700196],[120.26535804,27.40184496],[120.26640816,27.40079304],[120.26796192,27.39757896],[120.269142,27.39555504],[120.270582,27.39330297],[120.27335112,27.38941704],[120.27519216,27.38842704],[120.27840408,27.38826702],[120.28047984,27.38915604],[120.28241592,27.38988099],[120.28443984,27.39145698],[120.28542984,27.39328101],[120.28745412,27.39492],[120.28952988,27.39592701],[120.29120712,27.39635901],[120.29256216,27.396513],[120.29403888,27.39644496],[120.29556816,27.39584403],[120.29691492,27.39519702],[120.29920812,27.39373704],[120.30271092,27.39220596],[120.30450912,27.39195504],[120.30592608,27.39199401],[120.30676884,27.392211],[120.30851592,27.39316599],[120.30957,27.39477303],[120.30961284,27.39459798],[120.30954804,27.39411396],[120.30962184,27.39349197],[120.30970608,27.39332304],[120.30988608,27.39321396],[120.31041312,27.39313998],[120.31072488,27.39309903],[120.310929,27.39299598],[120.31169688,27.392445],[120.31248708,27.39192597],[120.31275096,27.39182904],[120.31302708,27.39176901],[120.31336512,27.39182202],[120.31365996,27.39191004],[120.31414308,27.392301],[120.31515108,27.39314799],[120.31526592,27.39329199],[120.31519716,27.39349404],[120.31499304,27.394137],[120.31461,27.39534696],[120.31437312,27.39636999],[120.31425396,27.39708],[120.31427808,27.39737799],[120.31447284,27.39768003],[120.31487784,27.39807603],[120.31499196,27.398376],[120.31501284,27.39876498],[120.31505712,27.39901797],[120.31520292,27.39927402],[120.315312,27.399393],[120.31543008,27.39953097],[120.31557696,27.39969702],[120.31580196,27.40004397],[120.31611912,27.40073598],[120.316212,27.40108104],[120.31628616,27.40138002],[120.31630092,27.40178403],[120.31624404,27.40233798],[120.31565112,27.40483899],[120.315591,27.40558302],[120.31600392,27.40669596],[120.31752204,27.40761801],[120.31901712,27.40823496],[120.32074692,27.40792797],[120.32164188,27.40768596],[120.32291988,27.40698099],[120.32373708,27.40577103],[120.324033,27.40461498],[120.32362404,27.403245],[120.32244108,27.40200102],[120.32048592,27.40041702],[120.31983396,27.39968298],[120.32014608,27.39915801],[120.32103312,27.39846303],[120.327813,27.39614499],[120.33173412,27.39603699],[120.335751,27.39753801],[120.33886284,27.39887397],[120.34074096,27.39965499],[120.34150596,27.39936303],[120.346191,27.39488796],[120.350016,27.38951001],[120.351267,27.38725497],[120.35189304,27.38621196],[120.35193696,27.38495097],[120.35157984,27.38358099],[120.35051892,27.38158398],[120.348729,27.37817298],[120.34713708,27.37572201],[120.34568592,27.373905],[120.34527696,27.37287801],[120.34571112,27.37172403],[120.346146,27.37068696],[120.34625004,27.36942597],[120.34578996,27.36897399],[120.34494612,27.368352],[120.34402488,27.36738603],[120.34324188,27.36624996],[120.343347,27.36528003],[120.343581,27.36430101],[120.34395504,27.36343404],[120.34522404,27.362268],[120.34693692,27.36087102],[120.35063088,27.35934102],[120.35362896,27.35751897],[120.35493288,27.35510103],[120.35523708,27.35389098],[120.35430684,27.35240904],[120.35312496,27.35110404],[120.352203,27.34997598],[120.35179512,27.34860402],[120.351447,27.34676703],[120.35198592,27.34498098],[120.35337588,27.34353198],[120.35490588,27.34248204],[120.35661804,27.34137099],[120.35763504,27.34038099],[120.35798316,27.33860196],[120.35834712,27.33756498],[120.35885184,27.33709698],[120.35936412,27.33686298],[120.36025908,27.33656499],[120.36197988,27.33557103],[120.36431808,27.33376302],[120.36750696,27.33194196],[120.37045212,27.33145101],[120.37250304,27.33078996],[120.37478796,27.32926401],[120.378609,27.32376699],[120.38002488,27.32024997],[120.38136192,27.31667598],[120.38342004,27.31269501],[120.38493096,27.31095603],[120.387771,27.30850299],[120.391452,27.30621996],[120.39588792,27.302832],[120.40139016,27.29856204],[120.40220592,27.297405],[120.40291692,27.29429703],[120.40329888,27.29074203],[120.40356708,27.28504404],[120.40879788,27.27665199],[120.411765,27.27397296],[120.41434908,27.27192798],[120.41643888,27.27069399],[120.41791308,27.270153],[120.42052308,27.26790903],[120.42653004,27.26274501],[120.43004796,27.25885404],[120.42964008,27.25533603],[120.42676296,27.25264899],[120.422385,27.25081596],[120.41892612,27.25207101],[120.41538804,27.25639902],[120.410982,27.255879],[120.40176816,27.25087797],[120.39746292,27.24596604],[120.39853104,27.24247197],[120.40400592,27.23906304],[120.40948908,27.23565303],[120.41335692,27.23232897],[120.41367804,27.23146497],[120.41393004,27.23094603],[120.41348688,27.22974399],[120.41183088,27.22707801],[120.41078112,27.224973],[120.40934904,27.22296996],[120.40693704,27.22116798],[120.405141,27.21938004],[120.40444692,27.21738897],[120.40533216,27.21641904],[120.40594812,27.21537297],[120.40648596,27.21477096],[120.40662492,27.21453696],[120.406581,27.21420297],[120.40642512,27.21398499],[120.406104,27.21393297],[120.40607808,27.21393099],[120.40600896,27.21368601],[120.40516692,27.21312099],[120.403215,27.212427],[120.40166988,27.21187899],[120.40106292,27.21171897],[120.40092396,27.21155598],[120.40147008,27.21121299],[120.401757,27.21077397],[120.40213788,27.21040299],[120.40264188,27.21010203],[120.40323192,27.21001698],[120.40422912,27.21021003],[120.40547004,27.21060297],[120.40756092,27.21042099],[120.40830684,27.20999601],[120.40881912,27.20901897],[120.40847208,27.20791404],[120.40655508,27.20612097],[120.40473204,27.205101],[120.40437708,27.20465397],[120.404394,27.20399598],[120.40540092,27.20302596],[120.40618104,27.202617],[120.40938216,27.19928502],[120.41067492,27.19623501],[120.40997184,27.19490499],[120.40803684,27.19377198],[120.40732584,27.19266003],[120.40808004,27.19179603],[120.41175888,27.19186299],[120.41618112,27.19128402],[120.41771616,27.18889803],[120.41873892,27.18672003],[120.42295308,27.18482004],[120.42568296,27.18333099],[120.42622008,27.18136404],[120.42503316,27.17980596],[120.42432216,27.17847603],[120.42461592,27.17628597],[120.42615888,27.17345799],[120.43012788,27.17133201],[120.43384596,27.16941897],[120.43401912,27.16932996],[120.43518012,27.16814997],[120.43682604,27.16554699],[120.43658304,27.16359201],[120.43641816,27.16238898],[120.43672992,27.16158096],[120.43761408,27.161055],[120.43838412,27.16104096],[120.439026,27.16120701],[120.43998684,27.16176303],[120.44191896,27.16178697],[120.44370312,27.16140996],[120.44528712,27.16087203],[120.44673396,27.15946902],[120.44961684,27.15643998],[120.45393612,27.15137604],[120.45767616,27.14637501],[120.46165704,27.14256504],[120.43462104,27.118449],[120.42602496,27.11181204],[120.41524692,27.10645596],[120.40686792,27.10275903],[120.40328988,27.100629],[120.40222788,27.09884097],[120.40164792,27.09599004],[120.40212996,27.09226899],[120.40184088,27.08927199],[120.40039116,27.08714601],[120.39562008,27.08300898],[120.39399612,27.08195103],[120.39298092,27.08149698],[120.39207804,27.08127099],[120.380607,27.08121303],[120.35891988,27.085725],[120.35152296,27.08633304],[120.34330812,27.08727102],[120.33151092,27.08677296],[120.32835588,27.086913],[120.32681688,27.08735103],[120.32622612,27.08793297],[120.32586108,27.088812],[120.32571312,27.09086301],[120.32498304,27.09327798],[120.32388792,27.09430002],[120.32227116,27.094662],[120.31985412,27.09436599],[120.31655112,27.09282096],[120.31069212,27.09002997],[120.30658992,27.08797203],[120.304017,27.08745498],[120.30181884,27.08774496],[120.29940288,27.08872902],[120.29596308,27.09077499],[120.291489,27.09347796],[120.28966488,27.09391401],[120.28753584,27.09391203],[120.285999,27.09332397],[120.28416588,27.09200403],[120.28277592,27.08980596],[120.283893,27.083952],[120.28536396,27.081747],[120.289338,27.07792596],[120.29080896,27.07439697],[120.28992588,27.06998301],[120.288159,27.06644997],[120.28683492,27.06247602],[120.28830588,27.058653],[120.29080788,27.05424201],[120.29272092,27.05144904],[120.29860908,27.04365999],[120.29978592,27.03954303],[120.29890284,27.037629],[120.29566392,27.035712],[120.28285908,27.03525399],[120.26388492,27.03524103],[120.26182608,27.035829],[120.25932696,27.03582801],[120.25697508,27.03435597],[120.25653408,27.03185496],[120.25800396,27.03067902],[120.26035584,27.02994399],[120.26461896,27.02979801],[120.27020796,27.02935899],[120.272301,27.02844099],[120.27442788,27.02792997],[120.27530412,27.02712501],[120.27611196,27.02617299],[120.27713616,27.02434401],[120.27816,27.02126898],[120.27940092,27.00984996],[120.278889,27.00475902],[120.27841092,27.00307602],[120.27801096,27.00204903],[120.27720384,27.000585],[120.27698712,26.999595],[120.27756816,26.99816904],[120.27859308,26.99718003],[120.27958308,26.99568099],[120.28006008,26.99465697],[120.28050288,26.99266302],[120.28035492,26.99028099],[120.279582,26.987535],[120.278592,26.98577703],[120.27741984,26.98467804],[120.27639492,26.98398297],[120.27485808,26.98344999],[120.26131812,26.98263702],[120.259782,26.98227],[120.258837,26.98146396],[120.25839384,26.980587],[120.258099,26.97941502],[120.25598184,26.97663204],[120.25110708,26.98187796],[120.24715284,26.98523298],[120.24554004,26.98772301],[120.24515088,26.99230797],[120.241917,26.99728704],[120.24059904,26.99886303],[120.23851896,26.999505],[120.23669808,27.00038097],[120.234384,27.00078804],[120.23110008,26.99910396],[120.22449696,26.99734797],[120.22090992,26.99726499],[120.21625908,26.99876898],[120.212379,26.99983098],[120.20645592,27.00107703],[120.202785,27.00375102],[120.19830084,27.00824499],[120.19585104,27.01278396],[120.19386888,27.019404],[120.19167108,27.02417697],[120.18949812,27.02826396],[120.18528288,27.03207501],[120.18031488,27.03540996],[120.17645496,27.03624399],[120.172041,27.03821499],[120.16918512,27.03952701],[120.167307,27.04247397],[120.16537704,27.04679298],[120.16444212,27.05228496],[120.16396692,27.05939703],[120.16639116,27.06381504],[120.169161,27.06548301],[120.17167992,27.06691698],[120.17451888,27.06606099],[120.178647,27.06500502],[120.18301812,27.064413],[120.18579696,27.06562296],[120.18783096,27.06635502],[120.19009896,27.06755598],[120.19022892,27.07169103],[120.18733812,27.07415397],[120.18268116,27.07566003],[120.17882088,27.07603398],[120.175497,27.07596],[120.171645,27.07656201],[120.16801908,27.07763202],[120.16386396,27.07937901],[120.16024596,27.08067501],[120.15712188,27.08221104],[120.15379692,27.08213796],[120.15148608,27.08231598],[120.14946792,27.081351],[120.14719092,27.08038197],[120.14422092,27.07686801],[120.14149392,27.07405002],[120.13908588,27.06894099],[120.13853184,27.06756003],[120.13790112,27.06730902],[120.13630308,27.06765696],[120.13439184,27.06869403],[120.13273296,27.06886998],[120.13215408,27.06841602],[120.13093584,27.06704001],[120.129453,27.064485],[120.12326712,27.06436404],[120.12122592,27.06620004],[120.12013692,27.06591699],[120.11872788,27.06368796],[120.11801904,27.06133698],[120.11788188,27.05990904],[120.11897088,27.05749497],[120.12049404,27.05273496],[120.12074496,27.05043996],[120.12016608,27.049464],[120.11905404,27.04871997],[120.11894208,27.04871799],[120.11633316,27.05003496],[120.11369796,27.05272803],[120.10929408,27.05377104],[120.10467204,27.05411799],[120.09952908,27.05445198],[120.09519108,27.05342598],[120.09008808,27.05238],[120.08522808,27.05202504],[120.08060892,27.05191002],[120.07420884,27.05128398],[120.06699012,27.051786],[120.05973396,27.05343201],[120.05584884,27.05447502],[120.05116308,27.056187],[120.04411212,27.05943996],[120.03645888,27.06543297],[120.03067404,27.06940998],[120.02414004,27.07221303],[120.01786596,27.07502697],[120.010617,27.07620201],[120.00443004,27.07562304],[119.99804292,27.07834302],[119.99156796,27.07710804],[119.98911492,27.07302699],[119.985912,27.06919299],[119.98154412,27.06951897],[119.97686412,27.07628904],[119.97072288,27.07734501],[119.96389512,27.08140896],[119.95962588,27.08495298],[119.95494012,27.09017604],[119.96064504,27.10078398],[119.96392392,27.10714599],[119.96930808,27.11460897],[119.97547488,27.12251403],[119.98026,27.12723102],[119.98039104,27.13136697],[119.97838584,27.13923702],[119.97344304,27.13977099],[119.97027396,27.13751604],[119.96513208,27.13899996],[119.96060616,27.14417604],[119.95922412,27.15068097],[119.96087508,27.15435297],[119.96665812,27.15748497],[119.97041904,27.16250598],[119.97161496,27.16850097],[119.97077508,27.17592102],[119.96829504,27.18013302],[119.96939304,27.18242703],[119.97457488,27.182331],[119.99199888,27.17460504],[119.99915712,27.17077203],[120.00059604,27.16933203],[120.00388716,27.16828398],[120.00424788,27.16825896],[120.00519504,27.16885098],[120.00856212,27.16692003],[120.01190508,27.16532397],[120.01292388,27.16450299],[120.04117704,27.16367697],[120.04467408,27.16156404],[120.04679016,27.15590502],[120.04738092,27.15507198],[120.05189208,27.154746],[120.056247,27.15555204],[120.05948088,27.15908202],[120.06147096,27.16143201],[120.06189792,27.16419996],[120.062862,27.16629498],[120.06248904,27.16972803],[120.06209808,27.17408403],[120.062394,27.180981],[120.06068292,27.18621801],[120.05817984,27.19212399],[120.05593812,27.19780704],[120.05326008,27.20117898],[120.04975692,27.20590803],[120.04500096,27.20968299],[120.03716484,27.21291498],[120.03063192,27.21571902],[120.02412492,27.21760704],[120.01609296,27.21899196],[120.01440996,27.21925899],[120.012606,27.22050603],[120.00946608,27.22745403],[120.00798396,27.23305797],[120.00520008,27.23467797],[120.00247416,27.233406],[120.00099816,27.233577],[119.999583,27.23420304],[119.99842812,27.23483304],[119.99740284,27.23579901],[119.996631,27.23740497],[119.99604996,27.239292],[119.99554416,27.24036696],[119.99336112,27.24106104],[119.987604,27.24289299],[119.98556784,27.24432003],[119.98257588,27.24900201],[119.97440712,27.25378101],[119.96884008,27.25897599],[119.96593596,27.26689797],[119.96769312,27.27426996],[119.96676288,27.27845199],[119.960667,27.28319598],[119.95767684,27.28788003],[119.950983,27.28985904],[119.93910516,27.29147499],[119.93758488,27.29289501],[119.93874912,27.29750004],[119.93922684,27.29878596],[119.94027804,27.30159],[119.94024312,27.30165003],[119.939661,27.30205296],[119.93747184,27.30262302],[119.93661288,27.30361599],[119.93637816,27.30383496],[119.93609196,27.30541896],[119.93562288,27.30585303],[119.93306004,27.30590397],[119.93148,27.30707001],[119.929239,27.307404],[119.92860612,27.30798504],[119.92862304,27.30856203],[119.93060304,27.31080402],[119.93128884,27.31265703],[119.93357304,27.31434399],[119.93376492,27.315486],[119.932353,27.31637601],[119.93351112,27.31653801],[119.93503608,27.31643703],[119.93679684,27.31628601],[119.93839416,27.31577697],[119.93936688,27.31551201],[119.940012,27.31553397],[119.94093396,27.31559598],[119.94147612,27.31540302],[119.94248988,27.31485204],[119.94317604,27.31442301],[119.944026,27.31415796],[119.94490692,27.31419099],[119.94530688,27.31451904],[119.94576804,27.31532796],[119.94593112,27.31580901],[119.94582888,27.31643298],[119.94541992,27.31740498],[119.94417216,27.322056],[119.94418116,27.32225301],[119.94339888,27.32267304],[119.94282504,27.32255703],[119.94278184,27.32259402],[119.94167808,27.32219901],[119.94054012,27.32196996],[119.93983704,27.32211],[119.93928084,27.32262597],[119.93888988,27.32377302],[119.93919408,27.32452497],[119.94006312,27.324945],[119.940489,27.325386],[119.94065388,27.326142],[119.94011496,27.32716296],[119.93928084,27.32781096],[119.93859504,27.32871096],[119.93862096,27.32972202],[119.938734,27.329868],[119.94040188,27.33084702],[119.94357312,27.333099],[119.94334812,27.33426],[119.94076692,27.33477201],[119.93790888,27.33459597],[119.93715396,27.33530499],[119.93719716,27.33551802],[119.93790888,27.33677802],[119.93905584,27.33751701],[119.94092388,27.33757902],[119.94233112,27.33752502],[119.94458184,27.33780798],[119.94701508,27.33878898],[119.94810984,27.33982398],[119.94914412,27.34148898],[119.94913584,27.34366401],[119.95029216,27.34572798],[119.95131816,27.34676298],[119.95279596,27.34761699],[119.95601184,27.34945596],[119.96018604,27.35187201],[119.962881,27.35445204],[119.96493408,27.35777799],[119.96516916,27.36017298],[119.96402112,27.36047601],[119.96009892,27.35939196],[119.95643916,27.35830602],[119.95518708,27.35994798],[119.95656984,27.36339399],[119.96028288,27.36610002],[119.967318,27.36735597],[119.96894412,27.36739503],[119.96904888,27.36740997],[119.97143208,27.36782001],[119.97374508,27.36862497],[119.97786096,27.37005696],[119.98036584,27.37092204],[119.98203696,27.37081998],[119.983707,27.37047303],[119.98563912,27.370305],[119.98751796,27.37052298],[119.98795284,27.37081998],[119.98833588,27.37137204],[119.98846692,27.37225602],[119.98850112,27.37356003],[119.98854504,27.37519101],[119.98866708,27.37598103],[119.98942416,27.37686204],[119.99096496,27.37736604],[119.99226096,27.37764099],[119.99421,27.37918404],[119.995812,27.37921698],[119.99587212,27.37921896],[119.99654208,27.37864404],[119.997126,27.378279],[119.99830896,27.37835199],[120.00521016,27.376686],[120.00688092,27.37600299],[120.00803004,27.37519299],[120.00896892,27.37346598],[120.00951684,27.37162197],[120.00952584,27.36796104],[120.00910788,27.365787],[120.00916008,27.36469503],[120.00959496,27.36393903],[120.01030884,27.36387603],[120.01165812,27.36420804],[120.01327596,27.36482499],[120.01508604,27.36486702],[120.01596516,27.36476298],[120.01716612,27.36263997],[120.01948884,27.35874603],[120.02355216,27.35445402],[120.02660604,27.35079696],[120.02718888,27.34751601],[120.02629212,27.34420401],[120.02757084,27.34225803],[120.03028488,27.34210503],[120.03569604,27.34245396],[120.03968016,27.34079301],[120.045159,27.338508],[120.04984584,27.33817797],[120.05228916,27.33867396],[120.05296704,27.34110396],[120.05361108,27.34463304],[120.05551512,27.34709103],[120.05847,27.34715799],[120.06116388,27.34744104],[120.06279792,27.35099001],[120.06416304,27.35497098],[120.06629208,27.35831304],[120.06765612,27.35958699],[120.06770004,27.35960904],[120.06976788,27.36044802],[120.072096,27.36122202],[120.07300788,27.36219096],[120.07445004,27.36383598],[120.07565712,27.367317],[120.07702908,27.369198],[120.07911384,27.37037898],[120.08207484,27.37103103],[120.08377692,27.37284498],[120.08631096,27.37493901],[120.08955816,27.37696599],[120.09148488,27.37757502],[120.09380112,27.37771497],[120.09510288,27.37856196],[120.09685608,27.37962801],[120.09657816,27.382725],[120.09647412,27.38817999],[120.09624912,27.390357],[120.09839184,27.39181797],[120.09986712,27.39218499],[120.10037004,27.39258603],[120.10717008,27.39558096],[120.11743404,27.39754602],[120.12161112,27.39741102],[120.124107,27.39570498],[120.12564888,27.39310101],[120.12888096,27.39162798],[120.13300404,27.39346398],[120.13610508,27.39681603],[120.13718796,27.40232502],[120.13536096,27.406899],[120.13183584,27.41012397],[120.13052796,27.41338998],[120.13142112,27.41670099],[120.13453008,27.41983299],[120.14183196,27.42217002],[120.15210096,27.42368202],[120.159684,27.42448302],[120.16305108,27.42422499],[120.16335384,27.42487299],[120.16560492,27.42480603],[120.16690308,27.42452604],[120.16729188,27.42406497],[120.16728396,27.42318396],[120.16726596,27.42241104],[120.16774188,27.42214104],[120.168963,27.42261201],[120.17013984,27.42263397],[120.17131704,27.42264702],[120.17243304,27.422469],[120.17357604,27.42218199],[120.17453688,27.42174],[120.17610288,27.42048],[120.17689884,27.41995404],[120.17748816,27.41987403],[120.17805912,27.41991201],[120.17856096,27.42006501],[120.17953008,27.420624],[120.17959992,27.42082299],[120.18176388,27.420741],[120.18511296,27.42243201],[120.18970116,27.424998],[120.19171788,27.42662997],[120.19313808,27.42735096],[120.19434912,27.42694002],[120.19672188,27.42690402],[120.20238396,27.42836103],[120.20417604,27.42810696],[120.20493816,27.42752403],[120.20620212,27.42647598],[120.20776884,27.42427701],[120.21016788,27.42194898],[120.213216,27.42029298],[120.217122,27.41983398],[120.21821316,27.42015996],[120.219192,27.42100803],[120.22161696,27.42028902],[120.22187688,27.42033204],[120.22230996,27.42084099],[120.22313292,27.42210099],[120.22424208,27.42242103],[120.22583688,27.42277599],[120.22662492,27.42298101],[120.22758684,27.42354],[120.22839288,27.42440301],[120.22920684,27.425835],[120.22956288,27.42647301],[120.23018712,27.42695397],[120.23113104,27.42724197],[120.23165088,27.42730596],[120.23343612,27.42758901],[120.23624484,27.42865704],[120.23802216,27.42922503],[120.24206208,27.43184196],[120.24690912,27.43457103],[120.24808812,27.43657002],[120.24898992,27.43987896],[120.25022184,27.43968402],[120.25744704,27.43587702],[120.26243592,27.43290198],[120.26397996,27.43029801],[120.26457,27.42635898],[120.26444004,27.42152796]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"福鼎市","id":4,"province":"福建省","code":350982,"centroid":[120.199512559151,27.214295119707],"center":[120.149512559151,27.214295119707]}},{"type":"Feature","id":"ningde_polygon.3","geometry":{"type":"MultiPolygon","coordinates":[[[[118.832391,26.42792796],[118.827567,26.42637402],[118.82640492,26.42599998],[118.82118996,26.42607702],[118.81599192,26.42749596],[118.810836,26.43126498],[118.81034496,26.43238602],[118.80831492,26.43701202],[118.80766584,26.44306803],[118.808082,26.44541496],[118.809954,26.44605999],[118.81109808,26.44805799],[118.80891396,26.45111196],[118.80339516,26.45589402],[118.79750196,26.46034596],[118.79752788,26.46202599],[118.80471312,26.46830601],[118.80492984,26.46867303],[118.80492984,26.46911997],[118.80536292,26.47267704],[118.80523404,26.47611603],[118.80545904,26.47982601],[118.80530388,26.48249199],[118.80313704,26.48689101],[118.79684604,26.49000303],[118.78905312,26.492463],[118.78384212,26.49320397],[118.78274988,26.49490002],[118.78427592,26.49723102],[118.78526412,26.50006701],[118.78502184,26.500293],[118.78425,26.50304502],[118.782846,26.50562604],[118.78004484,26.50785498],[118.77748704,26.50842999],[118.77023484,26.50819203],[118.76596596,26.50916601],[118.76424804,26.51088501],[118.76226984,26.51156901],[118.75889412,26.51053698],[118.75517208,26.51034402],[118.75154904,26.51028597],[118.748826,26.51072697],[118.74818592,26.51079204],[118.74774312,26.50983003],[118.747431,26.50895901],[118.74692412,26.50829598],[118.74644316,26.50765896],[118.74629988,26.50672296],[118.74629988,26.505918],[118.74650796,26.50455297],[118.746495,26.50333104],[118.74669012,26.50279896],[118.74689784,26.50242204],[118.74749616,26.50212297],[118.748484,26.50191498],[118.74929004,26.50146102],[118.75007016,26.50069404],[118.75071996,26.49988197],[118.75113612,26.49910203],[118.75101912,26.49823101],[118.75068108,26.49728304],[118.750356,26.49650301],[118.75008312,26.49563199],[118.75007016,26.49480003],[118.75025196,26.49413799],[118.75068108,26.49361797],[118.752813,26.49311496],[118.75438584,26.49277701],[118.75502304,26.49259503],[118.75554288,26.49219201],[118.755855,26.49176298],[118.75601088,26.49121704],[118.75602384,26.48998296],[118.75589388,26.48890404],[118.75532904,26.48662902],[118.75491504,26.48514096],[118.75249512,26.48387403],[118.74932496,26.48222298],[118.74631212,26.48058003],[118.74327192,26.47691901],[118.742724,26.47630701],[118.74030984,26.47594998],[118.73815596,26.47462896],[118.73643516,26.47272798],[118.73567916,26.47055304],[118.73581812,26.46653796],[118.73582604,26.46132399],[118.73494008,26.45954703],[118.73386188,26.45668197],[118.73508696,26.45175996],[118.73548692,26.44814799],[118.73510388,26.445456],[118.73508696,26.44528401],[118.73307096,26.44177896],[118.731159,26.43844104],[118.73446884,26.43537996],[118.742625,26.430921],[118.74401496,26.430435],[118.74527388,26.42951601],[118.74653316,26.42884398],[118.74780108,26.42839497],[118.749051,26.42772096],[118.74920796,26.42754699],[118.75040604,26.42713101],[118.75968504,26.42332401],[118.762254,26.42093901],[118.76148108,26.41893399],[118.75843512,26.41494096],[118.75771404,26.41322502],[118.75876416,26.41163697],[118.760292,26.40734397],[118.75799988,26.40682098],[118.75577796,26.40704697],[118.75509216,26.40514203],[118.75503096,26.40154599],[118.75338108,26.39919402],[118.75329504,26.39897298],[118.75328604,26.39852604],[118.75437108,26.39615904],[118.75694904,26.39377701],[118.76141016,26.39304999],[118.76625216,26.392653],[118.76994792,26.38991799],[118.77251508,26.38719801],[118.77136992,26.38553301],[118.77098004,26.38373301],[118.77150888,26.38313604],[118.77251508,26.38201401],[118.77377292,26.38088703],[118.77502212,26.37998802],[118.77627888,26.37908703],[118.77703416,26.37796698],[118.777788,26.37683802],[118.77829092,26.37571401],[118.77904584,26.37458496],[118.77980004,26.37345699],[118.77990408,26.37327897],[118.78196796,26.37153702],[118.78493292,26.37048798],[118.78790688,26.37044802],[118.79197308,26.36804196],[118.79638488,26.364285],[118.79893296,26.36055504],[118.79849016,26.35619301],[118.79655696,26.35151904],[118.79537796,26.347167],[118.79494416,26.343144],[118.79415504,26.34046596],[118.79040204,26.33883903],[118.78363008,26.33422896],[118.77685704,26.32995099],[118.77348204,26.32865202],[118.76715792,26.32974201],[118.76047596,26.33150601],[118.75343688,26.334279],[118.75310712,26.33730696],[118.75200516,26.33866299],[118.74948696,26.33931099],[118.74834108,26.33933601],[118.74708216,26.33956002],[118.74583116,26.33955498],[118.74458088,26.33954301],[118.74380796,26.33954103],[118.74332196,26.33953896],[118.74206196,26.33976099],[118.74081096,26.33953302],[118.73956104,26.33952996],[118.73831004,26.33952501],[118.73705004,26.33974803],[118.73648592,26.339949],[118.73299284,26.33955597],[118.72541592,26.34070698],[118.72398996,26.34040602],[118.720548,26.34038901],[118.71954,26.33866803],[118.71776592,26.33637096],[118.71586188,26.33384799],[118.71407988,26.33086296],[118.71147996,26.32666797],[118.707732,26.32293603],[118.703853,26.32092102],[118.70041788,26.31775302],[118.69597296,26.31498399],[118.69348608,26.31331404],[118.69184196,26.31102003],[118.69165908,26.30781099],[118.69147584,26.30494602],[118.69155396,26.30213901],[118.69074504,26.299071],[118.69072704,26.29792701],[118.69147512,26.29758402],[118.69464996,26.29755297],[118.69725096,26.29685403],[118.69817184,26.29566999],[118.69795512,26.29382301],[118.69661484,26.29148697],[118.69435404,26.29033398],[118.69155288,26.29019403],[118.69063092,26.29087299],[118.69026588,26.29188603],[118.68990912,26.29289601],[118.68861312,26.293581],[118.687491,26.29359198],[118.68729084,26.29258704],[118.68690816,26.29175103],[118.68522084,26.29126197],[118.68316812,26.29178802],[118.68148908,26.29180404],[118.68129792,26.29130301],[118.68147216,26.29062801],[118.68275016,26.28876798],[118.68328908,26.28725301],[118.68337584,26.28699903],[118.68328116,26.28695997],[118.682028,26.28582696],[118.68134112,26.28479799],[118.67762592,26.28310797],[118.67028408,26.27931699],[118.66649112,26.27532099],[118.665387,26.27634096],[118.66502988,26.27751996],[118.66505688,26.279199],[118.66546512,26.28137799],[118.66626612,26.28523296],[118.66613616,26.28926496],[118.66597992,26.291619],[118.66601412,26.29380096],[118.66492692,26.29632996],[118.66043988,26.30046303],[118.65949992,26.30229804],[118.65814416,26.30590101],[118.65832704,26.30962503],[118.65735288,26.31191598],[118.655631,26.31465702],[118.65497004,26.31640698],[118.65346596,26.317899],[118.65199608,26.31959199],[118.65220488,26.32076604],[118.65390984,26.32259799],[118.66182516,26.32755699],[118.66334688,26.32922397],[118.66282488,26.33208399],[118.66099896,26.33512401],[118.66046904,26.33731398],[118.66124304,26.33864904],[118.66256496,26.33997996],[118.66222584,26.34216804],[118.65964284,26.34437502],[118.65668616,26.34629202],[118.65602484,26.346456],[118.65066804,26.34832098],[118.647729,26.35043301],[118.644408,26.35259499],[118.64063484,26.35515801],[118.63566288,26.35634403],[118.63273284,26.357076],[118.62903096,26.35936101],[118.62717192,26.36210502],[118.62550404,26.36484498],[118.62390492,26.36616096],[118.61855388,26.36648802],[118.61595612,26.36550396],[118.61379396,26.36372403],[118.61322012,26.36238996],[118.61224812,26.36143299],[118.610937,26.36144703],[118.61045892,26.36196597],[118.60946892,26.36197596],[118.607967,26.36132103],[118.60606512,26.35915698],[118.60340004,26.354988],[118.60112592,26.35266204],[118.59812316,26.35101603],[118.59252696,26.35074504],[118.59291684,26.352252],[118.59426216,26.35492401],[118.59467904,26.35827804],[118.594341,26.36075898],[118.59231096,26.36195796],[118.58915304,26.36266599],[118.58768712,26.36486703],[118.58736708,26.36856603],[118.58814792,26.37141399],[118.59006492,26.37525402],[118.58990904,26.37760797],[118.58807016,26.37897102],[118.58676912,26.37915696],[118.58582412,26.37832599],[118.58560704,26.37841599],[118.58552892,26.37803997],[118.58577984,26.37691002],[118.58603112,26.37578799],[118.58577984,26.37465597],[118.58479092,26.37353097],[118.584297,26.37239904],[118.58414904,26.37170703],[118.58123592,26.37015003],[118.57844412,26.37035199],[118.57621608,26.37105102],[118.57324284,26.37142398],[118.57172688,26.36925903],[118.57112784,26.36641098],[118.56923892,26.36458497],[118.56682188,26.36461701],[118.56441312,26.36548596],[118.56313116,26.367183],[118.56355596,26.37087201],[118.56420612,26.37791901],[118.56422412,26.381142],[118.56396384,26.38226403],[118.56405096,26.38263699],[118.56355704,26.38514997],[118.56209292,26.38701603],[118.55802204,26.38857897],[118.55358,26.39065104],[118.55116404,26.39118798],[118.55086992,26.39142702],[118.55125116,26.39454102],[118.54958904,26.39597004],[118.54887012,26.39964204],[118.54847196,26.40491496],[118.54893996,26.40619404],[118.54968516,26.40625704],[118.54977984,26.40707001],[118.54939896,26.40967002],[118.54960704,26.41300002],[118.55080188,26.41355703],[118.55280204,26.41606902],[118.55542608,26.41704201],[118.55737512,26.41764096],[118.55803284,26.41878297],[118.55877804,26.41991004],[118.55927196,26.421039],[118.55976588,26.42217102],[118.56051108,26.42329701],[118.56149892,26.42443002],[118.56250296,26.42510304],[118.563759,26.425557],[118.56499812,26.42646096],[118.565163,26.42671296],[118.56574404,26.42759703],[118.56623796,26.42871798],[118.56623796,26.42985504],[118.56597804,26.43097698],[118.56596904,26.43210504],[118.56622104,26.43322797],[118.56643704,26.43424101],[118.56502512,26.43842196],[118.56244392,26.44080597],[118.55725596,26.44255098],[118.55652804,26.44390602],[118.556676,26.44446996],[118.55871108,26.44595199],[118.56073788,26.44761501],[118.56206304,26.45036703],[118.56173508,26.45288901],[118.56146616,26.45512002],[118.56209004,26.45833203],[118.56410892,26.46131103],[118.567089,26.46487296],[118.57025196,26.46710703],[118.57304304,26.46865899],[118.57616388,26.47055601],[118.58114016,26.47240803],[118.58751396,26.47468503],[118.58979492,26.47734597],[118.59130512,26.47867302],[118.59316992,26.47864998],[118.59389892,26.477298],[118.59460992,26.47460304],[118.59646608,26.47390896],[118.59871392,26.47455696],[118.60174296,26.47754604],[118.60364412,26.48021301],[118.60631892,26.48455002],[118.60862796,26.48956401],[118.60907112,26.49459996],[118.608021,26.49931497],[118.60620696,26.50303098],[118.60538292,26.50587696],[118.60637292,26.50786497],[118.60935084,26.512632],[118.61219988,26.518257],[118.61516988,26.52354],[118.61719416,26.52847101],[118.61749008,26.534034],[118.61659512,26.53626402],[118.61511012,26.54032896],[118.61695188,26.542737],[118.61936712,26.54555202],[118.62133092,26.54854596],[118.62132192,26.55157698],[118.61895096,26.55403803],[118.61665812,26.55465696],[118.613331,26.55493803],[118.61097804,26.55475596],[118.60773012,26.552916],[118.60456104,26.55078399],[118.60206984,26.550207],[118.60040412,26.55163503],[118.60036884,26.55172998],[118.59604812,26.55178101],[118.59084216,26.55318501],[118.58528304,26.55660996],[118.58235192,26.56067697],[118.58079996,26.56507401],[118.581381,26.566128],[118.58212692,26.56680399],[118.581876,26.56726002],[118.581867,26.56838601],[118.58211,26.569512],[118.58217912,26.56957302],[118.58211,26.57008701],[118.58404392,26.57510496],[118.58409612,26.57846601],[118.58344596,26.58257604],[118.58409684,26.58467403],[118.58517288,26.587368],[118.58554584,26.59017798],[118.58540688,26.59286898],[118.58635296,26.59585104],[118.58800104,26.59894497],[118.58868612,26.60152698],[118.58873904,26.60525199],[118.58610204,26.61104097],[118.58474988,26.61333003],[118.58562612,26.61710904],[118.58733504,26.62049997],[118.58757804,26.62370901],[118.58661504,26.62777197],[118.58881896,26.63121897],[118.59086592,26.63179002],[118.592766,26.63523297],[118.59409404,26.63816004],[118.59490908,26.64080298],[118.59477084,26.64383697],[118.59571692,26.64682299],[118.59518808,26.64997596],[118.59562188,26.65330002],[118.598607,26.65697598],[118.60063812,26.65978596],[118.60120296,26.66282796],[118.60036092,26.66580804],[118.59895512,26.66837799],[118.59876396,26.669142],[118.59714216,26.67040704],[118.59475608,26.67184596],[118.59246504,26.67335796],[118.58934312,26.67473298],[118.58588208,26.67507003],[118.58307192,26.67503097],[118.58050584,26.67476403],[118.57844196,26.67501099],[118.57565988,26.67697596],[118.57329396,26.67915999],[118.57232304,26.68065903],[118.57208904,26.68162698],[118.57229712,26.68274199],[118.57228884,26.68341897],[118.57303404,26.68454703],[118.57403988,26.68568103],[118.57503708,26.68680603],[118.57604184,26.68794003],[118.57687488,26.688546],[118.57729104,26.68884498],[118.57853916,26.68952502],[118.57979592,26.69065497],[118.58079312,26.69178897],[118.58176404,26.69289498],[118.58069808,26.69460102],[118.579302,26.69626098],[118.58108004,26.701227],[118.58244192,26.70218703],[118.58535504,26.70609996],[118.58721192,26.70845499],[118.587879,26.70941403],[118.58920704,26.70954804],[118.59035112,26.70878997],[118.59108912,26.707815],[118.59215616,26.70758001],[118.593414,26.70860601],[118.59499296,26.709183],[118.59747408,26.70915402],[118.59927912,26.70839001],[118.60100604,26.70740397],[118.60208316,26.70731703],[118.60258608,26.70790797],[118.60260408,26.70939198],[118.602882,26.71154496],[118.60300296,26.71421904],[118.60395804,26.71740297],[118.60587792,26.72436699],[118.60556508,26.72607996],[118.60525296,26.72727102],[118.605609,26.72860599],[118.60711092,26.72992602],[118.60861284,26.73087399],[118.61011512,26.73152802],[118.61162604,26.73284796],[118.61332812,26.73639702],[118.61354592,26.73966402],[118.61358084,26.74233999],[118.61357292,26.75069802],[118.61505,26.75558799],[118.62013212,26.766567],[118.62156492,26.76811401],[118.62282492,26.76906504],[118.62409392,26.77120902],[118.625823,26.779104],[118.626831,26.78028102],[118.627839,26.78131098],[118.62803988,26.78331699],[118.62781416,26.78487903],[118.62707508,26.78577903],[118.62585,26.78668299],[118.62527688,26.78728401],[118.62621504,26.78890797],[118.62763992,26.79023097],[118.62905688,26.79103404],[118.63162908,26.79108201],[118.63379304,26.79135597],[118.63554912,26.79252804],[118.63748808,26.79473799],[118.63860984,26.80100604],[118.63922688,26.80360002],[118.63943604,26.80642197],[118.64144484,26.81520498],[118.64127996,26.81868798],[118.63973304,26.82327204],[118.63690812,26.82755901],[118.63440504,26.83070802],[118.63413612,26.83133496],[118.62757404,26.83645803],[118.62574992,26.83983798],[118.62616716,26.84149497],[118.62993888,26.84962296],[118.630296,26.85117996],[118.631808,26.85227796],[118.63620612,26.85260403],[118.64194416,26.85328902],[118.64318688,26.85327597],[118.64450016,26.85251997],[118.64632608,26.85257703],[118.64799504,26.85322899],[118.64883888,26.854335],[118.64920392,26.85465297],[118.64907396,26.85521502],[118.64856996,26.85633804],[118.64805696,26.85746196],[118.64779596,26.85784599],[118.64806488,26.858133],[118.64857896,26.85924297],[118.65092688,26.860779],[118.65858012,26.86204197],[118.66224996,26.86297104],[118.66325112,26.86311],[118.66480704,26.86227696],[118.66753008,26.86076496],[118.67083488,26.85969],[118.67257512,26.85952404],[118.67391504,26.86055103],[118.67501988,26.86180599],[118.67677704,26.86305096],[118.67793408,26.86281597],[118.67991696,26.86212801],[118.68249204,26.86187898],[118.68382296,26.86231296],[118.68717204,26.86398804],[118.68932916,26.86441104],[118.690416,26.86462398],[118.69159896,26.86587597],[118.69195608,26.86750704],[118.69216488,26.868033],[118.69221708,26.86807899],[118.69375716,26.870625],[118.69603596,26.87211396],[118.69657488,26.870598],[118.69805304,26.86940397],[118.70122788,26.86819599],[118.70555004,26.86682097],[118.70782812,26.86618998],[118.71559188,26.86307202],[118.72375416,26.86087899],[118.73114892,26.85846402],[118.73752596,26.85652398],[118.74006288,26.85487599],[118.74026196,26.85234303],[118.73795184,26.85238002],[118.73000196,26.85250701],[118.720746,26.85173301],[118.72165788,26.84597301],[118.72285704,26.84205198],[118.72582884,26.83694799],[118.72928808,26.83046196],[118.73297088,26.82213201],[118.73846988,26.81492202],[118.74280392,26.81393202],[118.74818808,26.81361297],[118.75738212,26.81230896],[118.76804712,26.80752897],[118.77817788,26.80252497],[118.78292988,26.79715602],[118.78685712,26.78881302],[118.78982208,26.784162],[118.80102096,26.78096502],[118.81356804,26.78187798],[118.82281212,26.78353902],[118.83360708,26.78654601],[118.84399416,26.79369804],[118.84970412,26.79772203],[118.85924412,26.80098597],[118.86648912,26.80475301],[118.87625988,26.80709301],[118.88350884,26.81086401],[118.88767188,26.81400096],[118.89070812,26.812107],[118.89553212,26.810181],[118.89801288,26.80646004],[118.90646712,26.806536],[118.91310084,26.80504002],[118.91734704,26.80013799],[118.91888388,26.788392],[118.91507004,26.77788999],[118.908531,26.77203297],[118.89530208,26.76422799],[118.88721612,26.75771604],[118.88273196,26.75159703],[118.882368,26.74654704],[118.88224596,26.74103697],[118.88550612,26.73798903],[118.89321804,26.73945297],[118.89969192,26.74278099],[118.90641888,26.74587798],[118.91515392,26.74732896],[118.92517992,26.74807299],[118.93069908,26.75441403],[118.938672,26.76668598],[118.94619492,26.77046796],[118.95495588,26.77193298],[118.96158708,26.76975696],[118.96368516,26.77156299],[118.97222508,26.77464504],[118.98276984,26.77493799],[118.99012896,26.77091796],[118.99316916,26.76880197],[118.99896912,26.764119],[119.00372508,26.75829897],[119.01551904,26.75719701],[119.02279212,26.76030102],[119.02656384,26.76782304],[119.03238108,26.77485402],[119.038851,26.77704597],[119.04710292,26.77851801],[119.05217712,26.77544703],[119.05387308,26.77105197],[119.05508304,26.76804597],[119.05343712,26.76347802],[119.05206192,26.75959497],[119.04884208,26.75390301],[119.04534288,26.74661103],[119.04447204,26.74248804],[119.04297408,26.733321],[119.047761,26.72933697],[119.05671492,26.72803899],[119.06056008,26.72774199],[119.06777088,26.72899803],[119.077065,26.73159102],[119.090412,26.73226503],[119.103777,26.73361899],[119.11944888,26.73629802],[119.12711616,26.73591201],[119.13732,26.73455301],[119.14385508,26.72982099],[119.15090892,26.72530497],[119.15390592,26.72271297],[119.16091512,26.71635897],[119.16541116,26.71212501],[119.17078992,26.71269903],[119.17593612,26.71419501],[119.17788516,26.72058501],[119.17856196,26.72769402],[119.18449512,26.72986401],[119.19336588,26.726913],[119.202246,26.72419401],[119.21220216,26.72351901],[119.21868612,26.72705403],[119.228274,26.732367],[119.23641,26.74069497],[119.24057304,26.74336599],[119.245527,26.736831],[119.24891892,26.72894799],[119.25164304,26.71510698],[119.25250992,26.70888501],[119.25362988,26.70196896],[119.25622404,26.69341599],[119.25918396,26.68853097],[119.26220508,26.68640103],[119.27217492,26.68574097],[119.28137508,26.68510197],[119.29286304,26.68326903],[119.30899896,26.68250304],[119.319939,26.679078],[119.32935804,26.67637296],[119.338794,26.66401596],[119.34322884,26.65726902],[119.34713304,26.64938196],[119.35640988,26.63128197],[119.36212308,26.63415801],[119.37020796,26.63974296],[119.37531888,26.64058203],[119.37945492,26.64309897],[119.38490208,26.64364896],[119.38555404,26.643213],[119.38596192,26.642934],[119.38721292,26.64180396],[119.38796784,26.64068301],[119.38896684,26.63954901],[119.38996584,26.63842302],[119.39072112,26.63729298],[119.39146812,26.63616897],[119.39172012,26.63503902],[119.39196312,26.63391699],[119.39221512,26.63278497],[119.39245812,26.63165403],[119.39299596,26.63045901],[119.39242284,26.62792398],[119.39202288,26.62658703],[119.390139,26.626113],[119.38825404,26.62530399],[119.38767192,26.62430499],[119.38801896,26.62295598],[119.38669812,26.62247304],[119.385378,26.62199001],[119.38294584,26.62169301],[119.38106916,26.621721],[119.38043484,26.62148997],[119.37966084,26.62008102],[119.37951396,26.618553],[119.37980016,26.61468696],[119.37954816,26.61149898],[119.37741804,26.60783598],[119.37471588,26.60384601],[119.371491,26.60154399],[119.36735388,26.60060097],[119.36327616,26.59914999],[119.36062512,26.59896999],[119.35981188,26.59916601],[119.35972692,26.599365],[119.359467,26.59978701],[119.35933992,26.599896],[119.35873512,26.60000904],[119.35850508,26.60022],[119.35838988,26.60043798],[119.35860804,26.60067999],[119.35859004,26.60090904],[119.358342,26.60124699],[119.35807596,26.60148801],[119.35774404,26.60191902],[119.35721592,26.60220297],[119.35674216,26.60212098],[119.35391112,26.60206203],[119.35317996,26.602155],[119.35269288,26.602371],[119.35147284,26.60297697],[119.35104012,26.60077197],[119.350728,26.59919004],[119.35102608,26.59791897],[119.35099908,26.59751397],[119.350836,26.59732398],[119.35057896,26.59739103],[119.34905796,26.59896099],[119.34830988,26.59900302],[119.347551,26.598699],[119.34631584,26.59870701],[119.34563292,26.59873797],[119.34537408,26.59893597],[119.34488484,26.59900698],[119.34461412,26.59881204],[119.34432216,26.59839003],[119.344203,26.59795704],[119.34446292,26.59752504],[119.344734,26.59718997],[119.34472212,26.59656303],[119.34386604,26.59585797],[119.34374688,26.59542498],[119.34392004,26.59507902],[119.34476604,26.59473504],[119.34616392,26.59414203],[119.34689004,26.59364604],[119.34762408,26.59266702],[119.34817992,26.59175604],[119.34843912,26.590923],[119.34830916,26.59020903],[119.34769104,26.58998097],[119.34694692,26.589699],[119.346489,26.58925404],[119.34555696,26.58801897],[119.34487404,26.58737997],[119.34417996,26.58721599],[119.34263016,26.58725703],[119.34168696,26.58745998],[119.34100404,26.58773997],[119.34035388,26.58794499],[119.33962416,26.58778002],[119.33906616,26.58747798],[119.33870688,26.58692502],[119.33816508,26.58638304],[119.33735184,26.58582999],[119.33638704,26.58543804],[119.33548812,26.58526398],[119.33518392,26.58475503],[119.33512992,26.58421404],[119.33521704,26.58330504],[119.33504316,26.58294801],[119.33422992,26.58164904],[119.33313516,26.58017601],[119.33227908,26.57889801],[119.331207,26.57800701],[119.32964892,26.57692296],[119.328525,26.57635299],[119.32811784,26.57622996],[119.32782012,26.57646],[119.32758612,26.57708298],[119.32728192,26.57753604],[119.32677288,26.57791404],[119.32636104,26.57812896],[119.32588404,26.57815002],[119.325375,26.57808396],[119.32480008,26.57778003],[119.32382484,26.577108],[119.32320708,26.57644704],[119.32297092,26.57601198],[119.32245108,26.57468097],[119.32236396,26.574399],[119.32219116,26.574183],[119.32179192,26.57406303],[119.32130088,26.57439999],[119.32086096,26.574804],[119.31996312,26.57515797],[119.31913404,26.57529099],[119.31881184,26.57552697],[119.31872688,26.57608497],[119.31881004,26.57690199],[119.31875496,26.57724804],[119.318409,26.57719296],[119.31737904,26.57639097],[119.316501,26.57592396],[119.31551496,26.57570598],[119.31502716,26.57547801],[119.31473412,26.57559699],[119.31442092,26.57595303],[119.31420816,26.57634498],[119.31399792,26.57673099],[119.31401808,26.57718999],[119.31475896,26.57820501],[119.31529896,26.57849697],[119.31558012,26.57873196],[119.31562692,26.57949498],[119.31609204,26.58008799],[119.31729912,26.58066003],[119.31789204,26.58057696],[119.31825204,26.580393],[119.31857712,26.58048003],[119.31877692,26.58078504],[119.31887196,26.58133998],[119.319075,26.58171798],[119.31969096,26.58229101],[119.31990084,26.58258504],[119.31989904,26.58346299],[119.32022988,26.58465198],[119.32029612,26.58524697],[119.31920496,26.58659796],[119.318328,26.58701898],[119.315898,26.58758202],[119.31559992,26.58814299],[119.31596388,26.58923298],[119.31641712,26.58979098],[119.31649308,26.59081797],[119.31606288,26.59131198],[119.31500988,26.59150602],[119.31207912,26.59185504],[119.30914008,26.59208598],[119.30537484,26.59265496],[119.30218416,26.59266504],[119.29904604,26.59145796],[119.29758516,26.58957498],[119.29482,26.58602502],[119.29136904,26.58310002],[119.28888288,26.57961],[119.28663216,26.57440197],[119.28513708,26.57035503],[119.28507588,26.56721997],[119.28379788,26.559513],[119.28125088,26.54409897],[119.28036384,26.53705701],[119.27919888,26.53506],[119.27695788,26.53509303],[119.27436012,26.53614099],[119.27291004,26.53851303],[119.26813392,26.54261802],[119.25740196,26.547822],[119.25367812,26.54855298],[119.25176004,26.54589699],[119.25016308,26.54054703],[119.24665596,26.53287804],[119.24133696,26.52825996],[119.23311492,26.52531003],[119.23231608,26.52546303],[119.22913404,26.52403599],[119.226906,26.523873],[119.22448716,26.52525801],[119.22213708,26.52806601],[119.218896,26.532036],[119.21693688,26.53433199],[119.21547204,26.53673796],[119.21496984,26.54046198],[119.21484888,26.54355798],[119.21510916,26.54590797],[119.21332392,26.54814699],[119.21103612,26.54987301],[119.20938984,26.55274203],[119.20806396,26.55686898],[119.20545612,26.56140597],[119.20450284,26.56341702],[119.20215492,26.56594602],[119.19847284,26.56773198],[119.196117,26.569116],[119.19363912,26.56786797],[119.19261708,26.56586502],[119.19115188,26.56312299],[119.18886516,26.561808],[119.18662992,26.56078101],[119.18466396,26.55810099],[119.18229804,26.55432504],[119.18008116,26.55256104],[119.17638216,26.55101898],[119.17308096,26.54937],[119.16966312,26.548857],[119.16724284,26.54939304],[119.16217188,26.54455302],[119.16143388,26.54194401],[119.15940816,26.54128296],[119.15902404,26.54149896],[119.15852904,26.54204202],[119.15798688,26.54264097],[119.15727804,26.54285103],[119.15654112,26.54278299],[119.15588808,26.542422],[119.154915,26.54167203],[119.15424792,26.54145],[119.15349696,26.54153496],[119.15295516,26.541828],[119.15212104,26.54245602],[119.15124516,26.54312598],[119.15066088,26.543448],[119.14975116,26.54364096],[119.14838496,26.54371503],[119.14646112,26.543214],[119.14444692,26.54264097],[119.143674,26.54219196],[119.143314,26.54168796],[119.143026,26.54040996],[119.142918,26.53923996],[119.143008,26.53826697],[119.14260984,26.53792596],[119.14193412,26.53769601],[119.14133004,26.53792803],[119.14086888,26.53838901],[119.140236,26.53916796],[119.13954588,26.53999002],[119.13830892,26.54123103],[119.13741612,26.541693],[119.13652404,26.54204004],[119.13586308,26.542314],[119.13499908,26.54238699],[119.130993,26.54240103],[119.12912388,26.54248599],[119.127447,26.54246997],[119.12604696,26.54245197],[119.12499684,26.54216802],[119.12460984,26.541864],[119.12441688,26.54132004],[119.12444388,26.54078499],[119.12454504,26.54030601],[119.12458212,26.53990902],[119.124342,26.539425],[119.12404788,26.53910703],[119.12356908,26.53891398],[119.12272092,26.53893297],[119.12206716,26.53899804],[119.12132088,26.53927596],[119.12069412,26.53935903],[119.11984308,26.53929],[119.118645,26.53907796],[119.11782492,26.53873803],[119.117043,26.53862796],[119.116341,26.53872903],[119.11593492,26.53888599],[119.115585,26.539209],[119.115216,26.53978104],[119.11507812,26.54022402],[119.11508712,26.54053704],[119.11522608,26.54084097],[119.11551192,26.54134803],[119.11551192,26.54161596],[119.11530888,26.54230698],[119.11510584,26.54277696],[119.11482,26.54321103],[119.11430412,26.54362602],[119.11364712,26.54387397],[119.11278996,26.54428896],[119.11203,26.54498898],[119.11178916,26.54538804],[119.11155804,26.54607402],[119.11155804,26.54659701],[119.111616,26.54721999],[119.11175388,26.54787699],[119.112138,26.54900703],[119.11239108,26.54987103],[119.11249512,26.55075798],[119.11236804,26.55136899],[119.11206888,26.55178398],[119.111328,26.55238797],[119.110464,26.55286002],[119.10991104,26.55314901],[119.10978396,26.55342504],[119.10954204,26.55437004],[119.10926592,26.55491202],[119.108736,26.55559197],[119.10803292,26.55620298],[119.106477,26.55766701],[119.105946,26.55801198],[119.10525192,26.55828504],[119.10452184,26.55852102],[119.10379212,26.55895599],[119.10320892,26.55897102],[119.10253788,26.55889704],[119.10198384,26.55897804],[119.10177792,26.55905904],[119.10163788,26.55922203],[119.10162312,26.55941301],[119.10166704,26.55954603],[119.10191796,26.55978201],[119.10328992,26.56028403],[119.10343788,26.56049004],[119.10387312,26.56139004],[119.10402108,26.56191501],[119.10392892,26.56236501],[119.10342204,26.563275],[119.10251088,26.56439298],[119.102211,26.56476198],[119.101716,26.56535004],[119.10145104,26.56584504],[119.10131208,26.56649097],[119.10128904,26.56700901],[119.10140496,26.56793097],[119.10152484,26.56835496],[119.10176712,26.56883898],[119.10180204,26.56922004],[119.101698,26.56954197],[119.10136392,26.56986498],[119.10078684,26.57022201],[119.10046392,26.57057904],[119.10025692,26.57086704],[119.10019896,26.57110896],[119.10016512,26.57184696],[119.09999196,26.57285001],[119.09999196,26.57336796],[119.10037212,26.57391003],[119.10061404,26.57416401],[119.10066084,26.57455596],[119.10032604,26.574993],[119.09910204,26.574993],[119.09805984,26.57509101],[119.09634912,26.57343501],[119.09612304,26.571087],[119.09607084,26.56823103],[119.09473416,26.56657098],[119.09266704,26.56609704],[119.09041596,26.56596096],[119.08837512,26.56649304],[119.08689804,26.56752102],[119.08635912,26.56870497],[119.08505592,26.56905804],[119.08242288,26.56842201],[119.07734688,26.56714698],[119.07211392,26.56721601],[119.067462,26.56878903],[119.06319204,26.57085903],[119.06135712,26.57289699],[119.06196588,26.57540898],[119.06541,26.57939904],[119.071089,26.58335697],[119.07522792,26.58447702],[119.07694908,26.58630204],[119.07643608,26.588997],[119.07407196,26.59272399],[119.071125,26.59545],[119.067786,26.59700502],[119.06371584,26.59991499],[119.06170704,26.60279499],[119.060046,26.60382504],[119.05779204,26.60368401],[119.05570404,26.60202999],[119.05339788,26.59903299],[119.05130988,26.59721301],[119.04904692,26.59640004],[119.04489504,26.59605903],[119.04379812,26.596251],[119.03482296,26.59770198],[119.02846608,26.59844601],[119.02504284,26.59579803],[119.02624488,26.58948498],[119.02583484,26.58764097],[119.02506804,26.58697704],[119.02395384,26.58715803],[119.02154112,26.588529],[119.01894588,26.59023801],[119.01707388,26.59042602],[119.01574908,26.58976902],[119.01534012,26.58809403],[119.01547008,26.58473397],[119.015235,26.58204702],[119.01408516,26.58038103],[119.01238704,26.58006297],[119.01068784,26.57924199],[119.010087,26.57689704],[119.01006,26.57538504],[119.01097512,26.57419803],[119.01303108,26.57400903],[119.01396312,26.57349297],[119.01431088,26.571978],[119.01372696,26.57097801],[119.01069612,26.56895301],[119.00934504,26.56711998],[119.00874384,26.56477404],[119.00927592,26.56308798],[119.01054708,26.56038798],[119.01013704,26.558712],[119.00861316,26.55721701],[119.00614788,26.55573102],[119.00429208,26.55659196],[119.00058192,26.55881703],[118.99870092,26.55866898],[118.99512,26.55719802],[118.99377,26.555364],[118.99384812,26.55366597],[118.99485,26.55283104],[118.99724508,26.55028701],[119.00018916,26.54722998],[119.00166084,26.54536599],[119.00163492,26.54418996],[119.00143404,26.54352099],[118.99973592,26.54270001],[118.99839384,26.54086698],[118.99803708,26.53846101],[118.99821996,26.538165],[118.99808892,26.53791498],[118.99825488,26.537796],[118.99850688,26.53756704],[118.99950912,26.53599699],[119.00051892,26.53510104],[119.00051892,26.53397298],[119.00051892,26.53374798],[119.00051892,26.533296],[119.00001384,26.53284096],[119.00002212,26.53261596],[118.997505,26.53147998],[118.99699992,26.53035003],[118.996416,26.529489],[118.99509192,26.52878898],[118.99134684,26.52916401],[118.98950904,26.53119999],[118.98728784,26.53256898],[118.98392688,26.53361397],[118.97418204,26.53338501],[118.96817508,26.53244298],[118.95912216,26.52885099],[118.95382188,26.52555204],[118.95036804,26.52055299],[118.94953212,26.515188],[118.94832288,26.510499],[118.94452992,26.50752],[118.94072004,26.50319901],[118.93912884,26.49784203],[118.93980708,26.49346596],[118.94275404,26.490744],[118.94687712,26.49103101],[118.95100092,26.49165399],[118.95395004,26.48893302],[118.95421896,26.48288304],[118.952226,26.47551501],[118.95025104,26.46949104],[118.94645808,26.46651096],[118.94455296,26.46551898],[118.94370912,26.466012],[118.94141304,26.46589599],[118.93829112,26.465661],[118.93573512,26.46680301],[118.933632,26.46868599],[118.93197204,26.47097901],[118.92890412,26.47521297],[118.926288,26.47761696],[118.92303792,26.478126],[118.91971908,26.47817802],[118.91686104,26.47771902],[118.91251908,26.47714401],[118.90793412,26.47754703],[118.90654488,26.47798299],[118.90339416,26.47714797],[118.90040004,26.47624203],[118.89726696,26.47498401],[118.89529704,26.47425402],[118.89331812,26.47385604],[118.89141012,26.47351404],[118.88969184,26.473005],[118.887714,26.47226502],[118.88630892,26.47147401],[118.88498196,26.47038204],[118.88450496,26.469423],[118.88279712,26.46906003],[118.87892892,26.46808803],[118.87409088,26.46643401],[118.87091784,26.46494496],[118.87021512,26.46299799],[118.87028496,26.46081297],[118.87092612,26.45841501],[118.86876792,26.45606403],[118.86559488,26.45474697],[118.86279588,26.45366004],[118.86095016,26.45239797],[118.86037704,26.44936596],[118.85943312,26.44701804],[118.857474,26.44472799],[118.85671188,26.44243902],[118.85480496,26.43951699],[118.85270796,26.43803298],[118.85212692,26.43787098],[118.84402584,26.43346899],[118.83876696,26.43052104],[118.832391,26.42792796]],[[118.82526192,26.43299199],[118.82527416,26.43299496],[118.82531412,26.43300702],[118.82536596,26.43301998],[118.82541816,26.43303096],[118.82547792,26.43303699],[118.82553012,26.43304104],[118.82559096,26.43304104],[118.82564316,26.433045],[118.825704,26.43304797],[118.82575512,26.433054],[118.82580804,26.43307299],[118.82584188,26.43310602],[118.82587716,26.43314301],[118.82591208,26.43318603],[118.825938,26.43323103],[118.82596392,26.43327504],[118.82598912,26.43332004],[118.82601504,26.43336603],[118.82604204,26.43341103],[118.82606796,26.43345504],[118.82609388,26.43349797],[118.82612808,26.43353901],[118.826154,26.43358203],[118.82617992,26.43362604],[118.82620584,26.43367104],[118.82623212,26.43371703],[118.82625804,26.43375996],[118.82628396,26.43380604],[118.82630988,26.43385104],[118.82632788,26.43389703],[118.82635308,26.43394203],[118.826379,26.43398604],[118.82641392,26.43402897],[118.82643984,26.43407001],[118.82647512,26.43411303],[118.82650896,26.43415704],[118.82652696,26.43419997],[118.82650104,26.43423498],[118.82644884,26.43424398],[118.826388,26.43425496],[118.82633616,26.43426999],[118.82628396,26.434287],[118.82623212,26.434305],[118.82617992,26.43432201],[118.82612808,26.43433704],[118.82607588,26.43435504],[118.82602404,26.43437196],[118.82597184,26.43438996],[118.82592,26.43440697],[118.82586816,26.43442704],[118.82581596,26.43444396],[118.82576412,26.43446403],[118.82571192,26.43448599],[118.82566008,26.43450498],[118.82560896,26.43452703],[118.82555604,26.43454899],[118.82551284,26.43457302],[118.825461,26.43459696],[118.82540916,26.43462297],[118.82536596,26.43464898],[118.82532204,26.43467697],[118.82527092,26.43470604],[118.825227,26.43473601],[118.82518416,26.434764],[118.82513196,26.434791],[118.82508912,26.43481503],[118.82503692,26.434836],[118.82498508,26.43486003],[118.82493288,26.43488397],[118.82488896,26.434908],[118.82483712,26.43493203],[118.82479392,26.43495804],[118.82474208,26.43498198],[118.82468988,26.43500799],[118.82464704,26.43503697],[118.82460312,26.43506496],[118.824552,26.43509502],[118.82450808,26.43512202],[118.82445588,26.43514299],[118.82440404,26.43516099],[118.82435184,26.43517197],[118.8243,26.43518502],[118.82424888,26.43519996],[118.82419596,26.43522201],[118.82414412,26.43524604],[118.82409192,26.435268],[118.82404008,26.43528303],[118.82398896,26.43528501],[118.82391912,26.43527898],[118.82387592,26.43528996],[118.82383308,26.43531597],[118.82379816,26.43534801],[118.82376288,26.43537897],[118.82372004,26.43540696],[118.82367612,26.43543297],[118.82363292,26.43545502],[118.82359908,26.43547896],[118.82356416,26.43550902],[118.82353788,26.43554601],[118.82351196,26.43558804],[118.82349504,26.43562701],[118.82346912,26.43566598],[118.82343384,26.43570297],[118.82340792,26.43573996],[118.823373,26.43577497],[118.82333916,26.43580503],[118.82330388,26.43583104],[118.82326104,26.43585696],[118.82321712,26.43588099],[118.82317392,26.435907],[118.823139,26.43593499],[118.82310516,26.43596802],[118.82306988,26.43600096],[118.82304396,26.43603498],[118.82301012,26.43607197],[118.82297484,26.43610698],[118.82294892,26.43614199],[118.822923,26.43617898],[118.82288808,26.43621597],[118.82286216,26.43625296],[118.82283588,26.43629202],[118.82280996,26.43633099],[118.82279304,26.43637203],[118.82277612,26.43641298],[118.82275812,26.43645501],[118.82274084,26.43649803],[118.82273292,26.43654096],[118.82271492,26.436591],[118.82271492,26.43662196],[118.82270592,26.43667596],[118.822698,26.43672996],[118.822689,26.43678504],[118.82267208,26.43683904],[118.82265408,26.43689097],[118.82262888,26.43694101],[118.82260296,26.43699096],[118.82257704,26.437041],[118.82255004,26.43709104],[118.82252412,26.43714297],[118.82250684,26.43719301],[118.82248092,26.43724296],[118.822455,26.437293],[118.82242908,26.43734304],[118.82239488,26.43739002],[118.82236896,26.43743997],[118.82234304,26.43748803],[118.82231712,26.43753798],[118.82229012,26.43758802],[118.82226492,26.43764004],[118.82224692,26.43769197],[118.82223,26.43774399],[118.82220408,26.43779601],[118.82218716,26.43784902],[118.82216988,26.43790104],[118.82215188,26.43795297],[118.82213496,26.43800697],[118.82211696,26.43805899],[118.82210004,26.43811101],[118.82208312,26.43816303],[118.82206512,26.43821802],[118.82204784,26.43827004],[118.82203092,26.43832197],[118.822014,26.43837597],[118.822005,26.43842997],[118.821996,26.43848496],[118.821987,26.43853896],[118.82197008,26.43859296],[118.82196108,26.43864696],[118.82195316,26.43870204],[118.82194416,26.43875604],[118.82193588,26.43881004],[118.82192688,26.43886404],[118.82190996,26.43891903],[118.82189196,26.43897096],[118.82188404,26.43902496],[118.82186604,26.43907896],[118.82185812,26.43913296],[118.82184912,26.43918804],[118.82184012,26.43924204],[118.82183112,26.43929604],[118.82182284,26.43935004],[118.82181384,26.43940503],[118.82179692,26.43945903],[118.82178792,26.43951303],[118.82178,26.43956703],[118.821762,26.43962202],[118.82175408,26.43967602],[118.82174508,26.43973002],[118.82172816,26.43978204],[118.82171916,26.43983703],[118.82170188,26.43989103],[118.82169288,26.43994503],[118.82167596,26.43999903],[118.82166696,26.44005204],[118.82165004,26.44010604],[118.82164104,26.44016004],[118.82162412,26.44021404],[118.82162412,26.44026804],[118.82161512,26.44032303],[118.82160612,26.44037703],[118.82159784,26.44043103],[118.82158092,26.44048602],[118.82157192,26.440542],[118.82156292,26.44059402],[118.82152008,26.440614],[118.82145888,26.44060302],[118.82139804,26.44059402],[118.82133792,26.44058403],[118.82127708,26.44057296],[118.82121696,26.44056198],[118.82115612,26.44054902],[118.82109492,26.44053804],[118.82104308,26.44052598],[118.82098296,26.44051104],[118.82092212,26.44049502],[118.82086092,26.44047801],[118.82080908,26.440461],[118.82074896,26.44044399],[118.82068812,26.44042896],[118.820628,26.440416],[118.82057508,26.44040097],[118.82051496,26.44038801],[118.82045412,26.44037703],[118.820394,26.44036596],[118.82033316,26.44035804],[118.82027196,26.44034904],[118.82021112,26.44034301],[118.820151,26.44033896],[118.82009088,26.44033203],[118.82003004,26.44032798],[118.81996884,26.44032204],[118.819908,26.440317],[118.81984788,26.44031304],[118.81978704,26.44030404],[118.81972692,26.44029396],[118.81966608,26.44028298],[118.81960488,26.44027002],[118.81954404,26.44026102],[118.81948392,26.44025697],[118.81942308,26.44025301],[118.81936296,26.44024896],[118.81930212,26.440245],[118.81924092,26.44024302],[118.81918116,26.44024302],[118.81911996,26.44024104],[118.81905912,26.440236],[118.818999,26.44022799],[118.81893816,26.44021503],[118.81887696,26.44020198],[118.81882512,26.440191],[118.818765,26.44018299],[118.81870416,26.44017597],[118.81864404,26.44016796],[118.81858284,26.44015896],[118.818522,26.44014798],[118.81846188,26.44013799],[118.81840104,26.44012701],[118.81833984,26.44011801],[118.81828008,26.44011],[118.81821888,26.44010298],[118.81815804,26.440101],[118.81809792,26.44009704],[118.81803708,26.44009101],[118.81797588,26.44008003],[118.81791612,26.44006896],[118.81787292,26.44005798],[118.81777716,26.44002999],[118.81768212,26.440002],[118.817595,26.43997401],[118.81749996,26.43995304],[118.81740492,26.43993801],[118.81730088,26.43993099],[118.81720512,26.43992901],[118.81711008,26.43992496],[118.81700604,26.43991497],[118.816911,26.43990201],[118.81681596,26.439885],[118.81671984,26.439867],[118.81662516,26.43984999],[118.81652904,26.439831],[118.816434,26.43981399],[118.81633896,26.43979401],[118.81624392,26.43977304],[118.81614816,26.43975099],[118.81605312,26.43972498],[118.81595808,26.43969501],[118.81587096,26.43966504],[118.81577592,26.43963003],[118.81568916,26.43959403],[118.81560204,26.43955497],[118.815507,26.439516],[118.81542096,26.43947496],[118.81533384,26.43943401],[118.81525608,26.43939099],[118.81516896,26.439345],[118.81508292,26.43929802],[118.81500516,26.43924996],[118.81491804,26.43920199],[118.81483992,26.43915303],[118.81476216,26.43910101],[118.81467504,26.43904899],[118.81459692,26.43899697],[118.81451988,26.43894297],[118.81445004,26.43888402],[118.81436292,26.43883002],[118.81430316,26.43876999],[118.81429416,26.43868899],[118.814337,26.43861996],[118.81441512,26.43855903],[118.81448496,26.43849396],[118.81455408,26.43843699],[118.81463184,26.43837903],[118.81470096,26.43831504],[118.81476216,26.43824997],[118.81483092,26.43818301],[118.81490004,26.43811803],[118.81496988,26.43805701],[118.815039,26.43799599],[118.81510812,26.43793497],[118.81518696,26.43787602],[118.81525608,26.43781302],[118.81532484,26.43775002],[118.81539396,26.43768702],[118.81546416,26.43762204],[118.81552392,26.43755697],[118.81559412,26.43749001],[118.81565388,26.43742197],[118.81571508,26.43735501],[118.81578384,26.43728697],[118.81584504,26.43722199],[118.81591416,26.43715701],[118.815984,26.43709401],[118.81604412,26.43702903],[118.81611396,26.43696099],[118.81617408,26.43689196],[118.81622592,26.43681798],[118.81627812,26.43674202],[118.81633896,26.43667002],[118.81639908,26.43660099],[118.81645992,26.43653304],[118.81652904,26.43646797],[118.81659888,26.43640497],[118.816668,26.43634602],[118.81674612,26.43628797],[118.81682388,26.43623298],[118.816902,26.43618096],[118.81698012,26.43613299],[118.81699992,26.43612201],[118.81706688,26.43608502],[118.81715292,26.436042],[118.81724004,26.43600096],[118.81732608,26.43596604],[118.81742112,26.43592599],[118.81750788,26.43588504],[118.817586,26.43584103],[118.81767312,26.43579603],[118.81775988,26.43574797],[118.81783692,26.43569802],[118.81790712,26.43565401],[118.81796688,26.43562404],[118.81801908,26.43560199],[118.818063,26.43557598],[118.81811484,26.43555204],[118.81815804,26.43552396],[118.81820988,26.43549498],[118.81825308,26.43546699],[118.818297,26.43543702],[118.81833984,26.43540804],[118.81839204,26.43537798],[118.81843488,26.43534504],[118.81847808,26.43531498],[118.818522,26.43528402],[118.81856484,26.43525603],[118.81860804,26.43522597],[118.81865196,26.43519501],[118.81869516,26.43516],[118.818738,26.43512598],[118.81877292,26.43509097],[118.81881612,26.435052],[118.81885104,26.43501303],[118.81888596,26.43497397],[118.81892088,26.43493401],[118.81894608,26.43489297],[118.818981,26.43485004],[118.81900692,26.43480603],[118.81903284,26.43476301],[118.81905912,26.43471702],[118.81908504,26.43467202],[118.81911096,26.43462603],[118.81913688,26.43458004],[118.81915416,26.43453702],[118.81918008,26.43449103],[118.819206,26.43444603],[118.81923192,26.43440004],[118.81925784,26.43435504],[118.81928412,26.43431103],[118.81931004,26.43426801],[118.81933596,26.43422202],[118.81936188,26.434179],[118.81939716,26.43413499],[118.81942308,26.43408999],[118.81944,26.434044],[118.81946592,26.43399801],[118.81949184,26.43395301],[118.81951812,26.433909],[118.81955304,26.43386796],[118.81958688,26.43383097],[118.81962216,26.43379398],[118.81965708,26.43375501],[118.81969992,26.43371604],[118.81973412,26.43367698],[118.81976904,26.43363801],[118.81979496,26.433594],[118.81982988,26.43355503],[118.81987308,26.43352497],[118.81992492,26.43350697],[118.81996812,26.433522],[118.82002104,26.43355296],[118.82007288,26.43357897],[118.82011608,26.43360003],[118.82016792,26.43362199],[118.82022012,26.43364296],[118.82027196,26.43366501],[118.82032416,26.43368697],[118.820367,26.43370596],[118.82041884,26.43372504],[118.82048004,26.43374097],[118.82053188,26.43375096],[118.82058408,26.43375798],[118.82064384,26.43376203],[118.82069604,26.43376401],[118.82075688,26.43376599],[118.82080908,26.43377004],[118.82086092,26.43377202],[118.82092104,26.43377697],[118.82097396,26.43377904],[118.82103408,26.43378498],[118.82108592,26.43378903],[118.82113812,26.43379596],[118.82119896,26.43380199],[118.82125116,26.43380901],[118.82131092,26.43381297],[118.82136312,26.43381504],[118.82142396,26.433819],[118.82147616,26.43382098],[118.821528,26.43382098],[118.82158812,26.43382296],[118.82164104,26.43382296],[118.82170116,26.43382296],[118.821753,26.43382098],[118.82181384,26.43381396],[118.82186604,26.43380298],[118.82191788,26.43378804],[118.82197008,26.43377301],[118.82202192,26.43375501],[118.82207412,26.433738],[118.82212596,26.43372],[118.82217816,26.43370299],[118.82223,26.43368301],[118.82228184,26.433657],[118.82232504,26.43362397],[118.82236788,26.43359598],[118.82242008,26.433585],[118.82247192,26.43360003],[118.82251512,26.43362802],[118.82256804,26.43365403],[118.82261988,26.43367401],[118.822671,26.433693],[118.82272392,26.43370803],[118.82277504,26.43371703],[118.82282796,26.43371496],[118.82287908,26.43370101],[118.82293092,26.43367698],[118.82298312,26.43365097],[118.82302704,26.433621],[118.82306988,26.43359301],[118.82311308,26.43355998],[118.823157,26.43352704],[118.82319984,26.43349698],[118.82324304,26.43346602],[118.82329488,26.43343596],[118.82333808,26.43340599],[118.823382,26.43337296],[118.82341692,26.43333804],[118.82346012,26.43330303],[118.82349504,26.43326604],[118.82352888,26.43322698],[118.82356416,26.43318801],[118.823607,26.433153],[118.82365884,26.43312897],[118.82371104,26.43311601],[118.82376288,26.43310503],[118.82381508,26.43309396],[118.82387592,26.433081],[118.82392812,26.43306597],[118.82397996,26.43305103],[118.82403108,26.43303303],[118.824084,26.43301404],[118.82413512,26.43299397],[118.82418804,26.43297399],[118.82423988,26.43295698],[118.824291,26.43294402],[118.82434392,26.43293097],[118.82440404,26.43291999],[118.82445588,26.43291099],[118.82450808,26.43290901],[118.82456892,26.43290604],[118.82462112,26.43290199],[118.82468088,26.43289497],[118.82473308,26.43288201],[118.82478492,26.43286896],[118.82483712,26.432865],[118.82489796,26.43286698],[118.82495016,26.43287499],[118.825011,26.43288597],[118.82505384,26.43290496],[118.82510604,26.43292899],[118.82515788,26.43295302],[118.82521008,26.43297498],[118.82526192,26.43299199]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"古田县","id":5,"province":"福建省","code":350922,"centroid":[118.872212589723,26.611067933179],"center":[118.822212589723,26.611067933179]}},{"type":"Feature","id":"ningde_polygon.4","geometry":{"type":"MultiPolygon","coordinates":[[[[119.81508804,26.56973898],[119.81502,26.56910196],[119.81515608,26.56855503],[119.81583684,26.56846296],[119.81658708,26.56825596],[119.816928,26.56766304],[119.81683692,26.56709397],[119.81642796,26.56686699],[119.815974,26.56654902],[119.815587,26.56565001],[119.81538288,26.56492101],[119.81567808,26.56410102],[119.81626812,26.56355301],[119.81638188,26.56321101],[119.81640492,26.56289196],[119.81608704,26.56266498],[119.81581416,26.56225602],[119.81570004,26.56182303],[119.81572308,26.56118502],[119.81529108,26.56068498],[119.81481408,26.560458],[119.81404188,26.56041399],[119.81292912,26.56084896],[119.81261088,26.56119096],[119.81224692,26.56123704],[119.811861,26.561169],[119.81117988,26.56105704],[119.81013408,26.56080801],[119.80954404,26.56089999],[119.80920312,26.56156104],[119.80886184,26.56206297],[119.80815804,26.56222299],[119.80758996,26.56226997],[119.80606716,26.56231803],[119.80559016,26.56236402],[119.80520388,26.56281996],[119.80506708,26.56329903],[119.80490904,26.56364103],[119.80447704,26.56395999],[119.80447704,26.56468899],[119.80415916,26.56525896],[119.80386396,26.56532799],[119.80320408,26.56540899],[119.80270404,26.56554597],[119.80179612,26.56611702],[119.801205,26.56682397],[119.80122804,26.567496],[119.80249992,26.56881504],[119.804364,26.56954098],[119.80563588,26.56994904],[119.806227,26.56994796],[119.80681812,26.56958301],[119.80722708,26.56919502],[119.80838592,26.569125],[119.81031696,26.56969101],[119.811339,26.57034999],[119.81231604,26.57098602],[119.81515608,26.57169801],[119.81695104,26.57269701],[119.81767788,26.57267298],[119.81808612,26.57230803],[119.81806416,26.57198898],[119.81781396,26.57153403],[119.81661012,26.57112597],[119.81604204,26.57053503],[119.815542,26.57024001],[119.81508804,26.56973898]]],[[[119.80555308,26.59771197],[119.80557504,26.59727304],[119.80533492,26.596989],[119.804787,26.59672602],[119.80393416,26.59659597],[119.80281816,26.59646601],[119.80163592,26.596863],[119.80126404,26.59736799],[119.80069488,26.59747797],[119.80025712,26.59734702],[119.79990684,26.59721598],[119.79955692,26.59741398],[119.79927288,26.59723902],[119.79892188,26.59688901],[119.79859392,26.59667004],[119.79802512,26.59656096],[119.79754308,26.59660596],[119.79699588,26.59719897],[119.796624,26.59781304],[119.79642708,26.59930497],[119.79675612,26.60020398],[119.79782784,26.601102],[119.79830988,26.602155],[119.79872604,26.603514],[119.79887904,26.604567],[119.79966708,26.605377],[119.80130904,26.60614299],[119.802753,26.60618403],[119.802906,26.60596497],[119.80292796,26.60563602],[119.80299312,26.60528502],[119.80340892,26.60502096],[119.80406592,26.60455899],[119.80485396,26.604009],[119.80607904,26.60288904],[119.80708596,26.60185602],[119.80793916,26.60038497],[119.80789488,26.59957299],[119.80758888,26.59913496],[119.80702008,26.59863096],[119.80621008,26.59836897],[119.80566288,26.59810698],[119.80555308,26.59771197]]],[[[119.81196288,26.62586001],[119.81576808,26.62344297],[119.818773,26.62102701],[119.81944008,26.61888402],[119.81843892,26.61647499],[119.81603484,26.61433704],[119.814165,26.612667],[119.81323008,26.61045903],[119.81149416,26.608788],[119.80929096,26.608725],[119.80708704,26.61020199],[119.80541808,26.61074001],[119.80107612,26.610948],[119.80007496,26.611686],[119.79780408,26.61142104],[119.79726912,26.610552],[119.79666792,26.60841],[119.79452988,26.60680602],[119.79212508,26.60547096],[119.788785,26.60487201],[119.78497584,26.60407299],[119.78237016,26.60407596],[119.78003088,26.60340897],[119.77789212,26.60093298],[119.77648812,26.59979601],[119.77461612,26.59999896],[119.77361388,26.60167296],[119.77361388,26.60334696],[119.77140816,26.60441904],[119.76900084,26.60435397],[119.76699492,26.60435496],[119.76478812,26.60569497],[119.76304896,26.60790501],[119.76184512,26.610516],[119.76090912,26.613261],[119.75890284,26.61707799],[119.75897016,26.61942096],[119.76030792,26.620893],[119.76284988,26.62156197],[119.76619392,26.62223103],[119.76967116,26.62437096],[119.77542,26.62584003],[119.78163612,26.62550001],[119.78738316,26.62757001],[119.79059004,26.62803396],[119.79393084,26.62916796],[119.79626904,26.63063802],[119.798874,26.63123697],[119.80101096,26.63043003],[119.80167912,26.62888896],[119.80308096,26.62774902],[119.80668708,26.62727499],[119.81196288,26.62586001]]],[[[119.76281496,26.67496104],[119.76411888,26.66758599],[119.75879304,26.65951704],[119.72841516,26.64058203],[119.72068308,26.63606601],[119.70789696,26.63273898],[119.69448012,26.63006202],[119.68205112,26.62921701],[119.66820804,26.62843203],[119.661957,26.63110899],[119.65858992,26.63434098],[119.65194612,26.64892602],[119.65162608,26.65723599],[119.65684212,26.66990403],[119.65910508,26.67321198],[119.666178,26.679546],[119.670534,26.681004],[119.67394392,26.680842],[119.68202988,26.67544704],[119.69182008,26.67104802],[119.69171892,26.67104001],[119.71287792,26.66848302],[119.724876,26.67201696],[119.73438216,26.67714597],[119.74900284,26.68111398],[119.75779188,26.67917403],[119.76281496,26.67496104]]],[[[119.77941384,26.67664197],[119.77804512,26.67604302],[119.77676208,26.67638196],[119.77620408,26.67746898],[119.77623504,26.67926898],[119.77666884,26.681814],[119.77781616,26.68513401],[119.77975692,26.687826],[119.78292204,26.68970799],[119.78476092,26.69013504],[119.78754084,26.68914603],[119.79074808,26.689014],[119.79147492,26.688456],[119.79113292,26.686314],[119.79155988,26.685027],[119.79211608,26.68361301],[119.79138888,26.68202802],[119.788695,26.68040298],[119.78514504,26.67942198],[119.783691,26.67830904],[119.78138196,26.677926],[119.77941384,26.67664197]]],[[[119.52321696,26.96021397],[119.52563796,26.95509504],[119.53221192,26.95240503],[119.53925388,26.947863],[119.54397816,26.94291903],[119.55136788,26.93262402],[119.55908916,26.92485099],[119.56392792,26.91485298],[119.56286196,26.90407899],[119.56027212,26.89356996],[119.55751884,26.88628401],[119.55731004,26.87893398],[119.56261788,26.87650902],[119.57334912,26.87602104],[119.580732,26.87423499],[119.58832512,26.87129901],[119.58944292,26.87016798],[119.59493904,26.86734099],[119.61687708,26.87169402],[119.61765396,26.87199804],[119.61839196,26.87201298],[119.61901584,26.87171499],[119.61983988,26.87096304],[119.61985392,26.87040999],[119.62121688,26.86944501],[119.62230912,26.86808304],[119.61716004,26.86284099],[119.61426816,26.86010499],[119.61054504,26.85668103],[119.60936316,26.85574998],[119.608812,26.85221604],[119.60300592,26.84637396],[119.60160084,26.84204001],[119.606832,26.83663299],[119.61504288,26.83713996],[119.62654704,26.83573803],[119.62825812,26.83501704],[119.63020392,26.83381203],[119.63126304,26.83231101],[119.63235816,26.83088703],[119.63279196,26.82962604],[119.63250504,26.82810396],[119.63111508,26.82605403],[119.62878696,26.82420003],[119.621466,26.81907498],[119.61490212,26.813475],[119.60858304,26.80740999],[119.604123,26.80360704],[119.59982712,26.79657903],[119.59738092,26.79157899],[119.59490016,26.78520303],[119.59506504,26.78414301],[119.59587108,26.78299101],[119.59712892,26.78163597],[119.59785792,26.781228],[119.59989588,26.78078898],[119.60739216,26.77964598],[119.61082908,26.77861998],[119.61244296,26.776791],[119.61317196,26.77474296],[119.61287604,26.77005702],[119.61192996,26.76438297],[119.61046296,26.76064896],[119.610315,26.75728098],[119.61090504,26.75398599],[119.61221508,26.75127798],[119.61448992,26.74981602],[119.64264696,26.75053404],[119.64598308,26.74492704],[119.65026492,26.74428597],[119.65337892,26.74467999],[119.65508208,26.74077804],[119.65589316,26.73608103],[119.65556808,26.73251604],[119.65686588,26.72814402],[119.65994712,26.72474796],[119.66432796,26.72183898],[119.66432688,26.71843698],[119.66075712,26.70595596],[119.65767516,26.70060402],[119.65037508,26.69913297],[119.64340116,26.70122898],[119.63999592,26.70349203],[119.63772612,26.70300297],[119.63496888,26.70105501],[119.63318616,26.69878503],[119.63415816,26.69506002],[119.64080592,26.68761603],[119.64096792,26.68518603],[119.63456208,26.67602502],[119.632455,26.67634596],[119.62824012,26.67634101],[119.62532196,26.66597004],[119.62337616,26.65641096],[119.62159308,26.65252098],[119.619486,26.64911799],[119.614788,26.64587502],[119.611224,26.64360504],[119.60555112,26.64167904],[119.60240112,26.63992098],[119.59619004,26.63596998],[119.59187112,26.63263998],[119.591325,26.63238501],[119.59055316,26.63238501],[119.589426,26.63256996],[119.58770916,26.63333901],[119.58584508,26.63407197],[119.58500412,26.63407296],[119.58411996,26.633817],[119.58065316,26.63136801],[119.57713992,26.62801704],[119.576376,26.62695999],[119.576376,26.62539201],[119.57684904,26.62397001],[119.57790384,26.62225497],[119.59735896,26.60255802],[119.60203392,26.59838499],[119.60554788,26.59575096],[119.60795988,26.59406697],[119.610963,26.59267701],[119.61418284,26.59172796],[119.61718596,26.59165596],[119.62070316,26.59217103],[119.62408896,26.59534902],[119.62688112,26.59763799],[119.63260188,26.59860504],[119.63354796,26.59981302],[119.63457396,26.60076702],[119.63633688,26.60179302],[119.64480012,26.60495202],[119.65088412,26.60660901],[119.65556916,26.60800698],[119.66099292,26.61001101],[119.66297508,26.61114996],[119.66462712,26.612433],[119.66572188,26.61349599],[119.666826,26.61514497],[119.66773896,26.616501],[119.66902596,26.61752799],[119.670156,26.61800697],[119.67246792,26.61826797],[119.67569388,26.61823701],[119.67764112,26.61798501],[119.67903216,26.61765696],[119.68236108,26.61654798],[119.68404804,26.61552504],[119.68463916,26.61475797],[119.68675992,26.61277896],[119.68962516,26.61096996],[119.69925912,26.61019101],[119.70429012,26.61035499],[119.70853092,26.61083298],[119.71410084,26.61162399],[119.72171916,26.61343704],[119.72493288,26.61399],[119.72791188,26.614152],[119.73175812,26.61391899],[119.73529188,26.61329403],[119.7378,26.61219801],[119.74007412,26.61070896],[119.74281696,26.60820102],[119.74815288,26.602713],[119.75097312,26.59941999],[119.751831,26.59777299],[119.75262084,26.59620402],[119.75744484,26.594046],[119.76266412,26.59112298],[119.76953688,26.59175199],[119.78836992,26.58322998],[119.79272196,26.57679102],[119.79326592,26.57395503],[119.79159912,26.57166903],[119.790351,26.57020599],[119.78962308,26.56852299],[119.78947584,26.56779201],[119.78977104,26.56691298],[119.79488088,26.56017297],[119.79935784,26.55617301],[119.80148688,26.55039303],[119.801565,26.54936901],[119.80135692,26.54828397],[119.799972,26.54685],[119.79611784,26.55269001],[119.79522612,26.55365004],[119.79488916,26.55481797],[119.79427392,26.55683496],[119.79290592,26.55797796],[119.79021204,26.55929601],[119.78728416,26.56084203],[119.78469396,26.56289997],[119.78350704,26.56485603],[119.78287488,26.56613097],[119.78264988,26.56673001],[119.77774488,26.56917702],[119.77336008,26.57237697],[119.76848892,26.57555901],[119.76365088,26.57708001],[119.75964516,26.57676204],[119.75607108,26.57557701],[119.75287896,26.57496303],[119.75001696,26.57469402],[119.74966092,26.57448999],[119.74736988,26.57490102],[119.74365612,26.57581101],[119.74214592,26.57483199],[119.74210308,26.572986],[119.74374288,26.57144403],[119.74520088,26.57007297],[119.744046,26.56841697],[119.74100004,26.56612197],[119.73388104,26.56080297],[119.73368988,26.56074204],[119.72871504,26.55955998],[119.72521512,26.56112103],[119.72102112,26.56302804],[119.71771992,26.56476396],[119.71415808,26.56580904],[119.71001412,26.56547604],[119.70771984,26.56651797],[119.70466092,26.56744398],[119.70180216,26.56819899],[119.69937684,26.56924101],[119.69753508,26.56827198],[119.69546616,26.56581804],[119.69310204,26.56416303],[119.69073684,26.563887],[119.68793784,26.56361097],[119.68473096,26.56259199],[119.68293996,26.561106],[119.68190496,26.55910404],[119.681001,26.55624204],[119.68027884,26.55309897],[119.67846984,26.54823096],[119.67760908,26.54382699],[119.67639192,26.54090802],[119.675088,26.53764696],[119.67520104,26.53546401],[119.67258384,26.53427898],[119.66975892,26.533152],[119.66860188,26.53312104],[119.66849784,26.53336602],[119.66551596,26.53572402],[119.66289984,26.53528302],[119.66269104,26.53511697],[119.66070096,26.53212204],[119.66089212,26.53122996],[119.66089104,26.53010199],[119.66037804,26.52898401],[119.66012604,26.52785298],[119.65961304,26.52673203],[119.65931784,26.52607899],[119.65684896,26.52480297],[119.65179888,26.52488703],[119.64882708,26.52577902],[119.64662892,26.52749604],[119.64440412,26.52820398],[119.64121488,26.52775497],[119.63985912,26.52727302],[119.63952,26.52756102],[119.63792196,26.52821397],[119.63673108,26.52791499],[119.63369088,26.52578496],[119.63103192,26.52381396],[119.62669788,26.52221097],[119.622564,26.52110703],[119.61957708,26.52116103],[119.61772812,26.52203196],[119.61719892,26.52338502],[119.618163,26.52454503],[119.61818892,26.52588603],[119.61727704,26.52691104],[119.61391788,26.52680304],[119.61037584,26.52737004],[119.60945604,26.52813999],[119.60996904,26.52939396],[119.60653212,26.53060797],[119.606931,26.53392996],[119.60503092,26.53611102],[119.60204688,26.53778799],[119.599002,26.53917903],[119.59562808,26.54073702],[119.59200288,26.54057997],[119.59046784,26.539101],[119.588049,26.53762302],[119.58536196,26.53719903],[119.58504084,26.53736499],[119.58284808,26.53942302],[119.58140988,26.54180001],[119.57804712,26.54152803],[119.57317704,26.54028],[119.56951296,26.54303796],[119.565486,26.54647497],[119.56252392,26.54720496],[119.55765816,26.54495298],[119.55573612,26.54645598],[119.55460212,26.54863398],[119.55745908,26.55062496],[119.55760704,26.55320202],[119.55621312,26.55476298],[119.55373704,26.55597402],[119.55050892,26.55748296],[119.54727216,26.55819801],[119.54410488,26.55999297],[119.54105892,26.56093104],[119.537442,26.56089504],[119.534769,26.56108602],[119.53230408,26.56310202],[119.52996804,26.56575801],[119.52776304,26.56932003],[119.52447696,26.573526],[119.52442512,26.57361096],[119.52739188,26.57537496],[119.5308,26.57832804],[119.53084284,26.58000699],[119.52904392,26.58306699],[119.526147,26.58682098],[119.52572292,26.58704499],[119.52510912,26.58847698],[119.52213408,26.58980898],[119.51934912,26.59160799],[119.51828604,26.59590504],[119.51568288,26.59701501],[119.51302788,26.59846797],[119.509362,26.60353101],[119.50664688,26.60722101],[119.50597188,26.61174603],[119.50706196,26.61357204],[119.505609,26.61541596],[119.503647,26.61778296],[119.50263504,26.61961797],[119.500551,26.62123797],[119.49813792,26.62119801],[119.49533604,26.62075899],[119.489247,26.62108299],[119.48905692,26.62389198],[119.487033,26.624655],[119.48290812,26.62588404],[119.47885092,26.62786197],[119.473911,26.63137899],[119.47314204,26.63145],[119.47254012,26.63115201],[119.47196088,26.63057196],[119.47135392,26.63030304],[119.47058604,26.63025102],[119.47030308,26.62998102],[119.47018104,26.62952202],[119.47014108,26.62891299],[119.46980412,26.62829199],[119.46925116,26.62787502],[119.46774096,26.62741899],[119.46660912,26.62728597],[119.46578688,26.62749099],[119.46522888,26.62784199],[119.46465612,26.62797897],[119.46398184,26.62793001],[119.46354408,26.62826904],[119.46310596,26.62881102],[119.46244896,26.62906599],[119.461707,26.62918596],[119.46067884,26.62923897],[119.45941596,26.62966296],[119.458161,26.63011998],[119.455659,26.63013402],[119.45446416,26.63035497],[119.45357208,26.63004897],[119.45333808,26.63007804],[119.44906092,26.63066304],[119.44587312,26.62971597],[119.44171512,26.62744203],[119.43159408,26.62506801],[119.42449488,26.624691],[119.42115588,26.62592598],[119.41896204,26.62798203],[119.41659504,26.63087796],[119.41477308,26.63326098],[119.41217892,26.63414496],[119.40844896,26.63437797],[119.40672996,26.63289396],[119.40669504,26.63104698],[119.40573204,26.62988796],[119.40462108,26.63007498],[119.40351912,26.63093196],[119.40201684,26.63079003],[119.40105312,26.62946199],[119.40159096,26.62811001],[119.40547104,26.62636401],[119.40937596,26.62545897],[119.41233516,26.62389603],[119.41457292,26.62352199],[119.415726,26.620191],[119.41559604,26.61975702],[119.41361784,26.61844698],[119.41036488,26.61754698],[119.40641604,26.61744096],[119.40507108,26.61904701],[119.40402096,26.61933501],[119.399724,26.61957297],[119.39749308,26.62011504],[119.39509692,26.62149798],[119.39248296,26.62187598],[119.389878,26.62225398],[119.38801896,26.62295598],[119.38767192,26.62430499],[119.38825404,26.62530399],[119.390139,26.626113],[119.39202288,26.62658703],[119.39242284,26.62792398],[119.39299596,26.63045901],[119.39245812,26.63165403],[119.39221512,26.63278497],[119.39196312,26.63391699],[119.39172012,26.63503902],[119.39146812,26.63616897],[119.39072112,26.63729298],[119.38996584,26.63842302],[119.38896684,26.63954901],[119.38796784,26.64068301],[119.38721292,26.64180396],[119.38596192,26.642934],[119.38555404,26.643213],[119.38490208,26.64364896],[119.37945492,26.64309897],[119.37531888,26.64058203],[119.37020796,26.63974296],[119.36212308,26.63415801],[119.35640988,26.63128197],[119.34713304,26.64938196],[119.34322884,26.65726902],[119.338794,26.66401596],[119.32935804,26.67637296],[119.319939,26.679078],[119.30899896,26.68250304],[119.29286304,26.68326903],[119.28137508,26.68510197],[119.27217492,26.68574097],[119.26220508,26.68640103],[119.25918396,26.68853097],[119.25622404,26.69341599],[119.25362988,26.70196896],[119.25250992,26.70888501],[119.25164304,26.71510698],[119.24891892,26.72894799],[119.245527,26.736831],[119.24057304,26.74336599],[119.23641,26.74069497],[119.228274,26.732367],[119.21868612,26.72705403],[119.21220216,26.72351901],[119.202246,26.72419401],[119.19336588,26.726913],[119.18449512,26.72986401],[119.17856196,26.72769402],[119.17788516,26.72058501],[119.17593612,26.71419501],[119.17078992,26.71269903],[119.16541116,26.71212501],[119.16091512,26.71635897],[119.15390592,26.72271297],[119.15090892,26.72530497],[119.14385508,26.72982099],[119.15557992,26.73922104],[119.16051804,26.74233198],[119.16722412,26.74494297],[119.17080108,26.74509498],[119.17435284,26.74363896],[119.17621512,26.74681704],[119.17666692,26.75507796],[119.17654596,26.760366],[119.17943892,26.76398004],[119.19205188,26.76738204],[119.19512808,26.76777597],[119.20155588,26.76924297],[119.20425084,26.77492899],[119.20524804,26.78409999],[119.20248504,26.786457],[119.19662784,26.78727204],[119.19587508,26.78751504],[119.19273084,26.78589],[119.18935692,26.78527602],[119.18826792,26.78697504],[119.18569896,26.78937201],[119.18167416,26.79381],[119.18101104,26.79819003],[119.18145492,26.80187796],[119.18338092,26.80486902],[119.18400912,26.80634502],[119.18257092,26.80746696],[119.18156508,26.80859403],[119.18156616,26.809722],[119.18181708,26.81084502],[119.18231892,26.81197299],[119.18257092,26.813106],[119.18382696,26.81423001],[119.18382696,26.81535798],[119.18332512,26.81761302],[119.18382696,26.81874099],[119.18484,26.81986104],[119.18608812,26.82075996],[119.18634804,26.821215],[119.18860092,26.82120303],[119.18835792,26.82233496],[119.187855,26.82346302],[119.18886012,26.82436599],[119.19011688,26.82436203],[119.19137292,26.82413298],[119.19639096,26.82231399],[119.197647,26.82253602],[119.19865212,26.82298701],[119.19915504,26.82411597],[119.19915504,26.82524403],[119.19940704,26.82637596],[119.20041216,26.82727002],[119.20166784,26.82726696],[119.20292496,26.82636102],[119.20342716,26.82523296],[119.204424,26.82433197],[119.204685,26.82437796],[119.20504896,26.82390096],[119.20693788,26.82341901],[119.20793508,26.81891199],[119.20868892,26.81777997],[119.20994604,26.81710002],[119.21145408,26.81664102],[119.21295492,26.81596602],[119.21321304,26.81618697],[119.21421096,26.81528598],[119.21504292,26.81868996],[119.21473404,26.82205596],[119.21852412,26.82468],[119.22119388,26.82732303],[119.22238116,26.83066302],[119.22131808,26.83370502],[119.21537592,26.835822],[119.21281092,26.83855404],[119.211021,26.842617],[119.20983696,26.84741301],[119.21023008,26.84799801],[119.210733,26.84912697],[119.21173812,26.85025503],[119.21249304,26.85137904],[119.21300316,26.852508],[119.21325408,26.85363102],[119.21325408,26.85588696],[119.21300388,26.85701898],[119.21250096,26.85814704],[119.21250816,26.85927402],[119.213262,26.86039803],[119.21413788,26.86070997],[119.216979,26.86049397],[119.21889384,26.86281399],[119.21931396,26.86515903],[119.21899212,26.867853],[119.21676192,26.86856301],[119.21302296,26.86862601],[119.21081112,26.87034402],[119.21200488,26.87401998],[119.21588892,26.88134697],[119.22317316,26.89029702],[119.223981,26.89330797],[119.223657,26.89456302],[119.229165,26.91364599],[119.22521112,26.91970596],[119.21886612,26.92213803],[119.210823,26.92828602],[119.20356216,26.93533698],[119.21078916,26.93724903],[119.21800896,26.93916198],[119.22476184,26.94315501],[119.22630408,26.94465198],[119.22803496,26.94726],[119.23004592,26.95428396],[119.23275312,26.95860801],[119.23520688,26.96017896],[119.23770996,26.95894497],[119.23909884,26.95862097],[119.24054388,26.95801698],[119.241189,26.95745403],[119.24181,26.95666698],[119.24239608,26.95553001],[119.24257788,26.95451904],[119.24295696,26.95346496],[119.24351784,26.95308597],[119.244753,26.95270599],[119.245707,26.952228],[119.24601588,26.95168098],[119.24607204,26.95087998],[119.24548308,26.95010796],[119.24277408,26.94737097],[119.24259192,26.946612],[119.242746,26.94605103],[119.24430984,26.94493197],[119.24632296,26.94267999],[119.24741808,26.94204702],[119.24963604,26.94113298],[119.24986104,26.94067002],[119.24936892,26.93919501],[119.249397,26.93850696],[119.24976204,26.938044],[119.25240084,26.93656899],[119.25385488,26.936154],[119.25488592,26.93575404],[119.25563004,26.93493999],[119.256093,26.93401299],[119.25592416,26.93325501],[119.25557316,26.93234196],[119.25489888,26.931429],[119.25240012,26.92951902],[119.25179712,26.92880298],[119.25153,26.927595],[119.25171216,26.92678104],[119.25349704,26.92487304],[119.25474408,26.92329804],[119.25533412,26.922132],[119.25585612,26.92145799],[119.25819792,26.92005399],[119.25954504,26.91902898],[119.26041588,26.91815904],[119.260584,26.917344],[119.26293192,26.91589599],[119.26783584,26.91656298],[119.26882188,26.916102],[119.27052288,26.91414297],[119.27140992,26.91286704],[119.27072592,26.91183699],[119.26845684,26.91031203],[119.26498896,26.90687304],[119.26434708,26.90593002],[119.26515816,26.90495703],[119.26596888,26.903475],[119.26650204,26.902989],[119.26796112,26.90227098],[119.26923588,26.90178498],[119.27109096,26.90155899],[119.27136888,26.902539],[119.27475288,26.905905],[119.27734308,26.90690598],[119.28091392,26.90714898],[119.28234312,26.90809299],[119.28236112,26.90898399],[119.280906,26.910864],[119.28010716,26.91236196],[119.28012804,26.913402],[119.28097008,26.91405801],[119.28297096,26.91454797],[119.28496608,26.91474102],[119.28539304,26.91532899],[119.28516012,26.91614898],[119.28377016,26.91713601],[119.28080304,26.918073],[119.27940912,26.91891099],[119.27933388,26.91928404],[119.27951208,26.91987597],[119.28118392,26.92051902],[119.28301092,26.92063998],[119.28573504,26.92058697],[119.28979116,26.91875601],[119.29343508,26.91755604],[119.29625496,26.917947],[119.29958496,26.91754596],[119.30233608,26.914212],[119.304054,26.91431496],[119.305971,26.91630297],[119.30711796,26.91729396],[119.30970384,26.91523998],[119.31227604,26.91251397],[119.31377292,26.91181602],[119.32331508,26.912016],[119.32765488,26.91101502],[119.32335792,26.903511],[119.32240896,26.896635],[119.32775712,26.89469802],[119.33584596,26.88948702],[119.33623908,26.889084],[119.33810784,26.88962796],[119.33977104,26.88975297],[119.340594,26.88944301],[119.34140616,26.88854004],[119.34238284,26.88763401],[119.34959796,26.88737904],[119.35757484,26.88785496],[119.36090808,26.88854796],[119.36392308,26.88991398],[119.36578104,26.89144596],[119.36664,26.89284501],[119.36667204,26.89440498],[119.365965,26.89627302],[119.36590596,26.897463],[119.36717892,26.89878096],[119.37136716,26.90072199],[119.37394296,26.90090604],[119.37602304,26.90124498],[119.37894192,26.90201601],[119.38186908,26.90315901],[119.38361004,26.90313201],[119.38492692,26.902665],[119.38688604,26.90122203],[119.38859208,26.89956],[119.38962708,26.89753698],[119.38966488,26.89538202],[119.389464,26.89375104],[119.38951692,26.89233804],[119.39008788,26.891883],[119.39124204,26.89156701],[119.39259096,26.89265997],[119.39514084,26.89566399],[119.39714784,26.89652304],[119.398995,26.89768098],[119.40010308,26.89914897],[119.40129,26.90039196],[119.40278508,26.90058996],[119.40418404,26.90011998],[119.40491016,26.89921602],[119.40496596,26.89795197],[119.40476292,26.89617303],[119.40365412,26.89470504],[119.40231996,26.89428204],[119.40140916,26.89429698],[119.40065316,26.89379001],[119.40054192,26.89245396],[119.40048396,26.88970599],[119.40087204,26.88851097],[119.40276888,26.88810804],[119.40641388,26.888121],[119.40915888,26.88866802],[119.410335,26.88946497],[119.410857,26.89064496],[119.41089588,26.89250202],[119.41150896,26.894052],[119.41529688,26.89695801],[119.42553204,26.89952598],[119.42736912,26.90030997],[119.42779716,26.90097102],[119.42774604,26.90283204],[119.42797896,26.90305299],[119.42902116,26.90589798],[119.42957088,26.90651097],[119.43478692,26.910576],[119.436489,26.91277299],[119.436705,26.91514602],[119.435112,26.91799902],[119.43531216,26.91963],[119.43684504,26.921682],[119.43888408,26.92416996],[119.43877896,26.92699497],[119.43747,26.93534103],[119.43787392,26.93875104],[119.43908316,26.94110598],[119.44161108,26.94328803],[119.44669392,26.94577302],[119.45068488,26.94715704],[119.45394216,26.94937698],[119.45681784,26.95055697],[119.46753684,26.95399002],[119.47118004,26.95534299],[119.47526388,26.95652298],[119.47876884,26.95673196],[119.47988412,26.95659003],[119.48390208,26.96234796],[119.48841792,26.96844096],[119.49532812,26.96895702],[119.50329312,26.970138],[119.51045316,26.97018498],[119.51676612,26.96749902],[119.52321696,26.96021397]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"蕉城区","id":6,"province":"福建省","code":350902,"centroid":[119.460564024838,26.75226114491],"center":[119.410564024838,26.75226114491]}},{"type":"Feature","id":"ningde_polygon.4","geometry":{"type":"MultiPolygon","coordinates":[[[[119.81508804,26.56973898],[119.81502,26.56910196],[119.81515608,26.56855503],[119.81583684,26.56846296],[119.81658708,26.56825596],[119.816928,26.56766304],[119.81683692,26.56709397],[119.81642796,26.56686699],[119.815974,26.56654902],[119.815587,26.56565001],[119.81538288,26.56492101],[119.81567808,26.56410102],[119.81626812,26.56355301],[119.81638188,26.56321101],[119.81640492,26.56289196],[119.81608704,26.56266498],[119.81581416,26.56225602],[119.81570004,26.56182303],[119.81572308,26.56118502],[119.81529108,26.56068498],[119.81481408,26.560458],[119.81404188,26.56041399],[119.81292912,26.56084896],[119.81261088,26.56119096],[119.81224692,26.56123704],[119.811861,26.561169],[119.81117988,26.56105704],[119.81013408,26.56080801],[119.80954404,26.56089999],[119.80920312,26.56156104],[119.80886184,26.56206297],[119.80815804,26.56222299],[119.80758996,26.56226997],[119.80606716,26.56231803],[119.80559016,26.56236402],[119.80520388,26.56281996],[119.80506708,26.56329903],[119.80490904,26.56364103],[119.80447704,26.56395999],[119.80447704,26.56468899],[119.80415916,26.56525896],[119.80386396,26.56532799],[119.80320408,26.56540899],[119.80270404,26.56554597],[119.80179612,26.56611702],[119.801205,26.56682397],[119.80122804,26.567496],[119.80249992,26.56881504],[119.804364,26.56954098],[119.80563588,26.56994904],[119.806227,26.56994796],[119.80681812,26.56958301],[119.80722708,26.56919502],[119.80838592,26.569125],[119.81031696,26.56969101],[119.811339,26.57034999],[119.81231604,26.57098602],[119.81515608,26.57169801],[119.81695104,26.57269701],[119.81767788,26.57267298],[119.81808612,26.57230803],[119.81806416,26.57198898],[119.81781396,26.57153403],[119.81661012,26.57112597],[119.81604204,26.57053503],[119.815542,26.57024001],[119.81508804,26.56973898]]],[[[119.80555308,26.59771197],[119.80557504,26.59727304],[119.80533492,26.596989],[119.804787,26.59672602],[119.80393416,26.59659597],[119.80281816,26.59646601],[119.80163592,26.596863],[119.80126404,26.59736799],[119.80069488,26.59747797],[119.80025712,26.59734702],[119.79990684,26.59721598],[119.79955692,26.59741398],[119.79927288,26.59723902],[119.79892188,26.59688901],[119.79859392,26.59667004],[119.79802512,26.59656096],[119.79754308,26.59660596],[119.79699588,26.59719897],[119.796624,26.59781304],[119.79642708,26.59930497],[119.79675612,26.60020398],[119.79782784,26.601102],[119.79830988,26.602155],[119.79872604,26.603514],[119.79887904,26.604567],[119.79966708,26.605377],[119.80130904,26.60614299],[119.802753,26.60618403],[119.802906,26.60596497],[119.80292796,26.60563602],[119.80299312,26.60528502],[119.80340892,26.60502096],[119.80406592,26.60455899],[119.80485396,26.604009],[119.80607904,26.60288904],[119.80708596,26.60185602],[119.80793916,26.60038497],[119.80789488,26.59957299],[119.80758888,26.59913496],[119.80702008,26.59863096],[119.80621008,26.59836897],[119.80566288,26.59810698],[119.80555308,26.59771197]]],[[[119.81196288,26.62586001],[119.81576808,26.62344297],[119.818773,26.62102701],[119.81944008,26.61888402],[119.81843892,26.61647499],[119.81603484,26.61433704],[119.814165,26.612667],[119.81323008,26.61045903],[119.81149416,26.608788],[119.80929096,26.608725],[119.80708704,26.61020199],[119.80541808,26.61074001],[119.80107612,26.610948],[119.80007496,26.611686],[119.79780408,26.61142104],[119.79726912,26.610552],[119.79666792,26.60841],[119.79452988,26.60680602],[119.79212508,26.60547096],[119.788785,26.60487201],[119.78497584,26.60407299],[119.78237016,26.60407596],[119.78003088,26.60340897],[119.77789212,26.60093298],[119.77648812,26.59979601],[119.77461612,26.59999896],[119.77361388,26.60167296],[119.77361388,26.60334696],[119.77140816,26.60441904],[119.76900084,26.60435397],[119.76699492,26.60435496],[119.76478812,26.60569497],[119.76304896,26.60790501],[119.76184512,26.610516],[119.76090912,26.613261],[119.75890284,26.61707799],[119.75897016,26.61942096],[119.76030792,26.620893],[119.76284988,26.62156197],[119.76619392,26.62223103],[119.76967116,26.62437096],[119.77542,26.62584003],[119.78163612,26.62550001],[119.78738316,26.62757001],[119.79059004,26.62803396],[119.79393084,26.62916796],[119.79626904,26.63063802],[119.798874,26.63123697],[119.80101096,26.63043003],[119.80167912,26.62888896],[119.80308096,26.62774902],[119.80668708,26.62727499],[119.81196288,26.62586001]]],[[[119.76281496,26.67496104],[119.76411888,26.66758599],[119.75879304,26.65951704],[119.72841516,26.64058203],[119.72068308,26.63606601],[119.70789696,26.63273898],[119.69448012,26.63006202],[119.68205112,26.62921701],[119.66820804,26.62843203],[119.661957,26.63110899],[119.65858992,26.63434098],[119.65194612,26.64892602],[119.65162608,26.65723599],[119.65684212,26.66990403],[119.65910508,26.67321198],[119.666178,26.679546],[119.670534,26.681004],[119.67394392,26.680842],[119.68202988,26.67544704],[119.69182008,26.67104802],[119.69171892,26.67104001],[119.71287792,26.66848302],[119.724876,26.67201696],[119.73438216,26.67714597],[119.74900284,26.68111398],[119.75779188,26.67917403],[119.76281496,26.67496104]]],[[[119.77941384,26.67664197],[119.77804512,26.67604302],[119.77676208,26.67638196],[119.77620408,26.67746898],[119.77623504,26.67926898],[119.77666884,26.681814],[119.77781616,26.68513401],[119.77975692,26.687826],[119.78292204,26.68970799],[119.78476092,26.69013504],[119.78754084,26.68914603],[119.79074808,26.689014],[119.79147492,26.688456],[119.79113292,26.686314],[119.79155988,26.685027],[119.79211608,26.68361301],[119.79138888,26.68202802],[119.788695,26.68040298],[119.78514504,26.67942198],[119.783691,26.67830904],[119.78138196,26.677926],[119.77941384,26.67664197]]],[[[119.52321696,26.96021397],[119.52563796,26.95509504],[119.53221192,26.95240503],[119.53925388,26.947863],[119.54397816,26.94291903],[119.55136788,26.93262402],[119.55908916,26.92485099],[119.56392792,26.91485298],[119.56286196,26.90407899],[119.56027212,26.89356996],[119.55751884,26.88628401],[119.55731004,26.87893398],[119.56261788,26.87650902],[119.57334912,26.87602104],[119.580732,26.87423499],[119.58832512,26.87129901],[119.58944292,26.87016798],[119.59493904,26.86734099],[119.61687708,26.87169402],[119.61765396,26.87199804],[119.61839196,26.87201298],[119.61901584,26.87171499],[119.61983988,26.87096304],[119.61985392,26.87040999],[119.62121688,26.86944501],[119.62230912,26.86808304],[119.61716004,26.86284099],[119.61426816,26.86010499],[119.61054504,26.85668103],[119.60936316,26.85574998],[119.608812,26.85221604],[119.60300592,26.84637396],[119.60160084,26.84204001],[119.606832,26.83663299],[119.61504288,26.83713996],[119.62654704,26.83573803],[119.62825812,26.83501704],[119.63020392,26.83381203],[119.63126304,26.83231101],[119.63235816,26.83088703],[119.63279196,26.82962604],[119.63250504,26.82810396],[119.63111508,26.82605403],[119.62878696,26.82420003],[119.621466,26.81907498],[119.61490212,26.813475],[119.60858304,26.80740999],[119.604123,26.80360704],[119.59982712,26.79657903],[119.59738092,26.79157899],[119.59490016,26.78520303],[119.59506504,26.78414301],[119.59587108,26.78299101],[119.59712892,26.78163597],[119.59785792,26.781228],[119.59989588,26.78078898],[119.60739216,26.77964598],[119.61082908,26.77861998],[119.61244296,26.776791],[119.61317196,26.77474296],[119.61287604,26.77005702],[119.61192996,26.76438297],[119.61046296,26.76064896],[119.610315,26.75728098],[119.61090504,26.75398599],[119.61221508,26.75127798],[119.61448992,26.74981602],[119.64264696,26.75053404],[119.64598308,26.74492704],[119.65026492,26.74428597],[119.65337892,26.74467999],[119.65508208,26.74077804],[119.65589316,26.73608103],[119.65556808,26.73251604],[119.65686588,26.72814402],[119.65994712,26.72474796],[119.66432796,26.72183898],[119.66432688,26.71843698],[119.66075712,26.70595596],[119.65767516,26.70060402],[119.65037508,26.69913297],[119.64340116,26.70122898],[119.63999592,26.70349203],[119.63772612,26.70300297],[119.63496888,26.70105501],[119.63318616,26.69878503],[119.63415816,26.69506002],[119.64080592,26.68761603],[119.64096792,26.68518603],[119.63456208,26.67602502],[119.632455,26.67634596],[119.62824012,26.67634101],[119.62532196,26.66597004],[119.62337616,26.65641096],[119.62159308,26.65252098],[119.619486,26.64911799],[119.614788,26.64587502],[119.611224,26.64360504],[119.60555112,26.64167904],[119.60240112,26.63992098],[119.59619004,26.63596998],[119.59187112,26.63263998],[119.591325,26.63238501],[119.59055316,26.63238501],[119.589426,26.63256996],[119.58770916,26.63333901],[119.58584508,26.63407197],[119.58500412,26.63407296],[119.58411996,26.633817],[119.58065316,26.63136801],[119.57713992,26.62801704],[119.576376,26.62695999],[119.576376,26.62539201],[119.57684904,26.62397001],[119.57790384,26.62225497],[119.59735896,26.60255802],[119.60203392,26.59838499],[119.60554788,26.59575096],[119.60795988,26.59406697],[119.610963,26.59267701],[119.61418284,26.59172796],[119.61718596,26.59165596],[119.62070316,26.59217103],[119.62408896,26.59534902],[119.62688112,26.59763799],[119.63260188,26.59860504],[119.63354796,26.59981302],[119.63457396,26.60076702],[119.63633688,26.60179302],[119.64480012,26.60495202],[119.65088412,26.60660901],[119.65556916,26.60800698],[119.66099292,26.61001101],[119.66297508,26.61114996],[119.66462712,26.612433],[119.66572188,26.61349599],[119.666826,26.61514497],[119.66773896,26.616501],[119.66902596,26.61752799],[119.670156,26.61800697],[119.67246792,26.61826797],[119.67569388,26.61823701],[119.67764112,26.61798501],[119.67903216,26.61765696],[119.68236108,26.61654798],[119.68404804,26.61552504],[119.68463916,26.61475797],[119.68675992,26.61277896],[119.68962516,26.61096996],[119.69925912,26.61019101],[119.70429012,26.61035499],[119.70853092,26.61083298],[119.71410084,26.61162399],[119.72171916,26.61343704],[119.72493288,26.61399],[119.72791188,26.614152],[119.73175812,26.61391899],[119.73529188,26.61329403],[119.7378,26.61219801],[119.74007412,26.61070896],[119.74281696,26.60820102],[119.74815288,26.602713],[119.75097312,26.59941999],[119.751831,26.59777299],[119.75262084,26.59620402],[119.75744484,26.594046],[119.76266412,26.59112298],[119.76953688,26.59175199],[119.78836992,26.58322998],[119.79272196,26.57679102],[119.79326592,26.57395503],[119.79159912,26.57166903],[119.790351,26.57020599],[119.78962308,26.56852299],[119.78947584,26.56779201],[119.78977104,26.56691298],[119.79488088,26.56017297],[119.79935784,26.55617301],[119.80148688,26.55039303],[119.801565,26.54936901],[119.80135692,26.54828397],[119.799972,26.54685],[119.79611784,26.55269001],[119.79522612,26.55365004],[119.79488916,26.55481797],[119.79427392,26.55683496],[119.79290592,26.55797796],[119.79021204,26.55929601],[119.78728416,26.56084203],[119.78469396,26.56289997],[119.78350704,26.56485603],[119.78287488,26.56613097],[119.78264988,26.56673001],[119.77774488,26.56917702],[119.77336008,26.57237697],[119.76848892,26.57555901],[119.76365088,26.57708001],[119.75964516,26.57676204],[119.75607108,26.57557701],[119.75287896,26.57496303],[119.75001696,26.57469402],[119.74966092,26.57448999],[119.74736988,26.57490102],[119.74365612,26.57581101],[119.74214592,26.57483199],[119.74210308,26.572986],[119.74374288,26.57144403],[119.74520088,26.57007297],[119.744046,26.56841697],[119.74100004,26.56612197],[119.73388104,26.56080297],[119.73368988,26.56074204],[119.72871504,26.55955998],[119.72521512,26.56112103],[119.72102112,26.56302804],[119.71771992,26.56476396],[119.71415808,26.56580904],[119.71001412,26.56547604],[119.70771984,26.56651797],[119.70466092,26.56744398],[119.70180216,26.56819899],[119.69937684,26.56924101],[119.69753508,26.56827198],[119.69546616,26.56581804],[119.69310204,26.56416303],[119.69073684,26.563887],[119.68793784,26.56361097],[119.68473096,26.56259199],[119.68293996,26.561106],[119.68190496,26.55910404],[119.681001,26.55624204],[119.68027884,26.55309897],[119.67846984,26.54823096],[119.67760908,26.54382699],[119.67639192,26.54090802],[119.675088,26.53764696],[119.67520104,26.53546401],[119.67258384,26.53427898],[119.66975892,26.533152],[119.66860188,26.53312104],[119.66849784,26.53336602],[119.66551596,26.53572402],[119.66289984,26.53528302],[119.66269104,26.53511697],[119.66070096,26.53212204],[119.66089212,26.53122996],[119.66089104,26.53010199],[119.66037804,26.52898401],[119.66012604,26.52785298],[119.65961304,26.52673203],[119.65931784,26.52607899],[119.65684896,26.52480297],[119.65179888,26.52488703],[119.64882708,26.52577902],[119.64662892,26.52749604],[119.64440412,26.52820398],[119.64121488,26.52775497],[119.63985912,26.52727302],[119.63952,26.52756102],[119.63792196,26.52821397],[119.63673108,26.52791499],[119.63369088,26.52578496],[119.63103192,26.52381396],[119.62669788,26.52221097],[119.622564,26.52110703],[119.61957708,26.52116103],[119.61772812,26.52203196],[119.61719892,26.52338502],[119.618163,26.52454503],[119.61818892,26.52588603],[119.61727704,26.52691104],[119.61391788,26.52680304],[119.61037584,26.52737004],[119.60945604,26.52813999],[119.60996904,26.52939396],[119.60653212,26.53060797],[119.606931,26.53392996],[119.60503092,26.53611102],[119.60204688,26.53778799],[119.599002,26.53917903],[119.59562808,26.54073702],[119.59200288,26.54057997],[119.59046784,26.539101],[119.588049,26.53762302],[119.58536196,26.53719903],[119.58504084,26.53736499],[119.58284808,26.53942302],[119.58140988,26.54180001],[119.57804712,26.54152803],[119.57317704,26.54028],[119.56951296,26.54303796],[119.565486,26.54647497],[119.56252392,26.54720496],[119.55765816,26.54495298],[119.55573612,26.54645598],[119.55460212,26.54863398],[119.55745908,26.55062496],[119.55760704,26.55320202],[119.55621312,26.55476298],[119.55373704,26.55597402],[119.55050892,26.55748296],[119.54727216,26.55819801],[119.54410488,26.55999297],[119.54105892,26.56093104],[119.537442,26.56089504],[119.534769,26.56108602],[119.53230408,26.56310202],[119.52996804,26.56575801],[119.52776304,26.56932003],[119.52447696,26.573526],[119.52442512,26.57361096],[119.52739188,26.57537496],[119.5308,26.57832804],[119.53084284,26.58000699],[119.52904392,26.58306699],[119.526147,26.58682098],[119.52572292,26.58704499],[119.52510912,26.58847698],[119.52213408,26.58980898],[119.51934912,26.59160799],[119.51828604,26.59590504],[119.51568288,26.59701501],[119.51302788,26.59846797],[119.509362,26.60353101],[119.50664688,26.60722101],[119.50597188,26.61174603],[119.50706196,26.61357204],[119.505609,26.61541596],[119.503647,26.61778296],[119.50263504,26.61961797],[119.500551,26.62123797],[119.49813792,26.62119801],[119.49533604,26.62075899],[119.489247,26.62108299],[119.48905692,26.62389198],[119.487033,26.624655],[119.48290812,26.62588404],[119.47885092,26.62786197],[119.473911,26.63137899],[119.47314204,26.63145],[119.47254012,26.63115201],[119.47196088,26.63057196],[119.47135392,26.63030304],[119.47058604,26.63025102],[119.47030308,26.62998102],[119.47018104,26.62952202],[119.47014108,26.62891299],[119.46980412,26.62829199],[119.46925116,26.62787502],[119.46774096,26.62741899],[119.46660912,26.62728597],[119.46578688,26.62749099],[119.46522888,26.62784199],[119.46465612,26.62797897],[119.46398184,26.62793001],[119.46354408,26.62826904],[119.46310596,26.62881102],[119.46244896,26.62906599],[119.461707,26.62918596],[119.46067884,26.62923897],[119.45941596,26.62966296],[119.458161,26.63011998],[119.455659,26.63013402],[119.45446416,26.63035497],[119.45357208,26.63004897],[119.45333808,26.63007804],[119.44906092,26.63066304],[119.44587312,26.62971597],[119.44171512,26.62744203],[119.43159408,26.62506801],[119.42449488,26.624691],[119.42115588,26.62592598],[119.41896204,26.62798203],[119.41659504,26.63087796],[119.41477308,26.63326098],[119.41217892,26.63414496],[119.40844896,26.63437797],[119.40672996,26.63289396],[119.40669504,26.63104698],[119.40573204,26.62988796],[119.40462108,26.63007498],[119.40351912,26.63093196],[119.40201684,26.63079003],[119.40105312,26.62946199],[119.40159096,26.62811001],[119.40547104,26.62636401],[119.40937596,26.62545897],[119.41233516,26.62389603],[119.41457292,26.62352199],[119.415726,26.620191],[119.41559604,26.61975702],[119.41361784,26.61844698],[119.41036488,26.61754698],[119.40641604,26.61744096],[119.40507108,26.61904701],[119.40402096,26.61933501],[119.399724,26.61957297],[119.39749308,26.62011504],[119.39509692,26.62149798],[119.39248296,26.62187598],[119.389878,26.62225398],[119.38801896,26.62295598],[119.38767192,26.62430499],[119.38825404,26.62530399],[119.390139,26.626113],[119.39202288,26.62658703],[119.39242284,26.62792398],[119.39299596,26.63045901],[119.39245812,26.63165403],[119.39221512,26.63278497],[119.39196312,26.63391699],[119.39172012,26.63503902],[119.39146812,26.63616897],[119.39072112,26.63729298],[119.38996584,26.63842302],[119.38896684,26.63954901],[119.38796784,26.64068301],[119.38721292,26.64180396],[119.38596192,26.642934],[119.38555404,26.643213],[119.38490208,26.64364896],[119.37945492,26.64309897],[119.37531888,26.64058203],[119.37020796,26.63974296],[119.36212308,26.63415801],[119.35640988,26.63128197],[119.34713304,26.64938196],[119.34322884,26.65726902],[119.338794,26.66401596],[119.32935804,26.67637296],[119.319939,26.679078],[119.30899896,26.68250304],[119.29286304,26.68326903],[119.28137508,26.68510197],[119.27217492,26.68574097],[119.26220508,26.68640103],[119.25918396,26.68853097],[119.25622404,26.69341599],[119.25362988,26.70196896],[119.25250992,26.70888501],[119.25164304,26.71510698],[119.24891892,26.72894799],[119.245527,26.736831],[119.24057304,26.74336599],[119.23641,26.74069497],[119.228274,26.732367],[119.21868612,26.72705403],[119.21220216,26.72351901],[119.202246,26.72419401],[119.19336588,26.726913],[119.18449512,26.72986401],[119.17856196,26.72769402],[119.17788516,26.72058501],[119.17593612,26.71419501],[119.17078992,26.71269903],[119.16541116,26.71212501],[119.16091512,26.71635897],[119.15390592,26.72271297],[119.15090892,26.72530497],[119.14385508,26.72982099],[119.15557992,26.73922104],[119.16051804,26.74233198],[119.16722412,26.74494297],[119.17080108,26.74509498],[119.17435284,26.74363896],[119.17621512,26.74681704],[119.17666692,26.75507796],[119.17654596,26.760366],[119.17943892,26.76398004],[119.19205188,26.76738204],[119.19512808,26.76777597],[119.20155588,26.76924297],[119.20425084,26.77492899],[119.20524804,26.78409999],[119.20248504,26.786457],[119.19662784,26.78727204],[119.19587508,26.78751504],[119.19273084,26.78589],[119.18935692,26.78527602],[119.18826792,26.78697504],[119.18569896,26.78937201],[119.18167416,26.79381],[119.18101104,26.79819003],[119.18145492,26.80187796],[119.18338092,26.80486902],[119.18400912,26.80634502],[119.18257092,26.80746696],[119.18156508,26.80859403],[119.18156616,26.809722],[119.18181708,26.81084502],[119.18231892,26.81197299],[119.18257092,26.813106],[119.18382696,26.81423001],[119.18382696,26.81535798],[119.18332512,26.81761302],[119.18382696,26.81874099],[119.18484,26.81986104],[119.18608812,26.82075996],[119.18634804,26.821215],[119.18860092,26.82120303],[119.18835792,26.82233496],[119.187855,26.82346302],[119.18886012,26.82436599],[119.19011688,26.82436203],[119.19137292,26.82413298],[119.19639096,26.82231399],[119.197647,26.82253602],[119.19865212,26.82298701],[119.19915504,26.82411597],[119.19915504,26.82524403],[119.19940704,26.82637596],[119.20041216,26.82727002],[119.20166784,26.82726696],[119.20292496,26.82636102],[119.20342716,26.82523296],[119.204424,26.82433197],[119.204685,26.82437796],[119.20504896,26.82390096],[119.20693788,26.82341901],[119.20793508,26.81891199],[119.20868892,26.81777997],[119.20994604,26.81710002],[119.21145408,26.81664102],[119.21295492,26.81596602],[119.21321304,26.81618697],[119.21421096,26.81528598],[119.21504292,26.81868996],[119.21473404,26.82205596],[119.21852412,26.82468],[119.22119388,26.82732303],[119.22238116,26.83066302],[119.22131808,26.83370502],[119.21537592,26.835822],[119.21281092,26.83855404],[119.211021,26.842617],[119.20983696,26.84741301],[119.21023008,26.84799801],[119.210733,26.84912697],[119.21173812,26.85025503],[119.21249304,26.85137904],[119.21300316,26.852508],[119.21325408,26.85363102],[119.21325408,26.85588696],[119.21300388,26.85701898],[119.21250096,26.85814704],[119.21250816,26.85927402],[119.213262,26.86039803],[119.21413788,26.86070997],[119.216979,26.86049397],[119.21889384,26.86281399],[119.21931396,26.86515903],[119.21899212,26.867853],[119.21676192,26.86856301],[119.21302296,26.86862601],[119.21081112,26.87034402],[119.21200488,26.87401998],[119.21588892,26.88134697],[119.22317316,26.89029702],[119.223981,26.89330797],[119.223657,26.89456302],[119.229165,26.91364599],[119.22521112,26.91970596],[119.21886612,26.92213803],[119.210823,26.92828602],[119.20356216,26.93533698],[119.21078916,26.93724903],[119.21800896,26.93916198],[119.22476184,26.94315501],[119.22630408,26.94465198],[119.22803496,26.94726],[119.23004592,26.95428396],[119.23275312,26.95860801],[119.23520688,26.96017896],[119.23770996,26.95894497],[119.23909884,26.95862097],[119.24054388,26.95801698],[119.241189,26.95745403],[119.24181,26.95666698],[119.24239608,26.95553001],[119.24257788,26.95451904],[119.24295696,26.95346496],[119.24351784,26.95308597],[119.244753,26.95270599],[119.245707,26.952228],[119.24601588,26.95168098],[119.24607204,26.95087998],[119.24548308,26.95010796],[119.24277408,26.94737097],[119.24259192,26.946612],[119.242746,26.94605103],[119.24430984,26.94493197],[119.24632296,26.94267999],[119.24741808,26.94204702],[119.24963604,26.94113298],[119.24986104,26.94067002],[119.24936892,26.93919501],[119.249397,26.93850696],[119.24976204,26.938044],[119.25240084,26.93656899],[119.25385488,26.936154],[119.25488592,26.93575404],[119.25563004,26.93493999],[119.256093,26.93401299],[119.25592416,26.93325501],[119.25557316,26.93234196],[119.25489888,26.931429],[119.25240012,26.92951902],[119.25179712,26.92880298],[119.25153,26.927595],[119.25171216,26.92678104],[119.25349704,26.92487304],[119.25474408,26.92329804],[119.25533412,26.922132],[119.25585612,26.92145799],[119.25819792,26.92005399],[119.25954504,26.91902898],[119.26041588,26.91815904],[119.260584,26.917344],[119.26293192,26.91589599],[119.26783584,26.91656298],[119.26882188,26.916102],[119.27052288,26.91414297],[119.27140992,26.91286704],[119.27072592,26.91183699],[119.26845684,26.91031203],[119.26498896,26.90687304],[119.26434708,26.90593002],[119.26515816,26.90495703],[119.26596888,26.903475],[119.26650204,26.902989],[119.26796112,26.90227098],[119.26923588,26.90178498],[119.27109096,26.90155899],[119.27136888,26.902539],[119.27475288,26.905905],[119.27734308,26.90690598],[119.28091392,26.90714898],[119.28234312,26.90809299],[119.28236112,26.90898399],[119.280906,26.910864],[119.28010716,26.91236196],[119.28012804,26.913402],[119.28097008,26.91405801],[119.28297096,26.91454797],[119.28496608,26.91474102],[119.28539304,26.91532899],[119.28516012,26.91614898],[119.28377016,26.91713601],[119.28080304,26.918073],[119.27940912,26.91891099],[119.27933388,26.91928404],[119.27951208,26.91987597],[119.28118392,26.92051902],[119.28301092,26.92063998],[119.28573504,26.92058697],[119.28979116,26.91875601],[119.29343508,26.91755604],[119.29625496,26.917947],[119.29958496,26.91754596],[119.30233608,26.914212],[119.304054,26.91431496],[119.305971,26.91630297],[119.30711796,26.91729396],[119.30970384,26.91523998],[119.31227604,26.91251397],[119.31377292,26.91181602],[119.32331508,26.912016],[119.32765488,26.91101502],[119.32335792,26.903511],[119.32240896,26.896635],[119.32775712,26.89469802],[119.33584596,26.88948702],[119.33623908,26.889084],[119.33810784,26.88962796],[119.33977104,26.88975297],[119.340594,26.88944301],[119.34140616,26.88854004],[119.34238284,26.88763401],[119.34959796,26.88737904],[119.35757484,26.88785496],[119.36090808,26.88854796],[119.36392308,26.88991398],[119.36578104,26.89144596],[119.36664,26.89284501],[119.36667204,26.89440498],[119.365965,26.89627302],[119.36590596,26.897463],[119.36717892,26.89878096],[119.37136716,26.90072199],[119.37394296,26.90090604],[119.37602304,26.90124498],[119.37894192,26.90201601],[119.38186908,26.90315901],[119.38361004,26.90313201],[119.38492692,26.902665],[119.38688604,26.90122203],[119.38859208,26.89956],[119.38962708,26.89753698],[119.38966488,26.89538202],[119.389464,26.89375104],[119.38951692,26.89233804],[119.39008788,26.891883],[119.39124204,26.89156701],[119.39259096,26.89265997],[119.39514084,26.89566399],[119.39714784,26.89652304],[119.398995,26.89768098],[119.40010308,26.89914897],[119.40129,26.90039196],[119.40278508,26.90058996],[119.40418404,26.90011998],[119.40491016,26.89921602],[119.40496596,26.89795197],[119.40476292,26.89617303],[119.40365412,26.89470504],[119.40231996,26.89428204],[119.40140916,26.89429698],[119.40065316,26.89379001],[119.40054192,26.89245396],[119.40048396,26.88970599],[119.40087204,26.88851097],[119.40276888,26.88810804],[119.40641388,26.888121],[119.40915888,26.88866802],[119.410335,26.88946497],[119.410857,26.89064496],[119.41089588,26.89250202],[119.41150896,26.894052],[119.41529688,26.89695801],[119.42553204,26.89952598],[119.42736912,26.90030997],[119.42779716,26.90097102],[119.42774604,26.90283204],[119.42797896,26.90305299],[119.42902116,26.90589798],[119.42957088,26.90651097],[119.43478692,26.910576],[119.436489,26.91277299],[119.436705,26.91514602],[119.435112,26.91799902],[119.43531216,26.91963],[119.43684504,26.921682],[119.43888408,26.92416996],[119.43877896,26.92699497],[119.43747,26.93534103],[119.43787392,26.93875104],[119.43908316,26.94110598],[119.44161108,26.94328803],[119.44669392,26.94577302],[119.45068488,26.94715704],[119.45394216,26.94937698],[119.45681784,26.95055697],[119.46753684,26.95399002],[119.47118004,26.95534299],[119.47526388,26.95652298],[119.47876884,26.95673196],[119.47988412,26.95659003],[119.48390208,26.96234796],[119.48841792,26.96844096],[119.49532812,26.96895702],[119.50329312,26.970138],[119.51045316,26.97018498],[119.51676612,26.96749902],[119.52321696,26.96021397]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"东侨区","id":12,"province":"福建省","code":350903,"centroid":[119.460564024838,26.75226114491],"center":[119.410564024838,26.75226114491]}},{"type":"Feature","id":"ningde_polygon.5","geometry":{"type":"MultiPolygon","coordinates":[[[[119.11991688,27.05463999],[119.11989096,27.05309703],[119.11987404,27.05219604],[119.12033304,27.05075397],[119.121435,27.049878],[119.12318712,27.04885002],[119.12444388,27.04753998],[119.12457384,27.04626603],[119.12392404,27.04498596],[119.12388912,27.04326201],[119.12532012,27.04224096],[119.12657688,27.04092597],[119.12779116,27.03717999],[119.12821596,27.03665898],[119.13061716,27.03369798],[119.13146712,27.03298896],[119.13377292,27.03106503],[119.13582708,27.03018402],[119.13746508,27.03029697],[119.13918192,27.03041604],[119.141262,27.03039102],[119.14333308,27.02993004],[119.14439904,27.028674],[119.144763,27.02825703],[119.14478892,27.02620296],[119.14483212,27.02375199],[119.14578504,27.02302398],[119.14689492,27.022716],[119.14742304,27.02218104],[119.14861896,27.02097504],[119.14845408,27.018324],[119.14817688,27.01785204],[119.14815096,27.01781496],[119.14675488,27.01545903],[119.14640892,27.01487403],[119.14626096,27.01310904],[119.14671996,27.01180998],[119.14750008,27.01094103],[119.14755192,27.01091898],[119.14924212,27.01019799],[119.15180712,27.01016298],[119.15308008,27.00985302],[119.154501,27.00882801],[119.15522892,27.00479997],[119.15563608,26.999928],[119.15592984,26.99877699],[119.15932608,26.99678097],[119.15985492,26.99632899],[119.16111096,26.99519796],[119.162367,26.99429004],[119.16362304,26.99384499],[119.16487908,26.99361702],[119.16613512,26.99361198],[119.16740016,26.99338203],[119.167902,26.99347203],[119.17649412,26.98050303],[119.18555388,26.97387201],[119.19288312,26.97003603],[119.199969,26.966205],[119.20807908,26.96281299],[119.20619808,26.95894704],[119.199726,26.95609899],[119.19555,26.95297401],[119.19611196,26.94468996],[119.20054716,26.93769903],[119.20356216,26.93533698],[119.210823,26.92828602],[119.21886612,26.92213803],[119.22521112,26.91970596],[119.229165,26.91364599],[119.223657,26.89456302],[119.223981,26.89330797],[119.22317316,26.89029702],[119.21588892,26.88134697],[119.21200488,26.87401998],[119.21081112,26.87034402],[119.21302296,26.86862601],[119.21676192,26.86856301],[119.21899212,26.867853],[119.21931396,26.86515903],[119.21889384,26.86281399],[119.216979,26.86049397],[119.21413788,26.86070997],[119.213262,26.86039803],[119.21250816,26.85927402],[119.21250096,26.85814704],[119.21300388,26.85701898],[119.21325408,26.85588696],[119.21325408,26.85363102],[119.21300316,26.852508],[119.21249304,26.85137904],[119.21173812,26.85025503],[119.210733,26.84912697],[119.21023008,26.84799801],[119.20983696,26.84741301],[119.211021,26.842617],[119.21281092,26.83855404],[119.21537592,26.835822],[119.22131808,26.83370502],[119.22238116,26.83066302],[119.22119388,26.82732303],[119.21852412,26.82468],[119.21473404,26.82205596],[119.21504292,26.81868996],[119.21421096,26.81528598],[119.21321304,26.81618697],[119.21295492,26.81596602],[119.21145408,26.81664102],[119.20994604,26.81710002],[119.20868892,26.81777997],[119.20793508,26.81891199],[119.20693788,26.82341901],[119.20504896,26.82390096],[119.204685,26.82437796],[119.204424,26.82433197],[119.20342716,26.82523296],[119.20292496,26.82636102],[119.20166784,26.82726696],[119.20041216,26.82727002],[119.19940704,26.82637596],[119.19915504,26.82524403],[119.19915504,26.82411597],[119.19865212,26.82298701],[119.197647,26.82253602],[119.19639096,26.82231399],[119.19137292,26.82413298],[119.19011688,26.82436203],[119.18886012,26.82436599],[119.187855,26.82346302],[119.18835792,26.82233496],[119.18860092,26.82120303],[119.18634804,26.821215],[119.18608812,26.82075996],[119.18484,26.81986104],[119.18382696,26.81874099],[119.18332512,26.81761302],[119.18382696,26.81535798],[119.18382696,26.81423001],[119.18257092,26.813106],[119.18231892,26.81197299],[119.18181708,26.81084502],[119.18156616,26.809722],[119.18156508,26.80859403],[119.18257092,26.80746696],[119.18400912,26.80634502],[119.18338092,26.80486902],[119.18145492,26.80187796],[119.18101104,26.79819003],[119.18167416,26.79381],[119.18569896,26.78937201],[119.18826792,26.78697504],[119.18935692,26.78527602],[119.19273084,26.78589],[119.19587508,26.78751504],[119.19662784,26.78727204],[119.20248504,26.786457],[119.20524804,26.78409999],[119.20425084,26.77492899],[119.20155588,26.76924297],[119.19512808,26.76777597],[119.19205188,26.76738204],[119.17943892,26.76398004],[119.17654596,26.760366],[119.17666692,26.75507796],[119.17621512,26.74681704],[119.17435284,26.74363896],[119.17080108,26.74509498],[119.16722412,26.74494297],[119.16051804,26.74233198],[119.15557992,26.73922104],[119.14385508,26.72982099],[119.13732,26.73455301],[119.12711616,26.73591201],[119.11944888,26.73629802],[119.103777,26.73361899],[119.090412,26.73226503],[119.077065,26.73159102],[119.06777088,26.72899803],[119.06056008,26.72774199],[119.05671492,26.72803899],[119.047761,26.72933697],[119.04297408,26.733321],[119.04447204,26.74248804],[119.04534288,26.74661103],[119.04884208,26.75390301],[119.05206192,26.75959497],[119.05343712,26.76347802],[119.05508304,26.76804597],[119.05387308,26.77105197],[119.05217712,26.77544703],[119.04710292,26.77851801],[119.038851,26.77704597],[119.03238108,26.77485402],[119.02656384,26.76782304],[119.02279212,26.76030102],[119.01551904,26.75719701],[119.00372508,26.75829897],[118.99896912,26.764119],[118.99316916,26.76880197],[118.99012896,26.77091796],[118.98276984,26.77493799],[118.97222508,26.77464504],[118.96368516,26.77156299],[118.96158708,26.76975696],[118.95495588,26.77193298],[118.94619492,26.77046796],[118.938672,26.76668598],[118.93069908,26.75441403],[118.92517992,26.74807299],[118.91515392,26.74732896],[118.90641888,26.74587798],[118.89969192,26.74278099],[118.89321804,26.73945297],[118.88550612,26.73798903],[118.88224596,26.74103697],[118.882368,26.74654704],[118.88273196,26.75159703],[118.88721612,26.75771604],[118.89530208,26.76422799],[118.908531,26.77203297],[118.91507004,26.77788999],[118.91888388,26.788392],[118.91734704,26.80013799],[118.91310084,26.80504002],[118.90646712,26.806536],[118.89801288,26.80646004],[118.89553212,26.810181],[118.89070812,26.812107],[118.88767188,26.81400096],[118.88350884,26.81086401],[118.87625988,26.80709301],[118.86648912,26.80475301],[118.85924412,26.80098597],[118.84970412,26.79772203],[118.84399416,26.79369804],[118.83360708,26.78654601],[118.82281212,26.78353902],[118.81356804,26.78187798],[118.80102096,26.78096502],[118.78982208,26.784162],[118.78685712,26.78881302],[118.78292988,26.79715602],[118.77817788,26.80252497],[118.76804712,26.80752897],[118.75738212,26.81230896],[118.74818808,26.81361297],[118.74280392,26.81393202],[118.73846988,26.81492202],[118.73297088,26.82213201],[118.72928808,26.83046196],[118.72582884,26.83694799],[118.72285704,26.84205198],[118.72165788,26.84597301],[118.720746,26.85173301],[118.73000196,26.85250701],[118.73795184,26.85238002],[118.74026196,26.85234303],[118.74006288,26.85487599],[118.73752596,26.85652398],[118.73114892,26.85846402],[118.72375416,26.86087899],[118.71559188,26.86307202],[118.70782812,26.86618998],[118.70555004,26.86682097],[118.70122788,26.86819599],[118.69805304,26.86940397],[118.69657488,26.870598],[118.69603596,26.87211396],[118.69567884,26.87379804],[118.69395804,26.87725701],[118.69373196,26.87862402],[118.69230492,26.88222897],[118.69396704,26.88452397],[118.69830684,26.88815196],[118.69945596,26.89182297],[118.69956,26.89738002],[118.70108316,26.90278002],[118.70313516,26.90410401],[118.70325684,26.90616798],[118.70157888,26.908686],[118.69978788,26.91023004],[118.69823988,26.91354897],[118.697274,26.91646398],[118.69603992,26.92144998],[118.69462296,26.925516],[118.69332696,26.92805697],[118.68996996,26.930997],[118.68104484,26.93713599],[118.67436504,26.94291498],[118.67179896,26.94731004],[118.67568804,26.95601097],[118.67706288,26.95715298],[118.67830704,26.96031801],[118.68134292,26.963559],[118.68567516,26.96425704],[118.69099812,26.96426496],[118.69451208,26.96178996],[118.69653888,26.96041503],[118.69699896,26.95507596],[118.69975584,26.95029201],[118.704852,26.946819],[118.71212112,26.94436596],[118.71745092,26.94534804],[118.72281384,26.94826296],[118.72735992,26.95266999],[118.73106216,26.9559],[118.734885,26.95644999],[118.74065292,26.95356],[118.74722688,26.94961602],[118.75451112,26.94908097],[118.759338,26.95006197],[118.76281812,26.95001796],[118.76678316,26.94907404],[118.77204888,26.94662703],[118.77751404,26.94640599],[118.78265592,26.94708099],[118.78815312,26.94908502],[118.79219412,26.95304196],[118.793061,26.95585401],[118.79326908,26.95808097],[118.79299188,26.96194899],[118.79287992,26.96536998],[118.79542008,26.96890104],[118.80113112,26.97402204],[118.803879,26.97635097],[118.80567288,26.97709896],[118.80816012,26.97738804],[118.81134792,26.97766704],[118.81613988,26.97829299],[118.82041092,26.97983496],[118.82469096,26.981379],[118.82775816,26.98349904],[118.82960316,26.98533099],[118.83298212,26.98641702],[118.83770316,26.98859403],[118.84089996,26.99064999],[118.84127292,26.99271198],[118.83897684,26.99654499],[118.83966984,26.99720397],[118.84035492,26.99786196],[118.84103892,26.99852103],[118.84136004,26.99882604],[118.84223484,26.99927001],[118.84311,26.99971101],[118.84376808,27.00004599],[118.84464288,27.00048699],[118.84504212,27.00068598],[118.84535388,27.00125199],[118.84538808,27.00215496],[118.84540608,27.00251604],[118.84551012,27.00341199],[118.84562208,27.00430803],[118.84570092,27.00493101],[118.84583916,27.00582498],[118.84587408,27.00605799],[118.84331016,27.00933399],[118.84182912,27.01352403],[118.84345812,27.018594],[118.84766904,27.02362401],[118.85130792,27.02542203],[118.85441004,27.02537496],[118.85998104,27.02218302],[118.86027588,27.02215503],[118.86077808,27.02293803],[118.861281,27.02372004],[118.86180984,27.02462904],[118.86226884,27.02542698],[118.86241716,27.025668],[118.86311016,27.02630097],[118.863621,27.02664999],[118.86448788,27.02710404],[118.86517296,27.02697102],[118.865268,27.02706597],[118.86947208,27.03117402],[118.87417908,27.03527199],[118.87686792,27.04171599],[118.87803,27.04910904],[118.880181,27.054171],[118.885437,27.05965101],[118.88915004,27.06561999],[118.89177804,27.06789798],[118.89830304,27.07256799],[118.89838188,27.07316496],[118.898451,27.07414596],[118.89852192,27.07504803],[118.89855684,27.07548903],[118.89844416,27.07638597],[118.89834012,27.07728201],[118.89827892,27.07777701],[118.89839196,27.07867404],[118.898505,27.07956999],[118.89886104,27.08046396],[118.89919908,27.08131302],[118.89953784,27.08216199],[118.89983304,27.08288901],[118.90007604,27.08376597],[118.90031904,27.08464104],[118.90056204,27.08551701],[118.90069308,27.08599698],[118.90103112,27.08685],[118.90135188,27.08770302],[118.901682,27.08855604],[118.90203804,27.089433],[118.90238508,27.09027999],[118.90244592,27.09042102],[118.90306296,27.09113301],[118.903392,27.09151902],[118.90415592,27.09211203],[118.90491984,27.09270396],[118.90562292,27.09325098],[118.90643112,27.09379197],[118.90723788,27.09432999],[118.90752516,27.09452502],[118.90845396,27.09489204],[118.90937412,27.09525501],[118.91040696,27.09554796],[118.91136204,27.09581103],[118.91161404,27.09587799],[118.91261304,27.09600903],[118.91361204,27.09613899],[118.91391588,27.09618102],[118.91490588,27.09635697],[118.91526192,27.09641997],[118.91602584,27.096885],[118.91639988,27.09772101],[118.91659104,27.09814401],[118.91691216,27.09899901],[118.91709504,27.09946404],[118.91770308,27.100179],[118.91804112,27.10056699],[118.91889288,27.10105002],[118.91974392,27.10153404],[118.92059604,27.10201896],[118.92090888,27.102195],[118.92158604,27.10286199],[118.92227292,27.10353096],[118.922499,27.10375497],[118.922751,27.10462698],[118.92286296,27.10501803],[118.92288096,27.105921],[118.92288996,27.10682397],[118.92290688,27.10772496],[118.92290688,27.10788597],[118.92289896,27.10878903],[118.92288996,27.109692],[118.92288096,27.10995003],[118.92319416,27.110808],[118.92338496,27.11132703],[118.92390696,27.11210004],[118.92408012,27.112365],[118.92489696,27.11289096],[118.92561012,27.11334996],[118.926531,27.11372202],[118.92675708,27.11381499],[118.92775608,27.11398104],[118.92861684,27.11412297],[118.92961584,27.11420397],[118.93015512,27.11424996],[118.931076,27.11389302],[118.93176288,27.11363103],[118.93219812,27.11282202],[118.93241484,27.11242503],[118.93272804,27.11156796],[118.93304088,27.11071098],[118.93326696,27.11008197],[118.93394484,27.10940499],[118.93460508,27.10873296],[118.93495284,27.10838196],[118.93578804,27.10788399],[118.93663116,27.10738296],[118.936953,27.10719099],[118.93794408,27.10701396],[118.93881312,27.10685898],[118.93979592,27.10665198],[118.94077908,27.10644498],[118.94177016,27.106236],[118.94274396,27.10603098],[118.94324796,27.10592397],[118.94420484,27.10563003],[118.94504904,27.10536597],[118.94601384,27.10508598],[118.94640588,27.10497402],[118.94737104,27.10523403],[118.94794488,27.10539099],[118.94871996,27.10596798],[118.94949396,27.10654398],[118.95027696,27.10712097],[118.95088608,27.10795599],[118.95141708,27.10872702],[118.95193908,27.10949904],[118.95241716,27.11029896],[118.95288696,27.11109897],[118.95334812,27.11189799],[118.95377508,27.11281302],[118.95415812,27.11365002],[118.95446196,27.11433402],[118.95490584,27.11490804],[118.95515892,27.11531196],[118.95593292,27.115605],[118.95682896,27.11602098],[118.95708204,27.11613897],[118.95784704,27.11672703],[118.95810012,27.11723103],[118.95804792,27.11813202],[118.958022,27.11843802],[118.95753492,27.11922696],[118.95704712,27.12001401],[118.95678612,27.12042801],[118.95635088,27.12124098],[118.95626412,27.12140397],[118.95632496,27.12230703],[118.95639516,27.12320604],[118.956456,27.12410703],[118.95652512,27.12500802],[118.95655212,27.12536199],[118.95660396,27.12626199],[118.95665616,27.127161],[118.95661296,27.12733002],[118.95388884,27.12752496],[118.94817312,27.12712896],[118.94636412,27.127152],[118.94638104,27.12830904],[118.94673888,27.13409298],[118.948131,27.139401],[118.94816592,27.14125203],[118.94777388,27.14131404],[118.94685192,27.14051601],[118.944495,27.13892301],[118.93954608,27.137826],[118.93488588,27.13788504],[118.93257396,27.13907097],[118.93189608,27.14486904],[118.93405212,27.14970303],[118.93645188,27.15360903],[118.938861,27.15774597],[118.94021712,27.16120098],[118.94023512,27.16236099],[118.93919112,27.16214202],[118.93736592,27.16123896],[118.93397508,27.15989004],[118.93189716,27.15991596],[118.93166208,27.16107696],[118.932723,27.16291503],[118.93327092,27.16453098],[118.93277592,27.16569396],[118.930203,27.16665201],[118.92969,27.167121],[118.92972492,27.16897698],[118.93399308,27.17336601],[118.93641012,27.174348],[118.93739292,27.17549199],[118.93898412,27.17552403],[118.93995792,27.17503299],[118.941219,27.17372799],[118.94360112,27.17169597],[118.94374908,27.171513],[118.94763708,27.17083602],[118.95073416,27.16964199],[118.95512796,27.16866297],[118.95850404,27.16908696],[118.96188084,27.16904601],[118.964466,27.16855299],[118.96832196,27.16642701],[118.969263,27.165726],[118.96986312,27.16532802],[118.97308512,27.16437402],[118.97385912,27.16388604],[118.97657604,27.16349598],[118.98152208,27.164367],[118.98333396,27.16434603],[118.98538092,27.162702],[118.98790596,27.15873903],[118.98861984,27.155025],[118.98929916,27.14923098],[118.99048284,27.14273496],[118.99171008,27.13878603],[118.99165788,27.13577697],[118.99029888,27.13278204],[118.98998496,27.129312],[118.99149192,27.12669003],[118.99379988,27.12527496],[118.99818108,27.12337497],[118.99971396,27.12196899],[118.99942596,27.12035097],[118.99727496,27.11620701],[118.992492,27.10977804],[118.991691,27.10863],[118.991151,27.10771002],[118.99095012,27.10680201],[118.99161216,27.10584198],[118.991943,27.104013],[118.992474,27.10247103],[118.993572,27.10201896],[118.994922,27.10168002],[118.99634112,27.10095201],[118.99777788,27.09815598],[118.99945908,27.097371],[119.00145384,27.09721701],[119.00260404,27.097515],[119.00350116,27.09803898],[119.004381,27.09987804],[119.00463408,27.10057401],[119.005209,27.10097703],[119.00565288,27.10144296],[119.006298,27.10121904],[119.00695104,27.10041804],[119.00831796,27.09820098],[119.00960712,27.09729297],[119.01122712,27.096903],[119.01269988,27.09646299],[119.013858,27.09641799],[119.01520008,27.09722502],[119.01697704,27.09896697],[119.01857112,27.10063899],[119.02017312,27.10174401],[119.02087908,27.10227204],[119.02196808,27.10256796],[119.02382316,27.10257804],[119.03076396,27.10241703],[119.03282712,27.10226403],[119.03423796,27.10221804],[119.037573,27.103158],[119.039949,27.10295397],[119.04142896,27.10262097],[119.04201288,27.10233801],[119.042901,27.10246797],[119.04296112,27.10315197],[119.042901,27.10378404],[119.04269184,27.105561],[119.04385788,27.106704],[119.04639984,27.10667304],[119.05102116,27.10383696],[119.05303104,27.10056996],[119.05457112,27.09962496],[119.05670304,27.10284003],[119.05867008,27.105381],[119.05984404,27.10453302],[119.05866108,27.10081197],[119.05863408,27.09937503],[119.05958304,27.09807399],[119.06118288,27.09777501],[119.06408016,27.09818001],[119.06459316,27.10046403],[119.06556696,27.10074996],[119.06713296,27.09958302],[119.06921988,27.09955602],[119.070828,27.10026603],[119.072133,27.10110501],[119.07373212,27.10094904],[119.07388008,27.10008999],[119.07532296,27.100215],[119.076462,27.10106496],[119.07704412,27.10110096],[119.07789588,27.09978399],[119.08200708,27.09834003],[119.09337912,27.09725202],[119.09541096,27.09537102],[119.09534112,27.09166698],[119.09306592,27.08731197],[119.09338704,27.08724897],[119.09319588,27.085527],[119.09333412,27.08380197],[119.09379492,27.08293797],[119.10045492,27.07812099],[119.10219912,27.07723701],[119.10428316,27.07707204],[119.10571488,27.076914],[119.10681792,27.076032],[119.10791088,27.07386804],[119.10755412,27.07129098],[119.10766716,27.06857298],[119.10876912,27.06712299],[119.11099896,27.06666399],[119.11197096,27.06722604],[119.11355892,27.067356],[119.11413204,27.06695397],[119.11481712,27.06647796],[119.11559796,27.06488604],[119.11559796,27.06465798],[119.11556304,27.062442],[119.11633488,27.06142797],[119.11777488,27.06098202],[119.11998708,27.05937696],[119.12045508,27.05850396],[119.12042088,27.05606802],[119.11991688,27.05463999]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"屏南县","id":7,"province":"福建省","code":350923,"centroid":[118.982436428645,26.9161413309296],"center":[118.932436428645,26.9161413309296]}},{"type":"Feature","id":"ningde_polygon.6","geometry":{"type":"MultiPolygon","coordinates":[[[[119.63514888,27.66868902],[119.63557512,27.66839202],[119.63605212,27.66806298],[119.63708604,27.666864],[119.63856312,27.66628899],[119.64056184,27.66607002],[119.64404592,27.66349998],[119.64449808,27.66241296],[119.64405492,27.66058101],[119.64309012,27.65862702],[119.64162996,27.65546901],[119.64040416,27.65329299],[119.63963088,27.65265903],[119.63957004,27.65219796],[119.6397,27.65111103],[119.64048192,27.64933704],[119.64202884,27.64756503],[119.64409704,27.64408302],[119.64578184,27.64219896],[119.64751992,27.64053999],[119.64772008,27.63870696],[119.64638088,27.63440802],[119.64554712,27.63342999],[119.64407004,27.63308502],[119.64322692,27.63245196],[119.64252312,27.631125],[119.64130596,27.62872299],[119.64087108,27.62694504],[119.64112308,27.625392],[119.639907,27.62481996],[119.63771712,27.62584497],[119.63655288,27.62606898],[119.635137,27.625725],[119.63333808,27.62428203],[119.63180088,27.62302599],[119.62935108,27.62250399],[119.62800504,27.62174799],[119.62646784,27.62048304],[119.62621584,27.61871004],[119.62532088,27.61481196],[119.62726596,27.610866],[119.62882008,27.60931998],[119.62997604,27.607833],[119.63011392,27.60536799],[119.62902888,27.60313203],[119.62851588,27.60170301],[119.62877616,27.59946597],[119.62871496,27.59797503],[119.62923588,27.59660001],[119.63033892,27.59391702],[119.63034792,27.59082399],[119.63035584,27.58852404],[119.63035584,27.58635396],[119.63088612,27.582687],[119.63165904,27.58160097],[119.63269188,27.58097502],[119.63404692,27.58023603],[119.63597616,27.580347],[119.63752308,27.58144302],[119.6388,27.58178997],[119.64015504,27.58168098],[119.64150216,27.58099302],[119.64389112,27.57905397],[119.64543804,27.57820104],[119.64755808,27.57826503],[119.649366,27.57821202],[119.65161708,27.577818],[119.653173,27.57719196],[119.65458096,27.57708504],[119.65689288,27.57703698],[119.65844916,27.57704004],[119.66011812,27.57664197],[119.66288184,27.57579399],[119.66746284,27.57545901],[119.67048792,27.57512403],[119.67280092,27.57502197],[119.675061,27.57439503],[119.67628716,27.57285],[119.67712992,27.57153699],[119.67739092,27.57038904],[119.67629508,27.56901996],[119.67443496,27.56746503],[119.67295716,27.56602998],[119.67212196,27.56442204],[119.67167808,27.56161503],[119.67161688,27.56040399],[119.67187788,27.55886202],[119.67201684,27.55719504],[119.67201684,27.55639404],[119.671695,27.55588203],[119.67072984,27.55576503],[119.67001704,27.55616103],[119.66886108,27.55650096],[119.66713092,27.55454697],[119.66616612,27.55208898],[119.66444496,27.54812097],[119.662515,27.54611397],[119.66161896,27.54484704],[119.66117508,27.54324702],[119.659698,27.540603],[119.65932792,27.539703],[119.65997988,27.53977203],[119.66050692,27.53963604],[119.66097996,27.53926101],[119.66148792,27.53893296],[119.66233788,27.53847504],[119.66307192,27.53814096],[119.66390208,27.53778699],[119.66442912,27.53723997],[119.664729,27.53676603],[119.66512608,27.536139],[119.66563008,27.53566704],[119.66582808,27.535311],[119.66586912,27.534996],[119.66581512,27.53476299],[119.66539608,27.53440704],[119.66501916,27.53404299],[119.66482692,27.53369298],[119.66490288,27.53347401],[119.66517684,27.533304],[119.66560812,27.53328096],[119.66616396,27.53329203],[119.66681592,27.53339598],[119.66716512,27.53358102],[119.66736492,27.53389701],[119.66765292,27.53445204],[119.66841396,27.53532297],[119.669463,27.53603001],[119.67054696,27.53657298],[119.67155496,27.53682903],[119.67326208,27.536832],[119.67409188,27.53688096],[119.674737,27.53706798],[119.675601,27.537138],[119.676033,27.53717301],[119.67659496,27.53728299],[119.677212,27.53749701],[119.67791904,27.53772399],[119.67852888,27.53786196],[119.67918084,27.53791803],[119.68017516,27.53774901],[119.68079184,27.53742096],[119.68125912,27.53718903],[119.68169112,27.53700498],[119.68208784,27.53693496],[119.68258212,27.53694504],[119.683179,27.53721396],[119.68375788,27.53754597],[119.68406388,27.53774901],[119.68420104,27.53801703],[119.68426188,27.53839404],[119.68424892,27.53881101],[119.68409988,27.53970903],[119.68393284,27.54042696],[119.68395408,27.54076203],[119.68413192,27.54099504],[119.68440696,27.54114696],[119.68464708,27.54114003],[119.68490016,27.54080496],[119.68529112,27.54026496],[119.68584696,27.53957403],[119.68657992,27.538686],[119.68705296,27.53824104],[119.68744392,27.53801604],[119.68797888,27.53783199],[119.68872012,27.53766198],[119.689488,27.53755398],[119.690118,27.53742501],[119.69059212,27.53724798],[119.69070804,27.53704998],[119.69070804,27.53685801],[119.69058492,27.53672103],[119.69014608,27.53654202],[119.68971408,27.53637696],[119.68938504,27.536184],[119.68922016,27.53596503],[119.68918812,27.53571204],[119.68920216,27.53514702],[119.68931304,27.53455698],[119.68951104,27.53404398],[119.68975908,27.53371899],[119.69004996,27.53342001],[119.69074512,27.53298504],[119.69148204,27.53247204],[119.69234712,27.53180604],[119.69256204,27.53161002],[119.69381304,27.53019099],[119.69553816,27.52850403],[119.69713008,27.52724403],[119.69818416,27.52650099],[119.69970912,27.52557903],[119.70017208,27.52528896],[119.70040284,27.525015],[119.70048888,27.52468101],[119.70038592,27.52430499],[119.70012888,27.52381602],[119.70003492,27.52356798],[119.700018,27.52320798],[119.70005184,27.52247196],[119.70023112,27.52157403],[119.70065988,27.52062399],[119.7009,27.51984603],[119.701071,27.51911001],[119.701431,27.51791202],[119.70175716,27.51744996],[119.70217692,27.51705702],[119.70269892,27.51678801],[119.70334188,27.51665697],[119.704302,27.51664104],[119.70533916,27.5166],[119.70564696,27.51647202],[119.705904,27.51611301],[119.70630684,27.51535197],[119.706624,27.51513804],[119.70695808,27.515088],[119.70736992,27.51516504],[119.70765216,27.51514002],[119.70796104,27.514926],[119.70856008,27.51427701],[119.70864612,27.51388299],[119.70865404,27.51316398],[119.70873108,27.51276204],[119.70874908,27.51228297],[119.70868896,27.51175197],[119.70828612,27.51104898],[119.70781488,27.51034698],[119.70739512,27.51000399],[119.705715,27.50905899],[119.70534708,27.50891301],[119.70494388,27.50864697],[119.70460116,27.50815899],[119.70403488,27.50723298],[119.70395784,27.506925],[119.70400104,27.50643702],[119.70398412,27.50581197],[119.70384696,27.50466501],[119.703555,27.50290101],[119.70352908,27.50231898],[119.70329796,27.50159997],[119.70304092,27.50100003],[119.70287784,27.50027202],[119.70287784,27.49979304],[119.70303192,27.49931397],[119.70346896,27.49882599],[119.70406008,27.49835601],[119.70484884,27.49799799],[119.70573984,27.49768299],[119.70638208,27.49746996],[119.70750492,27.49730904],[119.70905616,27.49706298],[119.70965592,27.49679001],[119.70990288,27.49633101],[119.70999396,27.49583898],[119.70989388,27.49519098],[119.70967716,27.49419603],[119.70964692,27.49358502],[119.709693,27.493002],[119.71020384,27.49077198],[119.71042488,27.489771],[119.71052712,27.489195],[119.71042488,27.48890304],[119.71016208,27.48863304],[119.70947988,27.48818097],[119.708676,27.48781503],[119.70721908,27.48704499],[119.706822,27.48677004],[119.70660492,27.48647196],[119.706579,27.486009],[119.70663192,27.48533202],[119.70665496,27.48452103],[119.70664308,27.48394899],[119.70673596,27.48334104],[119.70689688,27.48290301],[119.70713016,27.48262599],[119.70744408,27.48237903],[119.70789012,27.48222603],[119.70850392,27.48238803],[119.70919692,27.48264399],[119.70988416,27.48274002],[119.710359,27.48268998],[119.71069488,27.48250098],[119.71084104,27.48218004],[119.71087992,27.48187296],[119.71073088,27.48111399],[119.71029996,27.48024504],[119.70997092,27.47990196],[119.70957708,27.47967498],[119.708649,27.47939598],[119.708262,27.47919096],[119.707875,27.47894202],[119.70766296,27.47872296],[119.70758304,27.478431],[119.70759708,27.478044],[119.70777996,27.47763603],[119.70804996,27.47716902],[119.70896796,27.47584998],[119.70928692,27.47522097],[119.70929592,27.47481903],[119.70914112,27.47442699],[119.70819108,27.47360403],[119.70767988,27.47305602],[119.70706788,27.47210697],[119.70672084,27.47132199],[119.70670608,27.470655],[119.706957,27.46996002],[119.70774504,27.46854702],[119.70798408,27.467829],[119.70807588,27.46715598],[119.70825804,27.466587],[119.70864612,27.46585701],[119.70909108,27.46521999],[119.70991296,27.46425204],[119.710215,27.46377],[119.71028304,27.46341702],[119.710215,27.46294902],[119.709918,27.46247004],[119.709153,27.46187604],[119.708469,27.46148697],[119.70762408,27.46074501],[119.70691596,27.46016199],[119.70596916,27.45968202],[119.70505584,27.45927],[119.704428,27.458892],[119.70401688,27.45852696],[119.70394884,27.45822996],[119.70401688,27.45793404],[119.70432504,27.45748998],[119.704725,27.45702297],[119.70531792,27.45580401],[119.70560304,27.45500598],[119.70567216,27.45455004],[119.70563796,27.45416196],[119.70544392,27.45376299],[119.70482688,27.45347697],[119.70427896,27.453339],[119.704005,27.45319104],[119.70375408,27.45285903],[119.70354888,27.45225504],[119.70342288,27.45117099],[119.70339984,27.44903898],[119.703411,27.44729496],[119.70325188,27.44668998],[119.70282888,27.44617599],[119.70221292,27.44578701],[119.701494,27.44554698],[119.700774,27.44544303],[119.70024912,27.44522496],[119.69975808,27.44494002],[119.69951904,27.44464302],[119.699199,27.44411796],[119.69839008,27.44357202],[119.69718984,27.44328204],[119.69618508,27.44304102],[119.69531712,27.44269704],[119.69510112,27.44245701],[119.69512308,27.442161],[119.69547696,27.441603],[119.69565984,27.44107803],[119.69563716,27.44053101],[119.69515692,27.439686],[119.69444988,27.43893297],[119.69390196,27.438669],[119.693376,27.43875999],[119.69258904,27.439146],[119.69037396,27.44036199],[119.68977996,27.44056602],[119.689335,27.44069103],[119.68892388,27.44071299],[119.68858188,27.44067798],[119.68823916,27.44062002],[119.68779384,27.44037999],[119.68697196,27.43976304],[119.68575192,27.43875297],[119.68548696,27.43841403],[119.68546392,27.43815204],[119.685681,27.43781004],[119.68629804,27.43721901],[119.68675488,27.43669503],[119.68713108,27.43603398],[119.68741692,27.43492896],[119.68761096,27.43417701],[119.68839792,27.43281],[119.68922016,27.43136298],[119.689506,27.43082802],[119.69011008,27.43021296],[119.69109288,27.42994098],[119.69233704,27.43005798],[119.69335692,27.42999597],[119.69470008,27.42974298],[119.69568216,27.429345],[119.69637804,27.42878799],[119.69676612,27.428184],[119.69714304,27.427455],[119.69749692,27.42690798],[119.69793,27.42653304],[119.69837604,27.42617997],[119.698866,27.42588396],[119.69919792,27.42573699],[119.69968788,27.42570297],[119.70048708,27.42600096],[119.70105804,27.42618402],[119.70165204,27.42628797],[119.702268,27.42622101],[119.70296388,27.42597099],[119.70368388,27.42553899],[119.704311,27.42508404],[119.70468792,27.42468498],[119.70487008,27.42407001],[119.70494604,27.42310998],[119.70496188,27.42104799],[119.70502992,27.42028398],[119.70515592,27.41965704],[119.70544104,27.41911002],[119.70545112,27.41855301],[119.70522684,27.41817096],[119.70486,27.41790897],[119.70458604,27.41758497],[119.70442404,27.41733603],[119.70432396,27.41693796],[119.70439308,27.41665797],[119.70457308,27.41647203],[119.70486,27.41626701],[119.70513396,27.41606802],[119.705202,27.41581899],[119.70522684,27.41545197],[119.705238,27.41534001],[119.70541404,27.41514003],[119.70586404,27.41484402],[119.70614592,27.41448699],[119.70696996,27.41335497],[119.70721908,27.41312196],[119.70799992,27.41264802],[119.70855504,27.41237901],[119.709468,27.41170203],[119.71036512,27.41097402],[119.71047492,27.410409],[119.710539,27.40964301],[119.71033488,27.40862502],[119.70984996,27.407493],[119.70950292,27.40648896],[119.70938484,27.40605102],[119.70936612,27.405558],[119.70941184,27.40502898],[119.709558,27.40471002],[119.70982296,27.40435497],[119.71015884,27.40391199],[119.71068804,27.403533],[119.71157796,27.40309002],[119.71232892,27.40292397],[119.71304316,27.40283199],[119.71401588,27.40287096],[119.71528596,27.40302999],[119.71628712,27.40323501],[119.71743696,27.40329198],[119.71836612,27.40336002],[119.71915488,27.40325004],[119.72084112,27.403011],[119.72209284,27.40272597],[119.72308392,27.40233798],[119.724354,27.40169997],[119.72490984,27.40123701],[119.72516904,27.40059801],[119.72563308,27.39970899],[119.72589192,27.39862602],[119.72629116,27.39772701],[119.72670804,27.39719997],[119.72729196,27.39659796],[119.72774592,27.39634803],[119.72885688,27.39594897],[119.73078504,27.39536001],[119.73139884,27.39503601],[119.73172104,27.39471201],[119.73186,27.39430503],[119.73174804,27.39397104],[119.73122892,27.39336804],[119.73102588,27.392877],[119.73108096,27.39247902],[119.73135888,27.39183102],[119.73150684,27.39131199],[119.73194208,27.39059001],[119.732535,27.38980296],[119.73310092,27.38929401],[119.73386988,27.38871],[119.73459204,27.38828502],[119.73533292,27.38796102],[119.73575016,27.38784096],[119.736639,27.38774898],[119.73764016,27.38762001],[119.73817692,27.38759202],[119.73876012,27.38749104],[119.73922092,27.38731698],[119.73705804,27.38656197],[119.73561696,27.38624202],[119.73342096,27.38639898],[119.73059892,27.38772504],[119.72883708,27.38960901],[119.72756916,27.390906],[119.72500704,27.39222504],[119.72209788,27.395172],[119.720457,27.39705399],[119.71918008,27.39765501],[119.71253412,27.39638502],[119.70886716,27.39529503],[119.70673812,27.392904],[119.70590292,27.39071898],[119.70561708,27.38968398],[119.70392184,27.38913597],[119.701332,27.38929698],[119.69911584,27.388989],[119.69733096,27.38832597],[119.69670816,27.38435796],[119.69443008,27.376596],[119.68597188,27.36988299],[119.67653088,27.36433899],[119.66718492,27.36200898],[119.65892688,27.36172503],[119.649627,27.36100404],[119.63872908,27.35871102],[119.63197008,27.356328],[119.628666,27.35487702],[119.62855296,27.35468298],[119.62694988,27.35278596],[119.62621404,27.35232102],[119.624589,27.34883001],[119.622429,27.34516602],[119.61927612,27.34337097],[119.614635,27.34438104],[119.61200196,27.34257699],[119.60826804,27.337347],[119.60769708,27.33451497],[119.607255,27.33124896],[119.60778096,27.32787198],[119.60761212,27.32002299],[119.60736804,27.31755501],[119.60867196,27.30999402],[119.60867988,27.30873303],[119.608488,27.30809601],[119.60764992,27.30769704],[119.60559792,27.30798099],[119.60232696,27.30935196],[119.599308,27.31048803],[119.59744716,27.31100103],[119.595717,27.31054401],[119.59421112,27.30904299],[119.59514208,27.30817503],[119.59665084,27.30629502],[119.59814988,27.30395196],[119.59861284,27.30162897],[119.60375616,27.30014496],[119.60996796,27.30003003],[119.614671,27.30179601],[119.61733608,27.30498804],[119.62151208,27.30630096],[119.62506204,27.30299796],[119.62859112,27.29876904],[119.62956096,27.29597499],[119.62798488,27.29507697],[119.62119708,27.29288304],[119.619684,27.29137104],[119.62017108,27.28513197],[119.620674,27.27547101],[119.61576792,27.26569998],[119.61799704,27.24450903],[119.61596484,27.23651298],[119.618352,27.22956903],[119.61751788,27.21832596],[119.61431388,27.21426102],[119.61133596,27.20881296],[119.603448,27.20255499],[119.596482,27.20133603],[119.59351596,27.20554002],[119.59063812,27.21318804],[119.58691896,27.21764304],[119.573946,27.22231197],[119.56423608,27.22392396],[119.55397608,27.223713],[119.54194704,27.22469796],[119.53102104,27.22841802],[119.52134316,27.23072697],[119.51238312,27.23095404],[119.50267212,27.23188599],[119.49416208,27.23003199],[119.48937912,27.22371399],[119.48121396,27.21541698],[119.47389516,27.21008196],[119.46642696,27.20888496],[119.44925208,27.19964196],[119.44506888,27.19652598],[119.43827604,27.19208601],[119.437929,27.188649],[119.43717516,27.17970399],[119.430207,27.17825598],[119.42150292,27.17936802],[119.41326288,27.17862903],[119.397537,27.176436],[119.39462892,27.19326798],[119.39989104,27.197523],[119.40693912,27.20174202],[119.41162488,27.20394],[119.42069004,27.20672802],[119.428407,27.20701503],[119.435202,27.21168801],[119.44026288,27.21869397],[119.43963,27.22353597],[119.43815004,27.235746],[119.43732708,27.24334902],[119.435769,27.25234596],[119.43766692,27.25597701],[119.43739008,27.26517501],[119.42863704,27.264456],[119.42370396,27.26226702],[119.41427592,27.25603803],[119.406276,27.25460496],[119.39914116,27.25728201],[119.39463504,27.26219898],[119.38305816,27.27231597],[119.371779,27.28402902],[119.36470392,27.289449],[119.35500192,27.293085],[119.33598204,27.29528298],[119.32856388,27.29772],[119.32292808,27.29897496],[119.314674,27.29890296],[119.31048288,27.29622402],[119.30880384,27.29142801],[119.30542092,27.28988604],[119.30100408,27.28859202],[119.29413708,27.29216799],[119.28604608,27.29829897],[119.28407292,27.29953197],[119.28389112,27.29935098],[119.28132684,27.29892996],[119.27895516,27.299034],[119.27721816,27.29891502],[119.27509812,27.29948004],[119.27335212,27.30101796],[119.271285,27.30215403],[119.26994688,27.30162798],[119.26834884,27.30093696],[119.26668204,27.30080799],[119.26564812,27.30103299],[119.26417212,27.30166002],[119.262627,27.30268197],[119.26156788,27.30380796],[119.25665388,27.30462102],[119.249424,27.30566304],[119.24276112,27.30947697],[119.240766,27.31321404],[119.24133012,27.31551804],[119.24344692,27.317799],[119.24595504,27.31995999],[119.24585892,27.32010696],[119.24500896,27.32205897],[119.24474904,27.323379],[119.24519112,27.32469804],[119.24529588,27.32755896],[119.244897,27.32956497],[119.24411616,27.33156396],[119.24275392,27.33310602],[119.24306712,27.33465798],[119.24350884,27.33609204],[119.24638092,27.33856803],[119.24739612,27.34011702],[119.24796096,27.34150401],[119.24788284,27.34373502],[119.24738892,27.345357],[119.250747,27.34580304],[119.25494712,27.34851204],[119.25551196,27.35081703],[119.25453096,27.35361099],[119.25356004,27.35640396],[119.25312588,27.35805996],[119.25336888,27.35843301],[119.25367308,27.36095796],[119.25389916,27.36503001],[119.25454104,27.36600201],[119.25575604,27.36692496],[119.25767484,27.36687897],[119.26172088,27.36688896],[119.26793808,27.36938502],[119.268945,27.37048599],[119.27130804,27.37336302],[119.27386188,27.37657701],[119.274939,27.37819296],[119.27532204,27.379224],[119.275191,27.38001996],[119.27465316,27.38352303],[119.273733,27.38718396],[119.271978,27.38964204],[119.27042388,27.39140298],[119.26823508,27.393291],[119.26494396,27.39556404],[119.263581,27.39790503],[119.26181016,27.40311198],[119.26095084,27.40615398],[119.25996192,27.41067099],[119.26007496,27.41336901],[119.26050912,27.41497704],[119.26056096,27.41514201],[119.26076112,27.41742297],[119.26212408,27.420642],[119.26550196,27.42105096],[119.267847,27.42147603],[119.26881108,27.422307],[119.26951488,27.42475203],[119.27065212,27.42708096],[119.27334492,27.430677],[119.27426616,27.43191297],[119.27450988,27.43353],[119.27644704,27.43551504],[119.277594,27.43826796],[119.27770704,27.43964199],[119.27743812,27.44036397],[119.27793312,27.441027],[119.28170412,27.45070398],[119.28503304,27.45764604],[119.291769,27.46164897],[119.29947984,27.46468098],[119.32212492,27.47427102],[119.327787,27.47764602],[119.33468388,27.480033],[119.34038088,27.48386601],[119.34279792,27.48757203],[119.34292212,27.48754998],[119.34339084,27.48761703],[119.34381492,27.48766203],[119.34437292,27.48770802],[119.34497484,27.48784302],[119.34524304,27.48802104],[119.34535392,27.48835602],[119.345265,27.48875598],[119.34493092,27.48895596],[119.34466308,27.489312],[119.34448416,27.48980097],[119.34430596,27.49024602],[119.34397188,27.49071303],[119.34390492,27.49104702],[119.34408312,27.491382],[119.34457416,27.49191696],[119.34501984,27.49207401],[119.34562212,27.49209696],[119.34626904,27.49218696],[119.34720612,27.49254498],[119.34765216,27.49276899],[119.34780804,27.49310298],[119.34778608,27.49348098],[119.34756288,27.49374801],[119.34722808,27.49401504],[119.34709596,27.49436703],[119.34699192,27.49492296],[119.34709596,27.49554999],[119.347236,27.49624596],[119.34709596,27.49666302],[119.34632988,27.49680099],[119.34528408,27.49725099],[119.34472608,27.49745898],[119.34469188,27.49787604],[119.34490104,27.49857201],[119.34462204,27.49916304],[119.34423792,27.49944096],[119.34392508,27.500067],[119.34371592,27.50114502],[119.34378504,27.502119],[119.34406404,27.50309397],[119.34402912,27.503685],[119.34413388,27.50438097],[119.34413388,27.50545998],[119.34361188,27.50566797],[119.34298404,27.50618799],[119.34211284,27.50681304],[119.34185904,27.50680404],[119.34483588,27.51050997],[119.35028088,27.51435504],[119.35585512,27.52003098],[119.36003796,27.52440003],[119.370375,27.53165304],[119.37681504,27.53497998],[119.38446108,27.53709102],[119.39495292,27.53926803],[119.40580512,27.53935596],[119.41667604,27.53966502],[119.42265096,27.536571],[119.42689896,27.53104401],[119.42730612,27.52573599],[119.42965512,27.51894099],[119.432853,27.51300999],[119.43847584,27.50878197],[119.44609884,27.51087096],[119.45170296,27.51353001],[119.45661192,27.51738102],[119.46652308,27.52644699],[119.47007088,27.53290602],[119.474649,27.53929602],[119.47716684,27.54581103],[119.47747896,27.55383498],[119.48285988,27.56431503],[119.48483304,27.57040101],[119.48344992,27.576225],[119.482308,27.585486],[119.48591592,27.59285196],[119.48871312,27.598806],[119.49109812,27.60083496],[119.49837984,27.60656004],[119.50093296,27.60822297],[119.50156512,27.60942699],[119.50182288,27.61073802],[119.50072092,27.61349004],[119.49974892,27.61503696],[119.49923196,27.61612497],[119.49877584,27.61762104],[119.49927804,27.62145504],[119.49875388,27.62392104],[119.49797196,27.62588403],[119.49964704,27.62770698],[119.500191,27.62885304],[119.49947208,27.631413],[119.50045884,27.64064799],[119.50132896,27.64479402],[119.50140816,27.64826298],[119.50118604,27.64988802],[119.50480404,27.64958004],[119.50791408,27.64974501],[119.511486,27.65345103],[119.51331084,27.65319003],[119.51420796,27.65295702],[119.51562888,27.65134899],[119.51665488,27.65048796],[119.52043992,27.65008602],[119.52177804,27.65083797],[119.52325296,27.65203299],[119.524401,27.65397996],[119.52471312,27.65603997],[119.52456804,27.65867904],[119.52514584,27.65953998],[119.52591408,27.66028797],[119.52726012,27.66045096],[119.52931212,27.65982096],[119.53707408,27.65890503],[119.53777392,27.65929896],[119.53937916,27.65993004],[119.54052684,27.66113703],[119.54190204,27.66391902],[119.54196288,27.66655503],[119.540997,27.66958299],[119.53897416,27.672561],[119.53913688,27.673497],[119.53917504,27.67536297],[119.54076408,27.67489704],[119.54350188,27.67513698],[119.54428488,27.67440897],[119.54456604,27.67239198],[119.54518992,27.67123296],[119.54613204,27.67050099],[119.54931984,27.67015602],[119.549943,27.66943098],[119.55067308,27.66582603],[119.54985192,27.66468897],[119.55015612,27.66382596],[119.55174588,27.66308004],[119.55368592,27.66361797],[119.55496392,27.66345597],[119.55671388,27.66270798],[119.556864,27.66244401],[119.55898296,27.66296403],[119.56189212,27.66545001],[119.56293396,27.66566097],[119.56394988,27.66471498],[119.56651992,27.66373704],[119.56834404,27.66416301],[119.57123412,27.66572496],[119.57360508,27.66729798],[119.57442588,27.669132],[119.57520708,27.67045401],[119.57681088,27.67064598],[119.57893488,27.66985101],[119.58106788,27.66670002],[119.58190596,27.66607299],[119.583963,27.66515598],[119.58576012,27.664875],[119.58929604,27.66476196],[119.59276392,27.665685],[119.59500492,27.66688398],[119.59571412,27.66797298],[119.59640712,27.67044204],[119.59692588,27.67118499],[119.59859592,27.67107303],[119.60122608,27.67211001],[119.60626212,27.67475502],[119.60835408,27.67478499],[119.61019296,27.67467996],[119.61041904,27.67459302],[119.61228492,27.67367304],[119.61453312,27.67305402],[119.61524484,27.67374],[119.61768492,27.67391703],[119.619369,27.67340799],[119.62039284,27.67266],[119.62168704,27.67077099],[119.62310184,27.67037499],[119.626263,27.66969702],[119.62954584,27.66942],[119.63289096,27.66920004],[119.63514888,27.66868902]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"寿宁县","id":8,"province":"福建省","code":350924,"centroid":[119.499438591626,27.4209752764495],"center":[119.449438591626,27.4209752764495]}},{"type":"Feature","id":"ningde_polygon.7","geometry":{"type":"MultiPolygon","coordinates":[[[[120.14649288,26.49283299],[120.14609292,26.492364],[120.14600004,26.49165399],[120.14636688,26.491095],[120.14640108,26.49051297],[120.14609292,26.489862],[120.14496396,26.489007],[120.14397288,26.48856303],[120.14339112,26.48801502],[120.14294688,26.48681604],[120.14174988,26.48493297],[120.14031312,26.48376999],[120.13774812,26.48319102],[120.13607196,26.48343303],[120.13552512,26.48312496],[120.13490916,26.48326302],[120.13443,26.48401803],[120.13412292,26.485389],[120.13446492,26.48648502],[120.13472808,26.48733804],[120.134646,26.48810601],[120.13366104,26.48953296],[120.13256592,26.49046599],[120.13227612,26.49179997],[120.13265196,26.49265596],[120.13360992,26.492895],[120.13494408,26.49282498],[120.13750908,26.49330099],[120.13997184,26.49367503],[120.14127108,26.49456396],[120.14240004,26.495694],[120.14274204,26.496756],[120.14390484,26.49791898],[120.145068,26.49795201],[120.14602488,26.49743604],[120.14646912,26.49654396],[120.14694792,26.49445299],[120.146958,26.49329802],[120.14649288,26.49283299]]],[[[119.98845216,26.49937896],[119.98861488,26.49925404],[119.98883088,26.49925404],[119.98903788,26.49910203],[119.98917288,26.49886002],[119.98918188,26.49840201],[119.98906488,26.497872],[119.98872288,26.49757401],[119.98855116,26.49743901],[119.98851516,26.49725901],[119.98855116,26.49709701],[119.98849716,26.496819],[119.98812816,26.49640401],[119.98791108,26.49633201],[119.98765008,26.49634902],[119.98748808,26.49644703],[119.98738008,26.49673503],[119.98715508,26.49679704],[119.98701108,26.49674304],[119.98676808,26.49649896],[119.986425,26.49644397],[119.986092,26.49643398],[119.98575,26.49675699],[119.985687,26.497161],[119.98584,26.49744],[119.986209,26.497836],[119.986353,26.49807],[119.98629,26.498223],[119.986092,26.49827601],[119.985777,26.49830202],[119.985489,26.49845403],[119.985246,26.49851604],[119.98484892,26.49849696],[119.98470492,26.49855996],[119.98462392,26.49879297],[119.98471392,26.49916197],[119.98493892,26.49929697],[119.98508292,26.49930696],[119.985201,26.49930696],[119.985264,26.49938796],[119.98516392,26.49958299],[119.98512,26.49981204],[119.985228,26.500014],[119.985606,26.50035897],[119.98639008,26.50058604],[119.98720908,26.50065102],[119.98759716,26.50092201],[119.98784016,26.501031],[119.98820016,26.501094],[119.98856088,26.50096098],[119.98868688,26.50062897],[119.98870488,26.50011696],[119.98849788,26.49964896],[119.98845216,26.49937896]]],[[[120.07185696,26.51875704],[120.07131588,26.51481801],[120.07142388,26.51190399],[120.07126188,26.50888197],[120.07007388,26.50650597],[120.06764316,26.50407498],[120.06699408,26.50180698],[120.06667008,26.49857004],[120.06607608,26.49748896],[120.06196992,26.494515],[120.05986212,26.49402504],[120.05883612,26.49418497],[120.05818704,26.49515499],[120.05705196,26.49590802],[120.05494488,26.49595797],[120.052026,26.49541203],[120.05121492,26.49568104],[120.05045892,26.49611097],[120.04921512,26.495838],[120.04813404,26.49459402],[120.04775496,26.491896],[120.04656588,26.49049002],[120.043971,26.48924298],[120.04077996,26.48918097],[120.037374,26.48917296],[120.03439896,26.48878704],[120.031533,26.48915703],[120.02893704,26.49076902],[120.02715216,26.492382],[120.02661108,26.49421503],[120.02644908,26.49750597],[120.02736888,26.49875004],[120.02893704,26.499402],[120.031425,26.50000203],[120.03283188,26.500869],[120.03353496,26.50232799],[120.03423804,26.505459],[120.03526584,26.50691898],[120.036564,26.50908096],[120.036348,26.51053698],[120.03526584,26.51177502],[120.03353604,26.51328099],[120.03353604,26.51419899],[120.03434712,26.51500998],[120.036132,26.51593203],[120.04121484,26.51680899],[120.042783,26.51745996],[120.04451388,26.51902902],[120.04678404,26.51984397],[120.04921692,26.52022701],[120.05240616,26.51931702],[120.05472996,26.51824197],[120.05624304,26.51689602],[120.05748612,26.51625099],[120.05845884,26.51619897],[120.05894484,26.51657796],[120.05948592,26.52003198],[120.060243,26.52240798],[120.06202608,26.52408396],[120.06456516,26.52500502],[120.06758988,26.52474096],[120.07007496,26.52339501],[120.07158696,26.52129297],[120.07185696,26.51875704]]],[[[120.14692704,26.54379603],[120.14659908,26.54261703],[120.14670888,26.54157501],[120.14731008,26.54080596],[120.147912,26.53948899],[120.14914284,26.53885701],[120.14979912,26.53863597],[120.15029196,26.53800498],[120.15154908,26.53704297],[120.15185004,26.53649397],[120.15201492,26.53545204],[120.15258912,26.53438104],[120.15330012,26.53380504],[120.15360108,26.53309098],[120.15330012,26.53257096],[120.15206892,26.53251804],[120.15133092,26.53246404],[120.14979912,26.53213797],[120.14906004,26.53181001],[120.14845812,26.53109802],[120.14807508,26.53022097],[120.14785584,26.52906996],[120.14769204,26.52835698],[120.14700804,26.52797403],[120.14514792,26.52811398],[120.14421804,26.52808797],[120.143124,26.52800796],[120.14219412,26.52839298],[120.14134596,26.52864102],[120.13880112,26.52861699],[120.13729596,26.52850899],[120.13570908,26.52848397],[120.13439616,26.52900696],[120.13302708,26.52969402],[120.13267212,26.530434],[120.13275384,26.53147602],[120.13321896,26.53235298],[120.13395804,26.53262604],[120.134943,26.53262496],[120.13529904,26.53218603],[120.13587396,26.53210296],[120.13811712,26.533197],[120.13940304,26.53459398],[120.14011512,26.53612803],[120.14003304,26.53771896],[120.13948584,26.53873398],[120.13841916,26.54018901],[120.13792596,26.54092998],[120.13795404,26.54197101],[120.13863804,26.54246403],[120.13951392,26.54262702],[120.14019792,26.54243496],[120.14148312,26.54281701],[120.142359,26.543007],[120.14348004,26.54281404],[120.14454708,26.54349804],[120.14520408,26.54467596],[120.145806,26.54503101],[120.14632584,26.54508501],[120.14692704,26.54478297],[120.14709192,26.54442603],[120.14692704,26.54379603]]],[[[120.00524688,26.54666001],[120.00565908,26.54630496],[120.00667716,26.546472],[120.00849192,26.54702604],[120.01025088,26.54686701],[120.01102092,26.54640297],[120.01148784,26.54530803],[120.01168008,26.54418402],[120.01128192,26.54260596],[120.01015404,26.54169804],[120.00891708,26.54136504],[120.007845,26.54081397],[120.007323,26.540154],[120.00723984,26.53946802],[120.00729492,26.53867296],[120.00746016,26.53754904],[120.00732192,26.53683597],[120.00671712,26.53620399],[120.00535596,26.53547301],[120.00398112,26.53423497],[120.00293712,26.53316199],[120.00164508,26.53269201],[119.99961,26.532549],[119.998098,26.532819],[119.99768616,26.53374996],[119.99793312,26.53460001],[119.99845584,26.53594596],[119.999844,26.53695099],[120.00058704,26.53859799],[120.00138408,26.54049204],[120.00220884,26.54170101],[120.00297888,26.54307504],[120.00297888,26.54430804],[120.00256704,26.54619903],[120.00273192,26.54721396],[120.00204396,26.54817201],[120.00207204,26.54902197],[120.00196188,26.54976204],[120.00174192,26.550666],[120.00192084,26.55199701],[120.00291084,26.553096],[120.00376296,26.55320904],[120.00524796,26.55310302],[120.00675996,26.55250497],[120.00761208,26.55204102],[120.00785904,26.55163098],[120.00791412,26.550918],[120.00774888,26.55006696],[120.00741912,26.54929899],[120.00684204,26.54844696],[120.00612708,26.54784099],[120.00538512,26.54737299],[120.00524688,26.54666001]]],[[[119.97681084,26.55124497],[119.97670608,26.55059499],[119.97612504,26.55017199],[119.97545688,26.55024102],[119.97468288,26.55055404],[119.97427788,26.55090396],[119.97410292,26.55115002],[119.97373284,26.55120096],[119.97341604,26.55116496],[119.97301212,26.55076104],[119.97269496,26.55067203],[119.97206208,26.55063504],[119.97139392,26.550774],[119.97111204,26.550738],[119.97067284,26.55064899],[119.96972316,26.55057699],[119.96879112,26.55068004],[119.96814096,26.55097596],[119.96799984,26.55150201],[119.96833392,26.55199503],[119.96937108,26.55236601],[119.96938908,26.55284004],[119.96977608,26.55334998],[119.97178092,26.55410904],[119.97225612,26.55463698],[119.973276,26.55520101],[119.97454212,26.55546804],[119.975229,26.55534699],[119.97535104,26.555049],[119.975211,26.55473301],[119.97522792,26.55450396],[119.97547488,26.55415404],[119.975967,26.55376902],[119.976336,26.55320904],[119.97668808,26.55217404],[119.97681084,26.55124497]]],[[[120.16212192,26.55674001],[120.16249308,26.55590598],[120.16330308,26.55546597],[120.16409004,26.55524502],[120.16474704,26.55480501],[120.16481184,26.55427896],[120.16455012,26.55375201],[120.16374012,26.55307404],[120.16282104,26.55274698],[120.16247112,26.55246204],[120.16249308,26.55215496],[120.16266804,26.551782],[120.16345608,26.55142902],[120.163653,26.55116604],[120.16367388,26.55081504],[120.16345608,26.55055197],[120.16306188,26.55039897],[120.16185804,26.55033498],[120.161115,26.55053397],[120.16076508,26.55092997],[120.16013004,26.55119403],[120.158883,26.55121797],[120.15748296,26.55113301],[120.15684792,26.55100197],[120.15599508,26.55058698],[120.15553608,26.55019296],[120.15498888,26.55003996],[120.15442008,26.55008496],[120.15358812,26.55052497],[120.15290988,26.55050499],[120.15225396,26.550396],[120.15155304,26.55033102],[120.14991216,26.55064098],[120.149037,26.55110304],[120.14838,26.55160902],[120.148227,26.552574],[120.14833716,26.55285903],[120.14884008,26.55285804],[120.14925588,26.553033],[120.14949708,26.553888],[120.14930016,26.55445896],[120.14945316,26.55516096],[120.15004392,26.55561996],[120.15087588,26.55603603],[120.15170712,26.55629802],[120.15236304,26.556165],[120.15343512,26.55644796],[120.15439812,26.55714897],[120.15520812,26.55795897],[120.15636804,26.55848304],[120.15682704,26.55892098],[120.15671796,26.55973296],[120.15634608,26.56083096],[120.15647712,26.56192698],[120.15704592,26.56234296],[120.15848988,26.56249398],[120.15916812,26.56227303],[120.15978084,26.56163601],[120.16039392,26.56005597],[120.160656,26.55840996],[120.16124604,26.55770697],[120.16183716,26.557443],[120.16212192,26.55674001]]],[[[120.16781712,26.573859],[120.16697616,26.57149902],[120.16478988,26.57040696],[120.16260396,26.57058003],[120.16075392,26.57134197],[120.15831492,26.57151504],[120.15528696,26.57025504],[120.15326916,26.57000601],[120.15074592,26.56874502],[120.14990496,26.56689201],[120.14973612,26.56402497],[120.15057708,26.561916],[120.15040896,26.56023003],[120.14881092,26.55854604],[120.14561412,26.55661203],[120.14081892,26.55316197],[120.13593912,26.55097704],[120.13181604,26.55148797],[120.12643008,26.55469701],[120.121632,26.55925398],[120.118518,26.56389402],[120.11767596,26.56692999],[120.11792904,26.56912203],[120.11927616,26.57030103],[120.12525288,26.57510298],[120.13106112,26.57779497],[120.13459488,26.58141603],[120.13543692,26.58495699],[120.13678296,26.58807504],[120.13922304,26.59077],[120.14401896,26.59447296],[120.1473,26.59767201],[120.15083196,26.60255703],[120.15377604,26.604576],[120.15739296,26.60583402],[120.162942,26.60557104],[120.168576,26.60244102],[120.17109888,26.59889502],[120.17185488,26.59408704],[120.17109708,26.58768003],[120.16781712,26.573859]]],[[[120.10512492,26.610282],[120.10537692,26.61007203],[120.10579704,26.61007203],[120.10649796,26.61017004],[120.10718412,26.61014196],[120.10758984,26.61005799],[120.10805208,26.61011397],[120.10855716,26.61011298],[120.10878108,26.609931],[120.10883688,26.60979096],[120.10872492,26.60962302],[120.10866912,26.60946804],[120.10893516,26.60935599],[120.11006988,26.60986098],[120.11053212,26.61009903],[120.11102208,26.61007104],[120.11165208,26.61026697],[120.11239512,26.61035004],[120.11280084,26.61021],[120.11296896,26.61000003],[120.113109,26.60953698],[120.11299704,26.60917203],[120.11236704,26.60842899],[120.11142816,26.60781303],[120.11047596,26.60730804],[120.10948092,26.60699997],[120.10813596,26.60664996],[120.10607712,26.60620104],[120.10484412,26.60596299],[120.10377888,26.60603301],[120.10310604,26.60639796],[120.10289688,26.60687496],[120.10257396,26.60707098],[120.10215384,26.60705703],[120.10177512,26.60702904],[120.10131288,26.607015],[120.100977,26.60711301],[120.10080888,26.60760396],[120.10101912,26.60836104],[120.101355,26.60867001],[120.10209804,26.60892201],[120.102336,26.60916096],[120.10239216,26.60958099],[120.102813,26.61003],[120.10314888,26.61029604],[120.104046,26.61043698],[120.10494204,26.610507],[120.10512492,26.610282]]],[[[120.35732004,26.64692199],[120.35806092,26.64684099],[120.35907504,26.64717201],[120.36126888,26.64692901],[120.36154392,26.64640899],[120.36159792,26.64597096],[120.36137904,26.64555903],[120.36151584,26.64523098],[120.36239388,26.64479403],[120.36335292,26.644275],[120.36365496,26.64378297],[120.36379212,26.64271503],[120.36409308,26.64178398],[120.364614,26.64082602],[120.36546396,26.64041598],[120.36625992,26.64047196],[120.36782196,26.64121401],[120.36875508,26.64195498],[120.36974112,26.64206604],[120.370509,26.64195696],[120.37130388,26.641575],[120.37199004,26.64091899],[120.37218192,26.64039798],[120.37212612,26.63974098],[120.371715,26.63952102],[120.37133196,26.63946603],[120.37092012,26.63900001],[120.37059108,26.638479],[120.37020696,26.63817696],[120.36957696,26.63812197],[120.36916512,26.63790201],[120.36911112,26.63749098],[120.36933,26.63705304],[120.36985092,26.636643],[120.369906,26.63623197],[120.36971412,26.63551998],[120.36905604,26.634834],[120.36793104,26.63469603],[120.36612204,26.63540496],[120.36568284,26.63526699],[120.36450384,26.63515602],[120.36321504,26.63548299],[120.36242016,26.63597502],[120.36195396,26.63698698],[120.36217392,26.638056],[120.36220092,26.63874099],[120.36143304,26.63926002],[120.36069288,26.63912196],[120.36033612,26.63862804],[120.36008988,26.638299],[120.35970504,26.63829801],[120.359349,26.63848998],[120.35913012,26.63876304],[120.35863584,26.63870796],[120.35805984,26.63843301],[120.357621,26.637939],[120.35682612,26.63760897],[120.35633184,26.63768997],[120.35581092,26.63799102],[120.35572884,26.63862003],[120.35531808,26.638839],[120.35476908,26.63881101],[120.35441196,26.63859096],[120.354111,26.63815203],[120.35367216,26.63774001],[120.352959,26.63760204],[120.35227284,26.63771103],[120.351834,26.63825796],[120.35175192,26.63907903],[120.35145096,26.639955],[120.35087496,26.64069399],[120.35059992,26.64165204],[120.35068308,26.64252801],[120.35101212,26.64340596],[120.35166984,26.64381798],[120.35287692,26.64436698],[120.35367288,26.64502596],[120.35446812,26.64579402],[120.35498904,26.64686403],[120.35545488,26.64727497],[120.35622312,26.64749601],[120.35693592,26.64738702],[120.35732004,26.64692199]]],[[[120.32646588,26.65354401],[120.326904,26.65328202],[120.32802396,26.653635],[120.32861616,26.65372401],[120.32927496,26.65355004],[120.32953812,26.65302399],[120.32951616,26.652411],[120.32958204,26.65181898],[120.32988912,26.65173204],[120.33059112,26.65217196],[120.33111492,26.65252899],[120.33168804,26.65259001],[120.33206316,26.65233801],[120.33214884,26.65175796],[120.33214884,26.65121004],[120.33175392,26.65020204],[120.33124884,26.64943398],[120.33054684,26.648622],[120.32938404,26.64789696],[120.32822088,26.64756603],[120.32686008,26.647344],[120.32556588,26.64734103],[120.32455608,26.64720801],[120.32394192,26.64690003],[120.32334396,26.64635697],[120.32271288,26.64597798],[120.32216388,26.64584496],[120.32135208,26.64582201],[120.32078112,26.64606204],[120.32039412,26.64660204],[120.32043912,26.64718596],[120.32071704,26.64742896],[120.32108604,26.64746496],[120.32126604,26.64776196],[120.32103204,26.64822798],[120.32106012,26.64961299],[120.32223012,26.65156401],[120.32341488,26.65235502],[120.32405208,26.65338597],[120.32491788,26.65390203],[120.32584812,26.65392102],[120.32646588,26.65354401]]],[[[119.80099188,26.684172],[119.80197684,26.68408902],[119.80263312,26.684307],[119.80400112,26.68430502],[119.80476684,26.68416597],[119.80534104,26.68386402],[119.80610712,26.68372596],[119.80728396,26.68350402],[119.80949904,26.68232097],[119.81029212,26.68147002],[119.81116692,26.68039902],[119.81217888,26.67995802],[119.81365596,26.67976398],[119.81455812,26.67924099],[119.81551608,26.67822399],[119.81661012,26.67800304],[119.817594,26.67857697],[119.818278,26.67857598],[119.81874312,26.67819096],[119.81890692,26.67772503],[119.81844216,26.67720402],[119.818332,26.67654603],[119.81841408,26.67586104],[119.81926188,26.67536496],[119.81994588,26.67541896],[119.82052008,26.676405],[119.82109392,26.67662397],[119.82169584,26.676513],[119.82248892,26.67695004],[119.823228,26.67741498],[119.82421188,26.67713904],[119.82462192,26.676837],[119.824677,26.67619197],[119.82459492,26.67578103],[119.82434904,26.67556197],[119.82404808,26.67512403],[119.82423888,26.674794],[119.824731,26.67473802],[119.82629016,26.67462597],[119.82727404,26.67443202],[119.82751992,26.67412998],[119.82749292,26.67360897],[119.82708288,26.67308796],[119.826891,26.67297897],[119.82648096,26.67256803],[119.82645396,26.67202002],[119.82601584,26.67160998],[119.82522312,26.67158397],[119.82481308,26.67131001],[119.82391092,26.67117501],[119.82298104,26.671122],[119.82229704,26.67043701],[119.821887,26.66939598],[119.82174984,26.66849103],[119.821203,26.66731302],[119.81986308,26.66701404],[119.81887812,26.66696103],[119.81794896,26.66668797],[119.81704608,26.66600397],[119.816253,26.66520999],[119.81513196,26.66507499],[119.813382,26.66529801],[119.81231496,26.66603997],[119.81168604,26.66700099],[119.81171304,26.66787804],[119.81288988,26.66845197],[119.81412,26.66921796],[119.81436696,26.67015],[119.81390112,26.67130299],[119.81275308,26.67237399],[119.810538,26.67358503],[119.809116,26.67372399],[119.80758384,26.67349404],[119.80613412,26.67366099],[119.80435608,26.67486996],[119.80222308,26.67599802],[119.80123812,26.67676698],[119.80069092,26.67748104],[119.79970596,26.67808602],[119.79880308,26.67940398],[119.79768096,26.68003596],[119.79696996,26.68039398],[119.79688788,26.68116204],[119.79702504,26.68151799],[119.79768204,26.68179096],[119.79795492,26.68217499],[119.79768204,26.68286097],[119.79759996,26.68373901],[119.79806508,26.68409397],[119.79905004,26.68436703],[119.79992484,26.68433904],[119.80099188,26.684172]]],[[[119.95269192,26.69092497],[119.95279884,26.68990698],[119.95188696,26.68861998],[119.94995592,26.68743801],[119.94657804,26.68502097],[119.944701,26.68517901],[119.94401988,26.684856],[119.94366204,26.68408803],[119.94407388,26.68326597],[119.94491484,26.68217904],[119.94405696,26.68030299],[119.94159096,26.67847797],[119.94121512,26.67762],[119.94121512,26.67649599],[119.94148296,26.67451401],[119.94083388,26.67322296],[119.93944608,26.67258297],[119.93885604,26.67177801],[119.93917788,26.670654],[119.94496704,26.66675304],[119.94786288,26.661456],[119.94764796,26.66049102],[119.94673608,26.65973997],[119.94491304,26.66005803],[119.94051708,26.66053296],[119.93767596,26.66208204],[119.93665788,26.66416896],[119.93622912,26.665722],[119.93547888,26.66630997],[119.93403204,26.66657601],[119.93322816,26.66609298],[119.93215608,26.66502099],[119.93081688,26.66442996],[119.92862016,26.66415996],[119.92679784,26.66458701],[119.92620888,26.66581803],[119.92669092,26.66780001],[119.92733388,26.66871099],[119.92706604,26.67047904],[119.92615596,26.67267396],[119.92594212,26.67438801],[119.925567,26.67502998],[119.924442,26.67508299],[119.92321008,26.67492099],[119.92139388,26.67512898],[119.91976596,26.67517101],[119.91833604,26.67475701],[119.91684996,26.67469203],[119.91555216,26.67534498],[119.91442788,26.67721896],[119.91169692,26.67845097],[119.90880684,26.67893202],[119.90789712,26.68037796],[119.90799216,26.68151304],[119.90757492,26.68236903],[119.90618496,26.68262796],[119.904633,26.68230603],[119.90399004,26.68278897],[119.90404404,26.68407399],[119.905596,26.68503798],[119.90629188,26.68605597],[119.90591712,26.68793103],[119.90677392,26.689752],[119.90811204,26.69098401],[119.90939688,26.69119803],[119.910681,26.69071698],[119.91292992,26.69103801],[119.91651696,26.69237901],[119.91962304,26.69221998],[119.92256784,26.69056101],[119.92754988,26.69083398],[119.93248008,26.69100003],[119.93666004,26.69191596],[119.93966208,26.69427702],[119.94137712,26.69438601],[119.94432588,26.69423004],[119.95081488,26.69247504],[119.95269192,26.69092497]]],[[[120.12724116,26.69587902],[120.12721308,26.69505804],[120.12745896,26.69470101],[120.127842,26.69461902],[120.12825204,26.69459103],[120.12874416,26.69491899],[120.12910992,26.69519601],[120.12938208,26.69526],[120.12966216,26.695116],[120.12975504,26.69488596],[120.12969708,26.69459904],[120.12984108,26.69439798],[120.13017012,26.694189],[120.13046388,26.69413896],[120.131505,26.69521797],[120.13289892,26.695791],[120.13399188,26.69576202],[120.13511292,26.69526801],[120.13571412,26.69441796],[120.135933,26.69280201],[120.13634196,26.69236299],[120.13691688,26.69217003],[120.13795512,26.69219703],[120.14003196,26.69183802],[120.140496,26.69128902],[120.14087904,26.69013801],[120.14076888,26.68865904],[120.13997688,26.68677003],[120.13891092,26.68551201],[120.13740792,26.684226],[120.13634196,26.68389903],[120.13513884,26.68373604],[120.13445592,26.68403799],[120.13371792,26.68480596],[120.13328088,26.68562802],[120.13309008,26.68642299],[120.13281612,26.68691601],[120.13213284,26.68708197],[120.13147692,26.68702797],[120.13032888,26.686728],[120.12904404,26.68692096],[120.12683004,26.68763502],[120.12469812,26.68887],[120.12360408,26.69002101],[120.122838,26.69095296],[120.122811,26.69144598],[120.12240096,26.691885],[120.12149916,26.69240601],[120.12122592,26.69284404],[120.12103404,26.69358402],[120.12108912,26.69424102],[120.121335,26.69470704],[120.12177204,26.695008],[120.12341292,26.69525298],[120.12385104,26.69517],[120.124233,26.695197],[120.12439788,26.69544396],[120.12458904,26.69615604],[120.12505308,26.69651199],[120.12631092,26.696565],[120.12685812,26.69626296],[120.12724116,26.69587902]]],[[[120.36099492,26.70685902],[120.36146616,26.70647499],[120.36228012,26.70656103],[120.36300912,26.70647697],[120.36360888,26.70579297],[120.36339396,26.70502203],[120.36373704,26.70412401],[120.36510792,26.70408297],[120.36673584,26.70451398],[120.36767904,26.70417297],[120.36788892,26.70330798],[120.36763512,26.70246099],[120.36814992,26.70211899],[120.36922092,26.701992],[120.37050612,26.70147999],[120.37153392,26.70032601],[120.37200516,26.69929902],[120.37186296,26.69793804],[120.37097196,26.69718402],[120.36918996,26.69711301],[120.366963,26.69673303],[120.36506508,26.69715],[120.36339396,26.69676201],[120.36266496,26.69594796],[120.36155112,26.69470497],[120.35992284,26.69457402],[120.35876616,26.69525703],[120.35760912,26.69499801],[120.35632392,26.69414004],[120.35456604,26.69246802],[120.35310912,26.69160897],[120.35173788,26.69049396],[120.35109492,26.69027904],[120.35032308,26.69027796],[120.34985184,26.69104701],[120.34972404,26.69297301],[120.35015208,26.69429997],[120.35046816,26.69486499],[120.35046996,26.69536098],[120.34989504,26.69571198],[120.34878084,26.69566698],[120.34706688,26.69515101],[120.345309,26.69549004],[120.34449504,26.69621598],[120.34454292,26.69744898],[120.34515996,26.698545],[120.34512504,26.69912703],[120.34437084,26.6994],[120.34423404,26.70018696],[120.344967,26.70173802],[120.34625292,26.703324],[120.34719612,26.703711],[120.34792404,26.70324102],[120.34796688,26.70247098],[120.34779984,26.70156297],[120.34862316,26.70146199],[120.35037096,26.70191001],[120.35266812,26.70287301],[120.353796,26.70462099],[120.35525292,26.70624999],[120.35760984,26.70783804],[120.35923812,26.708868],[120.360267,26.70869799],[120.36082392,26.70784299],[120.36099492,26.70685902]]],[[[120.16339092,26.79876702],[120.16318212,26.79811902],[120.16218492,26.79696396],[120.16118916,26.79619401],[120.15862812,26.79500601],[120.15619812,26.79452001],[120.15314712,26.79464799],[120.15208008,26.79519303],[120.15085716,26.79519501],[120.150315,26.79491502],[120.14934408,26.79419799],[120.14763084,26.79414804],[120.14577684,26.794134],[120.14406396,26.793891],[120.14273412,26.79375204],[120.142035,26.79410403],[120.14179092,26.79487596],[120.14149284,26.79508701],[120.140811,26.79514002],[120.14014608,26.79531597],[120.13944696,26.79572097],[120.13899192,26.79636996],[120.13918488,26.79754401],[120.14014716,26.79833196],[120.14152812,26.79889104],[120.14331192,26.799327],[120.14413416,26.79979896],[120.14507808,26.80002504],[120.14602308,26.79972597],[120.14798112,26.798706],[120.14881992,26.79840702],[120.15056808,26.79870204],[120.15200196,26.79915501],[120.152457,26.79938298],[120.15247392,26.79997896],[120.15218592,26.80064496],[120.15218592,26.80127703],[120.15265788,26.80206498],[120.15407412,26.80283403],[120.15599688,26.80295301],[120.15727308,26.80314399],[120.16002708,26.80408602],[120.16090116,26.80399602],[120.16181016,26.80343397],[120.16184508,26.80271496],[120.161583,26.80227702],[120.16088316,26.80191],[120.16077804,26.801595],[120.160953,26.80110396],[120.16173996,26.80062903],[120.16256112,26.80029396],[120.16320804,26.799381],[120.16339092,26.79876702]]],[[[120.13472988,26.83062396],[120.13427484,26.83037898],[120.13397784,26.83050201],[120.13374996,26.83044999],[120.13362792,26.83029204],[120.13378488,26.82990702],[120.13343496,26.82922302],[120.13194888,26.82834804],[120.13037388,26.82810504],[120.12825708,26.82810702],[120.12750504,26.82814302],[120.127032,26.82789804],[120.126717,26.82726696],[120.12622704,26.82672399],[120.12575508,26.82660096],[120.12487992,26.82695304],[120.12337512,26.82702396],[120.12176484,26.82683298],[120.11935896,26.82701001],[120.11878116,26.82680004],[120.11804604,26.82613404],[120.11708304,26.82595899],[120.11652288,26.82632799],[120.11643612,26.82734499],[120.11717088,26.82858897],[120.11829984,26.82921996],[120.12194088,26.83062],[120.12447816,26.83084599],[120.12565392,26.830458],[120.12647292,26.83044],[120.12829992,26.830872],[120.13162416,26.83150398],[120.13364592,26.83178298],[120.13458984,26.83160604],[120.13480008,26.83116801],[120.13472988,26.83062396]]],[[[120.54728412,26.85188304],[120.54661308,26.85176703],[120.546072,26.85190104],[120.54526884,26.85276702],[120.54448008,26.85443904],[120.54408588,26.85609504],[120.54407184,26.85766302],[120.54442212,26.85909798],[120.54480192,26.85962502],[120.54521088,26.859726],[120.54557592,26.85972501],[120.54594096,26.85946104],[120.54621888,26.85907899],[120.54636504,26.85840498],[120.54627684,26.85780396],[120.54613104,26.85736503],[120.54613104,26.85695499],[120.54632112,26.85619296],[120.54693384,26.85531204],[120.547854,26.85443103],[120.54811716,26.85404997],[120.54829212,26.853507],[120.548322,26.853111],[120.54813192,26.852643],[120.54770784,26.85214602],[120.54728412,26.85188304]]],[[[120.22346808,26.87283396],[120.22138296,26.87221998],[120.21960708,26.87222196],[120.21871788,26.87294196],[120.21738588,26.87517],[120.21619104,26.87715801],[120.21537096,26.87774103],[120.21475608,26.87825502],[120.21475608,26.87907699],[120.21530292,26.87962401],[120.21567804,26.880651],[120.21653304,26.88236199],[120.21847992,26.88393501],[120.22022304,26.88496002],[120.22213608,26.885403],[120.22343496,26.88656598],[120.22466508,26.887113],[120.22640712,26.88717996],[120.22869708,26.88751998],[120.22975692,26.88741603],[120.23050896,26.88703902],[120.23054316,26.886114],[120.22996212,26.88539598],[120.22876512,26.88495102],[120.22828704,26.88419898],[120.22845804,26.88337602],[120.22938108,26.88275898],[120.22934688,26.88217704],[120.22900488,26.88166404],[120.22849188,26.88138999],[120.22849188,26.88094503],[120.22866288,26.88029397],[120.22927812,26.88005403],[120.23016696,26.88001902],[120.23050788,26.87970996],[120.23054208,26.87905998],[120.23009784,26.87810103],[120.22893612,26.87645799],[120.22743204,26.875467],[120.22562088,26.87430402],[120.22346808,26.87283396]]],[[[120.26851596,26.93328498],[120.268215,26.93295603],[120.26788596,26.93262699],[120.266928,26.93238003],[120.26646216,26.93177703],[120.26561292,26.93051604],[120.26457288,26.92991304],[120.26399688,26.92936503],[120.26166984,26.92692603],[120.26016396,26.92615797],[120.25898712,26.92569204],[120.25832904,26.92511703],[120.25827504,26.92476099],[120.25835712,26.92445904],[120.25895904,26.92443204],[120.26035512,26.92478898],[120.26103984,26.92462401],[120.26153304,26.92399401],[120.26221704,26.92391202],[120.26309292,26.92424097],[120.26500992,26.92451601],[120.26679012,26.92544796],[120.26785788,26.92553103],[120.26873484,26.92512099],[120.26917296,26.924463],[120.26939184,26.92333998],[120.26941884,26.92235403],[120.268926,26.92139499],[120.26706408,26.92120203],[120.26629692,26.92139301],[120.26607804,26.92106496],[120.26594088,26.92016001],[120.26547504,26.91944802],[120.26550312,26.91862596],[120.26569392,26.91761202],[120.26514708,26.91676296],[120.264435,26.91659799],[120.26372292,26.91698103],[120.26331216,26.91793998],[120.26281896,26.91826902],[120.26224404,26.91815904],[120.26166912,26.91769302],[120.26079288,26.91780201],[120.260115,26.91875097],[120.25931508,26.91887004],[120.258603,26.91867897],[120.25801296,26.91819],[120.25753488,26.91832203],[120.25671408,26.917911],[120.25641312,26.91733599],[120.25649484,26.91678798],[120.25615212,26.91651402],[120.25560492,26.91618498],[120.25481112,26.916075],[120.25390788,26.91686997],[120.25352484,26.91700704],[120.25292292,26.91686997],[120.25245708,26.91623997],[120.25210212,26.91495198],[120.25158192,26.91396603],[120.25045908,26.91358299],[120.24911808,26.91369198],[120.247641,26.91404901],[120.24731304,26.914761],[120.24712116,26.91552798],[120.24788796,26.91991197],[120.24857196,26.92084302],[120.24974808,26.92161],[120.25119888,26.922213],[120.25243008,26.92254096],[120.25267704,26.92300698],[120.25256796,26.92355499],[120.25174608,26.92391103],[120.25073412,26.92385604],[120.24944784,26.924679],[120.24862704,26.92577502],[120.24880488,26.92695303],[120.24951588,26.92730898],[120.24978984,26.92829502],[120.24973512,26.92947303],[120.24896904,26.93045997],[120.24861696,26.93191203],[120.24875412,26.93345301],[120.24948996,26.93413098],[120.25047492,26.93437704],[120.25156896,26.93399301],[120.25340316,26.93259603],[120.253896,26.93150001],[120.25520892,26.93106198],[120.25613988,26.93111697],[120.25690596,26.93081502],[120.25734408,26.93037699],[120.257892,26.930268],[120.25830204,26.93059596],[120.25860408,26.93133603],[120.259179,26.931555],[120.25953504,26.93251404],[120.25964412,26.93355597],[120.26002788,26.93410398],[120.26054808,26.93435004],[120.26139696,26.93418597],[120.26183508,26.93380302],[120.26205396,26.93331],[120.26235492,26.93311803],[120.26282004,26.93331],[120.26391588,26.93383101],[120.26591496,26.93407797],[120.26791404,26.93435301],[120.26903688,26.93534004],[120.26985804,26.93545002],[120.27054312,26.93514897],[120.27095388,26.93471103],[120.27114612,26.93402604],[120.27092688,26.93345103],[120.26851596,26.93328498]]],[[[120.25250712,26.93950299],[120.25325808,26.93915604],[120.25377396,26.939358],[120.25406592,26.93934603],[120.25459296,26.93923398],[120.25471608,26.93888604],[120.25461492,26.93852703],[120.25447992,26.93818998],[120.25451412,26.93785401],[120.25481688,26.93762901],[120.25556784,26.93756196],[120.256308,26.93778696],[120.25764216,26.93825802],[120.258315,26.93889801],[120.25884204,26.93929104],[120.259548,26.93913399],[120.25983996,26.93845998],[120.25953684,26.93765196],[120.25892016,26.93677698],[120.25802304,26.93591298],[120.25714896,26.935452],[120.25602684,26.93522799],[120.25490616,26.93513799],[120.253662,26.93552004],[120.25216008,26.93696697],[120.25152108,26.93741598],[120.25041084,26.93774196],[120.24969408,26.93823597],[120.24953712,26.93850498],[120.24970488,26.93902104],[120.25005192,26.93923398],[120.25050084,26.93925702],[120.25108404,26.93962701],[120.25161,26.93970603],[120.25250712,26.93950299]]],[[[119.92705488,27.10837404],[119.92746312,27.10420002],[119.92705884,27.10038897],[119.929302,27.09960399],[119.93045508,27.09857601],[119.93141592,27.09634203],[119.93165784,27.096057],[119.93346108,27.09544401],[119.94005412,27.09230103],[119.95261092,27.09085797],[119.95494012,27.09017604],[119.95962588,27.08495298],[119.96389512,27.08140896],[119.97072288,27.07734501],[119.97686412,27.07628904],[119.98154412,27.06951897],[119.985912,27.06919299],[119.98911492,27.07302699],[119.99156796,27.07710804],[119.99804292,27.07834302],[120.00443004,27.07562304],[120.010617,27.07620201],[120.01786596,27.07502697],[120.02414004,27.07221303],[120.03067404,27.06940998],[120.03645888,27.06543297],[120.04411212,27.05943996],[120.05116308,27.056187],[120.05584884,27.05447502],[120.05973396,27.05343201],[120.06699012,27.051786],[120.07420884,27.05128398],[120.08060892,27.05191002],[120.08522808,27.05202504],[120.09008808,27.05238],[120.09519108,27.05342598],[120.09952908,27.05445198],[120.10467204,27.05411799],[120.10929408,27.05377104],[120.11369796,27.05272803],[120.11633316,27.05003496],[120.11894208,27.04871799],[120.11905404,27.04871997],[120.12016608,27.049464],[120.12074496,27.05043996],[120.12049404,27.05273496],[120.11897088,27.05749497],[120.11788188,27.05990904],[120.11801904,27.06133698],[120.11872788,27.06368796],[120.12013692,27.06591699],[120.12122592,27.06620004],[120.12326712,27.06436404],[120.129453,27.064485],[120.13093584,27.06704001],[120.13215408,27.06841602],[120.13273296,27.06886998],[120.13439184,27.06869403],[120.13630308,27.06765696],[120.13790112,27.06730902],[120.13853184,27.06756003],[120.13908588,27.06894099],[120.14149392,27.07405002],[120.14422092,27.07686801],[120.14719092,27.08038197],[120.14946792,27.081351],[120.15148608,27.08231598],[120.15379692,27.08213796],[120.15712188,27.08221104],[120.16024596,27.08067501],[120.16386396,27.07937901],[120.16801908,27.07763202],[120.171645,27.07656201],[120.175497,27.07596],[120.17882088,27.07603398],[120.18268116,27.07566003],[120.18733812,27.07415397],[120.19022892,27.07169103],[120.19009896,27.06755598],[120.18783096,27.06635502],[120.18579696,27.06562296],[120.18301812,27.064413],[120.178647,27.06500502],[120.17451888,27.06606099],[120.17167992,27.06691698],[120.169161,27.06548301],[120.16639116,27.06381504],[120.16396692,27.05939703],[120.16444212,27.05228496],[120.16537704,27.04679298],[120.167307,27.04247397],[120.16918512,27.03952701],[120.172041,27.03821499],[120.17645496,27.03624399],[120.18031488,27.03540996],[120.18528288,27.03207501],[120.18949812,27.02826396],[120.19167108,27.02417697],[120.19386888,27.019404],[120.19585104,27.01278396],[120.19830084,27.00824499],[120.202785,27.00375102],[120.20645592,27.00107703],[120.212379,26.99983098],[120.21625908,26.99876898],[120.22090992,26.99726499],[120.22449696,26.99734797],[120.23110008,26.99910396],[120.234384,27.00078804],[120.23669808,27.00038097],[120.23851896,26.999505],[120.24059904,26.99886303],[120.241917,26.99728704],[120.24515088,26.99230797],[120.24554004,26.98772301],[120.24715284,26.98523298],[120.25110708,26.98187796],[120.25598184,26.97663204],[120.25261584,26.97439797],[120.25093392,26.97315399],[120.25027404,26.97198201],[120.25056888,26.97066504],[120.25261512,26.96612598],[120.25319688,26.96465997],[120.253275,26.96356197],[120.25256292,26.962524],[120.251592,26.96198796],[120.25012608,26.961111],[120.24903312,26.96039703],[120.24840888,26.95933602],[120.24786204,26.95765203],[120.247272,26.95556601],[120.24669096,26.95443102],[120.24636192,26.95318497],[120.24643104,26.95183002],[120.24647388,26.95047597],[120.24573696,26.94595698],[120.24383796,26.940429],[120.24362088,26.93951298],[120.24380304,26.93885499],[120.24431388,26.93867202],[120.24522504,26.93896299],[120.246543,26.93958498],[120.24734904,26.93984103],[120.24789588,26.93976696],[120.24815616,26.93954799],[120.248442,26.93899899],[120.24852012,26.93819403],[120.24833796,26.93709504],[120.24789588,26.93599704],[120.24734904,26.93438604],[120.24716688,26.93321604],[120.24756504,26.92964601],[120.24763488,26.92682802],[120.24720108,26.924814],[120.24624708,26.92353303],[120.24474696,26.92225296],[120.24087084,26.92042299],[120.23886888,26.91903501],[120.237516,26.91786303],[120.23619804,26.91502704],[120.23458596,26.91070902],[120.23389188,26.90909802],[120.23319888,26.90789004],[120.23261784,26.90745201],[120.23192484,26.90723304],[120.23075484,26.90723403],[120.22968888,26.90767404],[120.22789608,26.90786799],[120.225411,26.90815599],[120.22410708,26.90881101],[120.22443396,26.91023904],[120.22581888,26.91166698],[120.22611084,26.91309501],[120.22530516,26.91368199],[120.22428312,26.91401301],[120.22300908,26.91426996],[120.220965,26.91427302],[120.21833196,26.91402003],[120.21592392,26.91382104],[120.21449508,26.91404199],[120.21347304,26.91451899],[120.21201,26.91507303],[120.21139404,26.91598698],[120.21007788,26.91606303],[120.20836392,26.91595404],[120.20004288,26.91470403],[120.19686588,26.91419796],[120.19394808,26.91394704],[120.192372,26.91398601],[120.19004388,26.91464796],[120.18639096,26.91688896],[120.18347496,26.91923796],[120.18204612,26.92004598],[120.18059208,26.92039599],[120.175443,26.920332],[120.17147004,26.91997299],[120.16869084,26.91992403],[120.16650096,26.92003896],[120.165039,26.91993096],[120.16062396,26.91876699],[120.156174,26.91784098],[120.15416592,26.91810099],[120.151242,26.91872199],[120.14949816,26.91975897],[120.14857296,26.92076697],[120.147939,26.92177497],[120.14746308,26.92233297],[120.14688204,26.92265103],[120.14614188,26.92251999],[120.14540496,26.922087],[120.13843284,26.91528804],[120.13645896,26.91415701],[120.13525512,26.91382896],[120.13434504,26.91386703],[120.13346196,26.91408699],[120.13255188,26.91482004],[120.13134804,26.91643203],[120.13024788,26.91793503],[120.12831612,26.91974997],[120.12678288,26.92040904],[120.12414912,26.92055898],[120.12101208,26.92019502],[120.11874192,26.91887904],[120.117285,26.91668304],[120.11713812,26.91485298],[120.11757012,26.90818902],[120.11786496,26.90584704],[120.12020496,26.89958502],[120.12166908,26.89555698],[120.12180696,26.89153101],[120.12129612,26.88801696],[120.11976108,26.88486804],[120.118158,26.88285699],[120.11435316,26.88073704],[120.11098896,26.87890599],[120.10960188,26.87773698],[120.107043,26.87510196],[120.10367808,26.87297697],[120.099879,26.87151402],[120.09709512,26.871147],[120.09263508,26.871768],[120.08809584,26.87184],[120.08348712,26.871543],[120.07931004,26.87044104],[120.07608804,26.86912002],[120.07243188,26.86581999],[120.07059912,26.863695],[120.06774,26.86244499],[120.06312696,26.86210704],[120.05821584,26.86275801],[120.05447904,26.86370103],[120.05095788,26.86384098],[120.048462,26.86398102],[120.04560108,26.86368204],[120.04252308,26.86286898],[120.03988788,26.86161897],[120.03790392,26.86022199],[120.03687792,26.85787704],[120.036069,26.85436101],[120.03599916,26.850699],[120.03687684,26.84572398],[120.03951204,26.83625004],[120.041199,26.83164204],[120.04296408,26.82827802],[120.04508592,26.82615996],[120.04692012,26.82506601],[120.05058996,26.82434304],[120.05381484,26.824131],[120.073671,26.82339399],[120.08260584,26.82230796],[120.08921904,26.82384498],[120.094668,26.82540504],[120.10244904,26.82680796],[120.10478292,26.82369297],[120.10338216,26.82166797],[120.09746916,26.81839701],[120.094236,26.81466399],[120.09578004,26.80778196],[120.09709008,26.80309899],[120.09885012,26.79994998],[120.10068108,26.79738903],[120.102354,26.79570504],[120.10396788,26.79482601],[120.10565016,26.79453198],[120.10791312,26.79475104],[120.11412996,26.79749496],[120.11858496,26.798445],[120.12019704,26.79851502],[120.12180012,26.79814998],[120.12253704,26.79741801],[120.12385392,26.79587802],[120.12436512,26.794998],[120.12530904,26.79485202],[120.12852096,26.79433002],[120.13415892,26.79693498],[120.13650792,26.797788],[120.13761384,26.79777801],[120.13850196,26.79722901],[120.13931988,26.79495201],[120.139236,26.79275799],[120.13704396,26.78816898],[120.13316604,26.78598099],[120.12749712,26.78279796],[120.12411492,26.78100696],[120.122172,26.77944501],[120.12085404,26.77651803],[120.11917212,26.77410297],[120.11829804,26.77014297],[120.11617296,26.766711],[120.11449104,26.762868],[120.11142204,26.75935503],[120.10762404,26.75620899],[120.10673988,26.754525],[120.106818,26.75284101],[120.11427288,26.74343196],[120.11726088,26.743671],[120.12060384,26.74398699],[120.12283296,26.74247103],[120.12647508,26.74122696],[120.14845704,26.74998396],[120.151305,26.750637],[120.15342612,26.75055996],[120.15568584,26.75022804],[120.15692388,26.749566],[120.15758196,26.749053],[120.15816984,26.74788003],[120.15853416,26.74670904],[120.15809208,26.74443996],[120.15678492,26.74232001],[120.15393696,26.73998298],[120.15145188,26.73837702],[120.15049896,26.73676602],[120.15021312,26.73501003],[120.15042984,26.73449802],[120.15166788,26.73434799],[120.16028196,26.73539496],[120.16291284,26.73509904],[120.164445,26.73421704],[120.16524996,26.73311796],[120.16576008,26.73150597],[120.16582992,26.72828496],[120.16546596,26.72411301],[120.16393308,26.72067501],[120.16195992,26.717751],[120.15991692,26.71592301],[120.15032508,26.709516],[120.14336592,26.707833],[120.133224,26.70655104],[120.12795288,26.70536097],[120.12297912,26.70317298],[120.11529204,26.69742396],[120.11061096,26.69281497],[120.10981284,26.69135004],[120.10937112,26.68981401],[120.10937112,26.68842198],[120.10988196,26.68754601],[120.11213196,26.68643604],[120.11302692,26.68204998],[120.11362416,26.67686796],[120.11558508,26.67257298],[120.11653008,26.67191301],[120.11704092,26.67118104],[120.11733612,26.67022902],[120.11711904,26.66876598],[120.11624388,26.66558304],[120.11543712,26.66382597],[120.11573196,26.66177703],[120.116313,26.66067804],[120.11741316,26.65987299],[120.12076692,26.658846],[120.12338808,26.65942299],[120.12752592,26.66024802],[120.13096392,26.66190303],[120.13261812,26.66139102],[120.13255512,26.65935],[120.12758892,26.65552797],[120.12603516,26.65327797],[120.126546,26.65071603],[120.12727392,26.64903204],[120.12785388,26.64858996],[120.13238484,26.649612],[120.13735716,26.65139796],[120.139254,26.65139598],[120.14195508,26.65124703],[120.14348796,26.65036602],[120.14457912,26.64941103],[120.14480412,26.64765504],[120.14457912,26.64465399],[120.14297712,26.64209403],[120.138084,26.638002],[120.11901408,26.62876404],[120.10380696,26.620497],[120.09843216,26.61476103],[120.09391704,26.61368697],[120.08397996,26.61503598],[120.07922184,26.61627699],[120.07504512,26.61839496],[120.07314288,26.62029504],[120.07138896,26.62307496],[120.06977292,26.625852],[120.06808812,26.62746003],[120.06618516,26.62789797],[120.06369108,26.62767396],[120.05995392,26.62590996],[120.03077016,26.60794596],[120.007728,26.59562001],[119.99760696,26.59280796],[119.992464,26.592426],[119.98887012,26.59270797],[119.98388484,26.59349898],[119.97757692,26.59545801],[119.973906,26.59662],[119.96774784,26.59766499],[119.96194788,26.59691799],[119.95623504,26.595369],[119.95147188,26.59301703],[119.94692616,26.58971502],[119.945709,26.58649302],[119.94304104,26.58304701],[119.94201612,26.58022902],[119.93908788,26.57777202],[119.93798412,26.57656197],[119.93809392,26.57561796],[119.939481,26.57459196],[119.94082416,26.57369898],[119.94042096,26.57240199],[119.94091308,26.57034504],[119.94207696,26.567172],[119.94440508,26.56516302],[119.94829992,26.56423098],[119.94843384,26.56186101],[119.94762816,26.56065204],[119.94472512,26.56001403],[119.94431688,26.55880704],[119.94366492,26.55818397],[119.94190092,26.55711999],[119.93904288,26.55586998],[119.93758308,26.548605],[119.93717412,26.547615],[119.93637492,26.54651601],[119.93538492,26.54567298],[119.933622,26.54512398],[119.92783788,26.54462304],[119.924982,26.544438],[119.92194396,26.544033],[119.92040784,26.54359299],[119.91690108,26.54161497],[119.91180816,26.54000298],[119.90846016,26.53585101],[119.90415816,26.53316802],[119.90214792,26.53048503],[119.902482,26.52741099],[119.90036016,26.52265998],[119.896821,26.51841504],[119.89601388,26.51647599],[119.89495692,26.51523102],[119.89370808,26.51402502],[119.89203516,26.512965],[119.888343,26.51128398],[119.88468612,26.51006097],[119.88110808,26.50977099],[119.87690616,26.50973904],[119.87530308,26.50977801],[119.87201196,26.50919598],[119.869605,26.508798],[119.86700688,26.50887504],[119.86471188,26.50960998],[119.86098912,26.51051196],[119.85711912,26.51099301],[119.85361308,26.51209704],[119.85018408,26.51309199],[119.84821092,26.51364396],[119.84539788,26.51383197],[119.84233392,26.51380101],[119.839122,26.51422797],[119.83740912,26.51496201],[119.83573008,26.516538],[119.83482108,26.51807799],[119.83419792,26.51954202],[119.83343688,26.52104502],[119.832813,26.52181398],[119.83204296,26.52251004],[119.83110012,26.52280398],[119.83014792,26.52328296],[119.82956796,26.52375996],[119.82853584,26.52420699],[119.82786696,26.52505803],[119.82777804,26.52644403],[119.828763,26.52740199],[119.82942108,26.53157097],[119.83007916,26.53340103],[119.83051188,26.53449804],[119.83073688,26.53552197],[119.83022604,26.53676604],[119.82978504,26.53771896],[119.82956904,26.538525],[119.82963816,26.53947504],[119.83022712,26.54108397],[119.83153392,26.54280198],[119.83380192,26.54528598],[119.83548096,26.54755101],[119.83657212,26.54952498],[119.83678812,26.55172098],[119.83664988,26.55354996],[119.83599216,26.55574704],[119.83540392,26.557506],[119.83511016,26.55955503],[119.83497084,26.56116504],[119.83548204,26.56240704],[119.83620888,26.56339497],[119.83876308,26.56543896],[119.84212116,26.56740897],[119.84445792,26.56894104],[119.84554908,26.57076804],[119.84605992,26.57223198],[119.84635404,26.574354],[119.84605992,26.57655],[119.84540184,26.57794203],[119.84438088,26.57929797],[119.84358492,26.58112902],[119.84335992,26.582958],[119.84373216,26.58500802],[119.84452884,26.58705498],[119.84577588,26.58903003],[119.84781816,26.591148],[119.851974,26.59538502],[119.85504696,26.59750398],[119.85913296,26.59976496],[119.86264008,26.60078403],[119.86482204,26.60136597],[119.870451,26.60417703],[119.87498088,26.60702499],[119.87848116,26.609364],[119.88345384,26.61470199],[119.88615816,26.61572403],[119.88907812,26.61608799],[119.89054296,26.61601302],[119.89236312,26.616744],[119.89938492,26.62263396],[119.90194308,26.62453701],[119.90362608,26.62497504],[119.90618388,26.62497504],[119.90940192,26.62395102],[119.91423384,26.62175601],[119.91649896,26.62124499],[119.91847788,26.62131699],[119.92082112,26.62212402],[119.92308696,26.62329699],[119.92477104,26.623737],[119.927115,26.62373898],[119.92886892,26.623521],[119.931291,26.62271901],[119.934315,26.62340301],[119.93690196,26.62368597],[119.94032916,26.623062],[119.94242688,26.61985098],[119.94340608,26.61496101],[119.94487488,26.61272703],[119.94644988,26.612019],[119.948022,26.61257097],[119.94901308,26.61301098],[119.949561,26.61400197],[119.94993504,26.61513498],[119.94989112,26.61616098],[119.94963912,26.617185],[119.94949188,26.61853896],[119.949561,26.61947199],[119.94921396,26.624475],[119.95040304,26.62615404],[119.95411212,26.62762896],[119.95691184,26.628543],[119.958255,26.63028603],[119.95982892,26.634699],[119.96115084,26.63748396],[119.96114688,26.64143496],[119.95813908,26.64443097],[119.958003,26.64866196],[119.96073792,26.65330902],[119.96716392,26.65264203],[119.97017316,26.65292202],[119.97233604,26.654805],[119.97200592,26.656047],[119.97108396,26.65899198],[119.97024012,26.66125701],[119.97002304,26.66272203],[119.97002304,26.66425797],[119.97013608,26.665137],[119.97057096,26.66663802],[119.971233,26.66777499],[119.97288504,26.66940903],[119.97541692,26.67109698],[119.97713916,26.67289698],[119.97786996,26.67454596],[119.97809604,26.675388],[119.97776592,26.67633804],[119.97707004,26.677287],[119.97585216,26.67819897],[119.97387792,26.67943701],[119.97145116,26.68201101],[119.97057204,26.68332897],[119.96984196,26.685009],[119.96962488,26.68694796],[119.96966016,26.68819401],[119.97002484,26.69028003],[119.97057312,26.69156199],[119.971782,26.69284602],[119.97442692,26.69462802],[119.97681012,26.696466],[119.97894204,26.69906997],[119.98124784,26.70163902],[119.98348416,26.70383997],[119.985651,26.70505497],[119.98727604,26.707158],[119.98919196,26.71030296],[119.99069712,26.714403],[119.99398212,26.72055504],[120.00041316,26.72412399],[120.00930804,26.72565201],[120.01560192,26.72649],[120.01956984,26.72841303],[120.02025384,26.73073503],[120.02058216,26.73341604],[120.01999104,26.73425403],[120.01959,26.73535104],[120.01947696,26.73637704],[120.01955616,26.73747603],[120.02003388,26.73846504],[120.02058288,26.73908901],[120.02281884,26.74035603],[120.02715216,26.741979],[120.02949288,26.74359801],[120.03089292,26.74550601],[120.032433,26.74770399],[120.03404292,26.74858698],[120.03639084,26.74903401],[120.03880896,26.74904004],[120.04115796,26.74867896],[120.059487,26.76617802],[120.06183312,26.769258],[120.06293688,26.771823],[120.06307692,26.77438404],[120.06264204,26.77650597],[120.06161712,26.77928697],[120.06007884,26.781993],[120.058245,26.784405],[120.05634204,26.78593797],[120.054429,26.78659398],[120.05230788,26.78673501],[120.04607412,26.78503896],[120.037716,26.78311503],[120.03265296,26.78229603],[120.02898204,26.782065],[120.00909888,26.78259204],[120.000519,26.78198004],[119.99560212,26.78138199],[119.98994616,26.77997403],[119.98701288,26.77879296],[119.97960012,26.774928],[119.97696384,26.77419],[119.97388404,26.77403601],[119.97175392,26.77402998],[119.96948304,26.77468203],[119.96852688,26.77519197],[119.96771796,26.77628799],[119.96743104,26.777898],[119.96750088,26.77928904],[119.96779608,26.78031396],[119.96921592,26.78318604],[119.96889192,26.78609601],[119.96651592,26.78716899],[119.96251992,26.78683599],[119.95895592,26.78283801],[119.95485192,26.78293701],[119.94945516,26.78475897],[119.94308712,26.78474799],[119.93229792,26.78009598],[119.92928796,26.77801302],[119.92690908,26.77513698],[119.92555404,26.77337802],[119.92474692,26.77158504],[119.92466808,26.77019301],[119.92507596,26.76920598],[119.92610088,26.76792402],[119.92781988,26.766315],[119.92942584,26.76466998],[119.93071104,26.76317103],[119.93155308,26.76209103],[119.93360184,26.75795904],[119.93723208,26.75151999],[119.93832684,26.74929096],[119.93865696,26.74711197],[119.93854392,26.74451403],[119.938257,26.74206099],[119.93744916,26.74063197],[119.93619816,26.738946],[119.93546808,26.73773802],[119.93470416,26.73587097],[119.93242788,26.72915103],[119.93115096,26.72710101],[119.92975308,26.72545203],[119.926827,26.72321598],[119.92016808,26.71868997],[119.91313908,26.71305003],[119.91051,26.709975],[119.90823696,26.706168],[119.90699604,26.70302097],[119.90501784,26.69749299],[119.90326608,26.69559201],[119.90063016,26.69427297],[119.89917396,26.69317596],[119.899026,26.691858],[119.89968516,26.68959],[119.90092392,26.68548996],[119.903814,26.68079997],[119.90471004,26.67659004],[119.90179908,26.67381498],[119.90113992,26.671545],[119.90151288,26.66993499],[119.90275308,26.66796003],[119.90636388,26.66686104],[119.90877696,26.66417103],[119.90822508,26.661411],[119.90582208,26.65994301],[119.90435688,26.65899297],[119.90202408,26.65855197],[119.89938816,26.65782198],[119.89821708,26.65716399],[119.89434204,26.65397997],[119.89120392,26.652591],[119.88827496,26.65178802],[119.88703512,26.65083798],[119.88630684,26.649522],[119.885571,26.64820503],[119.88425304,26.647254],[119.88075312,26.64572004],[119.87680284,26.64396702],[119.87396208,26.64290898],[119.86971804,26.64262197],[119.86475616,26.64365499],[119.86139592,26.64541602],[119.85920604,26.64849402],[119.85789096,26.65303398],[119.857752,26.65757196],[119.85833304,26.65991502],[119.86286112,26.66729898],[119.86403004,26.67007998],[119.86403004,26.67139704],[119.86242012,26.67388797],[119.85249096,26.68210398],[119.84257116,26.68709799],[119.83658184,26.69003604],[119.83366512,26.69092101],[119.83045392,26.69092704],[119.82709512,26.690202],[119.82344292,26.68903704],[119.81965104,26.68802004],[119.81585088,26.68656204],[119.81308104,26.68569003],[119.810439,26.68418604],[119.80636308,26.68584699],[119.797488,26.68803003],[119.79317484,26.69400198],[119.79098388,26.698545],[119.78908704,26.70249897],[119.78777088,26.710407],[119.787192,26.72241102],[119.78571996,26.74014201],[119.78599896,26.75215899],[119.783808,26.77551498],[119.78132292,26.79001101],[119.78059608,26.80026102],[119.78277984,26.80875198],[119.78862804,26.81840799],[119.79622404,26.82359703],[119.80556784,26.82768303],[119.82600612,26.83335699],[119.83374504,26.83758798],[119.84703084,26.84331099],[119.850606,26.84484099],[119.85126408,26.84571903],[119.85141096,26.84681703],[119.85082308,26.84842803],[119.84900508,26.85202002],[119.84563008,26.85805101],[119.84330196,26.86031901],[119.84009904,26.864541],[119.83630104,26.87406102],[119.83267404,26.88105096],[119.82865104,26.89218702],[119.82736512,26.89912701],[119.82753108,26.89927002],[119.83183308,26.89951104],[119.83445496,26.89978896],[119.83560012,26.90077203],[119.83583304,26.90261496],[119.83349988,26.90640396],[119.83220892,26.90710398],[119.83408596,26.91495801],[119.83489992,26.91762696],[119.83330404,26.92102203],[119.83116312,26.92510101],[119.83256784,26.92897497],[119.835216,26.93026098],[119.83895388,26.93034603],[119.8431,26.93176704],[119.84519592,26.9334],[119.844513,26.93593503],[119.84141304,26.93902698],[119.83911696,26.94432699],[119.83847508,26.94854097],[119.83629708,26.95110804],[119.83484916,26.95298796],[119.83506912,26.95432698],[119.83733208,26.955117],[119.84200488,26.95518198],[119.84576616,26.956107],[119.848797,26.95771998],[119.85033708,26.95953402],[119.85037092,26.960877],[119.84837508,26.96327298],[119.84736096,26.967537],[119.850264,26.97150402],[119.85333804,26.97479604],[119.856969,26.97790797],[119.85869304,26.97955002],[119.86130808,26.97949296],[119.86266312,26.98131096],[119.86364412,26.98313697],[119.86534908,26.98398198],[119.86761708,26.98494003],[119.86545888,26.98834698],[119.86344108,26.98990299],[119.86122708,26.99039601],[119.86044912,26.99084196],[119.85861312,26.99084898],[119.85652116,26.994186],[119.85232212,26.99935299],[119.84658408,27.00455796],[119.83980708,27.00910296],[119.83323816,27.01180503],[119.82840012,27.01261998],[119.82603708,27.01084401],[119.82258288,27.00656802],[119.81950092,27.006417],[119.81629008,27.00994797],[119.81749392,27.01635399],[119.82054996,27.02408697],[119.822697,27.02770803],[119.82549312,27.03544803],[119.82822912,27.04135203],[119.82575304,27.04417398],[119.81835288,27.04505598],[119.81459592,27.04791303],[119.81302092,27.05530698],[119.81185308,27.05924502],[119.80812204,27.06279003],[119.79581004,27.07114896],[119.792421,27.07812504],[119.78276616,27.08666703],[119.78264304,27.088893],[119.78332092,27.09478998],[119.78607708,27.09421902],[119.78953416,27.09405099],[119.79140112,27.09429102],[119.79455292,27.09829503],[119.80524708,27.10445499],[119.813463,27.10493199],[119.82216312,27.10447704],[119.83595904,27.10319697],[119.84188788,27.104418],[119.841723,27.09867897],[119.83730796,27.08822403],[119.84296896,27.08899299],[119.84665608,27.09257202],[119.85088896,27.09682803],[119.86184088,27.10320696],[119.86751304,27.10443798],[119.87167896,27.10639701],[119.88478512,27.10744002],[119.88986292,27.10570104],[119.89851408,27.10341504],[119.90163096,27.10234503],[119.90226204,27.10278396],[119.90434212,27.10275003],[119.904975,27.10259001],[119.90760588,27.10570401],[119.90894004,27.10703898],[119.91278988,27.10833804],[119.91612996,27.10828098],[119.918556,27.109098],[119.920338,27.110016],[119.92451904,27.11027601],[119.92705488,27.10837404]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"霞浦县","id":9,"province":"福建省","code":350921,"centroid":[119.98664814781,26.8477826120164],"center":[119.93664814781,26.8477826120164]}},{"type":"Feature","id":"ningde_polygon.8","geometry":{"type":"MultiPolygon","coordinates":[[[[119.93170608,27.31616199],[119.932353,27.31637601],[119.93376492,27.315486],[119.93357304,27.31434399],[119.93128884,27.31265703],[119.93060304,27.31080402],[119.92862304,27.30856203],[119.92860612,27.30798504],[119.929239,27.307404],[119.93148,27.30707001],[119.93306004,27.30590397],[119.93562288,27.30585303],[119.93609196,27.30541896],[119.93637816,27.30383496],[119.93661288,27.30361599],[119.93747184,27.30262302],[119.939661,27.30205296],[119.94024312,27.30165003],[119.94027804,27.30159],[119.93922684,27.29878596],[119.93874912,27.29750004],[119.93758488,27.29289501],[119.93910516,27.29147499],[119.950983,27.28985904],[119.95767684,27.28788003],[119.960667,27.28319598],[119.96676288,27.27845199],[119.96769312,27.27426996],[119.96593596,27.26689797],[119.96884008,27.25897599],[119.97440712,27.25378101],[119.98257588,27.24900201],[119.98556784,27.24432003],[119.987604,27.24289299],[119.99336112,27.24106104],[119.99554416,27.24036696],[119.99604996,27.239292],[119.996631,27.23740497],[119.99740284,27.23579901],[119.99842812,27.23483304],[119.999583,27.23420304],[120.00099816,27.233577],[120.00247416,27.233406],[120.00520008,27.23467797],[120.00798396,27.23305797],[120.00946608,27.22745403],[120.012606,27.22050603],[120.01440996,27.21925899],[120.01609296,27.21899196],[120.02412492,27.21760704],[120.03063192,27.21571902],[120.03716484,27.21291498],[120.04500096,27.20968299],[120.04975692,27.20590803],[120.05326008,27.20117898],[120.05593812,27.19780704],[120.05817984,27.19212399],[120.06068292,27.18621801],[120.062394,27.180981],[120.06209808,27.17408403],[120.06248904,27.16972803],[120.062862,27.16629498],[120.06189792,27.16419996],[120.06147096,27.16143201],[120.05948088,27.15908202],[120.056247,27.15555204],[120.05189208,27.154746],[120.04738092,27.15507198],[120.04679016,27.15590502],[120.04467408,27.16156404],[120.04117704,27.16367697],[120.01292388,27.16450299],[120.01190508,27.16532397],[120.00856212,27.16692003],[120.00519504,27.16885098],[120.00424788,27.16825896],[120.00388716,27.16828398],[120.00059604,27.16933203],[119.99915712,27.17077203],[119.99199888,27.17460504],[119.97457488,27.182331],[119.96939304,27.18242703],[119.96829504,27.18013302],[119.97077508,27.17592102],[119.97161496,27.16850097],[119.97041904,27.16250598],[119.96665812,27.15748497],[119.96087508,27.15435297],[119.95922412,27.15068097],[119.96060616,27.14417604],[119.96513208,27.13899996],[119.97027396,27.13751604],[119.97344304,27.13977099],[119.97838584,27.13923702],[119.98039104,27.13136697],[119.98026,27.12723102],[119.97547488,27.12251403],[119.96930808,27.11460897],[119.96392392,27.10714599],[119.96064504,27.10078398],[119.95494012,27.09017604],[119.95261092,27.09085797],[119.94005412,27.09230103],[119.93346108,27.09544401],[119.93165784,27.096057],[119.93141592,27.09634203],[119.93045508,27.09857601],[119.929302,27.09960399],[119.92705884,27.10038897],[119.92746312,27.10420002],[119.92705488,27.10837404],[119.92451904,27.11027601],[119.920338,27.110016],[119.918556,27.109098],[119.91612996,27.10828098],[119.91278988,27.10833804],[119.90894004,27.10703898],[119.90760588,27.10570401],[119.904975,27.10259001],[119.90434212,27.10275003],[119.90226204,27.10278396],[119.90163096,27.10234503],[119.89851408,27.10341504],[119.88986292,27.10570104],[119.88478512,27.10744002],[119.87167896,27.10639701],[119.86751304,27.10443798],[119.86184088,27.10320696],[119.85088896,27.09682803],[119.84665608,27.09257202],[119.84296896,27.08899299],[119.83730796,27.08822403],[119.841723,27.09867897],[119.84188788,27.104418],[119.83595904,27.10319697],[119.82216312,27.10447704],[119.813463,27.10493199],[119.80524708,27.10445499],[119.79455292,27.09829503],[119.79140112,27.09429102],[119.78953416,27.09405099],[119.78607708,27.09421902],[119.78332092,27.09478998],[119.77853904,27.09507897],[119.77508808,27.09588798],[119.77358508,27.09643104],[119.77303608,27.09905301],[119.77061616,27.10558296],[119.77122312,27.10927404],[119.77392888,27.11430999],[119.772954,27.11664504],[119.76163092,27.11826198],[119.75089392,27.11824398],[119.74721688,27.11919402],[119.74491396,27.12062097],[119.74439592,27.12136401],[119.744334,27.122283],[119.74451796,27.12337101],[119.74554,27.12555],[119.74586004,27.12652299],[119.744892,27.1287],[119.74277088,27.13144698],[119.74239,27.13248198],[119.74200084,27.13316598],[119.74129992,27.13373703],[119.73796596,27.13488498],[119.73546288,27.13665501],[119.73476196,27.137277],[119.73373092,27.13859703],[119.73398292,27.13956903],[119.73385404,27.14145903],[119.73314412,27.14237901],[119.73212208,27.14283396],[119.73142692,27.143019],[119.72873412,27.14736096],[119.73210804,27.15840702],[119.73680712,27.16017102],[119.74151808,27.162396],[119.74375512,27.16929702],[119.74390308,27.17531199],[119.74085712,27.17768403],[119.73213216,27.18062604],[119.73011904,27.18297702],[119.73127788,27.18804798],[119.73347208,27.19309797],[119.73771216,27.19718496],[119.74188384,27.19849401],[119.74493016,27.19612197],[119.74731588,27.19564704],[119.750391,27.20255598],[119.75234292,27.20779704],[119.76007212,27.21726504],[119.76504912,27.22036104],[119.76803208,27.22580397],[119.77121412,27.22917303],[119.77393608,27.23439204],[119.77586208,27.240453],[119.775834,27.24070104],[119.77410096,27.243621],[119.77224696,27.24505704],[119.77007112,27.24620103],[119.76756588,27.24820803],[119.765061,27.25060104],[119.75726484,27.25582302],[119.75062896,27.25965603],[119.75173092,27.26241102],[119.75489784,27.26466399],[119.75901804,27.26411904],[119.76824304,27.26069499],[119.77289784,27.26059896],[119.77509996,27.26610903],[119.77364412,27.26984097],[119.77057584,27.27129303],[119.77201512,27.27576801],[119.77395408,27.277209],[119.77537104,27.27874701],[119.77628796,27.28012599],[119.77698708,27.28174401],[119.77751916,27.28282698],[119.778543,27.28452096],[119.77944084,27.28584],[119.78091684,27.28771704],[119.78207388,27.28923498],[119.78319096,27.290673],[119.78386884,27.29195199],[119.78438796,27.29303001],[119.784627,27.29416896],[119.78420904,27.29496897],[119.78313192,27.29573001],[119.78153604,27.29667096],[119.78091792,27.29689101],[119.77995996,27.29697201],[119.77903692,27.29732796],[119.77700796,27.29837403],[119.77595208,27.299061],[119.77523388,27.29904597],[119.77446708,27.29898297],[119.77321608,27.29926503],[119.772297,27.29972601],[119.77178616,27.30022596],[119.77155612,27.30089097],[119.77130088,27.30196503],[119.77114788,27.30305304],[119.77105896,27.30389697],[119.77064784,27.30483],[119.77056792,27.305676],[119.77162704,27.30645396],[119.77246512,27.30648897],[119.77338708,27.30642696],[119.77458912,27.30623202],[119.77537608,27.30587301],[119.77638696,27.305217],[119.77744896,27.30481704],[119.77876692,27.30436596],[119.78002296,27.30375099],[119.78156484,27.30340197],[119.78264808,27.30326697],[119.78440416,27.30311199],[119.78629308,27.30307896],[119.78728416,27.30308796],[119.788029,27.30285198],[119.78907012,27.30244203],[119.78973396,27.3024],[119.79046908,27.30260403],[119.79105084,27.30343203],[119.79162288,27.30462804],[119.79196992,27.305928],[119.79222516,27.30700197],[119.79234792,27.30806604],[119.79264384,27.30883302],[119.79287892,27.309825],[119.79324612,27.31036698],[119.793645,27.31061196],[119.79449208,27.31065201],[119.79574704,27.31043601],[119.79693108,27.31009599],[119.79879912,27.30946896],[119.80071792,27.30872997],[119.80230012,27.30800097],[119.80498392,27.306441],[119.80590516,27.30600603],[119.80713708,27.30547503],[119.80817712,27.30527901],[119.80897308,27.30500199],[119.80989216,27.304488],[119.81031192,27.30389499],[119.81061612,27.303075],[119.81081988,27.30233799],[119.81110608,27.30177396],[119.81190204,27.30059604],[119.81265696,27.29957103],[119.81367792,27.29865204],[119.81485008,27.29786904],[119.81619684,27.297252],[119.81759508,27.29676897],[119.818584,27.29629602],[119.81953296,27.29603898],[119.820339,27.29607804],[119.82111408,27.29643498],[119.82165516,27.29690496],[119.82197088,27.297486],[119.82201192,27.29840796],[119.82199212,27.29990304],[119.82208392,27.30085398],[119.82232908,27.30142701],[119.82265704,27.30177],[119.82277692,27.30181599],[119.82306888,27.30192498],[119.82352608,27.30201003],[119.82399516,27.302049],[119.82425292,27.30199104],[119.824515,27.30179601],[119.82465288,27.30161799],[119.82494412,27.30145104],[119.82532788,27.30140397],[119.82583116,27.30140901],[119.82623112,27.30147102],[119.82637908,27.30153402],[119.82657384,27.30163104],[119.82665988,27.30166596],[119.82688992,27.30163401],[119.82711312,27.30131496],[119.827062,27.30093696],[119.82671496,27.30054897],[119.82665412,27.30017997],[119.82704184,27.29985201],[119.82772512,27.29974797],[119.82909204,27.29977704],[119.83053096,27.29991699],[119.83158108,27.30040596],[119.83241808,27.30078297],[119.83387212,27.30127104],[119.83473396,27.30134196],[119.83578516,27.30114504],[119.83674888,27.30082203],[119.83824288,27.30005604],[119.83969188,27.29908098],[119.84014008,27.29892699],[119.84106888,27.29897604],[119.842191,27.29944503],[119.84268492,27.29985903],[119.84322204,27.30065004],[119.84376204,27.30187701],[119.84415984,27.30343203],[119.84481396,27.30534498],[119.84491512,27.30601998],[119.84483412,27.30664404],[119.84436792,27.30693402],[119.84335992,27.30715902],[119.84132304,27.30730698],[119.84012712,27.30769299],[119.838996,27.30809502],[119.83759308,27.30936096],[119.83647708,27.310563],[119.83505904,27.31177998],[119.83482,27.312165],[119.83482,27.31254804],[119.83507488,27.312948],[119.83615884,27.31411296],[119.83773708,27.31591701],[119.83941288,27.31822398],[119.84074992,27.32011596],[119.84185008,27.32145696],[119.84302404,27.32248503],[119.84432112,27.323388],[119.84538888,27.32394501],[119.84621796,27.32405598],[119.84726988,27.32355801],[119.84830596,27.32290101],[119.849103,27.32206797],[119.84962896,27.32097996],[119.849868,27.32040396],[119.85012288,27.320067],[119.85076116,27.31947498],[119.851686,27.31873698],[119.85310404,27.31771197],[119.85384204,27.31729599],[119.85439104,27.31679001],[119.85484104,27.31631103],[119.85527304,27.315504],[119.85550092,27.31498002],[119.85576192,27.31471704],[119.85615396,27.31467096],[119.85675516,27.31481397],[119.85718608,27.31523904],[119.85799608,27.31619403],[119.85860304,27.316737],[119.85915204,27.31701096],[119.85992892,27.31706802],[119.860623,27.316953],[119.862009,27.31629204],[119.86280604,27.31589802],[119.86409196,27.31545702],[119.86451712,27.31535802],[119.86498116,27.315423],[119.86545816,27.31555998],[119.86588908,27.31556601],[119.86713,27.31534101],[119.86771788,27.31518999],[119.86854084,27.31524696],[119.86972308,27.31536396],[119.87073,27.315441],[119.87129088,27.31540797],[119.87167716,27.31521699],[119.87202312,27.31480398],[119.87211492,27.31445703],[119.87212788,27.31403799],[119.87205588,27.31354596],[119.87188596,27.31315797],[119.871396,27.31250601],[119.87074188,27.311886],[119.87012808,27.31151898],[119.86953912,27.31123296],[119.86844904,27.31082697],[119.867652,27.31025799],[119.867004,27.30991896],[119.86583004,27.30961296],[119.86522596,27.30933603],[119.86489188,27.30886101],[119.86476912,27.30826404],[119.86474392,27.30751101],[119.864826,27.30688803],[119.86510392,27.30645396],[119.86561008,27.306216],[119.86694892,27.30609099],[119.86827192,27.30615498],[119.86932996,27.30633102],[119.87097408,27.306855],[119.87217504,27.30723804],[119.87278704,27.30733596],[119.87331012,27.30725298],[119.873727,27.306999],[119.87400384,27.30659697],[119.87405316,27.30605697],[119.87356284,27.30431403],[119.87338392,27.30321702],[119.87350596,27.30260304],[119.87383212,27.30197196],[119.87431416,27.30143898],[119.87489412,27.30095604],[119.875743,27.30066003],[119.87656812,27.30066696],[119.87732016,27.30096099],[119.87790012,27.301419],[119.87814492,27.30183597],[119.87817804,27.30335004],[119.878227,27.30589704],[119.87859492,27.30804102],[119.87897904,27.30960396],[119.87939016,27.31001904],[119.87986896,27.31015197],[119.88045684,27.31013496],[119.88115992,27.30987198],[119.88209088,27.30944601],[119.88270396,27.30941199],[119.88314496,27.30924801],[119.88338184,27.30906801],[119.883537,27.30872403],[119.883708,27.30819204],[119.88401112,27.30781503],[119.88441108,27.30749499],[119.88484416,27.30736404],[119.88534204,27.30751101],[119.88567792,27.30780504],[119.88579996,27.30836196],[119.88599616,27.30920499],[119.88647892,27.30979404],[119.886615,27.31049496],[119.88654408,27.31122603],[119.88630792,27.31249701],[119.88636912,27.312957],[119.88677808,27.31323303],[119.88728892,27.313407],[119.88762588,27.31332402],[119.888361,27.31281201],[119.88928008,27.31215699],[119.89022004,27.31157298],[119.89132308,27.31079403],[119.891916,27.31046598],[119.89225296,27.31038399],[119.89274292,27.310374],[119.89324404,27.31046598],[119.89416312,27.31087404],[119.89488888,27.31125303],[119.895471,27.31140603],[119.89619712,27.311508],[119.896983,27.31137498],[119.89775988,27.31103703],[119.89844496,27.31098501],[119.89881288,27.31111803],[119.89906092,27.31149396],[119.89923192,27.31229496],[119.899395,27.31336902],[119.89934388,27.31445397],[119.89941588,27.31489398],[119.89956888,27.31522203],[119.90007,27.31571298],[119.90104092,27.31642902],[119.90211408,27.31708404],[119.90329992,27.31761504],[119.90446488,27.31796298],[119.90567088,27.318321],[119.90618208,27.31829796],[119.90667312,27.31804497],[119.90713284,27.31774797],[119.90762388,27.31751298],[119.90816604,27.31754403],[119.90893212,27.31786101],[119.90950488,27.31815801],[119.91009816,27.31831101],[119.91088908,27.31817304],[119.911959,27.31785102],[119.91360492,27.31755699],[119.91494484,27.31697199],[119.91584484,27.31605201],[119.91662208,27.31529502],[119.91760416,27.314343],[119.91820788,27.313515],[119.91861612,27.31307499],[119.91900492,27.31293198],[119.91943512,27.31294197],[119.91989484,27.31325004],[119.92101192,27.31430799],[119.92104396,27.31463496],[119.92091292,27.31524102],[119.92070916,27.31569903],[119.92070916,27.31592799],[119.92092192,27.31615803],[119.92147812,27.316404],[119.92209984,27.31647798],[119.92335588,27.31635099],[119.92454208,27.31619601],[119.92711284,27.31625604],[119.927727,27.31592898],[119.928276,27.31565097],[119.92900392,27.31553703],[119.929896,27.31558698],[119.93095296,27.31581702],[119.93170608,27.31616199]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"柘荣县","id":10,"province":"福建省","code":350926,"centroid":[119.87763227398,27.2004442516615],"center":[119.82763227398,27.2004442516615]}},{"type":"Feature","id":"ningde_polygon.9","geometry":{"type":"MultiPolygon","coordinates":[[[[119.39462892,27.19326798],[119.397537,27.176436],[119.39523516,27.16840899],[119.39393196,27.16063299],[119.39136012,27.144108],[119.39420808,27.13586904],[119.398401,27.13042098],[119.39755788,27.12030696],[119.40050916,27.11277504],[119.40311304,27.110286],[119.40542208,27.11008602],[119.41579116,27.11802996],[119.41890408,27.11623302],[119.417724,27.11024901],[119.419623,27.10384596],[119.42458308,27.09817101],[119.426976,27.09834903],[119.43584208,27.09899901],[119.44433304,27.09903501],[119.45551212,27.10037304],[119.45801412,27.10017603],[119.45887092,27.09834498],[119.45266308,27.08702802],[119.45195208,27.08357598],[119.45184804,27.08019603],[119.44560384,27.07762896],[119.43546912,27.07425],[119.424825,27.07111098],[119.417202,27.06627096],[119.41425216,27.06267699],[119.41236108,27.05997303],[119.40085188,27.04719501],[119.39364504,27.03934899],[119.394279,27.03542697],[119.39802912,27.03233997],[119.40387984,27.03034404],[119.40697008,27.03048597],[119.41686108,27.03388797],[119.42737092,27.04071402],[119.43282312,27.042165],[119.43664488,27.04136598],[119.440197,27.040113],[119.44478808,27.03928896],[119.452608,27.03515103],[119.44692684,27.02682099],[119.44748916,27.02083104],[119.44809504,27.01598697],[119.45059704,27.01407402],[119.45287512,27.01309104],[119.46197304,27.00937098],[119.46858408,27.00756198],[119.47304016,27.00329103],[119.47541004,26.99747397],[119.47672512,26.99100198],[119.477529,26.98477398],[119.48007204,26.97688503],[119.48271804,26.97197796],[119.48568516,26.96889798],[119.48841792,26.96844096],[119.48390208,26.96234796],[119.47988412,26.95659003],[119.47876884,26.95673196],[119.47526388,26.95652298],[119.47118004,26.95534299],[119.46753684,26.95399002],[119.45681784,26.95055697],[119.45394216,26.94937698],[119.45068488,26.94715704],[119.44669392,26.94577302],[119.44161108,26.94328803],[119.43908316,26.94110598],[119.43787392,26.93875104],[119.43747,26.93534103],[119.43877896,26.92699497],[119.43888408,26.92416996],[119.43684504,26.921682],[119.43531216,26.91963],[119.435112,26.91799902],[119.436705,26.91514602],[119.436489,26.91277299],[119.43478692,26.910576],[119.42957088,26.90651097],[119.42902116,26.90589798],[119.42797896,26.90305299],[119.42774604,26.90283204],[119.42779716,26.90097102],[119.42736912,26.90030997],[119.42553204,26.89952598],[119.41529688,26.89695801],[119.41150896,26.894052],[119.41089588,26.89250202],[119.410857,26.89064496],[119.410335,26.88946497],[119.40915888,26.88866802],[119.40641388,26.888121],[119.40276888,26.88810804],[119.40087204,26.88851097],[119.40048396,26.88970599],[119.40054192,26.89245396],[119.40065316,26.89379001],[119.40140916,26.89429698],[119.40231996,26.89428204],[119.40365412,26.89470504],[119.40476292,26.89617303],[119.40496596,26.89795197],[119.40491016,26.89921602],[119.40418404,26.90011998],[119.40278508,26.90058996],[119.40129,26.90039196],[119.40010308,26.89914897],[119.398995,26.89768098],[119.39714784,26.89652304],[119.39514084,26.89566399],[119.39259096,26.89265997],[119.39124204,26.89156701],[119.39008788,26.891883],[119.38951692,26.89233804],[119.389464,26.89375104],[119.38966488,26.89538202],[119.38962708,26.89753698],[119.38859208,26.89956],[119.38688604,26.90122203],[119.38492692,26.902665],[119.38361004,26.90313201],[119.38186908,26.90315901],[119.37894192,26.90201601],[119.37602304,26.90124498],[119.37394296,26.90090604],[119.37136716,26.90072199],[119.36717892,26.89878096],[119.36590596,26.897463],[119.365965,26.89627302],[119.36667204,26.89440498],[119.36664,26.89284501],[119.36578104,26.89144596],[119.36392308,26.88991398],[119.36090808,26.88854796],[119.35757484,26.88785496],[119.34959796,26.88737904],[119.34238284,26.88763401],[119.34140616,26.88854004],[119.340594,26.88944301],[119.33977104,26.88975297],[119.33810784,26.88962796],[119.33623908,26.889084],[119.33584596,26.88948702],[119.32775712,26.89469802],[119.32240896,26.896635],[119.32335792,26.903511],[119.32765488,26.91101502],[119.32331508,26.912016],[119.31377292,26.91181602],[119.31227604,26.91251397],[119.30970384,26.91523998],[119.30711796,26.91729396],[119.305971,26.91630297],[119.304054,26.91431496],[119.30233608,26.914212],[119.29958496,26.91754596],[119.29625496,26.917947],[119.29343508,26.91755604],[119.28979116,26.91875601],[119.28573504,26.92058697],[119.28301092,26.92063998],[119.28118392,26.92051902],[119.27951208,26.91987597],[119.27933388,26.91928404],[119.27940912,26.91891099],[119.28080304,26.918073],[119.28377016,26.91713601],[119.28516012,26.91614898],[119.28539304,26.91532899],[119.28496608,26.91474102],[119.28297096,26.91454797],[119.28097008,26.91405801],[119.28012804,26.913402],[119.28010716,26.91236196],[119.280906,26.910864],[119.28236112,26.90898399],[119.28234312,26.90809299],[119.28091392,26.90714898],[119.27734308,26.90690598],[119.27475288,26.905905],[119.27136888,26.902539],[119.27109096,26.90155899],[119.26923588,26.90178498],[119.26796112,26.90227098],[119.26650204,26.902989],[119.26596888,26.903475],[119.26515816,26.90495703],[119.26434708,26.90593002],[119.26498896,26.90687304],[119.26845684,26.91031203],[119.27072592,26.91183699],[119.27140992,26.91286704],[119.27052288,26.91414297],[119.26882188,26.916102],[119.26783584,26.91656298],[119.26293192,26.91589599],[119.260584,26.917344],[119.26041588,26.91815904],[119.25954504,26.91902898],[119.25819792,26.92005399],[119.25585612,26.92145799],[119.25533412,26.922132],[119.25474408,26.92329804],[119.25349704,26.92487304],[119.25171216,26.92678104],[119.25153,26.927595],[119.25179712,26.92880298],[119.25240012,26.92951902],[119.25489888,26.931429],[119.25557316,26.93234196],[119.25592416,26.93325501],[119.256093,26.93401299],[119.25563004,26.93493999],[119.25488592,26.93575404],[119.25385488,26.936154],[119.25240084,26.93656899],[119.24976204,26.938044],[119.249397,26.93850696],[119.24936892,26.93919501],[119.24986104,26.94067002],[119.24963604,26.94113298],[119.24741808,26.94204702],[119.24632296,26.94267999],[119.24430984,26.94493197],[119.242746,26.94605103],[119.24259192,26.946612],[119.24277408,26.94737097],[119.24548308,26.95010796],[119.24607204,26.95087998],[119.24601588,26.95168098],[119.245707,26.952228],[119.244753,26.95270599],[119.24351784,26.95308597],[119.24295696,26.95346496],[119.24257788,26.95451904],[119.24239608,26.95553001],[119.24181,26.95666698],[119.241189,26.95745403],[119.24054388,26.95801698],[119.23909884,26.95862097],[119.23770996,26.95894497],[119.23520688,26.96017896],[119.23275312,26.95860801],[119.23004592,26.95428396],[119.22803496,26.94726],[119.22630408,26.94465198],[119.22476184,26.94315501],[119.21800896,26.93916198],[119.21078916,26.93724903],[119.20356216,26.93533698],[119.20054716,26.93769903],[119.19611196,26.94468996],[119.19555,26.95297401],[119.199726,26.95609899],[119.20619808,26.95894704],[119.20807908,26.96281299],[119.199969,26.966205],[119.19288312,26.97003603],[119.18555388,26.97387201],[119.17649412,26.98050303],[119.167902,26.99347203],[119.16740016,26.99338203],[119.16613512,26.99361198],[119.16487908,26.99361702],[119.16362304,26.99384499],[119.162367,26.99429004],[119.16111096,26.99519796],[119.15985492,26.99632899],[119.15932608,26.99678097],[119.15592984,26.99877699],[119.15563608,26.999928],[119.15522892,27.00479997],[119.154501,27.00882801],[119.15308008,27.00985302],[119.15180712,27.01016298],[119.14924212,27.01019799],[119.14755192,27.01091898],[119.14750008,27.01094103],[119.14671996,27.01180998],[119.14626096,27.01310904],[119.14640892,27.01487403],[119.14675488,27.01545903],[119.14815096,27.01781496],[119.14817688,27.01785204],[119.14845408,27.018324],[119.14861896,27.02097504],[119.14742304,27.02218104],[119.14689492,27.022716],[119.14578504,27.02302398],[119.14483212,27.02375199],[119.14478892,27.02620296],[119.144763,27.02825703],[119.14439904,27.028674],[119.14333308,27.02993004],[119.141262,27.03039102],[119.13918192,27.03041604],[119.13746508,27.03029697],[119.13582708,27.03018402],[119.13377292,27.03106503],[119.13146712,27.03298896],[119.13061716,27.03369798],[119.12821596,27.03665898],[119.12779116,27.03717999],[119.12657688,27.04092597],[119.12532012,27.04224096],[119.12388912,27.04326201],[119.12392404,27.04498596],[119.12457384,27.04626603],[119.12444388,27.04753998],[119.12318712,27.04885002],[119.121435,27.049878],[119.12033304,27.05075397],[119.11987404,27.05219604],[119.11989096,27.05309703],[119.12487804,27.05375196],[119.12998608,27.05480901],[119.13259608,27.05539203],[119.13509196,27.055971],[119.13642792,27.05632101],[119.13743304,27.05776596],[119.13584688,27.06509799],[119.13446088,27.07099398],[119.131947,27.07355799],[119.12963184,27.07527303],[119.12873112,27.07653096],[119.12807988,27.07761303],[119.127474,27.08105796],[119.127708,27.08426403],[119.12768208,27.08741898],[119.12863608,27.08833797],[119.13068304,27.08897598],[119.13451488,27.08893503],[119.13886584,27.08860797],[119.14391916,27.08788203],[119.14698708,27.08841402],[119.14876296,27.08950797],[119.15023608,27.08991504],[119.15201304,27.09026604],[119.15514108,27.09119403],[119.15622396,27.091998],[119.15698608,27.09281097],[119.15729784,27.09332199],[119.15805996,27.09338004],[119.15871012,27.09275598],[119.15954208,27.09241497],[119.16038196,27.09207702],[119.16125712,27.09287703],[119.16272088,27.09403101],[119.16334512,27.09609498],[119.16193284,27.09781398],[119.16077292,27.09895797],[119.160504,27.09992502],[119.16042588,27.10210401],[119.16116316,27.10629702],[119.16134496,27.10755504],[119.16248904,27.108936],[119.16452412,27.11020698],[119.16694188,27.11095101],[119.16975708,27.11068299],[119.17243296,27.11149002],[119.17389708,27.112581],[119.17522296,27.11385099],[119.17599408,27.11413998],[119.177406,27.11385297],[119.17932012,27.11374704],[119.18174508,27.11438496],[119.18249892,27.11565],[119.18365092,27.11616597],[119.18434392,27.11657097],[119.18549592,27.11640204],[119.18992284,27.11458503],[119.19120516,27.11401398],[119.19210588,27.11298303],[119.19320604,27.11103597],[119.19404592,27.10984104],[119.19506796,27.10927296],[119.19570912,27.109215],[119.196783,27.10996398],[119.19792708,27.11174202],[119.20059612,27.11381103],[119.20314312,27.11496798],[119.20505796,27.11520603],[119.20582116,27.11646999],[119.20574304,27.11773197],[119.205864,27.11881404],[119.20662684,27.12002697],[119.20808304,27.12180897],[119.20736412,27.124272],[119.20640184,27.12535596],[119.20505004,27.12632202],[119.20319604,27.12695004],[119.20094388,27.12751398],[119.19553812,27.13010004],[119.19114504,27.13083804],[119.18602584,27.13324104],[119.18503908,27.13557204],[119.18562804,27.13926798],[119.18781108,27.14524902],[119.191104,27.155376],[119.19174588,27.16184799],[119.19029112,27.16650198],[119.18828988,27.16977897],[119.18365596,27.170784],[119.18106612,27.17036802],[119.17793808,27.16903296],[119.17535688,27.16907904],[119.17487196,27.17047503],[119.17490688,27.17232696],[119.17649196,27.17415198],[119.17809504,27.17690103],[119.178702,27.18152199],[119.177784,27.18755604],[119.17790604,27.19357299],[119.17853892,27.19958004],[119.17992492,27.20310498],[119.17950012,27.20351997],[119.17860012,27.20426202],[119.17847016,27.20495304],[119.17904112,27.20575296],[119.18011608,27.20713302],[119.18074788,27.20730402],[119.18278404,27.20540898],[119.18585916,27.20443104],[119.19104712,27.20526597],[119.19625416,27.20748996],[119.20146084,27.20925],[119.20309884,27.21385197],[119.20519692,27.22521204],[119.20566492,27.22558203],[119.20585608,27.22700997],[119.20509288,27.22946904],[119.20606416,27.230598],[119.207052,27.23202504],[119.209626,27.232416],[119.21215608,27.23194602],[119.214054,27.23063202],[119.214522,27.22961304],[119.21546592,27.22859604],[119.21641992,27.22815396],[119.2185,27.22827303],[119.22074496,27.22823496],[119.222496,27.22763601],[119.22689988,27.225036],[119.22918912,27.22553703],[119.23052508,27.22584798],[119.23113996,27.22554198],[119.23280496,27.224883],[119.234583,27.22453596],[119.23499916,27.22413204],[119.23468704,27.22042899],[119.235771,27.21840696],[119.23573608,27.215829],[119.23470396,27.21169404],[119.23721892,27.20907198],[119.23863192,27.207189],[119.24007192,27.20702097],[119.24103492,27.207729],[119.24225784,27.209304],[119.24403696,27.20912301],[119.24521704,27.20838897],[119.24725608,27.205488],[119.24737704,27.20304801],[119.24718588,27.20147202],[119.24812296,27.20002401],[119.24859096,27.19972701],[119.24988408,27.19985904],[119.25037008,27.20028402],[119.25056196,27.20242899],[119.25105588,27.20285199],[119.25255816,27.20283903],[119.25315612,27.20253897],[119.25400716,27.20264103],[119.254788,27.20357901],[119.25520488,27.20436498],[119.25588204,27.20464497],[119.257731,27.20436903],[119.26014408,27.20386602],[119.26131696,27.20335797],[119.26162908,27.202887],[119.26192392,27.20027799],[119.26261008,27.19861596],[119.26351296,27.19762002],[119.26414692,27.19750698],[119.264841,27.19746999],[119.26541412,27.19764198],[119.26577088,27.19799802],[119.266083,27.19910304],[119.266587,27.20268099],[119.26796796,27.20384703],[119.26942704,27.20606796],[119.26987884,27.20846097],[119.27164212,27.21154203],[119.27175588,27.21257298],[119.27142504,27.2133],[119.27061792,27.21473199],[119.26862892,27.21633597],[119.265894,27.21764799],[119.26549404,27.21794301],[119.2644,27.21947904],[119.26374912,27.22131099],[119.26283796,27.22268196],[119.26110996,27.22318596],[119.25742896,27.226044],[119.25774216,27.22782096],[119.25817596,27.229428],[119.25945216,27.23051601],[119.25899208,27.23235399],[119.25777708,27.23320296],[119.25636192,27.23314797],[119.255589,27.23291199],[119.255589,27.23271804],[119.25551988,27.232677],[119.25522504,27.23150898],[119.25460008,27.23139603],[119.254122,27.23165001],[119.25344484,27.23198904],[119.25250812,27.23286798],[119.25158796,27.23428998],[119.24967888,27.23554098],[119.24873316,27.23616],[119.24825616,27.23616603],[119.24760492,27.235539],[119.24731908,27.23526099],[119.24713692,27.23519196],[119.24672904,27.23507001],[119.24642484,27.23510997],[119.24615592,27.23520996],[119.24568792,27.23634504],[119.24572212,27.23792301],[119.24578296,27.23800302],[119.24576604,27.23820498],[119.24549712,27.23870196],[119.24433396,27.23890698],[119.24281584,27.23899401],[119.242044,27.23872797],[119.24197488,27.23876001],[119.24037,27.238464],[119.238903,27.23737302],[119.23750692,27.23616],[119.235078,27.23489001],[119.23424604,27.23459697],[119.233413,27.23534298],[119.230326,27.23773896],[119.22781212,27.24001902],[119.22426612,27.242703],[119.22265404,27.24458904],[119.221362,27.24647697],[119.21968008,27.24893199],[119.21916096,27.25037001],[119.21786892,27.25208397],[119.21664708,27.252882],[119.21510412,27.25310304],[119.21299812,27.25275204],[119.21177592,27.25309098],[119.210373,27.25355097],[119.21004288,27.25452396],[119.20950612,27.25687296],[119.208744,27.25778196],[119.207583,27.25852797],[119.20565916,27.25926201],[119.20492296,27.26086797],[119.20662108,27.261594],[119.21024304,27.26153001],[119.21182884,27.26335602],[119.210841,27.26568801],[119.20935996,27.26941797],[119.20844196,27.27498897],[119.208078,27.28286397],[119.20851216,27.28673199],[119.20888512,27.28707201],[119.21028912,27.28718703],[119.21139792,27.28786698],[119.21189184,27.28939698],[119.21241204,27.29176398],[119.21215212,27.29470302],[119.21094792,27.29696004],[119.210679,27.297378],[119.21314104,27.30360996],[119.21557716,27.30686904],[119.21606208,27.30916701],[119.21732784,27.31157901],[119.21924412,27.31370202],[119.22076908,27.31491297],[119.22313608,27.31589604],[119.22526008,27.31452597],[119.22737508,27.31350798],[119.22878916,27.312534],[119.22982092,27.312939],[119.23102584,27.314145],[119.23139916,27.31558797],[119.23152012,27.317079],[119.231703,27.31902201],[119.23309908,27.32005998],[119.23444296,27.32069799],[119.235978,27.32099202],[119.23770492,27.32076504],[119.23976916,27.32031603],[119.24162496,27.320094],[119.24412408,27.31993398],[119.24585892,27.32010696],[119.24595504,27.31995999],[119.24344692,27.317799],[119.24133012,27.31551804],[119.240766,27.31321404],[119.24276112,27.30947697],[119.249424,27.30566304],[119.25665388,27.30462102],[119.26156788,27.30380796],[119.262627,27.30268197],[119.26417212,27.30166002],[119.26564812,27.30103299],[119.26668204,27.30080799],[119.26834884,27.30093696],[119.26994688,27.30162798],[119.271285,27.30215403],[119.27335212,27.30101796],[119.27509812,27.29948004],[119.27721816,27.29891502],[119.27895516,27.299034],[119.28132684,27.29892996],[119.28389112,27.29935098],[119.28407292,27.29953197],[119.28604608,27.29829897],[119.29413708,27.29216799],[119.30100408,27.28859202],[119.30542092,27.28988604],[119.30880384,27.29142801],[119.31048288,27.29622402],[119.314674,27.29890296],[119.32292808,27.29897496],[119.32856388,27.29772],[119.33598204,27.29528298],[119.35500192,27.293085],[119.36470392,27.289449],[119.371779,27.28402902],[119.38305816,27.27231597],[119.39463504,27.26219898],[119.39914116,27.25728201],[119.406276,27.25460496],[119.41427592,27.25603803],[119.42370396,27.26226702],[119.42863704,27.264456],[119.43739008,27.26517501],[119.43766692,27.25597701],[119.435769,27.25234596],[119.43732708,27.24334902],[119.43815004,27.235746],[119.43963,27.22353597],[119.44026288,27.21869397],[119.435202,27.21168801],[119.428407,27.20701503],[119.42069004,27.20672802],[119.41162488,27.20394],[119.40693912,27.20174202],[119.39989104,27.197523],[119.39462892,27.19326798]]]]},"geometry_name":"geom","properties":{"city":"宁德市","district":"周宁县","id":11,"province":"福建省","code":350925,"centroid":[119.306679468693,27.0894857274987],"center":[119.356679468693,27.0894857274987]}}]}'));class Jp extends mo{constructor(){super(),s(this,"lables",(()=>{const t=new mo;return[{name:"古田县",code:350922,position:new sn(-19.422,2,9.353)},{name:"屏南县",code:350923,position:new sn(-14.879,2,1.68)},{name:"蕉城区",code:350902,position:new sn(-4.044,2,5.696)},{name:"东侨区",code:350903,position:new sn(-2.044,2,8.696)},{name:"周宁县",code:350925,position:new sn(-7.493,2,-2.345)},{name:"寿宁县",code:350924,position:new sn(-3.262,2,-10.486)},{name:"福安市",code:350981,position:new sn(.25,2,-1.459)},{name:"柘荣县",code:350926,position:new sn(5.272,2,-6.3)},{name:"福鼎市",code:350982,position:new sn(12.743,2,-6.131)},{name:"霞浦县",code:350921,position:new sn(8.27,2,2.812)}].map((e=>{const n=new Vp(e.name);n.name=e.name,n.position.copy(e.position),n.userData={originPosition:(new sn).copy(e.position)},t.add(n)})),this.add(t),t})()),s(this,"lightPillars",(()=>{const t=new mo;return[{name:"古田县",code:350922,position:new sn(-19.422,1.5,9.353)},{name:"屏南县",code:350923,position:new sn(-14.879,1.5,1.68)},{name:"蕉城区",code:350902,position:new sn(-4.044,1.5,5.696)},{name:"东侨区",code:350903,position:new sn(-2.044,2,8.696)},{name:"周宁县",code:350925,position:new sn(-7.493,1.5,-2.345)},{name:"寿宁县",code:350924,position:new sn(-3.262,1.5,-10.486)},{name:"福安市",code:350981,position:new sn(.25,1.5,-1.459)},{name:"柘荣县",code:350926,position:new sn(5.272,1.5,-6.3)},{name:"福鼎市",code:350982,position:new sn(12.743,1.5,-6.131)},{name:"霞浦县",code:350921,position:new sn(8.27,1.5,2.812)}].map((e=>{const n=new Hp;n.name=e.name,n.position.copy(e.position),n.userData={originPosition:(new sn).copy(e.position)},t.add(n)})),this.add(t),t})()),s(this,"numberLabelGroup",(()=>{const t=new mo;return[{name:"古田县",code:350922,position:new sn(-19.422,10,9.353)},{name:"屏南县",code:350923,position:new sn(-14.879,10,1.68)},{name:"蕉城区",code:350902,position:new sn(-4.044,10,5.696)},{name:"东侨区",code:350903,position:new sn(-2.044,10,8.696)},{name:"周宁县",code:350925,position:new sn(-7.493,10,-2.345)},{name:"寿宁县",code:350924,position:new sn(-3.262,10,-10.486)},{name:"福安市",code:350981,position:new sn(.25,10,-1.459)},{name:"柘荣县",code:350926,position:new sn(5.272,10,-6.3)},{name:"福鼎市",code:350982,position:new sn(12.743,10,-6.131)},{name:"霞浦县",code:350921,position:new sn(8.27,10,2.812)}].map((e=>{const n=new Xp("");n.setText("0件"),n.name=e.name,n.position.copy(e.position),n.userData={originPosition:(new sn).copy(e.position)},n.planeText.userData={cursor:"pointer",enableEvent:!0},n.planeText.addEventListener("click",(t=>{Op.Z.setAreaCode(e.code),Op.Z.setModalType("normal")})),t.add(n)})),this.add(t),t})()),s(this,"alermMeshGroup",(()=>{const t=new mo;return[{name:"古田县",code:350922,position:new sn(-15.855,1.5,8.747)},{name:"屏南县",code:350923,position:new sn(-12.095,1.5,2.04)},{name:"蕉城区",code:350902,position:new sn(-4.283,1.5,5.536)},{name:"东侨区",code:350903,position:new sn(-2.044,2,8.696)},{name:"周宁县",code:350925,position:new sn(-9.889,1.5,-1.704)},{name:"寿宁县",code:350924,position:new sn(-.738,1.5,-13.726)},{name:"福安市",code:350981,position:new sn(1.478,1.5,2.35)},{name:"柘荣县",code:350926,position:new sn(6.597,1.5,-6.613)},{name:"福鼎市",code:350982,position:new sn(15.767,1.5,-7.835)},{name:"霞浦县",code:350921,position:new sn(9.433,1.5,7.453)}].map((e=>{const n=new qp;n.name=e.name,n.position.copy(e.position),n.userData={originPosition:(new sn).copy(e.position)},n.addEventListener("click",(t=>{Op.Z.setAreaCode(e.code),Op.Z.setModalType("alarm")})),n.addEventListener("mouseenter",(t=>{Op.Z.setHoverAreaCode(e.code)})),n.addEventListener("mouseleave",(t=>{Op.Z.setHoverAreaCode(0)})),t.add(n);const i=new Yp;i.name=e.name,i.position.copy(e.position),i.userData={originPosition:(new sn).copy(e.position)},i.addEventListener("click",(t=>{Op.Z.setAreaCode(e.code),Op.Z.setModalType("alarm")})),i.addEventListener("mouseenter",(t=>{Op.Z.setHoverAreaCode(e.code)})),i.addEventListener("mouseleave",(t=>{Op.Z.setHoverAreaCode(0)})),t.add(i);const r=new Wp;r.name=e.name,r.position.copy(e.position),r.userData={originPosition:(new sn).copy(e.position)},r.addEventListener("click",(t=>{Op.Z.setAreaCode(e.code),Op.Z.setModalType("alarm")})),r.addEventListener("mouseenter",(t=>{Op.Z.setHoverAreaCode(e.code)})),r.addEventListener("mouseleave",(t=>{Op.Z.setHoverAreaCode(0)})),t.add(r)})),this.add(t),t})()),s(this,"mapMeshGroup",(()=>{const t=new mo,e=new Ac({map:op.getTexture(Zp),color:11857642,combine:Z,transparent:!0,opacity:1,side:v});Kp.R2.map(((n,i)=>{const{code:r,district:s}=n.properties;let a,o=n.geometry.coordinates;_.isNumber(_.get(o,[0,0,0]))||(o=_.flatten(o));for(let t=0;t<o.length;t++){let e=new jl;for(let n=0;n<o[t].length;n++){const[i,r]=o[t][n];0===n?e.moveTo(i,r):e.lineTo(i,r)}a=a?Xh([a,new xc(e)]):new xc(e)}a.rotateX(Bu(-90));const l=new yr(a,e);l.userData={cursor:"pointer",name:s,code:r},l.uuid=r,l.name=s,l.addEventListener("mouseenter",(t=>{Op.Z.setHoverAreaCode(this.getCodeByArea(s))})),l.addEventListener("mouseleave",(t=>{Op.Z.setHoverAreaCode(0)})),t.add(l)}));const n=new An,i=new sn,r=new sn;n.setFromObject(t),n.getSize(r),n.getCenter(i);const s=Math.max(r.x,r.z);t.traverse((t=>{if(t.isMesh){t.geometry.translate(-i.x,-i.y,-i.z);const e=t.geometry.getAttribute("position"),n=t.geometry.getAttribute("uv");for(let t=0;t<e.count;t++)n.setX(t,(e.getX(t)+s/2)/s),n.setY(t,1-(e.getZ(t)+s/2)/s);t.geometry.setAttribute("uv",n)}})),Up.scaleTo(t,50),t.updateMatrixWorld(!0),t.position.set(0,1.5,0),t.scale.setScalar(1),t.rotation.set(0,0,0);const a=new rn;return t.traverse((t=>{t.isMesh&&(t.matrixWorld.decompose(t.position,a,t.scale),t.rotation.setFromQuaternion(a),t.userData.originPosition=(new sn).copy(t.position))})),this.add(t),t})()),s(this,"mapLine",(()=>{const t=new mo;Kp.R2.map(((e,n)=>{const{code:i,district:r}=e.properties;let s=e.geometry.coordinates;_.isNumber(_.get(s,[0,0,0]))||(s=_.flatten(s));for(let e=0;e<s.length;e++){const n=new Dp,i=[];for(let t=0;t<s[e].length;t++){const[n,r]=s[e][t];i.push(n,0,-1*r)}n.setPositions(i);const a=new Ip(n,new mp({color:16777215,linewidth:.0015,worldUnits:!1,vertexColors:!1,alphaToCoverage:!0}));a.name=r,t.add(a)}})),Up.scaleTo(t,50),Up.center(t),t.updateMatrixWorld(!0),t.position.set(0,1.505,0),t.scale.setScalar(1),t.rotation.set(0,0,0);const e=new rn;return t.traverse((t=>{t.isLine2&&(t.matrixWorld.decompose(t.position,e,t.scale),t.rotation.setFromQuaternion(e),t.userData.originPosition=(new sn).copy(t.position))})),this.add(t),t})()),s(this,"mapLine2",(()=>{const t=new mo;Kp.R2.map(((e,n)=>{const{code:i,district:r}=e.properties;let s=e.geometry.coordinates;_.isNumber(_.get(s,[0,0,0]))||(s=_.flatten(s));for(let e=0;e<s.length;e++){const n=new Dp,i=[];for(let t=0;t<s[e].length;t++){const[n,r]=s[e][t];i.push(n,0,-1*r)}n.setPositions(i);const a=new Ip(n,new mp({color:65535,linewidth:.002,worldUnits:!1,vertexColors:!1,alphaToCoverage:!0}));a.name=r,t.add(a)}})),Up.scaleTo(t,50),Up.center(t),t.updateMatrixWorld(!0),t.position.set(0,0,0),t.scale.setScalar(1),t.rotation.set(0,0,0);const e=new rn;return t.traverse((t=>{t.isLine2&&(t.matrixWorld.decompose(t.position,e,t.scale),t.rotation.setFromQuaternion(e),t.userData.originPosition=(new sn).copy(t.position))})),this.add(t),t})()),s(this,"rockGroup",(()=>{const t=new mo,e=new Ec({color:"#105744",side:v}),n={paths:[],shapePath:[[0,1.5],[0,0]],closed:!0};return Kp.R2.map(((i,r)=>{const{code:s,district:a}=i.properties;let o=i.geometry.coordinates;_.isNumber(_.get(o,[0,0,0]))||(o=_.flatten(o));for(let i=0;i<o.length;i++){n.paths=[];for(let t=0;t<o[i].length;t++){const[e,r]=o[i][t];n.paths.push({vector3:[e,0,-r],radius:1,segments:0,scale:{x:1,y:1},name:""})}const r=new zp(n,e);r.uuid=s,r.name=a,r.userData.originPosition=r.position.clone(),t.add(r)}})),Up.scaleTo(t,50),Up.center(t),t.scale.setY(1),Up.alignBottom(t),this.add(t),t})()),s(this,"areaCodes",[{name:"古田县",code:350922,subName:"gu_tian_xian"},{name:"屏南县",code:350923,subName:"pin_nan_xian"},{name:"蕉城区",code:350902,subName:"jiao_cheng_qu"},{name:"东侨区",code:350903,subName:"dong_qiao_qu"},{name:"周宁县",code:350925,subName:"zhou_ning_xian"},{name:"寿宁县",code:350924,subName:"shou_ning_xian"},{name:"福安市",code:350981,subName:"fu_an_shi"},{name:"柘荣县",code:350926,subName:"tuo_rong_xian"},{name:"福鼎市",code:350982,subName:"fu_ding_shi"},{name:"霞浦县",code:350921,subName:"xia_pu_xian"}]),s(this,"transtion",(()=>{const t=new Fp({gu_tian_xian:0,pin_nan_xian:0,jiao_cheng_qu:0,dong_qiao_qu:0,zhou_ning_xian:0,shou_ning_xian:0,fu_an_shi:0,tuo_rong_xian:0,fu_ding_shi:0,xia_pu_xian:0});return t.setDuration(100),t.onChange((({gu_tian_xian:t,pin_nan_xian:e,jiao_cheng_qu:n,dong_qiao_qu:i,zhou_ning_xian:r,shou_ning_xian:s,fu_an_shi:a,tuo_rong_xian:o,fu_ding_shi:l,xia_pu_xian:c})=>{this.traverse((u=>{u.userData.originPosition&&(u.position.copy(u.userData.originPosition),u.name.includes("古田县")?u.position.y+=t:u.name.includes("屏南县")?u.position.y+=e:u.name.includes("蕉城区")?u.position.y+=n:u.name.includes("东侨区")?u.position.y+=i:u.name.includes("周宁县")?u.position.y+=r:u.name.includes("寿宁县")?u.position.y+=s:u.name.includes("福安市")?u.position.y+=a:u.name.includes("柘荣县")?u.position.y+=o:u.name.includes("福鼎市")?u.position.y+=l:u.name.includes("霞浦县")&&(u.position.y+=c))}))})),t})()),s(this,"dispose",(0,hp.EH)((()=>{const t=Op.Z.hoverAreaCode;this.transtion.set({gu_tian_xian:350922===t?.2:0,pin_nan_xian:350923===t?.2:0,jiao_cheng_qu:350902===t?.2:0,dong_qiao_qu:350903===t?.2:0,zhou_ning_xian:350925===t?.2:0,shou_ning_xian:350924===t?.2:0,fu_an_shi:350981===t?.2:0,tuo_rong_xian:350926===t?.2:0,fu_ding_shi:350982===t?.2:0,xia_pu_xian:350921===t?.2:0});const e=(0,hp.ZN)(Op.Z.mapData);this.alermMeshGroup.children.map((t=>{t.visible=e.findIndex((e=>{if(null==Kp.R2.find((t=>t.properties.code===e.code)))return!1;const n=Kp.R2.find((t=>t.properties.code===e.code)).properties.district;return(1===e.alarmType&&t.name===n&&"redAlermMesh"===t.type||2===e.alarmType&&t.name===n&&"yellowAlermMesh"===t.type||3===e.alarmType&&t.name===n&&"greenAlermMesh"===t.type)&&!1!==e.visible}))>=0}));const n=Math.max(...e.map((t=>t.sum)));e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.lightPillars.children.map((i=>{i.name===e&&(i.scale.setY(t.sum/n*.6+.4),i.visible=!1!==t.visible)}))})),e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.numberLabelGroup.children.map((i=>{i.name===e&&(i.setText(`${t.sum}件`),i.position.setY(t.sum/n*6+4),i.userData.originPosition.setY(t.sum/n*6+4),i.visible=!1!==t.visible)}))})),e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.lables.children.map((n=>{n.name===e&&(n.visible=!1!==t.visible)}))})),e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.mapMeshGroup.children.map((n=>{n.name===e&&(n.visible=!1!==t.visible)}))})),e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.rockGroup.children.map((n=>{n.name===e&&(n.visible=!1!==t.visible)}))})),e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.mapLine.children.map((n=>{n.name===e&&(n.visible=!1!==t.visible)}))})),e.map((t=>{if(null==Kp.R2.find((e=>e.properties.code===t.code)))return!1;const e=Kp.R2.find((e=>e.properties.code===t.code)).properties.district;this.mapLine2.children.map((n=>{n.name===e&&(n.visible=!1!==t.visible)}))}))})))}getCodeByArea(t){const e=this.areaCodes.find((e=>e.name===t));return e?e.code:0}getAreaByCode(t){const e=this.areaCodes.find((e=>e.code===t));return e?e.name:0}getAreaBySubName(t){const e=this.areaCodes.find((e=>e.subName===t));return e?e.name:"-----"}}var $p=n.p+"img/particle.4da117e9.png";var Qp=new class extends Ue{constructor(){super(),s(this,"isProd",!1),s(this,"isDev",!1),s(this,"clock",new bu)}thousand(t,e=0){let n=String(Number(Number(t).toFixed(e)));for(;n!==n.replace(/(\d)(\d{3})(\.|,|$)/,"$1,$2$3");)n=n.replace(/(\d)(\d{3})(\.|,|$)/,"$1,$2$3");return n}numToUnit(t,e=2){return Math.abs(t)>=1e12?{value:this.thousand(t/1e12,e),unit:"万亿"}:Math.abs(t)>=1e8?{value:this.thousand(t/1e8,e),unit:"亿"}:Math.abs(t)>=1e4?{value:this.thousand(t/1e4,e),unit:"万"}:{value:this.thousand(t,e),unit:""}}rand(t,e){return Math.floor(Math.random()*(e-t+1)+t)}getWeekDay(){return["天","一","二","三","四","五","六"][(new Date).getDay()]}getDate(t="."){let e=new Date,n=e.getMonth()+1,i=e.getDate();return n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),e.getFullYear()+t+n+t+i}getHourMinuteSecond(t=":"){let e=new Date,n=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return i=i<10?"0"+i:i,r=r<10?"0"+r:r,n+t+i+t+r}async selectFile(){return new Promise(((t,e)=>{const n=document.createElement("input");n.style.display="none",n.type="file",n.onchange=e=>{const n=(0,Np.get)(e,["target","files",0]);t(n)},document.body.append(n),n.click()}))}async selectFileToBlob(t=".jpg,.jpeg,.png,.tga",e=!1){const n=document.createElement("input");return n.type="file",n.style.display="none",document.body.append(n),n.multiple=e,n.accept=t,n.click(),await new Promise(((t,e)=>{n.onchange=t})),n.files?window.URL.createObjectURL(n.files[0]):""}isType(t,e){return Object.prototype.toString.call(e)===`[object ${t}]`}isObject(t){return this.isType("Object",t)}deepClone(t,e=new Map){if(null!=t&&this.isObject(t)){let n=e.get(t);if(n)return n;const i=Array.isArray(t);let r=i?[]:{};return n=e.set(t,r),i?t.forEach(((t,e)=>{r[e]=this.deepClone(t,n)})):Object.keys(t).forEach((e=>{this.isObject(r[e])?r[e]=this.deepClone(t[e],n):r[e]=t[e]})),r}return t}deepMerge(t,e){t=this.deepClone(t);for(let n in e)n in t&&this.isObject(e[n])&&this.isObject(t[n])?t[n]=this.deepMerge(t[n],e[n]):t[n]=e[n];return t}};class tf extends yr{constructor(t){super(),s(this,"options",{image:$p,width:200,height:200,frame:60,column:10,row:6,speed:.5}),s(this,"r",0),s(this,"c",0),s(this,"t",0),s(this,"renderOrder",10),s(this,"texture",void 0),s(this,"geometry",(()=>{const t=new Gr(100,100,1,1);return t.rotateX(Bu(-90)),t})()),s(this,"material",(()=>{this.texture=op.getTexture($p),this.texture.repeat.set(1/9,1);return new Hi({side:v,map:this.texture,transparent:!0,opacity:1,depthWrite:!1})})()),s(this,"updateSequenceFrame",(()=>{this.t+=this.options.speed,this.t>this.options.frame&&(this.t=0),this.c=this.options.column-Math.floor(this.t%this.options.column)-1,this.r=Math.floor(this.t/this.options.column%this.options.row),this.texture.offset.x=this.c/this.options.column,this.texture.offset.y=this.r/this.options.row})),s(this,"look",new sn(0,0,0)),this.options=Qp.deepMerge(this.options,t)}}var ef=n.p+"img/rotatingAperture.e8f36e3f.png";class nf extends yr{constructor(){super(),s(this,"geometry",(()=>{const t=new Gr(60,60,1,1);return t.rotateX(Bu(90)),t})()),s(this,"material",new Ac({side:v,map:op.getTexture(ef),transparent:!0,opacity:1,depthTest:!0})),s(this,"onBeforeRender",((t,e,n,i,r,s)=>{this.rotateY(.001)}))}}var rf=n.p+"img/rotating-point2.d61bbc7e.png";class sf extends yr{constructor(){super(),s(this,"geometry",(()=>{const t=new Gr(50,50,1,1);return t.rotateX(Bu(90)),t})()),s(this,"material",new Ac({side:v,map:op.getTexture(rf),transparent:!0,opacity:1,depthTest:!0})),s(this,"onBeforeRender",((t,e,n,i,r,s)=>{this.rotateY(-.001)}))}}const af={type:"change"},of={type:"start"},lf={type:"end"};class cf extends Ue{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new sn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:o.ROTATE,MIDDLE:o.DOLLY,RIGHT:o.PAN},this.touches={ONE:l.ROTATE,TWO:l.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",j),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",j),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(af),n.update(),r=i.NONE},this.update=function(){const e=new sn,o=(new rn).setFromUnitVectors(t.up,new sn(0,1,0)),l=o.clone().invert(),p=new sn,f=new rn,m=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(o),a.setFromVector3(e),n.autoRotate&&r===i.NONE&&T(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(a.theta+=c.theta*n.dampingFactor,a.phi+=c.phi*n.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),a.theta=g<=v?Math.max(g,Math.min(v,a.theta)):a.theta>(g+v)/2?Math.max(g,a.theta):Math.min(v,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=u,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),e.setFromSpherical(a),e.applyQuaternion(l),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),h.set(0,0,0)),u=1,!!(d||p.distanceToSquared(n.object.position)>s||8*(1-f.dot(n.object.quaternion))>s)&&(n.dispatchEvent(af),p.copy(n.object.position),f.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",X),n.domElement.removeEventListener("pointerdown",B),n.domElement.removeEventListener("pointercancel",W),n.domElement.removeEventListener("wheel",H),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",G),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",j),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const s=1e-6,a=new Ou,c=new Ou;let u=1;const h=new sn;let d=!1;const p=new $e,f=new $e,m=new $e,g=new $e,v=new $e,_=new $e,y=new $e,x=new $e,b=new $e,w=[],M={};function S(){return Math.pow(.95,n.zoomSpeed)}function T(t){c.theta-=t}function A(t){c.phi-=t}const E=function(){const t=new sn;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),h.add(t)}}(),C=function(){const t=new sn;return function(e,i){!0===n.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),h.add(t)}}(),L=function(){const t=new sn;return function(e,i){const r=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;t.copy(s).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),E(2*e*a/r.clientHeight,n.object.matrix),C(2*i*a/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(E(e*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),C(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):n.enablePan=!1}}();function P(t){n.object.isPerspectiveCamera?u/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):n.enableZoom=!1}function R(t){n.object.isPerspectiveCamera?u*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):n.enableZoom=!1}function D(t){p.set(t.clientX,t.clientY)}function I(t){g.set(t.clientX,t.clientY)}function O(){if(1===w.length)p.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);p.set(t,e)}}function N(){if(1===w.length)g.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);g.set(t,e)}}function z(){const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY,n=Math.sqrt(t*t+e*e);y.set(0,n)}function U(t){if(1==w.length)f.set(t.pageX,t.pageY);else{const e=Z(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);f.set(n,i)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;T(2*Math.PI*m.x/e.clientHeight),A(2*Math.PI*m.y/e.clientHeight),p.copy(f)}function k(t){if(1===w.length)v.set(t.pageX,t.pageY);else{const e=Z(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);v.set(n,i)}_.subVectors(v,g).multiplyScalar(n.panSpeed),L(_.x,_.y),g.copy(v)}function F(t){const e=Z(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);x.set(0,s),b.set(0,Math.pow(x.y/y.y,n.zoomSpeed)),P(b.y),y.copy(x)}function B(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",V),n.domElement.addEventListener("pointerup",G)),function(t){w.push(t)}(t),"touch"===t.pointerType?function(t){switch(Y(t),w.length){case 1:switch(n.touches.ONE){case l.ROTATE:if(!1===n.enableRotate)return;O(),r=i.TOUCH_ROTATE;break;case l.PAN:if(!1===n.enablePan)return;N(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(n.touches.TWO){case l.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&z(),n.enablePan&&N(),r=i.TOUCH_DOLLY_PAN;break;case l.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&z(),n.enableRotate&&O(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(of)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case o.DOLLY:if(!1===n.enableZoom)return;!function(t){y.set(t.clientX,t.clientY)}(t),r=i.DOLLY;break;case o.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;I(t),r=i.PAN}else{if(!1===n.enableRotate)return;D(t),r=i.ROTATE}break;case o.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;D(t),r=i.ROTATE}else{if(!1===n.enablePan)return;I(t),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent(of)}(t))}function V(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(Y(t),r){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(t),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;k(t),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&F(t),n.enablePan&&k(t)}(t),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&F(t),n.enableRotate&&U(t)}(t),n.update();break;default:r=i.NONE}}(t):function(t){switch(r){case i.ROTATE:if(!1===n.enableRotate)return;!function(t){f.set(t.clientX,t.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;T(2*Math.PI*m.x/e.clientHeight),A(2*Math.PI*m.y/e.clientHeight),p.copy(f),n.update()}(t);break;case i.DOLLY:if(!1===n.enableZoom)return;!function(t){x.set(t.clientX,t.clientY),b.subVectors(x,y),b.y>0?P(S()):b.y<0&&R(S()),y.copy(x),n.update()}(t);break;case i.PAN:if(!1===n.enablePan)return;!function(t){v.set(t.clientX,t.clientY),_.subVectors(v,g).multiplyScalar(n.panSpeed),L(_.x,_.y),g.copy(v),n.update()}(t)}}(t))}function G(t){q(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",G)),n.dispatchEvent(lf),r=i.NONE}function W(t){q(t)}function H(t){!1!==n.enabled&&!1!==n.enableZoom&&r===i.NONE&&(t.preventDefault(),n.dispatchEvent(of),function(t){t.deltaY<0?R(S()):t.deltaY>0&&P(S()),n.update()}(t),n.dispatchEvent(lf))}function j(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?A(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?A(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function X(t){!1!==n.enabled&&t.preventDefault()}function q(t){delete M[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}function Y(t){let e=M[t.pointerId];void 0===e&&(e=new $e,M[t.pointerId]=e),e.set(t.pageX,t.pageY)}function Z(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return M[e.pointerId]}n.domElement.addEventListener("contextmenu",X),n.domElement.addEventListener("pointerdown",B),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",H,{passive:!1}),this.update()}}const uf=new rr;uf.setAttribute("position",new Ki([-1,3,0,-1,-1,0,3,-1,0],3)),uf.setAttribute("uv",new Ki([0,2,0,0,2,0],2));const hf=new class{constructor(){s(this,"_mesh",void 0),this._mesh=new yr(uf)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,df)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}},df=new Qr(-1,1,1,-1,0,1),pf=new Ar({vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = vec4(position, 1.0);\n        }\n    ",fragmentShader:"\n        void main() {\n            gl_FragColor = vec4(0.0);\n        }\n    ",blending:y,depthTest:!1,depthWrite:!1,transparent:!0}),ff=(new Ar({uniforms:{map1:{value:null},map2:{value:null}},vertexShader:`\n        ${Wr.common}\n        ${Wr.logdepthbuf_pars_vertex}\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = vec4(position, 1.0);\n            ${Wr.logdepthbuf_vertex}\n        }\n    `,fragmentShader:`\n        ${Wr.logdepthbuf_pars_fragment}\n        uniform sampler2D map1;\n        uniform sampler2D map2;\n        varying vec2 vUv;\n        void main() {\n            if(texture2D(map1, vUv) ==  texture2D(map2, vUv)){\n                gl_FragColor = texture2D(map1, vUv);\n            }else{\n                discard;\n            }\n            ${Wr.logdepthbuf_fragment}\n        }\n    `,blending:y,depthTest:!0,depthWrite:!0,transparent:!0}),new Ar({uniforms:{map:{value:null},opacity:{value:1}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = vec4(position, 1.0);\n        }\n    ",fragmentShader:"\n        uniform sampler2D map;\n        uniform float opacity;\n        varying vec2 vUv;\n        void main() {\n\n            gl_FragColor = texture2D(map, vUv) * opacity;\n\n        }\n    ",depthTest:!0,depthWrite:!0,transparent:!0})),mf=new Ar({uniforms:{map:{value:null},resolution:{value:new $e(512,512)},strokeWidth:{value:1},strokeColor:{value:new Gi("#B2F2FF")},opacity:{value:1}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D map;\n            uniform vec2 resolution;\n            uniform vec3 strokeColor; // 描边颜色\n            uniform float strokeWidth; // 描边厚度\n            uniform float opacity; // 透明度\n            \n            varying vec2 vUv;\n\n            // 获取当前叠加vu坐标偏移量的颜色值\n            vec4 offsetColor(vec2 vu){\n                return texture2D(map, vUv + (vu * (strokeWidth / resolution) ) );\n            }\n\n            vec4 fragColor(){\n\n                vec4 currentColor = offsetColor(vec2(0.0, 0.0));\n\n                if(\n                    currentColor.a < min(0.2, opacity) && (\n                        offsetColor(vec2(0.0, 1.0)).a > 0.0 ||\n                        offsetColor(vec2(0.0, -1.0)).a > 0.0 ||\n                        offsetColor(vec2(1.0, 0.0)).a > 0.0 ||\n                        offsetColor(vec2(-1.0, 0.0)).a > 0.0 ||\n\n                        offsetColor(vec2(1.0) * 0.7).a > 0.0 ||\n                        offsetColor(vec2(-1.0) * 0.7).a > 0.0 ||\n                        offsetColor(vec2(-1.0, 1.0) * 0.7).a > 0.0 ||\n                        offsetColor(vec2(1.0, -1.0) * 0.7).a > 0.0\n                    )\n                ){\n                    return vec4( strokeColor, opacity);\n                }else{\n                    // discard;\n                    return offsetColor(vec2(0.0, 0.0));\n                }\n\n            }\n\n            void main() {\n                gl_FragColor = fragColor();\n            }\n        ",blending:y,depthTest:!0,depthWrite:!0,transparent:!0}),gf=new Ar({uniforms:{map:{value:null},opacity:{value:1},radius:{value:3},resolution:{value:new $e(512,512)}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1.0);\n\t\t}\n\t",fragmentShader:"\n\t\tuniform sampler2D map;\n\t\tuniform float opacity;\n\t\tuniform vec2 resolution;\n\t\tuniform float radius;\n\t\tvarying vec2 vUv;\n\n        vec4 offsetColor( vec2 uv){\n            return texture2D(map, vUv + (uv / resolution * radius) );\n        }\n\n        vec4 blurColor(){\n\n            vec4 leftColor = offsetColor( vec2(-1.0, 0.0) );\n\n            vec4 rightColor = offsetColor( vec2(1.0, 0.0) );\n\n            // 左右颜色混合\n            vec4 leftRightColor = vec4( \n                mix( leftColor.rgb ,rightColor.rgb, rightColor.a / (leftColor.a + rightColor.a)),\n                (leftColor.a + rightColor.a) / 2.0\n            );\n\n            vec4 downColor =  offsetColor( vec2(0.0, -1.0));\n\n            vec4 upColor =  offsetColor( vec2(0.0, 1.0));\n\n            // 上下颜色混合\n            vec4 upDownColor = vec4(\n                mix( downColor.rgb, upColor.rgb, upColor.a / (downColor.a + upColor.a) ),\n                (downColor.a + upColor.a) / 2.0\n            );\n           \n            vec4 color = vec4(\n                mix( leftRightColor.rgb, upDownColor.rgb, upDownColor.a / (leftRightColor.a + upDownColor.a) ),\n                (leftRightColor.a + upDownColor.a) / 2.0\n            );\n                \n            return color;\n        }\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = blurColor();\n            gl_FragColor.a *= opacity;\n\t\t}\n\t",blending:y,depthTest:!1,depthWrite:!1,transparent:!0});class vf{constructor(t,e,n){s(this,"_renderer",void 0),s(this,"_camera",void 0),s(this,"_scene",void 0),s(this,"_mosePosition",new $e(0,0)),s(this,"_mouseDownPosition",new $e(0,0)),s(this,"_mesh_on",void 0),s(this,"_mesh_Down",void 0),s(this,"_raycaster",new Ru),s(this,"_frame",0),s(this,"_mouseInRenderer",!1),s(this,"_mousemoveEvent",void 0),s(this,"_object3ds",[]),s(this,"_click_num",0),s(this,"_mouseleave",(t=>{this._mouseInRenderer=!1,this._mousemoveEvent&&this.hasEvent(this._mesh_on,["mouseleave"])&&this._mesh_on.dispatchEvent({renderer:this._renderer,camera:this._camera,object:this._mesh_on,type:"mouseleave",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this._mesh_on=void 0,this._renderer.domElement.style.cursor="auto"})),s(this,"_mousemove",(t=>{this._mousemoveEvent=t,this._frame=this._renderer.info.render.frame,document.pointerLockElement?this._mosePosition.set(0,0):(this._mosePosition.x=t.offsetX/this._renderer.domElement.offsetWidth*2-1,this._mosePosition.y=-t.offsetY/this._renderer.domElement.offsetHeight*2+1),this._raycaster.setFromCamera(this._mosePosition,this._camera)})),s(this,"_mousedown",(t=>{this._mouseDownPosition.set(t.offsetX,t.offsetY),this._mousemove(t);let e=this._getSelected(this._object3ds);e&&this._mousemoveEvent&&(this._mesh_Down=this._mesh_on=e.object,this.hasEvent(this._mesh_Down,["mousedown"])&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"mousedown",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}))})),s(this,"_mouseup",(0,Np.debounce)((async t=>{let e=this._getSelected(this._object3ds);e&&this._mousemoveEvent&&(this._mesh_on=e.object,this.hasEvent(this._mesh_Down,["mouseup"])&&this._mesh_on.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"mouseup",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this._mesh_Down&&this._mesh_Down===this._mesh_on&&Math.abs(this._mouseDownPosition.x-t.offsetX)<5&&Math.abs(this._mouseDownPosition.y-t.offsetY)<5&&(this.hasEvent(this._mesh_Down,["dbclick"])?(this._click_num++,await new Promise((t=>setTimeout(t,200))),1===this._click_num?(this.hasEvent(this._mesh_Down,["click"])&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"click",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this.hasEvent(this._mesh_Down,["leftclick"])&&0===t.button&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"leftclick",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this.hasEvent(this._mesh_Down,["rightclick"])&&2===t.button&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"rightclick",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y})):this._click_num>1&&this.hasEvent(this._mesh_Down,["dbclick"])&&(new Date).valueOf()-this._click_num>1&&0===t.button&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"dbclick",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y})):(this.hasEvent(this._mesh_Down,["click"])&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"click",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this.hasEvent(this._mesh_Down,["leftclick"])&&0===t.button&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"leftclick",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this.hasEvent(this._mesh_Down,["rightclick"])&&2===t.button&&this._mesh_Down.dispatchEvent({...e,renderer:this._renderer,camera:this._camera,object:e.object,type:"rightclick",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y})),this._click_num=0))}))),this._renderer=t,this._camera=e,this._scene=n,this._frame=this._renderer.info.render.frame,this._renderer.domElement.addEventListener("mouseenter",(()=>{this._mouseInRenderer=!0}),!0),this._renderer.domElement.addEventListener("mouseleave",this._mouseleave,!0),this._renderer.domElement.addEventListener("mousemove",this._mousemove,!0),this._renderer.domElement.addEventListener("pointerdown",this._mousedown,!0),this._renderer.domElement.addEventListener("pointerup",this._mouseup,!0)}_getSelected(t){let e;return t.length&&(e=this._raycaster.intersectObjects(t,!1)[0]),e}hasEvent(t,e=[]){if(!t)return!1;if(t.userData&&!1===t.userData.enableEvent)return!1;return e.some((e=>!!(t._listeners&&t._listeners[e]&&t._listeners[e][0])))}hasCursor(t){return!!t&&((!t.userData||!1!==t.userData.enableEvent)&&(!(!t.userData||!t.userData.cursor)||void 0))}dispatchEvent(){const t=[];if(this._scene.traverseVisible((e=>{(this.hasCursor(e)||this.hasEvent(e,["leftclick","rightclick","click","dbclick","mouseenter","mouseleave","mousemove","mousedown","mouseup"]))&&t.push(e)})),this._object3ds=t,!this._mousemoveEvent||!this._mouseInRenderer)return;let e=this._getSelected(t);if(e){const t=Object.assign(e,{renderer:this._renderer,camera:this._camera,object:e.object,type:this._mousemoveEvent.type,offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y});this._mesh_on===t.object?this.hasEvent(t.object,["mousemove"])&&(t.type="mousemove",t.object.dispatchEvent(t)):this._mesh_on!==t.object&&(this.hasEvent(this._mesh_on,["mouseleave"])&&(t.type="mouseleave",this._mesh_on.dispatchEvent(t)),this.hasEvent(t.object,["mouseenter"])&&(t.type="mouseenter",t.object.dispatchEvent(t))),this._mesh_on=t.object||void 0,this._mesh_on&&this._mesh_on.userData&&this._mesh_on.userData.cursor?this._renderer.domElement.style.cursor=this._mesh_on.userData.cursor:this._renderer.domElement.style.cursor="auto"}else this.hasEvent(this._mesh_on,["mouseleave"])&&this._mesh_on.dispatchEvent({renderer:this._renderer,camera:this._camera,object:this._mesh_on,type:"mouseleave",offsetX:this._mousemoveEvent.offsetX,offsetY:this._mousemoveEvent.offsetY,x:this._mousemoveEvent.x,y:this._mousemoveEvent.y}),this._mesh_on=void 0,this._renderer.domElement.style.cursor="auto"}}class _f extends Ue{constructor(){super(),s(this,"renderTarget",new Mn(128,128,{minFilter:mt,magFilter:mt,format:Pt})),s(this,"renderTarget2",new Mn(128,128,{minFilter:mt,magFilter:mt,format:Pt})),s(this,"tempVector2",new $e),s(this,"tempVector3",new sn),s(this,"size",new $e(0,0)),s(this,"renderer",(()=>{const t=new wo({alpha:!0,antialias:!0,precision:"highp",logarithmicDepthBuffer:!0,preserveDrawingBuffer:!1,stencil:!1});return t.domElement.id=Fu(),t.localClippingEnabled=!0,t.setPixelRatio(window.devicePixelRatio),t.autoClear=!1,op.setAnisotropy(t.capabilities.getMaxAnisotropy()),t})()),s(this,"camera",new Cr(45,1,1e-4,1e4)),s(this,"scene",new Mo),s(this,"threeMouse",new vf(this.renderer,this.camera,this.scene)),s(this,"controls",(()=>{const t=new cf(this.camera,this.renderer.domElement);return t.addEventListener("change",(()=>{this.needRender=!0})),t.rotateSpeed=.2,t.maxPolarAngle=Math.PI,t.enableDamping=!0,t.dampingFactor=.1,t.screenSpacePanning=!0,t})()),s(this,"isRendererContextLost",!1),s(this,"controlsPosition",(()=>{const t=new Fp({x:100,y:100,z:100});return t.setDuration(1e3),t.onChange((({x:t,y:e,z:n})=>{this.camera.position.set(t,e,n),this.camera.lookAt(this.controls.target),this.needRender=!0})),t})()),s(this,"controlsCenter",(()=>{const t=new Fp({x:0,y:0,z:0});return t.setDuration(1e3),t.onChange((({x:t,y:e,z:n})=>{this.controls.target.set(t,e,n),this.camera.lookAt(this.controls.target),this.needRender=!0})),t})()),s(this,"controlType","OrbitControls"),s(this,"originScreenSpacePanning",!1),s(this,"autoRender",!0),s(this,"needRender",!1),s(this,"renderBindThis",this.render.bind(this)),s(this,"_preMesh",new yr),s(this,"_preRT",new Mn(128,128,{minFilter:mt,magFilter:mt,format:Pt})),this.init()}async setContainer(t){t&&(t.innerHTML="",t.append(this.renderer.domElement),this.isRendererContextLost&&(this.renderer.forceContextRestore(),await new Promise((t=>requestAnimationFrame(t))),await new Promise((t=>requestAnimationFrame(t))),this.renderer.domElement.style.opacity="1"),this.setsize(t.clientWidth,t.clientHeight),Up.removeEventListener("requestAnimationFrame",this.renderBindThis),Up.addEventListener("requestAnimationFrame",this.renderBindThis))}setsize(t,e){this.camera instanceof Cr&&(this.camera.aspect=t/e,this.camera.updateProjectionMatrix()),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t,e),this.size.set(t,e),this.renderer.clear(),this.renderer.render(this.scene,this.camera)}init(){op.addEventListener("progress",(()=>{this.needRender=!0}))}resetLookAt({position:t,center:e}){this.controls.enableDamping=!1,this.controls.saveState(),this.controls.update(),this.controls.reset(),this.controls.enableDamping=!0,t&&this.controlsPosition.reset({x:t.x,y:t.y,z:t.z}),e&&this.controlsCenter.reset({x:e.x,y:e.y,z:e.z}),this.needRender=!0}async setLookAt({position:t,center:e,duration:n=1e3}){this.controls.enableDamping=!1,this.controls.saveState(),this.controls.update(),this.controls.reset(),this.controls.enableDamping=!0;let i=this.camera.position.clone(),r=this.controls.target.clone();await Promise.all([new Promise((async(e,r)=>{t&&(this.controlsPosition.setDuration(n).reset({x:i.x,y:i.y,z:i.z}),await this.controlsPosition.set({x:t.x,y:t.y,z:t.z})),e()})),new Promise((async(t,i)=>{e&&(this.controlsCenter.setDuration(n).reset({x:r.x,y:r.y,z:r.z}),await this.controlsCenter.set({x:e.x,y:e.y,z:e.z})),t()}))])}getLookAt(){const t=this.camera.position.toArray().map((t=>(0,Np.round)(t,3))),e=this.controls.target.toArray().map((t=>(0,Np.round)(t,3)));return{center:new sn(...e),position:new sn(...t),centerPosition:`center: new Vector3(${e.join(",")}),position: new Vector3(${t.join(",")})`}}v3tov2(t){t.project(this.camera);return new $e((t.x+1)*this.size.x*.5,(1-t.y)*this.size.y*.5)}setControlType(t){"OrbitControls"===t?(this.controls.screenSpacePanning=this.originScreenSpacePanning,this.controls.mouseButtons={LEFT:o.ROTATE,MIDDLE:o.DOLLY,RIGHT:o.PAN},this.controls.touches={ONE:l.ROTATE,TWO:l.DOLLY_PAN}):"MapControls"===t&&(this.originScreenSpacePanning=this.controls.screenSpacePanning,this.controls.screenSpacePanning=!1,this.controls.mouseButtons.LEFT=o.PAN,this.controls.mouseButtons.RIGHT=o.ROTATE,this.controls.touches.ONE=l.PAN,this.controls.touches.TWO=l.DOLLY_ROTATE)}stopRender(){Up.removeEventListener("requestAnimationFrame",this.renderBindThis),this.renderer.forceContextLoss(),this.isRendererContextLost=!0,this.setsize(100,100),this.renderer.domElement.style.opacity="0"}render(){if(this.controls.enabled=this.controlsPosition.isDone()||this.controlsCenter.isDone(),!Up.inDocument(this.renderer.domElement))return void this.stopRender();const t=this.renderer.domElement.parentNode;t.clientWidth===this.size.x&&t.clientHeight===this.size.y||this.setsize(t.clientWidth,t.clientHeight),this.threeMouse.dispatchEvent(),(this.autoRender||this.needRender)&&(this.needRender=!1,this.controls.enabled&&this.controls.update(),this.renderer.clear(),this.dispatchEvent({type:"beforeRender"}),this.renderer.render(this.scene,this.camera),this.dispatchEvent({type:"afterRender"}))}download(t="download"){this.render();const e=this.renderer.domElement.toDataURL("image/png");let n=document.createElement("a");n.download=`${t}.png`,n.href=e,document.body.append(n),n.click()}async preloadTexture(t){const e=op.getTexture(t);for(;e&&!e.image||!e.image.complete;)await new Promise((t=>setTimeout(t,50)));Up.addWork((()=>{const t=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this._preRT),this._preMesh.material.map=e,this.renderer.render(this._preMesh,this.camera),this.renderer.setRenderTarget(t)}))}async preloadGeometry(t){Up.addWork((()=>{const e=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this._preRT),this._preMesh.geometry=t,this.renderer.render(this._preMesh,this.camera),this.renderer.setRenderTarget(e)}))}clearRendererTargte(t){const e=this.renderer.getRenderTarget();this.renderer.setRenderTarget(t),hf.material=pf,hf.render(this.renderer),this.renderer.clearDepth(),this.renderer.setRenderTarget(e)}copyTextureToRenderTarget(t,e,n=!1,i=1){const r=this.renderer.getRenderTarget();e&&(this.renderer.getSize(this.tempVector2),e.setSize(this.tempVector2.x,this.tempVector2.y)),this.renderer.setRenderTarget(e),hf.material=ff,ff.uniforms.map.value=t,ff.uniforms.opacity.value=i,ff.blending=n?y:x,hf.render(this.renderer),this.renderer.setRenderTarget(r)}object3dToRendererTarget(t,e){this.clearRendererTargte(e);const n=this.renderer.getRenderTarget();this.renderer.setRenderTarget(e),this.renderer.getSize(this.tempVector2),e.setSize(this.tempVector2.x,this.tempVector2.y),this.renderer.render(t,this.camera),this.renderer.setRenderTarget(n)}rendererTagetAddStroke(t,e,n,i){const r=this.renderer.getRenderTarget();this.clearRendererTargte(this.renderTarget2),this.renderer.setRenderTarget(this.renderTarget2),this.renderer.getSize(this.tempVector2),this.renderTarget2.setSize(this.tempVector2.x,this.tempVector2.y),hf.material=mf,mf.uniforms.map.value=t.texture,mf.uniforms.resolution.value.set(this.tempVector2.x,this.tempVector2.y),mf.uniforms.strokeWidth.value=e,mf.uniforms.strokeColor.value.set(n),mf.uniforms.opacity.value=i,hf.render(this.renderer),this.copyTextureToRenderTarget(this.renderTarget2.texture,t,!0),this.renderer.setRenderTarget(r)}renderObject3dStroke(t,e,n,i){this.object3dToRendererTarget(t,this.renderTarget),this.rendererTagetAddStroke(this.renderTarget,e,n,i),this.copyTextureToRenderTarget(this.renderTarget.texture,null)}renderTargetgaussBlur(t,e,n){const i=this.renderer.getRenderTarget();this.clearRendererTargte(this.renderTarget2),this.renderer.setRenderTarget(this.renderTarget2),this.renderer.getSize(this.tempVector2),this.renderTarget2.setSize(this.tempVector2.x,this.tempVector2.y),hf.material=gf,gf.uniforms.map.value=t.texture,gf.uniforms.radius.value=e,gf.uniforms.opacity.value=n,gf.uniforms.resolution.value.set(this.tempVector2.x,this.tempVector2.y),hf.render(this.renderer),this.copyTextureToRenderTarget(this.renderTarget2.texture,t,!0),this.renderer.setRenderTarget(i)}renderTargetAddGlow(t,e,n){this.rendererTagetAddStroke(t,1*e,n,.3),this.rendererTagetAddStroke(t,2*e,n,.2),this.rendererTagetAddStroke(t,3*e,n,.05),this.renderTargetgaussBlur(t,1,1),this.renderTargetgaussBlur(t,1,1),this.renderTargetgaussBlur(t,1,1)}renderRendererTarget(t,e=!1){ff.uniforms.map.value=t.texture,ff.uniforms.opacity.value=1,hf.material=ff,ff.blending=e?y:x,hf.render(this.renderer)}}class yf extends yr{constructor(){super(yf.geometry),s(this,"material",new Hi({side:v}))}setMap(t){this.material.map=op.getTexture(t)}}s(yf,"geometry",new bc(500,100,100));const xf=window.ningDeRenderer=new class extends _f{constructor(){super(),s(this,"ambientLight",(()=>{const t=new vu(8058111,.6);return this.scene.add(t),t})()),s(this,"directionalLight",(()=>{const t=new gu(8058111,.8);return t.position.set(20,10,0),t.target.position.set(0,0,0),t.castShadow=!0,t.shadow.far,t.shadow.mapSize.set(4096,4096),this.scene.add(t),t})()),s(this,"sky",(()=>{const t=new yf;return t.material.color.set("#000000"),this.scene.add(t),t})()),s(this,"floor",(()=>{const t=new up;return t.addEventListener("dbclick",(t=>{this.setLookAt({center:new sn(-5.082,0,4.522),position:new sn(-27.07,30.804,35.278)})})),Up.alignBottom(t,-.2),this.scene.add(t),t})()),s(this,"circlePoint",(()=>{const t=new lp;return this.scene.add(t),t})()),s(this,"rotatingPointBig",(()=>{const t=new nf;return Up.alignBottom(t,.1),this.scene.add(t),t})()),s(this,"rotatingPointSmall",(()=>{const t=new sf;return Up.alignBottom(t,.2),this.scene.add(t),t})()),s(this,"particleGroup",(()=>{let t=[];for(let e=0;e<16;e++){const e=new tf({width:180,height:189,frame:9,column:9,row:1,speed:.5});let n=Up.rand(5,10)/200;e.scale.set(n,n,n),e.rotation.x=Math.PI/2;Up.rand(-160,100),Up.rand(-10,100),Up.rand(-26,16);e.position.set(Qp.rand(-1e3,1e3),0,Up.rand(-1e3,1e3)).setLength(20+Up.rand(0,20)),e.position.setY(Qp.rand(0,50)),t.push(e)}const e=new class extends mo{constructor(){super()}updateMatrix(){if(super.updateMatrix(),t.length)for(let e=0;e<t.length;e++)t[e].updateSequenceFrame(),t[e].position.y+=.2,t[e].position.y>=50&&(t[e].position.y=0)}};return e.add(...t),this.scene.add(e),e})()),s(this,"ningDe",(()=>{const t=new Jp;return this.scene.add(t),t})())}init(){super.init(),this.renderer.shadowMap.enabled=!0,this.scene.background="#000000",this.controls.maxPolarAngle=Math.PI/(Qp.isDev?1:2),this.controls.screenSpacePanning=!1,this.controls.maxDistance=100,this.resetLookAt({center:new sn(-5.082,0,4.522),position:new sn(-27.07,30.804,35.278)})}GetCurrentCamera(){const{position:t,center:e}=this.getLookAt();return{position:{x:t.x,y:t.y,z:t.z},center:{x:e.x,y:e.y,z:e.z}}}async FlytoCamera(t){if(await new Promise((t=>requestAnimationFrame(t))),t){const{position:e,center:n}=t;this.setLookAt({position:new sn(e.x,e.y,e.z),center:new sn(n.x,n.y,n.z)})}}showBackgroud(t){this.floor.visible=t,this.circlePoint.visible=t,this.rotatingPointBig.visible=t,this.rotatingPointSmall.visible=t,this.particleGroup.visible=t}showParticleGroup(t){this.particleGroup.visible=t}render(){super.render()}};var bf=xf}}]);