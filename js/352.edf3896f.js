"use strict";(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[352],{63611:function(e,t,a){a.d(t,{Z:function(){return d}});a(57658);var s=a(21438),l=a(95576),i={props:{pLis:{type:Array,default:e=>[]},pMax:{type:Number,default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},action:{type:Array,default:()=>["file","scan"]},accept:{type:String,default:()=>"*"}},components:{FilePreview:s.Z,Camera:l.Z},data(){return{dResLis:[],dFileList:[],openFileDialogOnClick:!1,uuid:this.$core.uuid()}},inject:["AppVue"],computed:{dCameraLs(){return this.AppVue.dCameraLs}},mounted(){this.fnInit()},methods:{fnInit(){this.dFileList=this.pLis.map((e=>({url:"/g3"+e.url,uid:this.$core.uuid(),name:e.name||"image.png",status:"done"}))),this.dResLis=[...this.pLis].map(((e,t)=>(e.uid=this.dFileList[t].uid,e)))},async fnPreview(e){e.url?this.$refs.FilePreview.Init(e.url):e.response&&e.response.length>=1?this.$refs.FilePreview.Init("/g3"+e.response[0]):this.$refs.FilePreview.Init(e)},async fnChange({file:e,fileList:t,event:a}){if(this.dFileList=[...t],"done"===e.status){let t=e.response;t&&t.length>0&&(this.dResLis.push({name:e.name,size:e.size,type:e.type,url:t[0]}),this.$emit("update:pLis",this.dResLis))}"removed"===e.status&&(this.dResLis=[...this.dResLis.filter((t=>t.uid!=e.uid))],this.$emit("update:pLis",this.dResLis))},fnUpclick(e){"file"==e&&(this.openFileDialogOnClick=!0),"scan"==e&&(this.openFileDialogOnClick=!1),"camera"==e&&(this.openFileDialogOnClick=!1,this.AppVue.$refs.Camera.Init(this.uuid))},fnLog(e){},async fnEmOk(e){e&&e.length>0&&(e.map((e=>{this.dFileList.push({url:"/g3"+e,uid:this.$core.uuid(),name:"未命名",status:"done"}),this.dResLis.push({url:e})})),this.$emit("update:pLis",this.dResLis))}},watch:{dCameraLs(e){this.fnEmOk(e.filter((e=>e.uuid==this.uuid)).map((e=>e.src)))}}},d=(0,a(1001).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"clearfix"},[t("a-upload",{attrs:{action:"/g2/api/File/UploadFiles","list-type":"picture-card","file-list":e.dFileList,name:"files",multiple:e.pMax>1,openFileDialogOnClick:e.openFileDialogOnClick,disabled:e.disabled,accept:e.accept},on:{preview:e.fnPreview,change:e.fnChange}},[e.dFileList.length<e.pMax&&!e.readonly?t("div",[e.disabled?[t("a-icon",{staticStyle:{"font-size":"32px"},attrs:{type:"plus",color:"#1890ff"}}),t("div",{staticClass:"flexca",staticStyle:{"margin-top":"8px"}},[e.action.indexOf("file")>=0?t("a-button",{attrs:{type:"primary",size:"small",icon:"file",disabled:e.disabled},on:{click:function(t){return e.fnUpclick("file")}}},[e._v(" "+e._s(1==e.action.length?"选择文件":"")+" ")]):e._e(),e.action.indexOf("scan")>=0?t("a-button",{attrs:{type:"primary",size:"small",icon:"scan",disabled:e.disabled},on:{click:function(t){return e.fnUpclick("scan")}}},[e._v(" "+e._s(1==e.action.length?"扫描文件":"")+" ")]):e._e(),e.action.indexOf("camera")>=0?t("a-button",{attrs:{type:"primary",size:"small",icon:"camera",disabled:e.disabled},on:{click:function(t){return e.fnUpclick("camera")}}},[e._v(" "+e._s(1==e.action.length?"高拍仪":"")+" ")]):e._e()],1)]:[1==e.action.length?t("a-icon",{staticStyle:{"font-size":"32px"},attrs:{type:"plus",color:"#1890ff"},on:{click:function(t){return e.fnUpclick(e.action[0])}}}):[t("a-dropdown",{attrs:{trigger:["click"]}},[t("a-icon",{staticStyle:{"font-size":"32px",width:"100%"},attrs:{type:"plus",color:"#1890ff"}}),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e.action.indexOf("file")>=0?t("a-menu-item",{on:{click:function(t){return e.fnUpclick("file")}}},[e._v("选择本地文件")]):e._e(),e.action.indexOf("scan")>=0?t("a-menu-item",{on:{click:function(t){return e.fnUpclick("scan")}}},[e._v("高拍仪扫描")]):e._e(),e.action.indexOf("camera")>=0?t("a-menu-item",{on:{click:function(t){return e.fnUpclick("camera")}}},[e._v("高拍仪")]):e._e()],1)],1)],t("div",{staticClass:"flexca",staticStyle:{"margin-top":"8px"}},[t("a-tooltip",{attrs:{title:"选择本地文件"}},[e.action.indexOf("file")>=0?t("a-button",{attrs:{type:"primary",size:"small",icon:"file",disabled:e.disabled},on:{click:function(t){return e.fnUpclick("file")}}},[e._v(" "+e._s(1==e.action.length?"选择文件":"")+" ")]):e._e()],1),t("a-tooltip",{attrs:{title:"高拍仪扫描"}},[e.action.indexOf("scan")>=0?t("a-button",{attrs:{type:"primary",size:"small",icon:"scan",disabled:e.disabled},on:{click:function(t){return e.fnUpclick("scan")}}},[e._v(" "+e._s(1==e.action.length?"扫描文件":"")+" ")]):e._e()],1),t("a-tooltip",{attrs:{title:"高拍仪"}},[e.action.indexOf("camera")>=0?t("a-button",{attrs:{type:"primary",size:"small",icon:"camera",disabled:e.disabled},on:{click:function(t){return e.fnUpclick("camera")}}},[e._v(" "+e._s(1==e.action.length?"高拍仪":"")+" ")]):e._e()],1)],1)]],2):e._e()]),t("FilePreview",{ref:"FilePreview"}),t("Camera",{ref:"Camera",on:{emOk:e.fnEmOk}})],1)}),[],!1,null,"52c12617",null).exports},35512:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(28511),l=a(11928),i=a(21438),d={components:{AttachmentEdit:l.Z,FilePreview:i.Z},data(){return{schema:s.Z,loading:!0,loadingMore:!1,showLoadingMore:!0,data:[]}},props:{TableName:{type:String},TableID:{type:Number},TableID_Name:{type:String},ops:{type:Array,default:["preview","down","edit","delete"]}},mounted(){this.fnTb_Query()},methods:{async fnTb_Query(){let e={TableID:this.TableID,TableName:"t_clue",pageIndex:0,pageSize:10},t=await this.$api2(s.Z.Url.GetCount,e);if(t&&t.isOk){if(parseInt(t.data)>0){let t=await this.$api2(s.Z.Url.GetList,e);t&&t.isOk&&(this.data=[].concat(t.data))}}this.loading=!1,this.loadingMore=!1,this.showLoadingMore=!1},async fnRefEdit(e=0){await this.$refs.refAttachmentEdit.Init(e),await this.$refs.refAttachmentEdit.fnSetPro(this.TableName,this.TableID,this.TableID_Name)},async fnTb_Del(e){if(!e||e.length<=0)return this.$message.error("请选择要删除的"+this.schema.Desc+"数据");let t=this;this.$confirm({title:"操作确认",content:"确认删除当前选中的"+e.length+"条记录",onOk(){t.$api2(t.schema.Url.Delete,e).then((e=>{e&&e.isOk?(t.$message.success(t.schema.Desc+"数据已成功删除"),t.fnTb_Query()):t.$message.error(e&&e.message||"数据删除失败")}))}})}}},o=(0,a(1001).Z)(d,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{margin:"0 15px"}},[t("a-list",{attrs:{loading:e.loading,"item-layout":"vertical","data-source":e.data},scopedSlots:e._u([{key:"renderItem",fn:function(a,s){return t("a-list-item",{},[t("a-list-item-meta",[t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(a.name))]),t("span",{attrs:{slot:"description"},slot:"description"},[t("span",[e._v("更新于："+e._s(e._f("DATE")(a.uploadDate)))])])]),t("div",{staticClass:"flexce"},[t("a-space",[e.ops.indexOf("preview")>=0?[t("a",{on:{click:function(t){return e.$refs.FilePreview.Init("/g3"+a.relativePath,null,a.name)}}},[e._v("预览")])]:e._e(),e.ops.indexOf("down")>=0?[t("a",{on:{click:function(t){return e.$refs.FilePreview.Down("/g3"+a.relativePath,null,a.name)}}},[e._v("下载")])]:e._e(),e.ops.indexOf("edit")>=0?[t("a",{on:{click:function(t){return e.fnRefEdit(a.fid)}}},[e._v("修改")])]:e._e(),e.ops.indexOf("delete")>=0?[t("a",{on:{click:function(t){return e.fnTb_Del([a.fid])}}},[e._v("删除")])]:e._e()],2)],1)],1)}}])},[e.showLoadingMore?t("div",{style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"},attrs:{slot:"loadMore"},slot:"loadMore"},[e.loadingMore?t("a-spin"):t("a-button",[e._v("加载更多")])],1):e._e()]),t("AttachmentEdit",{ref:"refAttachmentEdit",on:{emOk:function(t){return e.fnTb_Query()}}}),t("FilePreview",{ref:"FilePreview"})],1)}),[],!1,null,"5c40b70a",null).exports},25741:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var s=a(11159),l=(a(57658),a(83047)),i=a(26839),d=a(55743),o=a.n(d),r=a(35512),n=a(63611),c={components:{TableEdit:l.Z,Files:r.Z,Uploads:n.Z},computed:{isAdmin:function(){return this.$store.state.user.roles.indexOf("admin")>=0},isUserDeep:function(){return parseInt(this.$store.state.user.division_deep||0)}},data(){return{schema:s.Z,dObj:{show:!1,load:!1,mod:null,title:""},dTabidx:0,isAssigned:!1,xfStaus:0}},async mounted(){let e=await(0,i.pr)();e&&"根部门"==e[0].name&&(this.dSysDept=e[0].children)},methods:{async Init(e,t){if(null==e||e<=0)this.dObj.show=!1;else if(this.xfStaus=parseInt(t),e>0){this.dObj.show=!0,this.dObj.mod=null,this.dObj.load=!0;let t=await this.$api2(s.Z.Url.Get,null,{fid:e});if(this.dObj.load=!1,t&&t.isOk&&null!=t.data){let e=this.schema.EditFilter&&await this.schema.EditFilter(t.data)||t.data;0==e.contactInfoList.items.length&&e.contactInfoList.items.push({name:"",phone:"",plateNumber:"",qq:"",wechat:""}),0==e.customFieldList.items.length&&e.customFieldList.items.push({fieldName:"",fieldValue:""}),0==e.debitCardNumberList.items.length&&e.debitCardNumberList.items.push({fieldName:"",fieldValue:""}),0==e.expressNumberList.items.length&&e.expressNumberList.items.push({fieldName:"",fieldValue:""}),this.dObj.mod=e}else this.$message.error(t&&t.message||this.schema.Desc+"信息查询失败")}else this.dObj.show=!0,this.dObj.mod=null},async fnSave(e){let t=this.schema.SaveFilter&&this.schema.SaveFilter(this.dObj.mod)||this.dObj.mod;if("xiafa"==e){if(this.dObj.mod.assignDate=o()().toJSON(),null==this.dObj.mod.respondDueDate)return void this.$message.error("请输入反馈期限");if(o()(this.dObj.mod.respondDueDate)<=o()())return void this.$message.error("反馈期限不能小于当前时间");if(null==this.dObj.mod.assignDeptID||this.dObj.mod.assignDeptID<=0)return void this.$message.error("请输入下发单位");if(null==this.dObj.mod.filterResultID||this.dObj.mod.filterResultID<=0)return void this.$message.error("请选择初研状态");await this.fnSave("baocun"),this.dObj.load=!0;let e=await this.$api2("/api/Workflow/Submit_t_clue",{id:this.dObj.mod.fid});return this.dObj.load=!1,void(e&&e.isOk?(this.fnClose(),this.$message.success(this.schema.Desc+"下发成功")):this.$message.error(this.schema.Desc+"下发失败"))}if("qurenxiafa"==e||"quxiaoxiafa"==e){this.dObj.load=!0;let t=await this.$api2("/api/Workflow/Submit_t_clue",{id:this.dObj.mod.fid,state:"qurenxiafa"==e?1:0});return this.dObj.load=!1,void(t&&t.isOk?(this.fnClose(),this.$message.success(this.schema.Desc+"操作成功")):this.$message.error(this.schema.Desc+"操作失败"))}if("baocun"==e){this.dObj.load=!0;let e=await this.$api2(this.schema.Url.Save,t);return this.dObj.load=!1,void(e&&e.isOk?parseInt(e.data)>0?(this.dObj.mod.fid=parseInt(e.data),this.schema.SaveFilterEnd&&this.schema.SaveFilterEnd(this.dObj.mod),this.$emit("emOk",!0)):this.$message.error("数据保存失败"):this.$message.error(e&&e.message||this.schema.Desc+"数据保存失败"))}},fnClose(){this.dObj.show=!1,this.$emit("emOk",!0)}}},m=a(1001),p=(0,m.Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main main1",class:e.dObj.show?"show":"hide"},[t("div",{staticClass:"main-tit"},[t("div",[e._v("线索详情")]),t("a-icon",{staticClass:"close",attrs:{type:"close-circle"},on:{click:function(t){return e.fnClose()}}})],1),t("div",{staticClass:"main-con"},[null==e.dObj.load||e.dObj.load?e._e():t("div",{staticClass:"lbox"},[t("div",{staticClass:"lbotab"},[t("a-button",{staticClass:"btn",class:0==e.dTabidx?"active":"noactive",attrs:{type:"primary"},on:{click:function(t){e.dTabidx=0}}},[e._v("基本信息")]),t("a-button",{staticClass:"btn",class:1==e.dTabidx?"active":"noactive",attrs:{type:"primary"},on:{click:function(t){e.dTabidx=1}}},[e._v("副页信息")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.dTabidx&&null!=e.dObj.mod,expression:"dTabidx==0 && dObj.mod !=null"}],staticClass:"tab0",class:2==e.isUserDeep?"theight2":"theight3"},[null!=e.dObj.mod?t("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:14}}},[t("a-form-model-item",{attrs:{label:"行政区划",prop:"divisionID"}},[t("a-tree-select",{attrs:{treeData:e.$AREA,replaceFields:{title:"name",value:"id",children:"children",key:"id"},placeholder:"请选择行政区划","allow-clear":"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.divisionID,callback:function(t){e.$set(e.dObj.mod,"divisionID",t)},expression:"dObj.mod.divisionID"}})],1),t("a-form-model-item",{attrs:{label:"督办类别",prop:"caseCategoryID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择督办类别",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.caseCategoryID,callback:function(t){e.$set(e.dObj.mod,"caseCategoryID",t)},expression:"dObj.mod.caseCategoryID"}},e._l(e.$DICT.filter((e=>"d_caseCategory"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-form-model-item",{attrs:{label:"线索类别",prop:"clueCategoryID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索类别",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.clueCategoryID,callback:function(t){e.$set(e.dObj.mod,"clueCategoryID",t)},expression:"dObj.mod.clueCategoryID"}},e._l(e.$DICT.filter((e=>"d_clueCategory"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-form-model-item",{attrs:{label:"线索等级",prop:"clueGradeID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索等级",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.clueGradeID,callback:function(t){e.$set(e.dObj.mod,"clueGradeID",t)},expression:"dObj.mod.clueGradeID"}},e._l(e.$DICT.filter((e=>"d_clueGrade"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-form-model-item",{attrs:{label:"线索来源",prop:"clueSourceID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索来源",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.clueSourceID,callback:function(t){e.$set(e.dObj.mod,"clueSourceID",t)},expression:"dObj.mod.clueSourceID"}},e._l(e.$DICT.filter((e=>"d_clueSource"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),3==e.isUserDeep?t("a-form-model-item",{attrs:{label:"线索状态",prop:"clueStateID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索状态",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.clueStateID,callback:function(t){e.$set(e.dObj.mod,"clueStateID",t)},expression:"dObj.mod.clueStateID"}},e._l(e.$DICT.filter((e=>"d_clueState"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1):e._e(),t("a-form-model-item",{attrs:{label:"受侵害地点",prop:"case_happened_address"}},[t("a-input",{attrs:{placeholder:"请输入受侵害地点",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.case_happened_address,callback:function(t){e.$set(e.dObj.mod,"case_happened_address",t)},expression:"dObj.mod.case_happened_address"}})],1),t("a-form-model-item",{attrs:{label:"受害者所在地",prop:"case_victim_place"}},[t("a-input",{attrs:{placeholder:"请输入受害者所在地",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.case_victim_place,callback:function(t){e.$set(e.dObj.mod,"case_victim_place",t)},expression:"dObj.mod.case_victim_place"}})],1),t("a-form-model-item",{attrs:{label:"案发时间",prop:"case_happened_date"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入生成时间","show-time":"",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.case_happened_date,callback:function(t){e.$set(e.dObj.mod,"case_happened_date",t)},expression:"dObj.mod.case_happened_date"}})],1),t("a-form-model-item",{attrs:{label:"案件描述",prop:"case_description"}},[t("a-textarea",{attrs:{placeholder:"请输入案件描述","show-count":"",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.case_description,callback:function(t){e.$set(e.dObj.mod,"case_description",t)},expression:"dObj.mod.case_description"}})],1),t("a-form-model-item",{attrs:{label:"录入时间",prop:"createDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入生成时间","show-time":"",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.createDate,callback:function(t){e.$set(e.dObj.mod,"createDate",t)},expression:"dObj.mod.createDate"}})],1),t("a-form-model-item",{attrs:{label:"资金交易方式",prop:"paymentid"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择资金交易方式",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.paymentid,callback:function(t){e.$set(e.dObj.mod,"paymentid",t)},expression:"dObj.mod.paymentid"}},e._l(e.$DICT.filter((e=>"d_payment"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-form-model-item",{attrs:{label:"嫌疑单位",prop:"suspect"}},[t("a-input",{attrs:{placeholder:"请输入嫌疑单位",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.suspect,callback:function(t){e.$set(e.dObj.mod,"suspect",t)},expression:"dObj.mod.suspect"}})],1),t("a-form-model-item",{attrs:{label:"举报人/单位",prop:"informer"}},[t("a-input",{attrs:{placeholder:"请输入举报人/单位",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.informer,callback:function(t){e.$set(e.dObj.mod,"informer",t)},expression:"dObj.mod.informer"}})],1),t("a-form-model-item",{attrs:{label:"举报人电话",prop:"informer_contact"}},[t("a-input",{attrs:{placeholder:"请输入举报人联系方式",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.informer_contact,callback:function(t){e.$set(e.dObj.mod,"informer_contact",t)},expression:"dObj.mod.informer_contact"}})],1),t("a-form-model-item",{attrs:{label:"举报时间",prop:"inform_date"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入举报时间","show-time":"",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.inform_date,callback:function(t){e.$set(e.dObj.mod,"inform_date",t)},expression:"dObj.mod.inform_date"}})],1),t("a-form-model-item",{attrs:{label:"移送单位",prop:"transfer_unit"}},[t("a-input",{attrs:{placeholder:"请输入移送单位",allowClear:"",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:e.dObj.mod.transfer_unit,callback:function(t){e.$set(e.dObj.mod,"transfer_unit",t)},expression:"dObj.mod.transfer_unit"}})],1),e._l(e.dObj.mod.contactInfoList.items,(function(a,s){return[t("a-form-model-item",{key:s,attrs:{colon:!1}},[t("div",{attrs:{slot:"label"},slot:"label"},[t("div",[e._v("联系方式"+e._s(s+1)+":")]),t("div",[2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{attrs:{type:"link",icon:"plus-square"},on:{click:function(t){return e.dObj.mod.contactInfoList.items.push({name:"",phone:"",plateNumber:"",qq:"",wechat:""})}}},[e._v("增加")]):e._e()],1),t("div",[2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{attrs:{type:"link",icon:"minus-square",disabled:1==e.dObj.mod.contactInfoList.items.length||2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.contactInfoList.items.splice(s,1)}}},[e._v("删除")]):e._e()],1)]),t("a-input-group",{attrs:{compact:""}},[t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"姓名",disabled:!0}}),t("a-input",{staticStyle:{width:"calc(100% - 30%)"},attrs:{placeholder:"姓名",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"it.name"}})],1),t("a-input-group",{staticStyle:{"margin-top":"5px"},attrs:{compact:""}},[t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"电话",disabled:!0}}),t("a-input",{staticStyle:{width:"calc(100% - 30%)"},attrs:{placeholder:"电话",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.phone,callback:function(t){e.$set(a,"phone",t)},expression:"it.phone"}})],1),t("a-input-group",{staticStyle:{"margin-top":"5px"},attrs:{compact:""}},[t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"车牌",disabled:!0}}),t("a-input",{staticStyle:{width:"calc(100% - 30%)"},attrs:{placeholder:"车牌号",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.plateNumber,callback:function(t){e.$set(a,"plateNumber",t)},expression:"it.plateNumber"}})],1),t("a-input-group",{staticStyle:{"margin-top":"5px"},attrs:{compact:""}},[t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"QQ",disabled:!0}}),t("a-input",{staticStyle:{width:"calc(100% - 30%)"},attrs:{placeholder:"QQ",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.qq,callback:function(t){e.$set(a,"qq",t)},expression:"it.qq"}})],1),t("a-input-group",{staticStyle:{"margin-top":"5px"},attrs:{compact:""}},[t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"微信",disabled:!0}}),t("a-input",{staticStyle:{width:"calc(100% - 30%)"},attrs:{placeholder:"微信",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.wechat,callback:function(t){e.$set(a,"wechat",t)},expression:"it.wechat"}})],1)],1)]})),t("a-form-model-item",{attrs:{label:"卡号信息"}},e._l(e.dObj.mod.debitCardNumberList.items,(function(a,s){return t("a-input-group",{key:s,attrs:{compact:""}},[2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{staticStyle:{padding:"0",width:"25px"},attrs:{disabled:2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.debitCardNumberList.items.push({fieldName:"",fieldValue:""})}}},[e._v("+")]):e._e(),t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"项目",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.fieldName,callback:function(t){e.$set(a,"fieldName",t)},expression:"it.fieldName"}}),t("a-input",{staticStyle:{width:"calc(100% - 30% - 50px)"},attrs:{placeholder:"内容",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.fieldValue,callback:function(t){e.$set(a,"fieldValue",t)},expression:"it.fieldValue"}}),2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{staticStyle:{padding:"0",width:"25px"},attrs:{disabled:1==e.dObj.mod.debitCardNumberList.items.length||2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.debitCardNumberList.items.splice(s,1)}}},[e._v("-")]):e._e()],1)})),1),t("a-form-model-item",{attrs:{label:"单号信息"}},e._l(e.dObj.mod.expressNumberList.items,(function(a,s){return t("a-input-group",{key:s,attrs:{compact:""}},[2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{staticStyle:{padding:"0",width:"25px"},attrs:{disabled:2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.expressNumberList.items.push({fieldName:"",fieldValue:""})}}},[e._v("+")]):e._e(),t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"项目",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.fieldName,callback:function(t){e.$set(a,"fieldName",t)},expression:"it.fieldName"}}),t("a-input",{staticStyle:{width:"calc(100% - 30% - 50px)"},attrs:{placeholder:"内容",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.fieldValue,callback:function(t){e.$set(a,"fieldValue",t)},expression:"it.fieldValue"}}),2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{staticStyle:{padding:"0",width:"25px"},attrs:{disabled:1==e.dObj.mod.expressNumberList.items.length||2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.expressNumberList.items.splice(s,1)}}},[e._v("-")]):e._e()],1)})),1),t("a-form-model-item",{attrs:{label:"自定义信息"}},e._l(e.dObj.mod.customFieldList.items,(function(a,s){return t("a-input-group",{key:s,attrs:{compact:""}},[2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{staticStyle:{padding:"0",width:"25px"},attrs:{disabled:2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.customFieldList.items.push({fieldName:"",fieldValue:""})}}},[e._v("+")]):e._e(),t("a-input",{staticStyle:{width:"30%"},attrs:{placeholder:"项目",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.fieldName,callback:function(t){e.$set(a,"fieldName",t)},expression:"it.fieldName"}}),t("a-input",{staticStyle:{width:"calc(100% - 30% - 50px)"},attrs:{placeholder:"内容",disabled:2==e.isUserDeep&&2==e.xfStaus},model:{value:a.fieldValue,callback:function(t){e.$set(a,"fieldValue",t)},expression:"it.fieldValue"}}),2!=e.isUserDeep||2!=e.xfStaus?t("a-button",{staticStyle:{padding:"0",width:"25px"},attrs:{disabled:1==e.dObj.mod.customFieldList.items.length||2==e.isUserDeep&&2==e.xfStaus},on:{click:function(t){return e.dObj.mod.customFieldList.items.splice(s,1)}}},[e._v("-")]):e._e()],1)})),1)],2):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.dTabidx&&null!=e.dObj.mod,expression:"dTabidx==1 && dObj.mod !=null"}],staticClass:"tab0",class:2==e.isUserDeep?"theight2":"theight3"},[null!=e.dObj.mod?t("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:14}}},[t("a-form-model-item",{attrs:{label:"宣传内容",prop:"content"}},[t("a-textarea",{attrs:{placeholder:"请输入宣传内容","show-count":"",allowClear:"",disabled:2==e.isUserDeep&&(2==e.xfStaus||1==e.xfStaus)},model:{value:e.dObj.mod.content,callback:function(t){e.$set(e.dObj.mod,"content",t)},expression:"dObj.mod.content"}})],1),t("a-form-model-item",{attrs:{label:"网页链接",prop:"websiteUrl"}},[t("a-input",{attrs:{placeholder:"请输入网页链接",allowClear:"",disabled:2==e.isUserDeep&&(2==e.xfStaus||1==e.xfStaus)},model:{value:e.dObj.mod.websiteUrl,callback:function(t){e.$set(e.dObj.mod,"websiteUrl",t)},expression:"dObj.mod.websiteUrl"}})],1),t("a-form-model-item",{attrs:{label:"选择图片",prop:"_pathimg"}},[t("Uploads",{attrs:{pLis:e.dObj.mod._Attachment_Img,pMax:100,action:["file","camera"],disabled:2==e.isUserDeep&&(2==e.xfStaus||1==e.xfStaus)},on:{"update:pLis":function(t){return e.$set(e.dObj.mod,"_Attachment_Img",t)},"update:p-lis":function(t){return e.$set(e.dObj.mod,"_Attachment_Img",t)}}})],1),t("a-form-model-item",{attrs:{label:"选择附件",prop:"_pathfile"}},[t("Uploads",{attrs:{pLis:e.dObj.mod._Attachment_File,pMax:100,action:["file","camera"],disabled:2==e.isUserDeep&&(2==e.xfStaus||1==e.xfStaus)},on:{"update:pLis":function(t){return e.$set(e.dObj.mod,"_Attachment_File",t)},"update:p-lis":function(t){return e.$set(e.dObj.mod,"_Attachment_File",t)}}})],1)],1):e._e()],1)]),e.dObj.load?t("a-spin",{staticClass:"spin main-con-null",attrs:{spinning:e.dObj.load,tip:"数据加载中..."}}):e._e(),e.dObj.load||null!=e.dObj.mod?e._e():t("a-empty",{staticClass:"empty main-con-null",attrs:{description:"暂无数据"}})],1)]),t("div",{staticClass:"main main2",class:e.dObj.show?"show":"hide"},[3==e.isUserDeep?t("div",{staticClass:"main-tit"},[e._v("线索状态")]):0==e.xfStaus||1==e.xfStaus?t("div",{staticClass:"main-tit"},[e._v("研判下发")]):t("div",{staticClass:"main-tit"},[e._v("线索状态")]),t("div",{staticClass:"main-con",class:2==e.isUserDeep?"height2":"height3"},[null==e.dObj.mod||e.dObj.load?e._e():t("div",{staticClass:"lbox"},[t("a-form-model",{attrs:{"label-col":{span:8},"wrapper-col":{span:14}}},[2==e.isUserDeep?[0==e.xfStaus?[t("a-form-model-item",{attrs:{label:"线索编号"}},[t("a-input",{attrs:{placeholder:"请输入线索编号",allowClear:"",disabled:""},model:{value:e.dObj.mod.clueCode,callback:function(t){e.$set(e.dObj.mod,"clueCode",t)},expression:"dObj.mod.clueCode"}})],1),t("a-form-model-item",{attrs:{label:"产品名称"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",allowClear:""},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1),t("a-form-model-item",{attrs:{label:"案发地点"}},[t("a-input",{attrs:{placeholder:"请输入案发地点"},model:{value:e.dObj.mod.case_happened_place,callback:function(t){e.$set(e.dObj.mod,"case_happened_place",t)},expression:"dObj.mod.case_happened_place"}})],1),t("a-form-model-item",{attrs:{label:"反馈期限"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈期限","show-time":"",allowClear:""},model:{value:e.dObj.mod.respondDueDate,callback:function(t){e.$set(e.dObj.mod,"respondDueDate",t)},expression:"dObj.mod.respondDueDate"}})],1),t("a-form-model-item",{attrs:{label:"下发单位"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",treeData:e.dSysDept,replaceFields:{title:"name",value:"id",key:"id"},placeholder:"选择下发单位",searchPlaceholder:"请输入关键字过滤","allow-clear":"",treeNodeFilterProp:"title"},model:{value:e.dObj.mod.assignDeptID,callback:function(t){e.$set(e.dObj.mod,"assignDeptID",t)},expression:"dObj.mod.assignDeptID"}})],1),t("a-form-model-item",{attrs:{label:"初研状态"}},[t("a-radio-group",{attrs:{name:"d_clueFilterResult",options:e.$DICT.filter((e=>"d_clueFilterResult"==e.tableName)).map((e=>({label:e.name,value:e.fid})))},model:{value:e.dObj.mod.filterResultID,callback:function(t){e.$set(e.dObj.mod,"filterResultID",t)},expression:"dObj.mod.filterResultID"}})],1),t("div",{staticClass:"lbtn"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.fnSave("baocun")}}},[e._v("保存")]),t("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.fnSave("xiafa")}}},[e._v("下发申请")])],1)]:e._e(),1==e.xfStaus?[t("a-form-model-item",{attrs:{label:"线索编号"}},[t("a-input",{attrs:{placeholder:"请输入线索编号",allowClear:"",disabled:""},model:{value:e.dObj.mod.clueCode,callback:function(t){e.$set(e.dObj.mod,"clueCode",t)},expression:"dObj.mod.clueCode"}})],1),t("a-form-model-item",{attrs:{label:"产品名称"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",allowClear:"",disabled:!e.isAdmin},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1),t("a-form-model-item",{attrs:{label:"案发地点"}},[t("a-input",{attrs:{placeholder:"请输入案发地点",allowClear:"",disabled:!e.isAdmin},model:{value:e.dObj.mod.case_happened_place,callback:function(t){e.$set(e.dObj.mod,"case_happened_place",t)},expression:"dObj.mod.case_happened_place"}})],1),t("a-form-model-item",{attrs:{label:"反馈期限"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请输入反馈期限","show-time":"",allowClear:""},model:{value:e.dObj.mod.respondDueDate,callback:function(t){e.$set(e.dObj.mod,"respondDueDate",t)},expression:"dObj.mod.respondDueDate"}})],1),t("a-form-model-item",{attrs:{label:"下发单位"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{disabled:"","show-search":"",treeData:e.dSysDept,replaceFields:{title:"name",value:"id",key:"id"},placeholder:"选择下发单位",searchPlaceholder:"请输入关键字过滤","allow-clear":"",treeNodeFilterProp:"title"},model:{value:e.dObj.mod.assignDeptID,callback:function(t){e.$set(e.dObj.mod,"assignDeptID",t)},expression:"dObj.mod.assignDeptID"}})],1),t("a-form-model-item",{attrs:{label:"初研状态"}},[t("a-radio-group",{attrs:{name:"d_clueFilterResult",options:e.$DICT.filter((e=>"d_clueFilterResult"==e.tableName)).map((e=>({label:e.name,value:e.fid}))),value:e.dObj.mod.filterResultID}})],1),e.isAdmin?t("div",{staticClass:"lbtn"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.fnSave("baocun")}}},[e._v("保存")]),t("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.fnSave("qurenxiafa")}}},[e._v("确认下发")]),t("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.fnSave("quxiaoxiafa")}}},[e._v("作废")])],1):e._e()]:e._e(),2==e.xfStaus?[t("a-form-model-item",{attrs:{label:"线索编号"}},[t("a-input",{attrs:{placeholder:"请输入线索编号",allowClear:"",disabled:""},model:{value:e.dObj.mod.clueCode,callback:function(t){e.$set(e.dObj.mod,"clueCode",t)},expression:"dObj.mod.clueCode"}})],1),t("a-form-model-item",{attrs:{label:"产品名称"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",allowClear:"",disabled:""},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1),t("a-form-model-item",{attrs:{label:"案发地点"}},[t("a-input",{attrs:{placeholder:"请输入案发地点",allowClear:"",disabled:""},model:{value:e.dObj.mod.case_happened_place,callback:function(t){e.$set(e.dObj.mod,"case_happened_place",t)},expression:"dObj.mod.case_happened_place"}})],1),t("a-form-model-item",{attrs:{label:"反馈期限"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈期限","show-time":"",allowClear:"",disabled:""},model:{value:e.dObj.mod.respondDueDate,callback:function(t){e.$set(e.dObj.mod,"respondDueDate",t)},expression:"dObj.mod.respondDueDate"}})],1),t("a-form-model-item",{attrs:{label:"下发单位"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",treeData:e.dSysDept,replaceFields:{title:"name",value:"id",key:"id"},placeholder:"选择下发单位",searchPlaceholder:"请输入关键字过滤","allow-clear":"",treeNodeFilterProp:"title",disabled:""},model:{value:e.dObj.mod.assignDeptID,callback:function(t){e.$set(e.dObj.mod,"assignDeptID",t)},expression:"dObj.mod.assignDeptID"}})],1),t("a-form-model-item",{attrs:{label:"下发时间"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入下发时间","show-time":"",allowClear:"",disabled:""},model:{value:e.dObj.mod.assignDate,callback:function(t){e.$set(e.dObj.mod,"assignDate",t)},expression:"dObj.mod.assignDate"}})],1),t("a-form-model-item",{attrs:{label:"初研状态"}},[t("a-radio-group",{attrs:{name:"d_clueFilterResult",options:e.$DICT.filter((e=>"d_clueFilterResult"==e.tableName)).map((e=>({label:e.name,value:e.fid}))),value:e.dObj.mod.filterResultID,disabled:""}})],1)]:e._e()]:[t("a-form-model-item",{attrs:{label:"线索编号"}},[t("a-input",{attrs:{placeholder:"请输入线索编号",allowClear:"",disabled:""},model:{value:e.dObj.mod.clueCode,callback:function(t){e.$set(e.dObj.mod,"clueCode",t)},expression:"dObj.mod.clueCode"}})],1),t("a-form-model-item",{attrs:{label:"产品名称"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",allowClear:""},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1),t("a-form-model-item",{attrs:{label:"案发地点"}},[t("a-input",{attrs:{placeholder:"请输入案发地点",allowClear:""},model:{value:e.dObj.mod.case_happened_place,callback:function(t){e.$set(e.dObj.mod,"case_happened_place",t)},expression:"dObj.mod.case_happened_place"}})],1),t("a-form-model-item",{attrs:{label:"反馈期限"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈期限","show-time":"",allowClear:"",disabled:""},model:{value:e.dObj.mod.respondDueDate,callback:function(t){e.$set(e.dObj.mod,"respondDueDate",t)},expression:"dObj.mod.respondDueDate"}})],1),t("a-form-model-item",{attrs:{label:"下发时间"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入下发时间","show-time":"",allowClear:"",disabled:""},model:{value:e.dObj.mod.assignDate,callback:function(t){e.$set(e.dObj.mod,"assignDate",t)},expression:"dObj.mod.assignDate"}})],1),t("a-form-model-item",{attrs:{label:"初研状态"}},[t("a-radio-group",{attrs:{name:"d_clueFilterResult",options:e.$DICT.filter((e=>"d_clueFilterResult"==e.tableName)).map((e=>({label:e.name,value:e.fid}))),value:e.dObj.mod.filterResultID,disabled:""}})],1),t("a-form-model-item",{attrs:{label:"下发单位"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",treeData:e.dSysDept,replaceFields:{title:"name",value:"id",key:"id"},placeholder:"选择下发单位",searchPlaceholder:"请输入关键字过滤","allow-clear":"",treeNodeFilterProp:"title",disabled:""},model:{value:e.dObj.mod.assignDeptID,callback:function(t){e.$set(e.dObj.mod,"assignDeptID",t)},expression:"dObj.mod.assignDeptID"}})],1),t("a-form-model-item",{attrs:{label:"线索状态"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"请选择线索状态"},model:{value:e.dObj.mod.clueStateID,callback:function(t){e.$set(e.dObj.mod,"clueStateID",t)},expression:"dObj.mod.clueStateID"}},e._l(e.$DICT.filter((e=>"d_clueState"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),3==e.dObj.mod.clueStateID?t("a-form-model-item",{attrs:{label:"立案编号"}},[t("a-input",{attrs:{placeholder:"请输入立案编号",allowClear:""},model:{value:e.dObj.mod.caseNo,callback:function(t){e.$set(e.dObj.mod,"caseNo",t)},expression:"dObj.mod.caseNo"}})],1):e._e(),t("div",{staticClass:"lbtn"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.fnSave("baocun")}}},[e._v("保存")])],1)]],2)],1),e.dObj.load?t("a-spin",{staticClass:"spin main-con-null",attrs:{spinning:e.dObj.load,tip:"数据加载中..."}}):e._e(),e.dObj.load||null!=e.dObj.mod?e._e():t("a-empty",{staticClass:"empty main-con-null",attrs:{description:"暂无数据"}})],1)])])}),[],!1,null,"a2d5f504",null).exports,u=a(2670),b=a(41017),f={extends:u.AS,computed:{isAdmin:function(){return this.$store.state.user.roles.indexOf("admin")>=0},isUserDeep:function(){return parseInt(this.$store.state.user.division_deep||0)},isCanOkSave(){if(null==this.dObj.mod)return!0;if(this.dObj.mod.fid<=0)return!0;let e=2,t=this.dObj.mod.clueFlowNodeID;return 1==t&&(e=0),2==t&&(e=1),2!=this.isUserDeep||(0==e||(1==e?!!this.isAdmin:2!=e&&void 0))}},components:{TableEdit:l.Z,TableEditUser:b.Z,Uploads:n.Z},data(){return{schema:s.Z,dSysDept:[]}},async created(){this.dSysDept=await(0,i.pr)()},methods:{async Save(){this.$refs.editref.validate((async e=>{if(!e)return this.$message.error("输入数据校验失败，请重新输入"),!1;{this.dObj.mod.divisionID=this.$store.state.user.division_id,3==this.isUserDeep&&(this.dObj.mod.isCreatedByCounty=!0),this.dObj.load=!0;let e=this.schema.SaveFilter&&this.schema.SaveFilter(this.dObj.mod)||this.dObj.mod,t=await this.$api2(this.schema.Url.Save,e);if(this.dObj.load=!1,t&&t.isOk)if(parseInt(t.data)>0){if(this.$message.success(this.schema.Desc+"数据保存成功"),0==this.dObj.mod.fid){await this.$api2("/api/Workflow/Submit_t_clue",{id:parseInt(t.data)})}this.dObj.mod.fid=parseInt(t.data),this.schema.SaveFilterEnd&&this.schema.SaveFilterEnd(this.dObj.mod),this.dObj.show=!1,this.$emit("emOk",!0)}else this.$message.error("数据保存失败");else this.$message.error(t&&t.message||this.schema.Desc+"数据保存失败")}}))}}},h=(0,m.Z)(f,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{visible:e.dObj.show,title:e.isCanOkSave?(e.dObj.mod&&e.dObj.mod.fid>0?"修改":"新增")+e.dObj.title:"线索详情",width:1280,maskClosable:!1},on:{ok:function(t){return e.Save()},cancel:function(t){return e.Cancel()}}},[t("a-spin",{attrs:{spinning:e.dObj.load,tip:e.dObj.title+"可编辑数据加载中..."}},[t("div",{style:e.dObj.load?"min-height:280px":""},[null!=e.dObj.mod?t("a-form-model",{ref:"editref",staticClass:"inline-form",attrs:{model:e.dObj.mod,rules:e.dObj.rules,labelCol:{style:{minWidth:"130px"}},layout:"horizontal",labelAlign:"left"}},[t("input",{attrs:{type:"hidden"},domProps:{value:e.dObj.mod.fid}}),t("a-tabs",[t("a-tab-pane",{key:"0",staticStyle:{"max-height":"70vh",overflow:"auto"},attrs:{tab:"基础信息"}},[t("a-row",{staticClass:"column2",staticStyle:{"margin-right":"0"},attrs:{gutter:[32,0]}},[t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"产品名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"线索编号",prop:"clueCode"}},[t("a-input",{attrs:{placeholder:"自动生成",allowClear:"",disabled:""},model:{value:e.dObj.mod.clueCode,callback:function(t){e.$set(e.dObj.mod,"clueCode",t)},expression:"dObj.mod.clueCode"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"案发时间",prop:"case_happened_date"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入生成时间","show-time":"",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.case_happened_date,callback:function(t){e.$set(e.dObj.mod,"case_happened_date",t)},expression:"dObj.mod.case_happened_date"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"督办类别",prop:"caseCategoryID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择督办类别",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.caseCategoryID,callback:function(t){e.$set(e.dObj.mod,"caseCategoryID",t)},expression:"dObj.mod.caseCategoryID"}},e._l(e.$DICT.filter((e=>"d_caseCategory"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"线索类别",prop:"clueCategoryID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索类别",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.clueCategoryID,callback:function(t){e.$set(e.dObj.mod,"clueCategoryID",t)},expression:"dObj.mod.clueCategoryID"}},e._l(e.$DICT.filter((e=>"d_clueCategory"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"案发地点",prop:"case_happened_place"}},[t("a-input",{attrs:{placeholder:"请输入案发地点",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.case_happened_place,callback:function(t){e.$set(e.dObj.mod,"case_happened_place",t)},expression:"dObj.mod.case_happened_place"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"线索等级",prop:"clueGradeID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索等级",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.clueGradeID,callback:function(t){e.$set(e.dObj.mod,"clueGradeID",t)},expression:"dObj.mod.clueGradeID"}},e._l(e.$DICT.filter((e=>"d_clueGrade"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"录入时间",prop:"createDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入录入时间","show-time":"",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.createDate,callback:function(t){e.$set(e.dObj.mod,"createDate",t)},expression:"dObj.mod.createDate"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"受侵害地点",prop:"case_happened_address"}},[t("a-input",{attrs:{placeholder:"请输入受侵害地点",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.case_happened_address,callback:function(t){e.$set(e.dObj.mod,"case_happened_address",t)},expression:"dObj.mod.case_happened_address"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"线索来源",prop:"clueSourceID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索来源",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.clueSourceID,callback:function(t){e.$set(e.dObj.mod,"clueSourceID",t)},expression:"dObj.mod.clueSourceID"}},e._l(e.$DICT.filter((e=>"d_clueSource"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"资金交易方式",prop:"paymentid"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择资金交易方式",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.paymentid,callback:function(t){e.$set(e.dObj.mod,"paymentid",t)},expression:"dObj.mod.paymentid"}},e._l(e.$DICT.filter((e=>"d_payment"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"受害者所在地",prop:"case_victim_place"}},[t("a-input",{attrs:{placeholder:"请输入受害者所在地",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.case_victim_place,callback:function(t){e.$set(e.dObj.mod,"case_victim_place",t)},expression:"dObj.mod.case_victim_place"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"举报人/单位",prop:"informer"}},[t("a-input",{attrs:{placeholder:"请输入举报人/单位",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.informer,callback:function(t){e.$set(e.dObj.mod,"informer",t)},expression:"dObj.mod.informer"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"举报人联系方式",prop:"informer_contact"}},[t("a-input",{attrs:{placeholder:"请输入举报人联系方式",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.informer_contact,callback:function(t){e.$set(e.dObj.mod,"informer_contact",t)},expression:"dObj.mod.informer_contact"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"举报时间",prop:"inform_date"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入举报时间","show-time":"",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.inform_date,callback:function(t){e.$set(e.dObj.mod,"inform_date",t)},expression:"dObj.mod.inform_date"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"移送单位",prop:"transfer_unit"}},[t("a-input",{attrs:{placeholder:"请输入移送单位",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.transfer_unit,callback:function(t){e.$set(e.dObj.mod,"transfer_unit",t)},expression:"dObj.mod.transfer_unit"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"移送单位联系方式",prop:"transfer_unit_contact"}},[t("a-input",{attrs:{placeholder:"请输入移送单位联系方式",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.transfer_unit_contact,callback:function(t){e.$set(e.dObj.mod,"transfer_unit_contact",t)},expression:"dObj.mod.transfer_unit_contact"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"移送时间",prop:"transfer_date"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入移送时间","show-time":"",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.transfer_date,callback:function(t){e.$set(e.dObj.mod,"transfer_date",t)},expression:"dObj.mod.transfer_date"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"嫌疑单位",prop:"suspect"}},[t("a-input",{attrs:{placeholder:"请输入嫌疑单位",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.suspect,callback:function(t){e.$set(e.dObj.mod,"suspect",t)},expression:"dObj.mod.suspect"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"立案编号",prop:"caseNo"}},[t("a-input",{attrs:{placeholder:"请输入嫌疑单位",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.caseNo,callback:function(t){e.$set(e.dObj.mod,"caseNo",t)},expression:"dObj.mod.caseNo"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{label:"自定义信息",prop:"customFieldList"}},[t("TableEdit",{attrs:{objs:e.dObj.mod.customFieldList.items,maxTagCount:3,title:"请输入自定义信息",disabled:!e.isCanOkSave},on:{"update:objs":function(t){return e.$set(e.dObj.mod.customFieldList,"items",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"关联人员信息",prop:"contactInfoList"}},[t("TableEditUser",{attrs:{objs:e.dObj.mod.contactInfoList.items,maxTagCount:3,title:"请录入关联人员信息",disabled:!e.isCanOkSave},on:{"update:objs":function(t){return e.$set(e.dObj.mod.contactInfoList,"items",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"案件描述",prop:"case_description"}},[t("a-textarea",{attrs:{placeholder:"请输入案件描述","show-count":"",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.case_description,callback:function(t){e.$set(e.dObj.mod,"case_description",t)},expression:"dObj.mod.case_description"}})],1)],1)],1)],1),t("a-tab-pane",{key:"1",staticStyle:{"max-height":"70vh",overflow:"auto"},attrs:{tab:"附页信息"}},[t("a-row",{staticClass:"column2",staticStyle:{"margin-right":"0"},attrs:{gutter:[32,0]}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"宣传内容",prop:"content"}},[t("a-textarea",{attrs:{placeholder:"请输入宣传内容","show-count":"",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.content,callback:function(t){e.$set(e.dObj.mod,"content",t)},expression:"dObj.mod.content"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"网页链接",prop:"websiteUrl"}},[t("a-input",{attrs:{placeholder:"请输入网页链接",allowClear:"",disabled:!e.isCanOkSave},model:{value:e.dObj.mod.websiteUrl,callback:function(t){e.$set(e.dObj.mod,"websiteUrl",t)},expression:"dObj.mod.websiteUrl"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"选择图片",prop:"_pathimg"}},[t("Uploads",{attrs:{pLis:e.dObj.mod._Attachment_Img,pMax:100,disabled:!e.isCanOkSave,action:["file","camera"]},on:{"update:pLis":function(t){return e.$set(e.dObj.mod,"_Attachment_Img",t)},"update:p-lis":function(t){return e.$set(e.dObj.mod,"_Attachment_Img",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"选择附件",prop:"_pathfile"}},[t("Uploads",{attrs:{pLis:e.dObj.mod._Attachment_File,pMax:100,disabled:!e.isCanOkSave,action:["file","camera"]},on:{"update:pLis":function(t){return e.$set(e.dObj.mod,"_Attachment_File",t)},"update:p-lis":function(t){return e.$set(e.dObj.mod,"_Attachment_File",t)}}})],1)],1)],1)],1)],1)],1):t("a-empty",{directives:[{name:"show",rawName:"v-show",value:!e.dObj.load,expression:"!dObj.load"}]})],1)]),t("template",{slot:"footer"},[e.isCanOkSave?t("a-button",{key:"sub",attrs:{type:"primary"},on:{click:function(t){return e.Save()}}},[e._v(" 保存 ")]):e._e()],1)],2)}),[],!1,null,"5f31e5cc",null).exports,D=a(73738),_=a.n(D),v={components:{Uploads:n.Z},data(){return{show:!1,attachment:[],disabled:!1,errors:[],tempurl:null}},props:{},methods:{Init(){this.show=!0,this.attachment=[],this.attachment.length=0,this.errors=[],this.tempurl=null},async fnExp(){if(null!=this.attachment&&this.attachment.length>0){if(this.attachment[this.attachment.length-1].url==this.tempurl)return this.errors=[],void(this.tempurl=null);this.errors=[],this.disabled=!0;let e=await this.$api2("/api/Clue/Import_t_clue",{relativePath:this.attachment[this.attachment.length-1].url});this.tempurl=this.attachment[this.attachment.length-1].url,e&&e.isOk?(this.$message.success("导入成功"),this.disabled=!1,this.$emit("emOk",!0)):(this.$message.error(e.message||"导入失败"),this.errors=e.data),this.disabled=!1}}},watch:{attachment(){this.fnExp()}}},O=(0,m.Z)(v,(function(){var e=this,t=e._self._c;return e.show?t("div",[t("a-modal",{attrs:{title:"线索导入",width:820,maskClosable:!1,destroyOnClose:""},on:{cancel:function(t){e.show=!1}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{staticClass:"wmain flexcb"},[t("div",{staticClass:"wmain-left"},[t("div",[t("a",{attrs:{target:"_blank",href:"/static/线下线索导入模坂.xlsx"}},[t("a-button",{attrs:{type:"link",icon:"cloud-download"}},[e._v("线下线索导入模坂.XLSX")])],1)]),t("div",{staticClass:"flexcc",staticStyle:{width:"130px",height:"120px"}},[t("Uploads",{attrs:{pLis:e.attachment,action:["file"],disabled:e.disabled,pMax:1,accept:"text/html,text/plain,.csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{"update:pLis":function(t){e.attachment=t},"update:p-lis":function(t){e.attachment=t}}})],1)]),t("ul",{staticClass:"wmain-right"},[t("div",{staticStyle:{display:"flex","font-size":"16px"}},[t("a-icon",{staticStyle:{color:"#1890ff","font-size":"24px","margin-right":"15px"},attrs:{type:"exclamation-circle"}}),e._v(" "),t("strong",[e._v("模板规则填写说明：")])],1),t("li",[e._v("1，一条线索只写一个商品名称，如果不同商品，创建两条线索。")]),t("li",[e._v("2，相同线索如果有多个关联人，则线索编号设置成一样。")]),t("li",[e._v("3，不同线索的编号是不同的。")]),t("li",[e._v("4，标准模板每一列对应的属性要一一对应，顺序不能错。")]),t("li",[e._v("5，有下拉列表的单元值必须属于下拉列表中的值。")]),t("li",[e._v("6，相同线索编号的行，除了关联人员那些列，其他属性只会取第一行的数据。")])])]),t("div",{staticStyle:{"margin-top":"10px"}},e._l(e.errors,(function(e,a){return t("a-alert",{key:a,attrs:{message:"行:"+e.coordinateX+"，列："+e.coordinateY,description:e.error,type:"error","show-icon":""}})})),1),t("template",{slot:"footer"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){e.show=!1}}},[e._v("关闭")])],1)],2)],1):e._e()}),[],!1,null,"5e248d32",null).exports,j=a(57492),S=a(88011),C={extends:u.AS,components:{SonsClue:S.Z,Uploads:n.Z},data(){return{schema:j.Z}},async mounted(){},methods:{fnLog(e){}}},x={components:{Hand:(0,m.Z)(C,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{visible:e.dObj.show,title:(e.dObj.mod&&e.dObj.mod.fid>0?"检验处理":"新增")+e.dObj.title,width:1060,maskClosable:!1},on:{ok:function(t){return e.Save()},cancel:function(t){return e.Cancel()}}},[t("a-spin",{attrs:{spinning:e.dObj.load,tip:e.dObj.title+"可编辑数据加载中..."}},[t("div",{style:e.dObj.load?"min-height:280px":""},[null!=e.dObj.mod?t("a-form-model",{ref:"editref",staticClass:"inline-form",attrs:{model:e.dObj.mod,rules:e.dObj.rules,labelCol:{style:{minWidth:"130px"}},layout:"horizontal",labelAlign:"left"}},[t("input",{attrs:{type:"hidden"},domProps:{value:e.dObj.mod.fid}}),t("a-row",{staticClass:"column2",staticStyle:{"margin-right":"0"},attrs:{gutter:[32,0]}},[t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"样品名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入样品名称",allowClear:"",disabled:""},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"线索",prop:"name",autoLink:!1}},[t("SonsClue",{attrs:{obj:e.dObj.mod.Clue,disabled:""},on:{"update:obj":[function(t){return e.$set(e.dObj.mod,"Clue",t)},t=>{e.dObj.mod.clueID=t.fid}]}})],1)],1),e.dObj.mod.Clue?t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"线索编号",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入线索编号",allowClear:"",disabled:!0},model:{value:e.dObj.mod.Clue.clueCode,callback:function(t){e.$set(e.dObj.mod.Clue,"clueCode",t)},expression:"dObj.mod.Clue.clueCode"}})],1)],1):e._e(),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"送检时间",prop:"deliverDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈时间","show-time":"",allowClear:"",disabled:""},model:{value:e.dObj.mod.deliverDate,callback:function(t){e.$set(e.dObj.mod,"deliverDate",t)},expression:"dObj.mod.deliverDate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"送检单位",prop:"送检单位"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",treeData:e.$DEPTS&&e.$DEPTS[0].children,disabled:"",replaceFields:{title:"name",value:"id",key:"id"},placeholder:"选择送检单位",searchPlaceholder:"请输入关键字过滤","allow-clear":"",treeNodeFilterProp:"title"},model:{value:e.dObj.mod.Clue.assignDeptID,callback:function(t){e.$set(e.dObj.mod.Clue,"assignDeptID",t)},expression:"dObj.mod.Clue.assignDeptID"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"快检时间",prop:"quickCheckDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈时间","show-time":"",disabled:"",allowClear:""},model:{value:e.dObj.mod.quickCheckDate,callback:function(t){e.$set(e.dObj.mod,"quickCheckDate",t)},expression:"dObj.mod.quickCheckDate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"快检结果",prop:"quickCheckResultID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择快检结果",disabled:""},model:{value:e.dObj.mod.quickCheckResultID,callback:function(t){e.$set(e.dObj.mod,"quickCheckResultID",t)},expression:"dObj.mod.quickCheckResultID"}},e._l(e.$DICT.filter((e=>"d_quickCheckResult"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"检验报告",prop:"检验报告"}},[t("Uploads",{attrs:{pLis:e.dObj.mod._Attachment_Ck,pMax:100,disabled:"",action:["file","camera"]},on:{"update:pLis":function(t){return e.$set(e.dObj.mod,"_Attachment_Ck",t)},"update:p-lis":function(t){return e.$set(e.dObj.mod,"_Attachment_Ck",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"检验后处理",prop:"sampleHandleResultID"}},[t("a-radio-group",{attrs:{name:"d_sampleHandleResult",options:e.$DICT.filter((e=>"d_sampleHandleResult"==e.tableName)).map((e=>({label:e.name,value:e.fid})))},model:{value:e.dObj.mod.sampleHandleResultID,callback:function(t){e.$set(e.dObj.mod,"sampleHandleResultID",t)},expression:"dObj.mod.sampleHandleResultID"}})],1)],1),1==e.dObj.mod.sampleHandleResultID?t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"立案编号",prop:"caseNo"}},[t("a-input",{attrs:{placeholder:"请输入立案编号",allowClear:""},model:{value:e.dObj.mod.caseNo,callback:function(t){e.$set(e.dObj.mod,"caseNo",t)},expression:"dObj.mod.caseNo"}})],1)],1):e._e()],1)],1):t("a-empty",{directives:[{name:"show",rawName:"v-show",value:!e.dObj.load,expression:"!dObj.load"}]})],1)])],1)}),[],!1,null,null,null).exports},data(){return{schema:j.Z,show:!1,dQparm:{name:"",divisionID:null,sampleCode:null,clueID:null},dTb:{rows:[],colunms:[],rows_chks:[],load:!1,pagination:{current:1,total:0,pageSize:15},size:"defalut"},dSelShuID:0}},created(){},mounted(){this.dTb.colunms=[{title:"线索号",dataIndex:"clueCode",ellipsis:!0,align:"center"},{title:"样品名称",dataIndex:"name",ellipsis:!0,align:"center",scopedSlots:{customRender:"name"}},{title:"样品编码",dataIndex:"sampleCode",ellipsis:!0,align:"center",scopedSlots:{customRender:"sampleCode"},width:180},{title:"送检时间",dataIndex:"deliverDate",ellipsis:!0,align:"center",scopedSlots:{customRender:"deliverDate"}},{title:"快检时间",dataIndex:"quickCheckDate",ellipsis:!0,align:"center",scopedSlots:{customRender:"quickCheckDate"}},{title:"快检结果",dataIndex:"quickCheckResultID",ellipsis:!0,align:"center",scopedSlots:{customRender:"quickCheckResultID"}},{title:"操作",dataIndex:"op",show:!0,scopedSlots:{customRender:"op"},width:80}]},methods:{async Init(e){e>0?(this.show=!0,this.dQparm.clueID=e,this.fnTb_Query()):this.show=!1},fnTb_Query:_()((async function(e,t,a){this.dTb.pagination.current=e&&e.current||1,this.dTb.pagination.pageSize=e&&e.pageSize||5,this.dQparm.pageIndex=this.dTb.pagination.current,this.dQparm.pageSize=this.dTb.pagination.pageSize;let s={};this.dQparm.name&&this.dQparm.name.length>0&&(s.name=this.dQparm.name.trim()),this.dQparm.startDate&&dayjs(this.dQparm.startDate).isValid()&&(s.startDate=this.dQparm.startDate.toJSON()),this.dQparm.endDate&&dayjs(this.dQparm.endDate).isValid()&&(s.endDate=this.dQparm.endDate.toJSON()),this.dQparm.divisionID&&this.dQparm.divisionID>0&&(s.divisionID=this.dQparm.divisionID),this.dQparm.clueID&&this.dQparm.clueID>0&&(s.clueID=this.dQparm.clueID),this.dQparm.sampleCode&&this.dQparm.sampleCode.length>0&&(s.sampleCode=this.dQparm.sampleCode.trim()),s.pageIndex=this.dQparm.pageIndex,s.pageSize=this.dQparm.pageSize,this.dTb.load=!0,this.dTb.rows=[];let l=await this.$api2(j.Z.Url.GetCount,s);if(l.isOk){let e=parseInt(l.data);if(e>0){this.dTb.pagination.total=e;let t=await this.$api2(j.Z.Url.GetList,s);t.isOk&&(this.dTb.rows=j.Z.ListFilter&&await j.Z.ListFilter(t.data)||t.data)}}this.dTb.load=!1}),100),fnHand(e){this.dSelShuID=e.fid==this.dSelShuID?0:e.fid,this.$refs.Hand.Init(e.fid)},fnCustomRow(e){return{on:{dblclick:t=>{this.fnHand(e)}}}}}},w={components:{Detail:p,Edit:h,Expo:O,MainSam:(0,m.Z)(x,(function(){var e=this,t=e._self._c;return t("div",[e.show?t("div",{staticClass:"main"},[t("div",{staticClass:"main-tit"},[e._v("检验信息")]),t("div",{staticClass:"main-con box"},[t("div",{staticClass:"box-par"},[t("a-row",{attrs:{gutter:[16,16]}},[t("a-col",{attrs:{span:12}},[t("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"样品编码",allowClear:""},on:{search:e.fnTb_Query},model:{value:e.dQparm.sampleCode,callback:function(t){e.$set(e.dQparm,"sampleCode",t)},expression:"dQparm.sampleCode"}})],1),t("a-col",{attrs:{span:12}},[t("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"关键字",allowClear:""},on:{search:e.fnTb_Query},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1)],1)],1),t("a-table",{attrs:{columns:e.dTb.colunms,dataSource:e.dTb.rows,pagination:e.dTb.pagination,rowKey:e.$core.uuid(),customRow:e.fnCustomRow,rowClassName:(t,a)=>(t&&t.fid)==e.dSelShuID?"dbrow":"",loading:e.dTb.load},on:{change:e.fnTb_Query},scopedSlots:e._u([{key:"deliverDate",fn:function(t){return[e._v(e._s(e._f("DATE")(t,"YYYY-MM-DD HH:mm")))]}},{key:"quickCheckDate",fn:function(t){return[e._v(e._s(e._f("DATE")(t,"YYYY-MM-DD HH:mm")))]}},{key:"quickCheckResultID",fn:function(a,s,l){return[t("a-tag",{attrs:{color:["#108ee9","#87d068","#f50f50","#2db7f5"][parseInt(a)%4],size:"small"}},[e._v(e._s(e._f("DICT")(a,"d_quickCheckResult")))])]}},{key:"op",fn:function(a,s,l){return[t("a-button",{staticStyle:{color:"#ffc53d"},attrs:{type:"link",size:"small",icon:"file"},on:{click:t=>e.fnHand(s)}},[e._v("处置")])]}}],null,!1,4195488034)})],1)]):e._e(),t("Hand",{ref:"Hand"})],1)}),[],!1,null,"3c546f88",null).exports},computed:{isAdmin:function(){return this.$store.state.user.roles.indexOf("admin")>=0},isUserDeep:function(){return parseInt(this.$store.state.user.division_deep||0)}},data(){return{schema:s.Z,dQparm:{name:"",startDate:null,endDate:null,divisionID:void 0,caseCategoryID:void 0,isAssigned:!1,xfStaus:-1,clueSourceID:void 0,clueStateID:void 0,clueCategoryID:void 0,startDate:null,endDate:null},dTb:{rows:[],colunms:[],rows_chks:[],load:!1,pagination:{current:1,total:0,pageSize:15},size:"defalut"},dSelRow:null,dSelectedId:0,dSelDanID:0,dSelShuID:0}},created(){this.dTb.colunms=[{title:"线索编号",dataIndex:"clueCode",width:110,align:"center"},{title:"等级",dataIndex:"clueGradeID",width:90,scopedSlots:{customRender:"clueGradeID"},align:"center"},{title:"来源",dataIndex:"clueSourceID",width:90,align:"center",scopedSlots:{customRender:"clueSourceID"}},{title:"产品名称",dataIndex:"name",ellipsis:!0,align:"center"},{title:"宣传内容",dataIndex:"content",ellipsis:!0,align:"center"},{title:"承办单位",dataIndex:"assignDeptID",ellipsis:!0,align:"center"},{title:"下发时间",dataIndex:"assignDate",width:150,align:"center",scopedSlots:{customRender:"assignDate"}},{title:"反馈期限",dataIndex:"respondDueDate",width:150,align:"center",scopedSlots:{customRender:"respondDueDate"}},{title:"状态",dataIndex:"clueStateID",width:120,scopedSlots:{customRender:"clueStateID"},align:"center"}]},async mounted(){await this.fnGetAreByDept(),this.fnTab(0)},methods:{async fnGetAreByDept(){if(2==this.isUserDeep)this.dQparm.divisionID;else{let e=parseInt(this.$store.state.user.dept_id),t=await this.$api2("/api/BaseRFAdmin/Get_sys_dept",null,{id:e});this.dQparm.divisionID=parseInt(t.data.divisionid)}},async fnTb_Query(e,t,a){this.dSelRow=null,this.dTb.pagination.current=e&&e.current||1,this.dTb.pagination.pageSize=e&&e.pageSize||15,this.dQparm.pageIndex=this.dTb.pagination.current,this.dQparm.pageSize=this.dTb.pagination.pageSize;let s={};this.dQparm.name&&this.dQparm.name.length>0&&(s.name=this.dQparm.name.trim()),this.dQparm.startDate&&o()(this.dQparm.startDate).isValid()&&(s.startDate=this.dQparm.startDate.toJSON()),this.dQparm.endDate&&o()(this.dQparm.endDate).isValid()&&(s.endDate=this.dQparm.endDate.toJSON()),this.dQparm.divisionID&&this.dQparm.divisionID>0&&(s.divisionID=this.dQparm.divisionID),this.dQparm.caseCategoryID&&this.dQparm.caseCategoryID>=0&&(s.caseCategoryID=this.dQparm.caseCategoryID),this.dQparm.clueStateID&&this.dQparm.clueStateID>=0&&(s.clueStateID=this.dQparm.clueStateID),this.dQparm.clueSourceID&&this.dQparm.clueSourceID>=0&&(s.clueSourceID=this.dQparm.clueSourceID),this.dQparm.clueCategoryID&&this.dQparm.clueCategoryID>=0&&(s.clueCategoryID=this.dQparm.clueCategoryID),2==this.isUserDeep&&(0==this.dQparm.xfStaus&&(s.clueFlowNodeIDs=[1]),1==this.dQparm.xfStaus&&(s.clueFlowNodeIDs=[2]),2==this.dQparm.xfStaus&&(s.clueFlowNodeIDs=[3,4,100])),s.pageIndex=this.dQparm.pageIndex,s.pageSize=this.dQparm.pageSize,this.dTb.load=!0;let l=await this.$api2(this.schema.Url.GetCount,s);if(l.isOk){let e=parseInt(l.data);if(e>0){this.dTb.pagination.total=e;let t=await this.$api2(this.schema.Url.GetList,s);t.isOk&&(this.dTb.rows=this.schema.ListFilter&&await this.schema.ListFilter(t.data)||t.data)}else this.dTb.rows=[]}this.dTb.load=!1},fnTab(e){this.dQparm.xfStaus=parseInt(e),this.fnTb_Query()},fnCustomRow(e){return{on:{click:t=>{3==this.isUserDeep&&(this.dSelDanID=e.fid,this.$refs.MainSam.Init(this.dSelDanID))},dblclick:t=>{this.dSelShuID=e.fid==this.dSelShuID?0:e.fid,this.$refs.Detail.Init(this.dSelShuID,this.dQparm.xfStaus)}}}},fnRangeChange(e){2==e.length?(this.dQparm.startDate=o()(e[0]),this.dQparm.endDate=o()(e[1])):(this.dQparm.startDate=null,this.dQparm.endDate=null),this.fnTb_Query()}},watch:{"dQparm.xfStaus":function(e){let t=this.dTb.colunms;0!=e&&1!=e||(t=[{title:"线索编号",dataIndex:"clueCode",width:110,align:"center"},{title:"等级",dataIndex:"clueGradeID",width:90,scopedSlots:{customRender:"clueGradeID"},align:"center"},{title:"来源",dataIndex:"clueSourceID",width:100,align:"center",scopedSlots:{customRender:"clueSourceID"}},{title:"产品名称",dataIndex:"name",ellipsis:!0,align:"center"},{title:"宣传内容",dataIndex:"content",ellipsis:!0,align:"center"},{title:"生成时间",dataIndex:"createDate",ellipsis:!0,align:"center",scopedSlots:{customRender:"createDate"}},{title:"操作",dataIndex:"op",show:!0,scopedSlots:{customRender:"op"},width:80}]),2==e&&(t=[{title:"线索编号",dataIndex:"clueCode",width:110,align:"center"},{title:"等级",dataIndex:"clueGradeID",width:70,scopedSlots:{customRender:"clueGradeID"},align:"center"},{title:"来源",dataIndex:"clueSourceID",width:80,align:"center",scopedSlots:{customRender:"clueSourceID"}},{title:"产品名称",dataIndex:"name",ellipsis:!0,align:"center"},{title:"宣传内容",dataIndex:"content",ellipsis:!0,align:"center"},{title:"下发单位",dataIndex:"assignDeptID",ellipsis:!0,align:"center"},{title:"下发时间",dataIndex:"assignDate",width:150,align:"center",scopedSlots:{customRender:"assignDate"}},{title:"反馈期限",dataIndex:"respondDueDate",width:150,align:"center",scopedSlots:{customRender:"respondDueDate"}},{title:"状态",dataIndex:"clueStateID",width:80,scopedSlots:{customRender:"clueStateID"},align:"center"},{title:"操作",dataIndex:"op",show:!0,scopedSlots:{customRender:"op"},width:80}]),this.dTb.colunms=t}}},g=(0,m.Z)(w,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main",class:e.dTb.colunms.length>6?"mainmx":""},[t("div",{staticClass:"main-tit"},[e._v("线索列表")]),t("div",{staticClass:"main-con box",class:e.dSelDanID>0?"heihaf":"heiall"},[t("div",{staticClass:"box-tab flexcb"},[t("div",[2==e.isUserDeep?[t("a-button",{staticClass:"btn",class:0==e.dQparm.xfStaus?"active":"noactive",attrs:{type:"primary"},on:{click:function(t){return e.fnTab(0)}}},[e._v("未下发")]),e.isAdmin||2==e.isUserDeep?t("a-button",{staticClass:"btn",class:1==e.dQparm.xfStaus?"active":"noactive",attrs:{type:"primary"},on:{click:function(t){return e.fnTab(1)}}},[e._v("待审批")]):e._e(),t("a-button",{staticClass:"btn",class:2==e.dQparm.xfStaus?"active":"noactive",attrs:{type:"primary"},on:{click:function(t){return e.fnTab(2)}}},[e._v("已下发")])]:e._e()],2),t("a-space",[t("a-button",{staticClass:"rbtn",attrs:{type:"dashed",size:"default",icon:"plus"},on:{click:function(t){return e.$refs.Edit.Init(0)}}},[e._v("新增")]),t("a-button",{staticClass:"rbtn",attrs:{type:"dashed",size:"default",icon:"export"},on:{click:function(t){return e.$refs.Expo.Init()}}},[e._v("导入")])],1)],1),t("div",{staticClass:"box-par"},[2==e.dQparm.xfStaus||3==e.isUserDeep?t("a-row",{attrs:{gutter:[16,16]}},[t("a-col",{attrs:{span:4}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isAdmin,treeData:e.$AREA,replaceFields:{title:"name",value:"id",children:"children",key:"id"},placeholder:"请选择行政区划","allow-clear":""},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.divisionID,callback:function(t){e.$set(e.dQparm,"divisionID",t)},expression:"dQparm.divisionID"}})],1),t("a-col",{attrs:{span:4}},[t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"线索来源"},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.clueSourceID,callback:function(t){e.$set(e.dQparm,"clueSourceID",t)},expression:"dQparm.clueSourceID"}},e._l(e.$DICT.filter((e=>"d_clueSource"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-col",{attrs:{span:4}},[t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"线索状态"},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.clueStateID,callback:function(t){e.$set(e.dQparm,"clueStateID",t)},expression:"dQparm.clueStateID"}},e._l(e.$DICT.filter((e=>"d_clueState"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-col",{attrs:{span:4}},[t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"线索类别"},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.clueCategoryID,callback:function(t){e.$set(e.dQparm,"clueCategoryID",t)},expression:"dQparm.clueCategoryID"}},e._l(e.$DICT.filter((e=>"d_clueCategory"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-col",{attrs:{span:4}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["开始时间","结束时间"],allowClear:""},on:{change:e.fnRangeChange}})],1),t("a-col",{attrs:{span:4}},[t("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"关键字",allowClear:""},on:{search:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1)],1):t("a-row",{attrs:{gutter:[16,16]}},[t("a-col",{attrs:{span:5}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.isAdmin,treeData:e.$AREA,replaceFields:{title:"name",value:"id",children:"children",key:"id"},placeholder:"请选择行政区划","allow-clear":""},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.divisionID,callback:function(t){e.$set(e.dQparm,"divisionID",t)},expression:"dQparm.divisionID"}})],1),t("a-col",{attrs:{span:5}},[t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"线索来源"},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.clueSourceID,callback:function(t){e.$set(e.dQparm,"clueSourceID",t)},expression:"dQparm.clueSourceID"}},e._l(e.$DICT.filter((e=>"d_clueSource"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-col",{attrs:{span:5}},[t("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:"线索类别"},on:{change:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.clueCategoryID,callback:function(t){e.$set(e.dQparm,"clueCategoryID",t)},expression:"dQparm.clueCategoryID"}},e._l(e.$DICT.filter((e=>"d_clueCategory"==e.tableName)),(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1),t("a-col",{attrs:{span:5}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["开始时间","结束时间"],allowClear:""},on:{change:e.fnRangeChange}})],1),t("a-col",{attrs:{span:4}},[t("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"关键字",allowClear:""},on:{search:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1)],1)],1),t("a-table",{attrs:{columns:e.dTb.colunms,rowKey:e=>e.fid,dataSource:e.dTb.rows,pagination:e.dTb.pagination,loading:e.dTb.load,customRow:e.fnCustomRow,rowClassName:(t,a)=>(t&&t.fid)==e.dSelShuID?"dbrow":"",scroll:{y:e.dSelDanID>0?"16vh":"65vh"}},on:{change:e.fnTb_Query},scopedSlots:e._u([{key:"ix",fn:function(a){return t("span",{},[e._v(e._s((e.dTb.pagination.current-1)*e.dTb.pagination.pageSize+e.index+1)+" ")])}},{key:"op",fn:function(a,s,l){return[t("a-button",{staticStyle:{color:"#ffc53d"},attrs:{type:"link",size:"small",icon:"file"},on:{click:function(t){return e.$refs.Edit.Init(s.fid)}}},[e._v("详情")])]}},{key:"clueGradeID",fn:function(a){return[t("a-tag",{attrs:{size:"small"}},[e._v(e._s(e._f("DICT")(a,"d_clueGrade")))])]}},{key:"clueSourceID",fn:function(a){return[t("a-tag",{attrs:{size:"small"}},[e._v(e._s(e._f("DICT")(a,"d_clueSource")))])]}},{key:"clueStateID",fn:function(a){return[t("a-tag",{attrs:{size:"small"}},[e._v(e._s(e._f("DICT")(a,"d_clueState")))])]}},{key:"clueCategoryID",fn:function(t){return[e._v(e._s(e._f("DICT")(t,"d_clueCategory")))]}},{key:"caseCategoryID",fn:function(t){return[e._v(e._s(e._f("DICT")(t,"d_caseCategory")))]}},{key:"divisionID",fn:function(t){return[e._v(e._s(e._f("AREA")(t)))]}},{key:"filterResultID",fn:function(t){return[e._v(e._s(e._f("DICT")(t,"d_clueFilterResult")))]}},{key:"assignDate",fn:function(t){return[e._v(e._s(e._f("DATE")(t,"YYYY-MM-DD HH:mm")))]}},{key:"respondDueDate",fn:function(t){return[e._v(e._s(e._f("DATE")(t,"YYYY-MM-DD HH:mm")))]}},{key:"createDate",fn:function(t){return[e._v(e._s(e._f("DATE")(t,"YYYY-MM-DD HH:mm")))]}},{key:"modifyDate",fn:function(t){return[e._v(e._s(e._f("DATE")(t,"YYYY-MM-DD HH:mm")))]}}])})],1)]),t("Detail",{ref:"Detail",on:{emOk:function(t){return e.fnTb_Query()}}}),t("Edit",{ref:"Edit",on:{emOk:function(t){return e.fnTb_Query()}}}),t("Expo",{ref:"Expo",on:{emOk:function(t){return e.fnTb_Query()}}}),t("MainSam",{ref:"MainSam"})],1)}),[],!1,null,"38bf0fc7",null).exports}}]);