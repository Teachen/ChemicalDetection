"use strict";(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[518],{42722:function(t,e,a){a.d(e,{Z:function(){return s}});var i={data(){return{dnofold:!1,dunflod:!1,newkeyWord:this.keyWord}},props:{keyWord:String||"",loading:Boolean||!1,nofold:Boolean||!1,unflod:Boolean||!1,btnlg:Number||8},emits:["emReset","emQuery","update:keyWord"],created(){this.dnofold=Boolean(this.nofold),this.dunflod=Boolean(this.unflod)},methods:{fnTest(){}}},s=(0,a(1001).Z)(i,(function(){var t=this,e=t._self._c;return e("div",[e("a-form",{directives:[{name:"show",rawName:"v-show",value:!t.dunflod,expression:"!dunflod"}],staticClass:"inline-form",staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"end"},attrs:{layout:"inline"}},[t._t("COND1",(function(){return[e("a-form-item",{attrs:{label:"关键字搜索"}},[e("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{change:function(e){return t.$emit("update:keyWord",t.newkeyWord)},search:function(e){return t.$emit("emQuery",null)}},model:{value:t.newkeyWord,callback:function(e){t.newkeyWord=e},expression:"newkeyWord"}})],1)]})),e("a-form-item",{staticStyle:{"margin-right":"0"}},[e("a-space",[t._t("BTNS",(function(){return[e("a-button",{staticClass:"cant-btn-default",attrs:{type:"default",loading:t.loading},on:{click:function(e){return t.$emit("emReset",null)}}},[t._v("重置")]),e("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("emQuery",null)}}},[t._v("搜索")]),t.dnofold?t._e():[e("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.dunflod,expression:"!dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("高级"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-down"}})],1),e("a-button",{directives:[{name:"show",rawName:"v-show",value:t.dunflod,expression:"dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("收起"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-up"}})],1)],t._t("BTNSPUSH")]}))],2)],1)],2),e("a-form",{directives:[{name:"show",rawName:"v-show",value:!t.dnofold&&t.dunflod,expression:"!dnofold && dunflod"}],staticClass:"inline-form",staticStyle:{"margin-bottom":"-10px"},attrs:{layout:"horizontal",labelCol:{style:{width:"100px"}}}},[e("a-row",{attrs:{gutter:[30,0]}},[t._t("COND2"),e("a-col",{attrs:{span:24,lg:t.btnlg}},[e("a-form-item",{staticClass:"fr"},[e("a-space",[t._t("BTNS",(function(){return[e("a-button",{staticClass:"cant-btn-default",attrs:{type:"default",loading:t.loading},on:{click:function(e){return t.$emit("emReset",null)}}},[t._v("重置")]),e("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("emQuery",null)}}},[t._v("搜索")]),t.dnofold?t._e():[e("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.dunflod,expression:"!dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("高级"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-down"}})],1),e("a-button",{directives:[{name:"show",rawName:"v-show",value:t.dunflod,expression:"dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("收起"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-up"}})],1)],t._t("BTNSPUSH")]}))],2)],1)],1)],2)],1)],1)}),[],!1,null,null,null).exports},63611:function(t,e,a){a.d(e,{Z:function(){return l}});a(57658);var i=a(21438),s=a(95576),n={props:{pLis:{type:Array,default:t=>[]},pMax:{type:Number,default:1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},action:{type:Array,default:()=>["file","scan"]},accept:{type:String,default:()=>"*"}},components:{FilePreview:i.Z,Camera:s.Z},data(){return{dResLis:[],dFileList:[],openFileDialogOnClick:!1,uuid:this.$core.uuid()}},inject:["AppVue"],computed:{dCameraLs(){return this.AppVue.dCameraLs}},mounted(){this.fnInit()},methods:{fnInit(){this.dFileList=this.pLis.map((t=>({url:"/g3"+t.url,uid:this.$core.uuid(),name:t.name||"image.png",status:"done"}))),this.dResLis=[...this.pLis].map(((t,e)=>(t.uid=this.dFileList[e].uid,t)))},async fnPreview(t){t.url?this.$refs.FilePreview.Init(t.url):t.response&&t.response.length>=1?this.$refs.FilePreview.Init("/g3"+t.response[0]):this.$refs.FilePreview.Init(t)},async fnChange({file:t,fileList:e,event:a}){if(this.dFileList=[...e],"done"===t.status){let e=t.response;e&&e.length>0&&(this.dResLis.push({name:t.name,size:t.size,type:t.type,url:e[0]}),this.$emit("update:pLis",this.dResLis))}"removed"===t.status&&(this.dResLis=[...this.dResLis.filter((e=>e.uid!=t.uid))],this.$emit("update:pLis",this.dResLis))},fnUpclick(t){"file"==t&&(this.openFileDialogOnClick=!0),"scan"==t&&(this.openFileDialogOnClick=!1),"camera"==t&&(this.openFileDialogOnClick=!1,this.AppVue.$refs.Camera.Init(this.uuid))},fnLog(t){},async fnEmOk(t){t&&t.length>0&&(t.map((t=>{this.dFileList.push({url:"/g3"+t,uid:this.$core.uuid(),name:"未命名",status:"done"}),this.dResLis.push({url:t})})),this.$emit("update:pLis",this.dResLis))}},watch:{dCameraLs(t){this.fnEmOk(t.filter((t=>t.uuid==this.uuid)).map((t=>t.src)))}}},l=(0,a(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"clearfix"},[e("a-upload",{attrs:{action:"/g2/api/File/UploadFiles","list-type":"picture-card","file-list":t.dFileList,name:"files",multiple:t.pMax>1,openFileDialogOnClick:t.openFileDialogOnClick,disabled:t.disabled,accept:t.accept},on:{preview:t.fnPreview,change:t.fnChange}},[t.dFileList.length<t.pMax&&!t.readonly?e("div",[t.disabled?[e("a-icon",{staticStyle:{"font-size":"32px"},attrs:{type:"plus",color:"#1890ff"}}),e("div",{staticClass:"flexca",staticStyle:{"margin-top":"8px"}},[t.action.indexOf("file")>=0?e("a-button",{attrs:{type:"primary",size:"small",icon:"file",disabled:t.disabled},on:{click:function(e){return t.fnUpclick("file")}}},[t._v(" "+t._s(1==t.action.length?"选择文件":"")+" ")]):t._e(),t.action.indexOf("scan")>=0?e("a-button",{attrs:{type:"primary",size:"small",icon:"scan",disabled:t.disabled},on:{click:function(e){return t.fnUpclick("scan")}}},[t._v(" "+t._s(1==t.action.length?"扫描文件":"")+" ")]):t._e(),t.action.indexOf("camera")>=0?e("a-button",{attrs:{type:"primary",size:"small",icon:"camera",disabled:t.disabled},on:{click:function(e){return t.fnUpclick("camera")}}},[t._v(" "+t._s(1==t.action.length?"高拍仪":"")+" ")]):t._e()],1)]:[1==t.action.length?e("a-icon",{staticStyle:{"font-size":"32px"},attrs:{type:"plus",color:"#1890ff"},on:{click:function(e){return t.fnUpclick(t.action[0])}}}):[e("a-dropdown",{attrs:{trigger:["click"]}},[e("a-icon",{staticStyle:{"font-size":"32px",width:"100%"},attrs:{type:"plus",color:"#1890ff"}}),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t.action.indexOf("file")>=0?e("a-menu-item",{on:{click:function(e){return t.fnUpclick("file")}}},[t._v("选择本地文件")]):t._e(),t.action.indexOf("scan")>=0?e("a-menu-item",{on:{click:function(e){return t.fnUpclick("scan")}}},[t._v("高拍仪扫描")]):t._e(),t.action.indexOf("camera")>=0?e("a-menu-item",{on:{click:function(e){return t.fnUpclick("camera")}}},[t._v("高拍仪")]):t._e()],1)],1)],e("div",{staticClass:"flexca",staticStyle:{"margin-top":"8px"}},[e("a-tooltip",{attrs:{title:"选择本地文件"}},[t.action.indexOf("file")>=0?e("a-button",{attrs:{type:"primary",size:"small",icon:"file",disabled:t.disabled},on:{click:function(e){return t.fnUpclick("file")}}},[t._v(" "+t._s(1==t.action.length?"选择文件":"")+" ")]):t._e()],1),e("a-tooltip",{attrs:{title:"高拍仪扫描"}},[t.action.indexOf("scan")>=0?e("a-button",{attrs:{type:"primary",size:"small",icon:"scan",disabled:t.disabled},on:{click:function(e){return t.fnUpclick("scan")}}},[t._v(" "+t._s(1==t.action.length?"扫描文件":"")+" ")]):t._e()],1),e("a-tooltip",{attrs:{title:"高拍仪"}},[t.action.indexOf("camera")>=0?e("a-button",{attrs:{type:"primary",size:"small",icon:"camera",disabled:t.disabled},on:{click:function(e){return t.fnUpclick("camera")}}},[t._v(" "+t._s(1==t.action.length?"高拍仪":"")+" ")]):t._e()],1)],1)]],2):t._e()]),e("FilePreview",{ref:"FilePreview"}),e("Camera",{ref:"Camera",on:{emOk:t.fnEmOk}})],1)}),[],!1,null,"52c12617",null).exports},87518:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var i=a(2670),s=a(55817),n=a(42722),l=a(55743),r=a.n(l),o={data(){return{dQparm:{name:"",startDate:null,endDate:null,divisionID:null,caseCategoryID:void 0,clueCategoryID:void 0}}},props:{loading:{type:Boolean,default:!1}},components:{TableQuery:n.Z},async created(){this.fnReset(),this.init()},methods:{async init(){},fnReset(){this.dQparm={name:"",startDate:null,endDate:null,divisionID:null,caseCategoryID:void 0,clueCategoryID:void 0}},fnQuery(){let t={};this.dQparm.name&&this.dQparm.name.length>0&&(t.name=this.dQparm.name.trim()),this.dQparm.startDate&&r()(this.dQparm.startDate).isValid()&&(t.startDate=this.dQparm.startDate.toJSON()),this.dQparm.endDate&&r()(this.dQparm.endDate).isValid()&&(t.endDate=this.dQparm.endDate.toJSON()),this.dQparm.divisionID&&this.dQparm.divisionID>0&&(t.divisionID=this.dQparm.divisionID),this.dQparm.caseCategoryID&&this.dQparm.caseCategoryID>0&&(t.caseCategoryID=this.dQparm.caseCategoryID),this.dQparm.clueCategoryID&&this.dQparm.clueCategoryID>0&&(t.clueCategoryID=this.dQparm.clueCategoryID),this.$emit("emQuery",t)}}},d=a(1001),c=(0,d.Z)(o,(function(){var t=this,e=t._self._c;return e("TableQuery",{attrs:{keyWord:t.dQparm.name,loading:t.loading,btnlg:24},on:{"update:keyWord":function(e){return t.$set(t.dQparm,"name",e)},"update:key-word":function(e){return t.$set(t.dQparm,"name",e)},emReset:t.fnReset,emQuery:t.fnQuery},scopedSlots:t._u([{key:"COND1",fn:function(){return[e("a-form-item",{attrs:{label:"关键字搜索:"}},[e("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{search:t.fnQuery},model:{value:t.dQparm.name,callback:function(e){t.$set(t.dQparm,"name",e)},expression:"dQparm.name"}})],1)]},proxy:!0},{key:"COND2",fn:function(){return[e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"行政区划"}},[e("a-tree-select",{attrs:{treeData:t.$AREA,replaceFields:{title:"name",value:"id",children:"children",key:"id"},placeholder:"请选择行政区划","allow-clear":""},model:{value:t.dQparm.divisionID,callback:function(e){t.$set(t.dQparm,"divisionID",e)},expression:"dQparm.divisionID"}})],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"案件类型"}},[e("a-select",{attrs:{allowClear:"",placeholder:"请选择督办类别"},model:{value:t.dQparm.caseCategoryID,callback:function(e){t.$set(t.dQparm,"caseCategoryID",e)},expression:"dQparm.caseCategoryID"}},t._l(t.$DICT.filter((t=>"d_caseCategory"==t.tableName)),(function(a){return e("a-select-option",{attrs:{value:a.fid}},[t._v(t._s(a.name))])})),1)],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"线索类别"}},[e("a-select",{attrs:{allowClear:"",placeholder:"请选择线索类别"},model:{value:t.dQparm.clueCategoryID,callback:function(e){t.$set(t.dQparm,"clueCategoryID",e)},expression:"dQparm.clueCategoryID"}},t._l(t.$DICT.filter((t=>"d_clueCategory"==t.tableName)),(function(a){return e("a-select-option",{attrs:{value:a.fid}},[t._v(t._s(a.name))])})),1)],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"区县自侦"}},[e("a-select",{attrs:{allowClear:"",placeholder:"请选择是否区县自侦"},model:{value:t.dQparm.isCreatedByCounty,callback:function(e){t.$set(t.dQparm,"isCreatedByCounty",e)},expression:"dQparm.isCreatedByCounty"}},[e("a-select-option",{attrs:{value:1}},[t._v("是")]),e("a-select-option",{attrs:{value:0}},[t._v("否")])],1)],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"查询起始时间"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入起始时间","show-time":""},model:{value:t.dQparm.startDate,callback:function(e){t.$set(t.dQparm,"startDate",e)},expression:"dQparm.startDate"}})],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"查询终止时间"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入终止时间","show-time":""},model:{value:t.dQparm.endDate,callback:function(e){t.$set(t.dQparm,"endDate",e)},expression:"dQparm.endDate"}})],1)],1)]},proxy:!0},{key:"BTNSPUSH",fn:function(){return[e("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){return t.$emit("emAdd",null)}}},[t._v("添加")])]},proxy:!0}])})}),[],!1,null,null,null).exports,m=a(63611),u={extends:i.AS,components:{Uploads:m.Z},data(){return{schema:s.Z,tttt:[]}},async mounted(){},methods:{}},p=(0,d.Z)(u,(function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{visible:t.dObj.show,title:(t.dObj.mod&&t.dObj.mod.fid>0?"修改":"新增")+t.dObj.title,width:1060,maskClosable:!1},on:{ok:function(e){return t.Save()},cancel:function(e){return t.Cancel()}}},[e("a-spin",{attrs:{spinning:t.dObj.load,tip:t.dObj.title+"可编辑数据加载中..."}},[e("div",{style:t.dObj.load?"min-height:280px":""},[null!=t.dObj.mod?e("a-form-model",{ref:"editref",staticClass:"inline-form",attrs:{model:t.dObj.mod,rules:t.dObj.rules,labelCol:{style:{minWidth:"130px"}},layout:"horizontal",labelAlign:"left"}},[e("input",{attrs:{type:"hidden"},domProps:{value:t.dObj.mod.fid}}),e("a-row",{staticClass:"column2",staticStyle:{"margin-right":"0"},attrs:{gutter:[32,0]}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"标题",prop:"title"}},[e("a-input",{attrs:{placeholder:"请输入标题",allowClear:""},model:{value:t.dObj.mod.title,callback:function(e){t.$set(t.dObj.mod,"title",e)},expression:"dObj.mod.title"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"来源",prop:"source"}},[e("a-input",{attrs:{placeholder:"请输入来源",allowClear:""},model:{value:t.dObj.mod.source,callback:function(e){t.$set(t.dObj.mod,"source",e)},expression:"dObj.mod.source"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"网址链接",prop:"websiteurl"}},[e("a-input",{attrs:{placeholder:"请输入网址链接",allowClear:""},model:{value:t.dObj.mod.websiteurl,callback:function(e){t.$set(t.dObj.mod,"websiteurl",e)},expression:"dObj.mod.websiteurl"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"选择图片",prop:"_pathimg"}},[e("Uploads",{attrs:{pLis:t.dObj.mod._Attachment_Img,pMax:100,action:["file","camera"]},on:{"update:pLis":function(e){return t.$set(t.dObj.mod,"_Attachment_Img",e)},"update:p-lis":function(e){return t.$set(t.dObj.mod,"_Attachment_Img",e)}}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"摘要",prop:"brief"}},[e("a-textarea",{attrs:{placeholder:"请输入摘要",allowClear:""},model:{value:t.dObj.mod.brief,callback:function(e){t.$set(t.dObj.mod,"brief",e)},expression:"dObj.mod.brief"}})],1)],1)],1)],1):e("a-empty",{directives:[{name:"show",rawName:"v-show",value:!t.dObj.load,expression:"!dObj.load"}]})],1)])],1)}),[],!1,null,null,null).exports,f={extends:i.v6,components:{Uploads:m.Z},data(){return{schema:s.Z}},async mounted(){},methods:{}},h=(0,d.Z)(f,(function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{visible:t.dObj.show,title:t.dObj.title+"详情",maskClosable:!1,width:980},on:{cancel:function(e){t.dObj.show=!1},ok:function(e){t.dObj.show=!1}}},[e("a-spin",{attrs:{spinning:t.dObj.load,tip:t.dObj.title+"详情数据加载中..."}},[e("div",{style:t.dObj.load?"min-height:280px":""},[t.dObj.mod?[e("a-descriptions",{staticClass:"column2",attrs:{column:2,contentStyle:{opacity:.75},bordered:""}},[e("a-descriptions-item",{attrs:{label:"标题",span:1}},[t._v(t._s(t.dObj.mod.title))]),e("a-descriptions-item",{attrs:{label:"来源",span:1}},[t._v(t._s(t.dObj.mod.source))]),e("a-descriptions-item",{attrs:{label:"创建时间",span:1}},[t._v(t._s(t._f("DATE")(t.dObj.mod.createDate)))]),e("a-descriptions-item",{attrs:{label:"修改时间",span:1}},[t._v(t._s(t._f("DATE")(t.dObj.mod.modifyDate)))]),e("a-descriptions-item",{attrs:{label:"摘要",span:2}},[t._v(t._s(t.dObj.mod.brief))]),e("a-descriptions-item",{attrs:{label:"图片",span:2}},[e("Uploads",{attrs:{pLis:t.dObj.mod._Attachment_Img,disabled:"",readonly:"",pMax:100,action:["file","camera"]},on:{"update:pLis":function(e){return t.$set(t.dObj.mod,"_Attachment_Img",e)},"update:p-lis":function(e){return t.$set(t.dObj.mod,"_Attachment_Img",e)}}})],1),e("a-descriptions-item",{attrs:{label:"网址链接",span:2}},[e("a",{attrs:{href:"/g3"+t.dObj.mod.websiteurl,target:"_blank"}},[t._v(t._s(t.dObj.mod.websiteurl))])])],1)]:e("a-empty",{directives:[{name:"show",rawName:"v-show",value:!t.dObj.load,expression:"!dObj.load"}]})],2)])],1)}),[],!1,null,null,null).exports,b={extends:i.en,data(){return{schema:s.Z}},components:{IndexQuery:c,IndexEdit:p,IndexDetail:h},mounted(){},methods:{}},y=(0,d.Z)(b,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("IndexQuery",{attrs:{loading:t.dTb.load},on:{emQuery:e=>{t.dQparm=e,t.fnTb_Query()},emAdd:function(e){return t.$refs.refIndexEdit.Init(0)}}}),e("a-table",{staticClass:"my-tbale",attrs:{columns:t.dTb.colunms.filter((t=>t.show)),rowKey:t=>t.fid,dataSource:t.dTb.rows,pagination:t.dTb.pagination,loading:t.dTb.load,"row-selection":{selectedRowKeys:t.dTb.rows_chks,onChange:e=>t.dTb.rows_chks=[...e]}},on:{change:t.fnTb_Query},scopedSlots:t._u([{key:"ix",fn:function(a,i,s){return e("span",{},[t._v(t._s((t.dTb.pagination.current-1)*t.dTb.pagination.pageSize+s+1)+" ")])}},{key:"IndexType",fn:function(a,i,s){return e("span",{},[t._v(t._s(a.name))])}},{key:"op",fn:function(a,i,s){return[e("a-button",{attrs:{type:"link",size:"small",icon:"eye"},on:{click:function(e){return t.$refs.refIndexDetail.Init(i.fid)}}},[t._v("详情")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{staticStyle:{color:"#06E464"},attrs:{type:"link",size:"small",icon:"edit"},on:{click:function(e){return t.$refs.refIndexEdit.Init(i.fid)}}},[t._v("修改")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{staticStyle:{color:"#F70000"},attrs:{type:"link",size:"small",icon:"delete"},on:{click:function(e){return t.fnTb_Del([i.fid])}}},[t._v("删除")])]}},{key:"createDate",fn:function(e,a,i){return[t._v(t._s(t._f("DATE")(e)))]}},{key:"modifyDate",fn:function(e,a,i){return[t._v(t._s(t._f("DATE")(e)))]}},{key:"websiteurl",fn:function(a,i,s){return[e("a",{attrs:{href:"/g3"+a,target:"_blank"}},[t._v(t._s(a))])]}}])}),e("IndexEdit",{ref:"refIndexEdit",on:{emOk:function(e){return t.fnTb_Query()}}}),e("IndexDetail",{ref:"refIndexDetail"})],1)}),[],!1,null,null,null).exports},2670:function(t,e,a){a.d(e,{AS:function(){return r},en:function(){return n},v6:function(){return l}});var i=a(55743),s=a.n(i);const n={data(){return{dQparm:{},dTb:{rows:[],colunms:[],rows_chks:[],load:!1,pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,e)=>`共${t}条数据 当前从${e[0]}~${e[1]}条`},size:"defalut"}}},mounted(){this.dTb.colunms=this.schema.ListCols,this.fnTb_Query()},methods:{async fnTb_Query(t,e,a){this.dTb.pagination.current=t&&t.current||1,this.dTb.pagination.pageSize=t&&t.pageSize||10,this.dQparm.pageIndex=this.dTb.pagination.current,this.dQparm.pageSize=this.dTb.pagination.pageSize,this.dTb.load=!0;let i=await this.$api2(this.schema.Url.GetCount,this.dQparm);if(i.isOk){let t=parseInt(i.data);if(t>0){this.dTb.pagination.total=t;let e=await this.$api2(this.schema.Url.GetList,this.dQparm);e.isOk?this.dTb.rows=this.schema.ListFilter&&await this.schema.ListFilter(e.data)||e.data:this.$message.error(e&&e.message||this.schema.Desc+"数据列表查询失败")}else this.dTb.rows=[]}else this.$message.error(i&&i.message||this.schema.Desc+"数据分页统计失败");this.dTb.load=!1},async fnTb_Del(t){if(!t||t.length<=0)return this.$message.error("请选择要删除的"+this.schema.Desc+"数据");let e=this;this.$confirm({title:"操作确认",content:"确认删除当前选中的"+t.length+"条记录",onOk(){e.$api2(e.schema.Url.Delete,t).then((t=>{t&&t.isOk?(e.$message.success(e.schema.Desc+"数据已成功删除"),e.fnTb_Query()):e.$message.error(t&&t.message||"数据删除失败")}))}})}},filters:{time(t,e="YYYY-MM-DD HH:mm:ss"){let a=s()(t);return a.isValid()?a.format(e):null}}},l={data(){return{dObj:{show:!1,load:!1,mod:null,title:""}}},mounted(){this.dObj.title=this.schema&&this.schema.Desc||""},methods:{async Init(t,e="fid"){if(!(t&&t>0))return;this.dObj.mod=null,this.dObj.show=!0,this.dObj.load=!0;let a="fid"==e?{fid:t}:{id:t},i=await this.$api2(this.schema.Url.Get,null,a);this.dObj.load=!1,i&&i.isOk&&null!=i.data?this.dObj.mod=this.schema.DetailFilter&&await this.schema.DetailFilter(i.data)||i.data:this.$message.error(i&&i.message||this.schema.Desc+"可预览信息查询失败")}}},r={data(){return{dObj:{show:!1,load:!1,mod:null,title:"",rules:null}}},mounted(){this.dObj.title=this.schema.Desc||"",this.dObj.rules=this.schema.EditRules||null},methods:{async Init(t,e="fid"){if(parseInt(t)>=0){if(this.dObj.mod=null,this.dObj.show=!0,0==t)this.dObj.mod=this.schema.EditFilter&&await this.schema.EditFilter(null);else{this.dObj.load=!0;let a="fid"==e?{fid:t}:{id:t},i=await this.$api2(this.schema.Url.Get,null,a);i&&i.isOk&&null!=i.data?this.dObj.mod=this.schema.EditFilter&&await this.schema.EditFilter(i.data)||i.data:this.$message.error(i&&i.message||this.schema.Desc+"可编辑信息查询失败"),this.dObj.load=!1}this.$refs.editref&&this.$refs.editref.resetFields&&this.$refs.editref.resetFields()}},async Save(){this.$refs.editref.validate((async t=>{if(!t)return this.$message.error("输入数据校验失败，请重新输入"),!1;{this.dObj.load=!0;let t=this.schema.SaveFilter&&this.schema.SaveFilter(this.dObj.mod)||this.dObj.mod,e=await this.$api2(this.schema.Url.Save,t);this.dObj.load=!1,e&&e.isOk?parseInt(e.data)>0?(this.$message.success(this.schema.Desc+"数据保存成功"),this.schema.SaveFilterEnd&&(this.dObj.mod.fid=e.data,this.schema.SaveFilterEnd(this.dObj.mod)),this.dObj.show=!1,this.$emit("emOk",!0)):this.$message.error("数据保存失败"):this.$message.error(e&&e.message||this.schema.Desc+"数据保存失败")}}))},async Cancel(){this.dObj.show=!1,this.dObj.mod=null}}}},55817:function(t,e,a){var i=a(55743),s=a.n(i),n=a(48368);let l={Desc:"食药热点",Table:"t_hotnews",TableType:"Common"};l.Url={Save:`/api/${l.TableType}/Save_${l.Table}`,GetCount:`/api/${l.TableType}/GetCount_${l.Table}`,GetList:`/api/${l.TableType}/GetList_${l.Table}`,Get:`/api/${l.TableType}/Get_${l.Table}`,Delete:`/api/${l.TableType}/Delete_${l.Table}`},l.ListCols=[{title:"标题",dataIndex:"title",show:!0,ellipsis:!0},{title:"来源",dataIndex:"source",show:!0,ellipsis:!0},{title:"摘要",dataIndex:"brief",show:!0,ellipsis:!0},{title:"网址链接",dataIndex:"websiteurl",show:!0,scopedSlots:{customRender:"websiteurl"},ellipsis:!0},{title:"创建时间",dataIndex:"createDate",show:!1,scopedSlots:{customRender:"createDate"}},{title:"修改时间",dataIndex:"modifyDate",show:!0,scopedSlots:{customRender:"modifyDate"}},{title:"操作",dataIndex:"op",show:!0,scopedSlots:{customRender:"op"},fixed:"right",width:300,className:"text-tc"}],l.ListFilter=t=>t,l.DetailFilter=async t=>{t._Attachment_Img=[];let e=await(0,n.Z)("/api/Common/GetAttachmentList",{TableName:"t_hotnews",TableID:t.fid,pageIndex:0,pageSize:100});return e&&e.isOk&&(t._Attachment_Img=e.data.filter((t=>"Img"==t.type)).map((t=>({name:t.name,url:t.relativePath})))),Object.assign({},t)},l.EditRules={title:[{required:!0,message:"请输入标题",trigger:"blur"}],divisionID:[{required:!0,trigger:"change",type:"object",validator:async(t,e)=>parseInt(e)>0?Promise.resolve():Promise.reject("请选择行政区划")}]},l.EditFilter=async t=>{if(null!=t){t._Attachment_Img=[];let e=await(0,n.Z)("/api/Common/GetAttachmentList",{TableName:"t_hotnews",TableID:t.fid,pageIndex:0,pageSize:100});e&&e.isOk&&(t._Attachment_Img=e.data.filter((t=>"Img"==t.type)).map((t=>({name:t.name,url:t.relativePath}))))}return Object.assign({fid:0},t)},l.SaveFilter=t=>{let e=Object.assign({},t);return delete e._Attachment_Img,e.modifyDate=s()().toJSON(),e},l.SaveFilterEnd=async t=>{await(0,n.Z)("/api/Common/SaveAttachments",[{tableName:"t_hotnews",type:"Img",tableID:t.fid,relativePaths:t._Attachment_Img.map((t=>t.url))}])},e.Z=l}}]);