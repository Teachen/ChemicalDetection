"use strict";(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[224],{42722:function(e,t,a){a.d(t,{Z:function(){return i}});var s={data(){return{dnofold:!1,dunflod:!1,newkeyWord:this.keyWord}},props:{keyWord:String||"",loading:Boolean||!1,nofold:Boolean||!1,unflod:Boolean||!1,btnlg:Number||8},emits:["emReset","emQuery","update:keyWord"],created(){this.dnofold=Boolean(this.nofold),this.dunflod=Boolean(this.unflod)},methods:{fnTest(){}}},i=(0,a(1001).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("a-form",{directives:[{name:"show",rawName:"v-show",value:!e.dunflod,expression:"!dunflod"}],staticClass:"inline-form",staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"end"},attrs:{layout:"inline"}},[e._t("COND1",(function(){return[t("a-form-item",{attrs:{label:"关键字搜索"}},[t("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{change:function(t){return e.$emit("update:keyWord",e.newkeyWord)},search:function(t){return e.$emit("emQuery",null)}},model:{value:e.newkeyWord,callback:function(t){e.newkeyWord=t},expression:"newkeyWord"}})],1)]})),t("a-form-item",{staticStyle:{"margin-right":"0"}},[t("a-space",[e._t("BTNS",(function(){return[t("a-button",{staticClass:"cant-btn-default",attrs:{type:"default",loading:e.loading},on:{click:function(t){return e.$emit("emReset",null)}}},[e._v("重置")]),t("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.$emit("emQuery",null)}}},[e._v("搜索")]),e.dnofold?e._e():[t("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.dunflod,expression:"!dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){e.dunflod=!e.dunflod}}},[e._v("高级"),t("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-down"}})],1),t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.dunflod,expression:"dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){e.dunflod=!e.dunflod}}},[e._v("收起"),t("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-up"}})],1)],e._t("BTNSPUSH")]}))],2)],1)],2),t("a-form",{directives:[{name:"show",rawName:"v-show",value:!e.dnofold&&e.dunflod,expression:"!dnofold && dunflod"}],staticClass:"inline-form",staticStyle:{"margin-bottom":"-10px"},attrs:{layout:"horizontal",labelCol:{style:{width:"100px"}}}},[t("a-row",{attrs:{gutter:[30,0]}},[e._t("COND2"),t("a-col",{attrs:{span:24,lg:e.btnlg}},[t("a-form-item",{staticClass:"fr"},[t("a-space",[e._t("BTNS",(function(){return[t("a-button",{staticClass:"cant-btn-default",attrs:{type:"default",loading:e.loading},on:{click:function(t){return e.$emit("emReset",null)}}},[e._v("重置")]),t("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.$emit("emQuery",null)}}},[e._v("搜索")]),e.dnofold?e._e():[t("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.dunflod,expression:"!dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){e.dunflod=!e.dunflod}}},[e._v("高级"),t("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-down"}})],1),t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.dunflod,expression:"dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){e.dunflod=!e.dunflod}}},[e._v("收起"),t("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-up"}})],1)],e._t("BTNSPUSH")]}))],2)],1)],1)],2)],1)],1)}),[],!1,null,null,null).exports},82145:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var s=a(2670),i=a(11159),l=a(42722),n=a(55743),r=a.n(n),o={data(){return{dQparm:{name:"",startDate:null,endDate:null,divisionID:null,caseCategoryID:void 0,clueCategoryID:void 0}}},props:{loading:{type:Boolean,default:!1}},computed:{isAdmin:function(){return this.$store.state.user.roles.indexOf("admin")>=0},isUserDeep:function(){return parseInt(this.$store.state.user.division_deep||0)}},components:{TableQuery:l.Z},async created(){this.fnReset(),this.init(),3==this.isUserDeep&&(this.dQparm.divisionID=this.$store.state.user.division_id)},methods:{async init(){},fnReset(){this.dQparm={name:"",startDate:null,endDate:null,divisionID:null,caseCategoryID:void 0,clueCategoryID:void 0}},fnQuery(){let e={};this.dQparm.name&&this.dQparm.name.length>0&&(e.name=this.dQparm.name.trim()),this.dQparm.startDate&&r()(this.dQparm.startDate).isValid()&&(e.startDate=this.dQparm.startDate.toJSON()),this.dQparm.endDate&&r()(this.dQparm.endDate).isValid()&&(e.endDate=this.dQparm.endDate.toJSON()),this.dQparm.divisionID&&this.dQparm.divisionID>0&&(e.divisionID=this.dQparm.divisionID),this.dQparm.caseCategoryID&&this.dQparm.caseCategoryID>0&&(e.caseCategoryID=this.dQparm.caseCategoryID),this.dQparm.clueCategoryID&&this.dQparm.clueCategoryID>0&&(e.clueCategoryID=this.dQparm.clueCategoryID),this.$emit("emQuery",e)}}},d=a(1001),c=(0,d.Z)(o,(function(){var e=this,t=e._self._c;return t("TableQuery",{attrs:{keyWord:e.dQparm.name,loading:e.loading,btnlg:24},on:{"update:keyWord":function(t){return e.$set(e.dQparm,"name",t)},"update:key-word":function(t){return e.$set(e.dQparm,"name",t)},emReset:e.fnReset,emQuery:e.fnQuery},scopedSlots:e._u([{key:"COND1",fn:function(){return[t("a-form-item",{attrs:{label:"关键字搜索:"}},[t("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{search:e.fnQuery},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1)]},proxy:!0},{key:"COND2",fn:function(){return[t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"行政区划"}},[t("a-tree-select",{attrs:{treeData:e.$AREA,replaceFields:{title:"name",value:"id",children:"children",key:"id"},placeholder:"请选择行政区划","allow-clear":"",disabled:!e.isAdmin},model:{value:e.dQparm.divisionID,callback:function(t){e.$set(e.dQparm,"divisionID",t)},expression:"dQparm.divisionID"}})],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"案件类型"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择督办类别"},model:{value:e.dQparm.caseCategoryID,callback:function(t){e.$set(e.dQparm,"caseCategoryID",t)},expression:"dQparm.caseCategoryID"}},e._l(e.$DICT.filter((e=>"d_caseCategory"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"线索类别"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索类别"},model:{value:e.dQparm.clueCategoryID,callback:function(t){e.$set(e.dQparm,"clueCategoryID",t)},expression:"dQparm.clueCategoryID"}},e._l(e.$DICT.filter((e=>"d_clueCategory"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"区县自侦"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择是否区县自侦"},model:{value:e.dQparm.isCreatedByCounty,callback:function(t){e.$set(e.dQparm,"isCreatedByCounty",t)},expression:"dQparm.isCreatedByCounty"}},[t("a-select-option",{attrs:{value:1}},[e._v("是")]),t("a-select-option",{attrs:{value:0}},[e._v("否")])],1)],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"查询起始时间"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入起始时间","show-time":""},model:{value:e.dQparm.startDate,callback:function(t){e.$set(e.dQparm,"startDate",t)},expression:"dQparm.startDate"}})],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"查询终止时间"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入终止时间","show-time":""},model:{value:e.dQparm.endDate,callback:function(t){e.$set(e.dQparm,"endDate",t)},expression:"dQparm.endDate"}})],1)],1)]},proxy:!0},{key:"BTNSPUSH",fn:function(){return[t("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){return e.$emit("emAdd",null)}}},[e._v("添加")])]},proxy:!0}])})}),[],!1,null,null,null).exports,m=a(83047),u=a(41017),p={extends:s.AS,inject:["pGrand"],components:{TableEdit:m.Z,TableEditUser:u.Z},data(){return{schema:i.Z}},async mounted(){},methods:{async Save(){this.$refs.editref.validate((async e=>{if(!e)return this.$message.error("输入数据校验失败，请重新输入"),!1;{this.dObj.load=!0;let e=this.schema.SaveFilter&&this.schema.SaveFilter(this.dObj.mod)||this.dObj.mod,t=await this.$api2(this.schema.Url.Save,e);if(this.dObj.load=!1,t&&t.isOk)if(parseInt(t.data)>0){if(this.$message.success(this.schema.Desc+"数据保存成功"),0==this.dObj.mod.fid){await this.$api2("/api/Workflow/Submit_t_clue",{id:parseInt(t.data)})}this.dObj.show=!1,this.$emit("emOk",!0)}else this.$message.error("数据保存失败");else this.$message.error(t&&t.message||this.schema.Desc+"数据保存失败")}}))}}},f=(0,d.Z)(p,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{visible:e.dObj.show,title:(e.dObj.mod&&e.dObj.mod.fid>0?"修改":"新增")+e.dObj.title,width:1060,maskClosable:!1},on:{ok:function(t){return e.Save()},cancel:function(t){return e.Cancel()}}},[t("a-spin",{attrs:{spinning:e.dObj.load,tip:e.dObj.title+"可编辑数据加载中..."}},[t("div",{style:e.dObj.load?"min-height:280px":""},[null!=e.dObj.mod?t("a-form-model",{ref:"editref",staticClass:"inline-form",attrs:{model:e.dObj.mod,rules:e.dObj.rules,labelCol:{style:{minWidth:"130px"}},layout:"horizontal",labelAlign:"left"}},[t("input",{attrs:{type:"hidden"},domProps:{value:e.dObj.mod.fid}}),t("a-row",{staticClass:"column2",staticStyle:{"margin-right":"0"},attrs:{gutter:[32,0]}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"行政区划",prop:"divisionID"}},[t("a-tree-select",{attrs:{treeData:e.$AREA,replaceFields:{title:"name",value:"id",children:"children",key:"id"},placeholder:"请选择行政区划","allow-clear":""},model:{value:e.dObj.mod.divisionID,callback:function(t){e.$set(e.dObj.mod,"divisionID",t)},expression:"dObj.mod.divisionID"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"产品名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",allowClear:""},model:{value:e.dObj.mod.name,callback:function(t){e.$set(e.dObj.mod,"name",t)},expression:"dObj.mod.name"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"督办类别",prop:"caseCategoryID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择督办类别"},model:{value:e.dObj.mod.caseCategoryID,callback:function(t){e.$set(e.dObj.mod,"caseCategoryID",t)},expression:"dObj.mod.caseCategoryID"}},e._l(e.$DICT.filter((e=>"d_caseCategory"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"线索等级",prop:"clueGradeID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索等级"},model:{value:e.dObj.mod.clueGradeID,callback:function(t){e.$set(e.dObj.mod,"clueGradeID",t)},expression:"dObj.mod.clueGradeID"}},e._l(e.$DICT.filter((e=>"d_clueGrade"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"线索类别",prop:"clueCategoryID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索类别"},model:{value:e.dObj.mod.clueCategoryID,callback:function(t){e.$set(e.dObj.mod,"clueCategoryID",t)},expression:"dObj.mod.clueCategoryID"}},e._l(e.$DICT.filter((e=>"d_clueCategory"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"线索来源",prop:"clueSourceID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索来源"},model:{value:e.dObj.mod.clueSourceID,callback:function(t){e.$set(e.dObj.mod,"clueSourceID",t)},expression:"dObj.mod.clueSourceID"}},e._l(e.$DICT.filter((e=>"d_clueSource"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"车牌号",prop:"plateNumber"}},[t("a-input",{attrs:{placeholder:"请输入车牌号",allowClear:""},model:{value:e.dObj.mod.plateNumber,callback:function(t){e.$set(e.dObj.mod,"plateNumber",t)},expression:"dObj.mod.plateNumber"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"网页链接",prop:"websiteUrl"}},[t("a-input",{attrs:{placeholder:"请输入网页链接",allowClear:""},model:{value:e.dObj.mod.websiteUrl,callback:function(t){e.$set(e.dObj.mod,"websiteUrl",t)},expression:"dObj.mod.websiteUrl"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"宣传内容",prop:"content"}},[t("a-textarea",{attrs:{placeholder:"请输入宣传内容","show-count":"",allowClear:""},model:{value:e.dObj.mod.content,callback:function(t){e.$set(e.dObj.mod,"content",t)},expression:"dObj.mod.content"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"初研结果",prop:"filterResultID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请输入初研结果"},model:{value:e.dObj.mod.filterResultID,callback:function(t){e.$set(e.dObj.mod,"filterResultID",t)},expression:"dObj.mod.filterResultID"}},e._l(e.$DICT.filter((e=>"d_clueFilterResult"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"线索状态",prop:"clueStateID"}},[t("a-select",{attrs:{allowClear:"",placeholder:"请选择线索状态"},model:{value:e.dObj.mod.clueStateID,callback:function(t){e.$set(e.dObj.mod,"clueStateID",t)},expression:"dObj.mod.clueStateID"}},e._l(e.$DICT.filter((e=>"d_clueState"==e.tableName)),(function(a){return t("a-select-option",{attrs:{value:a.fid}},[e._v(e._s(a.name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"下发单位",prop:"assignDeptID"}},[t("a-tree-select",{attrs:{"show-search":"",treeData:e.pGrand.dSysDept,replaceFields:{title:"name",value:"id",key:"id"},placeholder:"选择下发单位",searchPlaceholder:"请输入关键字过滤","allow-clear":"",treeNodeFilterProp:"title"},model:{value:e.dObj.mod.assignDeptID,callback:function(t){e.$set(e.dObj.mod,"assignDeptID",t)},expression:"dObj.mod.assignDeptID"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"下发时间",prop:"assignDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入下发时间","show-time":"",allowClear:""},model:{value:e.dObj.mod.assignDate,callback:function(t){e.$set(e.dObj.mod,"assignDate",t)},expression:"dObj.mod.assignDate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"反馈时间",prop:"respondDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈时间","show-time":"",allowClear:""},model:{value:e.dObj.mod.respondDate,callback:function(t){e.$set(e.dObj.mod,"respondDate",t)},expression:"dObj.mod.respondDate"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"反馈期限",prop:"respondDueDate"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入反馈期限","show-time":"",allowClear:""},model:{value:e.dObj.mod.respondDueDate,callback:function(t){e.$set(e.dObj.mod,"respondDueDate",t)},expression:"dObj.mod.respondDueDate"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"联系方式",prop:"contactInfoList"}},[t("TableEditUser",{attrs:{objs:e.dObj.mod.contactInfoList.items,maxTagCount:3,title:"请输入联系方式"},on:{"update:objs":function(t){return e.$set(e.dObj.mod.contactInfoList,"items",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"银行卡号",prop:"debitCardNumberList"}},[t("TableEdit",{attrs:{objs:e.dObj.mod.debitCardNumberList.items,maxTagCount:3,title:"请输入银行卡号"},on:{"update:objs":function(t){return e.$set(e.dObj.mod.debitCardNumberList,"items",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"快递单号",prop:"expressNumberList"}},[t("TableEdit",{attrs:{objs:e.dObj.mod.expressNumberList.items,maxTagCount:3,title:"请输入快递单号"},on:{"update:objs":function(t){return e.$set(e.dObj.mod.expressNumberList,"items",t)}}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"自定义信息",prop:"customFieldList"}},[t("TableEdit",{attrs:{objs:e.dObj.mod.customFieldList.items,maxTagCount:3,title:"请输入自定义信息"},on:{"update:objs":function(t){return e.$set(e.dObj.mod.customFieldList,"items",t)}}})],1)],1)],1)],1):t("a-empty",{directives:[{name:"show",rawName:"v-show",value:!e.dObj.load,expression:"!dObj.load"}]})],1)])],1)}),[],!1,null,null,null).exports;a(23767),a(8585),a(68696);const b=a(48082);b.enc.Utf8.parse({NODE_ENV:"production",VUE_APP_API_URL:"http://47.122.60.227:9999",BASE_URL:"/ChemicalDetection/"}.CRYPTO_KEY),b.enc.Utf8.parse({NODE_ENV:"production",VUE_APP_API_URL:"http://47.122.60.227:9999",BASE_URL:"/ChemicalDetection/"}.CRYPTO_IV);a(51223);var h={extends:s.v6,inject:["pGrand"],data(){return{schema:i.Z}},async mounted(){},methods:{uuid:e=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}},_=(0,d.Z)(h,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{visible:e.dObj.show,title:e.dObj.title+"详情",maskClosable:!1,width:980},on:{cancel:function(t){e.dObj.show=!1},ok:function(t){e.dObj.show=!1}}},[t("a-spin",{attrs:{spinning:e.dObj.load,tip:e.dObj.title+"详情数据加载中..."}},[t("div",{style:e.dObj.load?"min-height:280px":""},[e.dObj.mod?t("a-tabs",[t("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[t("a-descriptions",{staticClass:"column2",attrs:{column:2,contentStyle:{opacity:.75},bordered:""}},[t("a-descriptions-item",{attrs:{label:"行政区划",span:1}},[e._v(e._s(e._f("AREA")(e.dObj.mod.divisionID)))]),t("a-descriptions-item",{attrs:{label:"线索编号",span:1}},[e._v(e._s(e.dObj.mod.clueCode))]),t("a-descriptions-item",{attrs:{label:"产品名称",span:1}},[e._v(e._s(e.dObj.mod.name))]),t("a-descriptions-item",{attrs:{label:"线索类别",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.clueCategoryID,"d_clueCategory")))]),t("a-descriptions-item",{attrs:{label:"案件类型",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.caseCategoryID,"d_caseCategory")))]),t("a-descriptions-item",{attrs:{label:"线索状态",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.clueStateID,"d_clueState")))]),t("a-descriptions-item",{attrs:{label:"线索来源",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.clueSourceID,"d_clueSource")))]),t("a-descriptions-item",{attrs:{label:"线索等级",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.clueGradeID,"d_clueGrade")))]),t("a-descriptions-item",{attrs:{label:"线索生成时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.createDate)))]),t("a-descriptions-item",{attrs:{label:"线索修改时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.modifyDate)))]),t("a-descriptions-item",{attrs:{label:"网页链接",span:2}},[e._v(e._s(e.dObj.mod.websiteUrl))]),t("a-descriptions-item",{attrs:{label:"区县自侦",span:1}},[e._v(e._s(e.dObj.mod.isCreatedByCounty))]),t("a-descriptions-item",{attrs:{label:"初研结果",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.filterResultID,"d_clueFilterResult")))]),t("a-descriptions-item",{attrs:{label:"案件描述",span:1}},[e._v(e._s(e.dObj.mod.case_description))]),t("a-descriptions-item",{attrs:{label:"受侵害地点",span:1}},[e._v(e._s(e.dObj.mod.case_happened_address))]),t("a-descriptions-item",{attrs:{label:"案发时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.case_happened_date)))]),t("a-descriptions-item",{attrs:{label:"案件发生地",span:1}},[e._v(e._s(e.dObj.mod.case_happened_place))]),t("a-descriptions-item",{attrs:{label:"受害者所在地",span:1}},[e._v(e._s(e.dObj.mod.case_victim_place))]),t("a-descriptions-item",{attrs:{label:"线索流程节点",span:1}},[1==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("新建未下发")]):e._e(),2==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("线索下发待审批")]):e._e(),3==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("下发审批完成")]):e._e(),4==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("反馈状态")]):e._e(),98==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("无效线索结束")]):e._e(),99==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("下发未审批通过结束")]):e._e(),100==e.dObj.mod.clueFlowNodeID?t("a-tag",[e._v("正常结束")]):e._e()],1),t("a-descriptions-item",{attrs:{label:"举报人",span:1}},[e._v(e._s(e.dObj.mod.informer))]),t("a-descriptions-item",{attrs:{label:"举报时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.inform_date)))]),t("a-descriptions-item",{attrs:{label:"举报人联系信息",span:1}},[e._v(e._s(e.dObj.mod.informer_contact))]),t("a-descriptions-item",{attrs:{label:"资金交易方式",span:1}},[e._v(e._s(e._f("DICT")(e.dObj.mod.paymentid,"d_payment")))]),t("a-descriptions-item",{attrs:{label:"嫌疑单位",span:1}},[e._v(e._s(e.dObj.mod.suspect))]),t("a-descriptions-item",{attrs:{label:"移送时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.transfer_date)))]),t("a-descriptions-item",{attrs:{label:"移送单位",span:1}},[e._v(e._s(e.dObj.mod.transfer_unit))]),t("a-descriptions-item",{attrs:{label:"移送单位联系方式",span:1}},[e._v(e._s(e.dObj.mod.transfer_unit_contact))]),t("a-descriptions-item",{attrs:{label:"来自于大数据平台",span:1}},[e._v(e._s(e.dObj.mod.autoGenerated))]),t("a-descriptions-item",{attrs:{label:"车牌号",span:1}},[e._v(e._s(e.dObj.mod.plateNumber))]),t("a-descriptions-item",{attrs:{label:"宣传内容",span:2}},[e._v(e._s(e.dObj.mod.content))]),t("a-descriptions-item",{attrs:{label:"下发单位",span:1}},[e._v(e._s(e._f("DEPTS")(e.dObj.mod.assignDeptID)))]),t("a-descriptions-item",{attrs:{label:"下发时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.assignDate)))]),t("a-descriptions-item",{attrs:{label:"反馈时间",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.respondDate)))]),t("a-descriptions-item",{attrs:{label:"反馈期限",span:1}},[e._v(e._s(e._f("DATE")(e.dObj.mod.respondDueDate)))])],1)],1),e.dObj.mod.contactInfoList?t("a-tab-pane",{key:"2",attrs:{tab:"联系信息"}},[t("a-table",{attrs:{size:"small",bordered:!0,rowKey:t=>e.uuid(),pagination:!1,columns:[{title:"序号",dataIndex:"ix",className:"tc-i",scopedSlots:{customRender:"ix"}},{title:"名字",dataIndex:"name"},{title:"电话",dataIndex:"phone"},{title:"车牌号",dataIndex:"plateNumber"},{title:"QQ",dataIndex:"qq"},{title:"微信",dataIndex:"wechat"}],dataSource:e.dObj.mod.contactInfoList.items},scopedSlots:e._u([{key:"ix",fn:function(a,s,i){return t("span",{},[e._v(e._s(i+1)+" ")])}},{key:"fieldName",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}},{key:"fieldValue",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}}],null,!1,1679044119)})],1):e._e(),e.dObj.mod.debitCardNumberList?t("a-tab-pane",{key:"3",attrs:{tab:"银行卡号"}},[t("a-table",{attrs:{size:"small",bordered:!0,rowKey:t=>e.uuid(),pagination:!1,columns:[{title:"序号",dataIndex:"ix",className:"tc-i",scopedSlots:{customRender:"ix"}},{title:"名称",dataIndex:"fieldName"},{title:"值",dataIndex:"fieldValue"}],dataSource:e.dObj.mod.debitCardNumberList.items},scopedSlots:e._u([{key:"ix",fn:function(a,s,i){return t("span",{},[e._v(e._s(i+1)+" ")])}},{key:"fieldName",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}},{key:"fieldValue",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}}],null,!1,1679044119)})],1):e._e(),e.dObj.mod.expressNumberList?t("a-tab-pane",{key:"4",attrs:{tab:"快递单号信息"}},[t("a-table",{attrs:{size:"small",bordered:!0,rowKey:t=>e.uuid(),pagination:!1,columns:[{title:"序号",dataIndex:"ix",className:"tc-i",scopedSlots:{customRender:"ix"}},{title:"名称",dataIndex:"fieldName"},{title:"值",dataIndex:"fieldValue"}],dataSource:e.dObj.mod.expressNumberList.items},scopedSlots:e._u([{key:"ix",fn:function(a,s,i){return t("span",{},[e._v(e._s(i+1)+" ")])}},{key:"fieldName",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}},{key:"fieldValue",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}}],null,!1,1679044119)})],1):e._e(),e.dObj.mod.customFieldList?t("a-tab-pane",{key:"5",attrs:{tab:"自定义信息"}},[t("a-table",{attrs:{size:"small",bordered:!0,rowKey:t=>e.uuid(),pagination:!1,columns:[{title:"序号",dataIndex:"ix",className:"tc-i",scopedSlots:{customRender:"ix"}},{title:"名称",dataIndex:"fieldName"},{title:"值",dataIndex:"fieldValue"}],dataSource:e.dObj.mod.customFieldList.items},scopedSlots:e._u([{key:"ix",fn:function(a,s,i){return t("span",{},[e._v(e._s(i+1)+" ")])}},{key:"fieldName",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}},{key:"fieldValue",fn:function(a,s,i){return t("span",{},[e._v(e._s(a)+" ")])}}],null,!1,1679044119)})],1):e._e()],1):t("a-empty",{directives:[{name:"show",rawName:"v-show",value:!e.dObj.load,expression:"!dObj.load"}]})],1)])],1)}),[],!1,null,null,null).exports,D=a(26839),y=a(28511),v={data(){return{dQparm:{name:"",TableID:null,TableName:"",startDate:null,endDate:null},DICT_AttachmentList:[]}},props:{loading:{type:Boolean,default:!1}},components:{TableQuery:l.Z},async created(){this.DICT_AttachmentList=[{label:"不限",value:""},...(await(0,D.ig)("DICT_AttachmentList")).map((e=>({label:e.comment,value:e.name})))],this.fnReset()},methods:{fnReset(){this.dQparm={name:"",TableID:null,TableName:"",startDate:null,endDate:null}},fnQuery(){let e={};this.dQparm.name&&this.dQparm.name.length>0&&(e.name=this.dQparm.name.trim()),this.dQparm.TableID&&parseInt(this.dQparm.TableID)>0&&(e.TableID=this.dQparm.TableID),this.dQparm.TableName&&this.dQparm.TableName.length>0&&(e.TableName=this.dQparm.TableName.trim()),this.dQparm.startDate&&r()(this.dQparm.startDate).isValid()&&(e.startDate=this.dQparm.startDate.toJSON()),this.dQparm.endDate&&r()(this.dQparm.endDate).isValid()&&(e.endDate=this.dQparm.endDate.toJSON()),this.$emit("emQuery",e)}}},I=(0,d.Z)(v,(function(){var e=this,t=e._self._c;return t("TableQuery",{attrs:{keyWord:e.dQparm.name,loading:e.loading,btnlg:8},on:{"update:keyWord":function(t){return e.$set(e.dQparm,"name",t)},"update:key-word":function(t){return e.$set(e.dQparm,"name",t)},emReset:e.fnReset,emQuery:e.fnQuery},scopedSlots:e._u([{key:"COND1",fn:function(){return[t("a-form-item",{attrs:{label:"关键字搜索:"}},[t("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{search:e.fnQuery},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1)]},proxy:!0},{key:"COND2",fn:function(){return[t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"搜索内容"}},[t("a-input-search",{attrs:{placeholder:"请输入搜索内容",allowClear:""},on:{search:function(t){return e.fnQuery()}},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"选择状态"}},[t("a-select",{attrs:{placeholder:"选择文件归属",options:e.DICT_AttachmentList,allowClear:""},model:{value:e.dQparm.TableName,callback:function(t){e.$set(e.dQparm,"TableName",t)},expression:"dQparm.TableName"}})],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"归属ID"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入归属ID",allowClear:""},model:{value:e.dQparm.TableID,callback:function(t){e.$set(e.dQparm,"TableID",t)},expression:"dQparm.TableID"}})],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"查询起始时间"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入起始时间","show-time":""},model:{value:e.dQparm.startDate,callback:function(t){e.$set(e.dQparm,"startDate",t)},expression:"dQparm.startDate"}})],1)],1),t("a-col",{attrs:{span:24,lg:8}},[t("a-form-item",{attrs:{label:"查询终止时间"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入终止时间","show-time":""},model:{value:e.dQparm.endDate,callback:function(t){e.$set(e.dQparm,"endDate",t)},expression:"dQparm.endDate"}})],1)],1)]},proxy:!0},{key:"BTNSPUSH",fn:function(){return[t("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){return e.$emit("emAdd",null)}}},[e._v("添加")])]},proxy:!0}])})}),[],!1,null,null,null).exports,g=a(11928),w=a(21438),C={extends:s.en,components:{AttachmentQuery:I,AttachmentEdit:g.Z,FilePreview:w.Z},data(){return{schema:y.Z,dMountedQuery:!1,DICT_AttachmentList:[],dShow:!1,dTitle:"",TableName:null,TableID:null,TableID_Name:null}},async mounted(){this.DICT_AttachmentList=[{label:"未选择",value:""},...(await(0,D.ig)("DICT_AttachmentList")).map((e=>({label:e.comment,value:e.name})))]},methods:{Init(e,t,a){this.TableName=e,this.TableID=t,this.TableID_Name=a,this.dTitle=(this.DICT_AttachmentList.find((t=>t.value==e))||{}).label||"",this.dTitle=this.dTitle+" - "+a,this.dShow=!0,this.TableName&&this.TableName.length>0&&(this.dQparm.TableName=this.TableName),parseInt(this.TableID)>0&&(this.dQparm.TableID=this.TableID),this.fnTb_Query()},fnReset(){this.dTitle="",this.dQparm.TableName=null,this.dQparm.TableID=null,this.dQparm.startDate,this.dQparm.endDate},fnOk(){},fnFilter(e){return(this.DICT_AttachmentList.find((t=>e==t.value))||{label:"其他"}).label},fnRangeChange(e){2==e.length?(this.dQparm.startDate,e[0].toISOString(),this.dQparm.endDate,e[1].toISOString()):(this.dQparm.startDate,this.dQparm.endDate)},async fnRefEdit(e=0){await this.$refs.refAttachmentEdit.Init(e),await this.$refs.refAttachmentEdit.fnSetPro(this.TableName,this.TableID,this.TableID_Name)}}},O=(0,d.Z)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("a-modal",{attrs:{visible:e.dShow,title:e.dTitle+" - 附件管理",width:"980px",bodyStyle:{padding:"10px"},okText:"关闭"},on:{cancel:function(t){e.dShow=!1},ok:function(t){e.dShow=!1}}},[t("template",{slot:"footer"},[t("a-button",{key:"submit",attrs:{type:"primary"},on:{click:function(t){e.dShow=!1}}},[e._v("关闭")])],1),t("a-form",{staticClass:"inline-form",staticStyle:{"margin-bottom":"5px",display:"flex","justify-content":"end"},attrs:{layout:"inline"}},[t("a-form-item",{attrs:{label:"更新时间"}},[t("a-range-picker",{staticStyle:{width:"300px"},attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["开始时间","结束时间"]},on:{change:e.fnRangeChange}})],1),t("a-form-item",{attrs:{label:"关键字搜索"}},[t("a-input-search",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{search:function(t){return e.fnTb_Query()}},model:{value:e.dQparm.name,callback:function(t){e.$set(e.dQparm,"name",t)},expression:"dQparm.name"}})],1),t("a-form-item",{staticStyle:{"margin-right":"5px"}},[t("a-space",[t("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:e.dTb.load},on:{click:function(t){return e.fnTb_Query()}}},[e._v("搜索")]),t("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(t){return e.fnRefEdit(0)}}},[e._v("添加")])],1)],1)],1),t("a-table",{attrs:{columns:e.dTb.colunms.filter((e=>e.show)),rowKey:e=>e.fid,dataSource:e.dTb.rows,pagination:e.dTb.pagination,loading:e.dTb.load,size:"small","row-selection":{selectedRowKeys:e.dTb.rows_chks,onChange:t=>e.dTb.rows_chks=[...t]}},on:{change:e.fnTb_Query},scopedSlots:e._u([{key:"ix",fn:function(a,s,i){return t("span",{},[e._v(e._s((e.dTb.pagination.current-1)*e.dTb.pagination.pageSize+i+1)+" ")])}},{key:"op",fn:function(a,s,i){return[t("a-button",{staticStyle:{color:"#06E464"},attrs:{type:"link",size:"small",icon:"edit"},on:{click:function(t){return e.fnRefEdit(s.fid)}}},[e._v("修改")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{staticStyle:{color:"#F70000"},attrs:{type:"link",size:"small",icon:"delete"},on:{click:function(t){return e.fnTb_Del([s.fid])}}},[e._v("删除")])]}},{key:"tableName",fn:function(a,s,i){return[t("span",[e._v(e._s(e.fnFilter(a)))])]}},{key:"relativePath_suffix",fn:function(a,s,i){return[t("span",[e._v(e._s(s.relativePath.replace(/.+\./,"").toUpperCase()))])]}},{key:"relativePath",fn:function(a,s,i){return[t("a-button",{attrs:{type:"link",size:"small",icon:"eye"},on:{click:function(t){return e.$refs.FilePreview.Init("/g3"+a,null,s.name)}}},[e._v("预览")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small",icon:"download"},on:{click:function(t){return e.$refs.FilePreview.Down("/g3"+a,null,s.name)}}},[e._v("下载")])]}}])})],2),t("AttachmentEdit",{ref:"refAttachmentEdit",on:{emOk:function(t){return e.fnTb_Query()}}}),t("FilePreview",{ref:"FilePreview"})],1)}),[],!1,null,null,null).exports,T={extends:s.en,data(){return{schema:i.Z,dSysDept:[]}},components:{IndexQuery:c,IndexEdit:f,IndexDetail:_,AttachmentPreview:O},provide:function(){return{pGrand:this}},async mounted(){this.dSysDept=await(0,D.pr)(),this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.roles.indexOf("admin")>=0||(this.dQparm.divisionID=this.$store.state.user.division_id)},methods:{}},j=(0,d.Z)(T,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("IndexQuery",{attrs:{loading:e.dTb.load},on:{emQuery:t=>{e.dQparm=t,e.fnTb_Query()},emAdd:function(t){return e.$refs.refIndexEdit.Init(0)}}}),t("a-table",{staticClass:"my-tbale",attrs:{columns:e.dTb.colunms.filter((e=>e.show)),rowKey:e=>e.fid,dataSource:e.dTb.rows,pagination:e.dTb.pagination,loading:e.dTb.load,"row-selection":{selectedRowKeys:e.dTb.rows_chks,onChange:t=>e.dTb.rows_chks=[...t]}},on:{change:e.fnTb_Query},scopedSlots:e._u([{key:"ix",fn:function(a,s,i){return t("span",{},[e._v(e._s((e.dTb.pagination.current-1)*e.dTb.pagination.pageSize+i+1)+" ")])}},{key:"op",fn:function(a,s,i){return[t("a-button",{staticStyle:{color:"#ffc53d"},attrs:{type:"link",size:"small",icon:"file"},on:{click:function(t){return e.$refs.AttachmentPreview.Init("t_clue",s.fid,s.name)}}},[e._v("附件")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{attrs:{type:"link",size:"small",icon:"eye"},on:{click:function(t){return e.$refs.refIndexDetail.Init(s.fid)}}},[e._v("详情")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{staticStyle:{color:"#06E464"},attrs:{type:"link",size:"small",icon:"edit"},on:{click:function(t){return e.$refs.refIndexEdit.Init(s.fid)}}},[e._v("修改")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-button",{staticStyle:{color:"#F70000"},attrs:{type:"link",size:"small",icon:"delete"},on:{click:function(t){return e.fnTb_Del([s.fid])}}},[e._v("删除")])]}},{key:"clueStateID",fn:function(t,a,s){return[e._v(e._s(e._f("DICT")(t,"d_clueState")))]}},{key:"clueSourceID",fn:function(t,a,s){return[e._v(e._s(e._f("DICT")(t,"d_clueSource")))]}},{key:"clueGradeID",fn:function(t,a,s){return[e._v(e._s(e._f("DICT")(t,"d_clueGrade")))]}},{key:"clueCategoryID",fn:function(t,a,s){return[e._v(e._s(e._f("DICT")(t,"d_clueCategory")))]}},{key:"caseCategoryID",fn:function(t,a,s){return[e._v(e._s(e._f("DICT")(t,"d_caseCategory")))]}},{key:"divisionID",fn:function(t,a,s){return[e._v(e._s(e._f("AREA")(t)))]}},{key:"filterResultID",fn:function(t,a,s){return[e._v(e._s(e._f("DICT")(t,"d_clueFilterResult")))]}},{key:"assignDate",fn:function(t,a,s){return[e._v(e._s(e._f("DATE")(t)))]}},{key:"respondDate",fn:function(t,a,s){return[e._v(e._s(e._f("DATE")(t)))]}},{key:"respondDueDate",fn:function(t,a,s){return[e._v(e._s(e._f("DATE")(t)))]}},{key:"createDate",fn:function(t,a,s){return[e._v(e._s(e._f("DATE")(t)))]}},{key:"modifyDate",fn:function(t,a,s){return[e._v(e._s(e._f("DATE")(t)))]}}])}),t("IndexEdit",{ref:"refIndexEdit",on:{emOk:function(t){return e.fnTb_Query()}}}),t("IndexDetail",{ref:"refIndexDetail"}),t("AttachmentPreview",{ref:"AttachmentPreview"})],1)}),[],!1,null,null,null).exports},2670:function(e,t,a){a.d(t,{AS:function(){return r},en:function(){return l},v6:function(){return n}});var s=a(55743),i=a.n(s);const l={data(){return{dQparm:{},dTb:{rows:[],colunms:[],rows_chks:[],load:!1,pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`共${e}条数据 当前从${t[0]}~${t[1]}条`},size:"defalut"}}},mounted(){this.dTb.colunms=this.schema.ListCols,this.fnTb_Query()},methods:{async fnTb_Query(e,t,a){this.dTb.pagination.current=e&&e.current||1,this.dTb.pagination.pageSize=e&&e.pageSize||10,this.dQparm.pageIndex=this.dTb.pagination.current,this.dQparm.pageSize=this.dTb.pagination.pageSize,this.dTb.load=!0;let s=await this.$api2(this.schema.Url.GetCount,this.dQparm);if(s.isOk){let e=parseInt(s.data);if(e>0){this.dTb.pagination.total=e;let t=await this.$api2(this.schema.Url.GetList,this.dQparm);t.isOk?this.dTb.rows=this.schema.ListFilter&&await this.schema.ListFilter(t.data)||t.data:this.$message.error(t&&t.message||this.schema.Desc+"数据列表查询失败")}else this.dTb.rows=[]}else this.$message.error(s&&s.message||this.schema.Desc+"数据分页统计失败");this.dTb.load=!1},async fnTb_Del(e){if(!e||e.length<=0)return this.$message.error("请选择要删除的"+this.schema.Desc+"数据");let t=this;this.$confirm({title:"操作确认",content:"确认删除当前选中的"+e.length+"条记录",onOk(){t.$api2(t.schema.Url.Delete,e).then((e=>{e&&e.isOk?(t.$message.success(t.schema.Desc+"数据已成功删除"),t.fnTb_Query()):t.$message.error(e&&e.message||"数据删除失败")}))}})}},filters:{time(e,t="YYYY-MM-DD HH:mm:ss"){let a=i()(e);return a.isValid()?a.format(t):null}}},n={data(){return{dObj:{show:!1,load:!1,mod:null,title:""}}},mounted(){this.dObj.title=this.schema&&this.schema.Desc||""},methods:{async Init(e,t="fid"){if(!(e&&e>0))return;this.dObj.mod=null,this.dObj.show=!0,this.dObj.load=!0;let a="fid"==t?{fid:e}:{id:e},s=await this.$api2(this.schema.Url.Get,null,a);this.dObj.load=!1,s&&s.isOk&&null!=s.data?this.dObj.mod=this.schema.DetailFilter&&await this.schema.DetailFilter(s.data)||s.data:this.$message.error(s&&s.message||this.schema.Desc+"可预览信息查询失败")}}},r={data(){return{dObj:{show:!1,load:!1,mod:null,title:"",rules:null}}},mounted(){this.dObj.title=this.schema.Desc||"",this.dObj.rules=this.schema.EditRules||null},methods:{async Init(e,t="fid"){if(parseInt(e)>=0){if(this.dObj.mod=null,this.dObj.show=!0,0==e)this.dObj.mod=this.schema.EditFilter&&await this.schema.EditFilter(null);else{this.dObj.load=!0;let a="fid"==t?{fid:e}:{id:e},s=await this.$api2(this.schema.Url.Get,null,a);s&&s.isOk&&null!=s.data?this.dObj.mod=this.schema.EditFilter&&await this.schema.EditFilter(s.data)||s.data:this.$message.error(s&&s.message||this.schema.Desc+"可编辑信息查询失败"),this.dObj.load=!1}this.$refs.editref&&this.$refs.editref.resetFields&&this.$refs.editref.resetFields()}},async Save(){this.$refs.editref.validate((async e=>{if(!e)return this.$message.error("输入数据校验失败，请重新输入"),!1;{this.dObj.load=!0;let e=this.schema.SaveFilter&&this.schema.SaveFilter(this.dObj.mod)||this.dObj.mod,t=await this.$api2(this.schema.Url.Save,e);this.dObj.load=!1,t&&t.isOk?parseInt(t.data)>0?(this.$message.success(this.schema.Desc+"数据保存成功"),this.schema.SaveFilterEnd&&(this.dObj.mod.fid=t.data,this.schema.SaveFilterEnd(this.dObj.mod)),this.dObj.show=!1,this.$emit("emOk",!0)):this.$message.error("数据保存失败"):this.$message.error(t&&t.message||this.schema.Desc+"数据保存失败")}}))},async Cancel(){this.dObj.show=!1,this.dObj.mod=null}}}},11159:function(e,t,a){var s=a(55743),i=a.n(s),l=a(48368),n=a(26839),r=a(51223);let o={Desc:"线索",Table:"t_clue",TableType:"Clue"};o.Url={Save:`/api/${o.TableType}/Save_${o.Table}`,GetCount:`/api/${o.TableType}/GetCount_${o.Table}`,GetList:`/api/${o.TableType}/GetList_${o.Table}`,Get:`/api/${o.TableType}/Get_${o.Table}`,Delete:`/api/${o.TableType}/Delete_${o.Table}`},o.ListCols=[{title:"行政区划",dataIndex:"divisionID",show:!0,scopedSlots:{customRender:"divisionID"}},{title:"线索编号",dataIndex:"clueCode",show:!0},{title:"督办类别",dataIndex:"caseCategoryID",show:!0,scopedSlots:{customRender:"caseCategoryID"}},{title:"线索等级",dataIndex:"clueGradeID",show:!0,scopedSlots:{customRender:"clueGradeID"}},{title:"线索来源",dataIndex:"clueSourceID",show:!0,scopedSlots:{customRender:"clueSourceID"}},{title:"产品名称",dataIndex:"name",show:!0},{title:"宣传内容",dataIndex:"content",show:!1},{title:"车牌号",dataIndex:"plateNumber",show:!1},{title:"反馈时间",dataIndex:"respondDate",show:!1,scopedSlots:{customRender:"respondDate"}},{title:"反馈期限",dataIndex:"respondDueDate",show:!1,scopedSlots:{customRender:"respondDueDate"}},{title:"网页链接",dataIndex:"websiteUrl",show:!1},{title:"修改时间",dataIndex:"modifyDate",show:!1,scopedSlots:{customRender:"modifyDate"}},{title:"区县自侦",dataIndex:"isCreatedByCounty",show:!1},{title:"初研结果",dataIndex:"filterResultID",show:!0,scopedSlots:{customRender:"filterResultID"}},{title:"生成时间",dataIndex:"createDate",show:!1,scopedSlots:{customRender:"createDate"}},{title:"线索状态",dataIndex:"clueStateID",show:!0,scopedSlots:{customRender:"clueStateID"}},{title:"线索类别",dataIndex:"clueCategoryID",show:!0,scopedSlots:{customRender:"clueCategoryID"}},{title:"来自于大数据平台",dataIndex:"autoGenerated",show:!1},{title:"下发单位",dataIndex:"assignDeptID",show:!1,scopedSlots:{customRender:"assignDeptID"}},{title:"下发时间",dataIndex:"assignDate",show:!0,scopedSlots:{customRender:"assignDate"}},{title:"操作",dataIndex:"op",show:!0,scopedSlots:{customRender:"op"},fixed:"right",width:380,className:"text-tc"}],o.ListFilter=async e=>{let t=await(0,n.pr)(),a=[...e];return a.map((e=>{e.isCreatedByCounty=null==e.isCreatedByCounty?null:Boolean(e.isCreatedByCounty)?"是":"否",e.autoGenerated=null==e.autoGenerated?null:Boolean(e.autoGenerated)?"是":"否",e.assignDeptID=(0,r.cf)(t,"id",e.assignDeptID,"name")})),a},o.DetailFilter=async e=>{e.isCreatedByCounty=null==e.isCreatedByCounty?null:Boolean(e.isCreatedByCounty)?"是":"否",e.autoGenerated=null==e.autoGenerated?null:Boolean(e.autoGenerated)?"是":"否",e._Attachment_Img=[],e._Attachment_File=[];let t=await(0,l.Z)("/api/Common/GetAttachmentList",{TableName:"t_clue",TableID:e.fid,pageIndex:0,pageSize:100});return t&&t.isOk&&(e._Attachment_Img=t.data.filter((e=>"Img"==e.type)).map((e=>({name:e.name,url:e.relativePath}))),e._Attachment_File=t.data.filter((e=>"File"==e.type)).map((e=>({name:e.name,url:e.relativePath})))),Object.assign({},e)},o.EditRules={name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],divisionID:[{required:!0,trigger:"change",type:"object",validator:async(e,t)=>parseInt(t)>0?Promise.resolve():Promise.reject("请选择行政区划")}]},o.EditFilter=async e=>{let t={fid:0,contactInfoList:{items:[]},customFieldList:{items:[]},debitCardNumberList:{items:[]},expressNumberList:{items:[]},createDate:i()().toString()};if(null!=e){null==e.divisionID&&(e.divisionID=void 0),null==e.filterResultID&&(e.filterResultID=void 0),null==e.caseCategoryID&&(e.caseCategoryID=void 0),null==e.clueCategoryID&&(e.clueCategoryID=void 0),null==e.clueGradeID&&(e.clueGradeID=void 0),null==e.clueSourceID&&(e.clueSourceID=void 0),null==e.clueStateID&&(e.clueStateID=void 0),null==e.contactInfoList?e.contactInfoList={items:[]}:e.contactInfoList.items=e.contactInfoList.items.filter((e=>(e.name+e.phone+e.wechat+e.qq+e.plateNumber).length>0)),null==e.customFieldList?e.customFieldList={items:[]}:e.customFieldList.items=e.customFieldList.items.filter((e=>(e.fieldName+e.fieldValue).length>0)),null==e.debitCardNumberList?e.debitCardNumberList={items:[]}:e.debitCardNumberList.items=e.debitCardNumberList.items.filter((e=>(e.fieldName+e.fieldValue).length>0)),null==e.expressNumberList?e.expressNumberList={items:[]}:e.expressNumberList.items=e.expressNumberList.items.filter((e=>(e.fieldName+e.fieldValue).length>0)),e._Attachment_Img=[],e._Attachment_File=[];let t=await(0,l.Z)("/api/Common/GetAttachmentList",{TableName:"t_clue",TableID:e.fid,pageIndex:0,pageSize:100});t&&t.isOk&&(e._Attachment_Img=t.data.filter((e=>"Img"==e.type)).map((e=>({name:e.name,url:e.relativePath}))),e._Attachment_File=t.data.filter((e=>"File"==e.type)).map((e=>({name:e.name,url:e.relativePath}))))}return Object.assign(t,e)},o.SaveFilter=e=>{let t=Object.assign({},e);return delete t._Attachment_Img,delete t._Attachment_File,t.isCreatedByCounty=null,t.modifyDate=i()().toJSON(),null!=t.assignDate&&(t.assignDate=i()(t.assignDate).toJSON()),null!=t.respondDate&&(t.respondDate=i()(t.respondDate).toJSON()),null!=t.respondDueDate&&(t.respondDueDate=i()(t.respondDueDate).toJSON()),t},o.SaveFilterEnd=async e=>{await(0,l.Z)("/api/Common/SaveAttachments",[{tableName:"t_clue",type:"Img",tableID:e.fid,relativePaths:e._Attachment_Img.map((e=>e.url))},{tableName:"t_clue",type:"File",tableID:e.fid,relativePaths:e._Attachment_File.map((e=>e.url))}])},t.Z=o}}]);