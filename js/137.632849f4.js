"use strict";(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[137],{71742:function(e,t,s){s.d(t,{Z:function(){return r}});var o=s(13054),a=s(45871),i={name:"NingDeMap3d",mixins:[],props:{},components:{},data(){return{areaCode:0,modalType:"normal"}},watch:{},methods:{closeModal(){a.Z.setAreaCode(0)}},beforeCreate(){},created(){},beforeMount(){},mounted(){o.Z.setContainer(this.$refs.container)},beforeUpdate(){},updated(){},beforeDestory(){},destroyed(){},computed:{}},r=(0,s(1001).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"NingDeMap3d"},[t("div",{ref:"container",staticClass:"container"}),t("div",{directives:[{name:"show",rawName:"v-show",value:"normal"===e.modalType&&e.areaCode>0,expression:"modalType === 'normal' && areaCode > 0"}],ref:"normalModal",staticClass:"modal"},[t("div",{staticClass:"modal_container"},[t("button",{on:{click:e.closeModal}},[e._v("关闭")]),e._v(" "+e._s(e.areaCode)+" 案件数弹窗 ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"alarm"===e.modalType&&e.areaCode>0,expression:"modalType === 'alarm' && areaCode > 0"}],ref:"alarmModal",staticClass:"modal"},[t("div",{staticClass:"modal_container"},[t("button",{on:{click:e.closeModal}},[e._v("关闭")]),e._v(" "+e._s(e.areaCode)+" 警告弹窗 ")])])])}),[],!1,null,"1cf4fdd7",null).exports},35137:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});s(57658);var o=s(94115),a={data(){return{dModifyPwdForm:{show:!1,oldPwd:"",newPwd:"",newRPwd:"",disabled:!1,load:!1},dModifyPwdForm_Rules:{oldPwd:[{required:!0,message:"请输入旧的登录密码"}],newPwd:[{required:!0,message:"请输入新的登录密码"}],newRPwd:[{required:!0,message:"请再次输入新的登录密码"}]}}},created(){},methods:{Init(){this.dModifyPwdForm.show=!0},fnEncrypt(e){return new o.Z(128,1e3).encrypt("c49b777888ee6ff1fae48e1ea1ecf797","57ec537722a8a351b8c4f7d239ac9d52","1234123412ABCDEF#key",e)},fnVali(e){this.dModifyPwdForm.disabled=!(this.dModifyPwdForm.oldPwd&&this.dModifyPwdForm.oldPwd.length>0&&this.dModifyPwdForm.newPwd&&this.dModifyPwdForm.newPwd.length>0&&this.dModifyPwdForm.newRPwd&&this.dModifyPwdForm.newRPwd.length>0)},async fnUpdpwd(){this.dModifyPwdForm.newPwd==this.dModifyPwdForm.newRPwd?this.$refs.dModifyPwdForm_Dom.validate((async e=>{if(!e)return;let t={id:this.$store.state.user.userID,newPassword:this.fnEncrypt(this.dModifyPwdForm.newPwd),oldPassword:this.fnEncrypt(this.dModifyPwdForm.oldPwd)},s=await this.$api2("/api/BaseRFAdmin/ChangePassword",t);s&&s.isOk?(this.$message.success("密码修改成功"),this.dModifyPwdForm.show=!1):this.$message.error(s&&s.message||"密码修改失败")})):this.$message.error({content:"两次密码输入不一致"})}}},i=s(1001),r=(0,i.Z)(a,(function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{visible:e.dModifyPwdForm.show,title:"修改密码",width:"480px"},on:{ok:e.fnUpdpwd,cancel:function(t){e.dModifyPwdForm.show=!1}}},[t("a-form-model",{ref:"dModifyPwdForm_Dom",staticClass:"box-form-mod",attrs:{model:e.dModifyPwdForm,rules:e.dModifyPwdForm_Rules},on:{validate:e.fnVali}},[t("a-form-model-item",{ref:"oldPwd",staticClass:"box-form-mod-item",attrs:{"has-feedback":"",prop:"oldPwd"}},[t("a-input-password",{attrs:{size:"large",placeholder:"请输入旧密码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("a-icon",{attrs:{type:"unlock",theme:"filled"}})]},proxy:!0}]),model:{value:e.dModifyPwdForm.oldPwd,callback:function(t){e.$set(e.dModifyPwdForm,"oldPwd",t)},expression:"dModifyPwdForm.oldPwd"}})],1),t("a-form-model-item",{ref:"newPwd",attrs:{prop:"newPwd"}},[t("a-input-password",{attrs:{size:"large",placeholder:"请输入新密码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("a-icon",{attrs:{type:"lock"}})]},proxy:!0}]),model:{value:e.dModifyPwdForm.newPwd,callback:function(t){e.$set(e.dModifyPwdForm,"newPwd",t)},expression:"dModifyPwdForm.newPwd"}})],1),t("a-form-model-item",{ref:"newRPwd",attrs:{prop:"newRPwd"}},[t("a-input-password",{attrs:{size:"large",placeholder:"请再次输入新密码"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("a-icon",{attrs:{type:"lock"}})]},proxy:!0}]),model:{value:e.dModifyPwdForm.newRPwd,callback:function(t){e.$set(e.dModifyPwdForm,"newRPwd",t)},expression:"dModifyPwdForm.newRPwd"}})],1)],1)],1)}),[],!1,null,null,null).exports;const n=()=>{sessionStorage.setItem("closeWarning",1)};var d={components:{ChangePwd:r},computed:{path:function(){return this.$route.path.toLowerCase().replace("/board","")},isUserDeep:function(){return parseInt(this.$store.state.user.division_deep||0)}},mounted(){let e=this;e.nkey=`open${Date.now()}`,sessionStorage.getItem("closeWarning")||setTimeout((()=>{e.fnSamNot()}),5e3)},methods:{fnExit(){sessionStorage.clear("closeWarning"),this.$store.commit("SET_USER",{IsLogin:!1,roles:["user"]}),this.$router.push("/login")},async fnSamNot(){let e=this.$store.state.user;if(!e||!e.IsLogin)return;if(2==this.isUserDeep)return;let t=await this.$api2("/api/Clue/GetCount_t_sample",{divisionID:e.division_id,clueStateID:1,quickCheckResultID:2}),s=0;if(t&&t.isOk&&t.data&&(s=parseInt(t.data)||0),s>0){let e=this.nkey;this.$notification.warning({key:e,message:"样品检验通知",description:`您有${s}件阳性样品未处理，请尽快办理立案工作。`,btn:t=>t("a-button",{props:{type:"link",size:"small"},on:{click:()=>{sessionStorage.setItem("closeWarning",1),this.$router.push("/board/clue"),this.$notification.close(e)}}},"去处理"),style:{marginTop:"50px"},onClose:n})}let o=this;sessionStorage.getItem("closeWarning")||setTimeout((()=>{o.fnSamNot()}),1e4)}}},c=(0,i.Z)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ltop"},[t("div",{staticClass:"tis flexcc l",class:"/index1"==e.path||"/index2"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/index1")}}},[e._v("首页")]),t("div",{staticClass:"tis flexcc l",class:"/clue"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/clue")}}},[e._v("线索")]),t("div",{staticClass:"tit flexcc"},[e._v(e._s(e.$store.state.title))]),2==e.isUserDeep?[t("a-dropdown",[t("div",{staticClass:"tis flexcc r",class:"/check"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/check")}}},[e._v("检验鉴定")]),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{key:"0"},[t("div",{staticClass:"tis flexcc r",class:"/check"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/check")}}},[e._v("检验鉴定")])]),t("a-menu-item",{key:"1"},[t("div",{staticClass:"tis flexcc r",class:"/check"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/check?type=sys")}}},[e._v("实验室")])])],1)],1)]:[t("div",{staticClass:"tis flexcc r",class:"/check"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/check")}}},[e._v("检验鉴定")])],t("div",{staticClass:"tis flexcc r",class:"/analy"==e.path?"active":"",on:{click:function(t){return e.$router.push("/board/analy")}}},[e._v("研判分析")]),t("div",{staticClass:"rmenu flexcc"},[t("a-button",{attrs:{type:"link",ghost:"",size:"small",icon:"setting"},on:{click:function(t){return e.$router.push("/")}}},[e._v(" 设置")]),t("a-dropdown",[t("div",{staticClass:"flexcc"},[t("a-button",{attrs:{type:"link",ghost:"",size:"small",icon:"user"}},[e._v(" "+e._s(e.$store.state.user.userDisplayName))]),t("a-icon",{staticClass:"ico",attrs:{type:"caret-down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("a-icon",{attrs:{type:"user"}}),t("span",[e._v("个人中心")])],1),t("a-menu-item",{on:{click:function(t){return e.$refs.ChangePwd.Init()}}},[t("a-icon",{attrs:{type:"file-protect"}}),t("span",[e._v("修改密码")])],1),t("a-menu-divider"),t("a-menu-item",{on:{click:e.fnExit}},[t("a-icon",{attrs:{type:"poweroff"}}),t("span",[e._v("退出登录")])],1)],1)],1)],1),t("ChangePwd",{ref:"ChangePwd"})],2)}),[],!1,null,"51e8792f",null).exports,l={components:{Top:c,NingDeMap3d:s(71742).Z}},u={components:{Top:c,MapView:(0,i.Z)(l,(function(){var e=this._self._c;return e("div",{staticClass:"main flexcc"},[e("NingDeMap3d")],1)}),[],!1,null,"62ecf8f0",null).exports}},f=(0,i.Z)(u,(function(){var e=this._self._c;return e("div",{staticClass:"LBMain"},[e("MapView"),e("Top"),e("router-view"),this._m(0)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"footer"},[e("a",{attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[this._v("闽ICP备2022001906号")])])}],!1,null,"4016843a",null).exports},94115:function(e,t,s){const o=s(48082);var a=function(e,t){this.keySize=e/32,this.iterationCount=t};a.prototype.generateKey=function(e,t){return o.PBKDF2(t,o.enc.Hex.parse(e),{keySize:this.keySize,iterations:this.iterationCount})},a.prototype.encrypt=function(e,t,s,a){var i=this.generateKey(e,s);return o.AES.encrypt(a,i,{iv:o.enc.Hex.parse(t)}).ciphertext.toString(o.enc.Base64)},a.prototype.decrypt=function(e,t,s,a){var i=this.generateKey(e,s),r=o.lib.CipherParams.create({ciphertext:o.enc.Base64.parse(a)});return o.AES.decrypt(r,i,{iv:o.enc.Hex.parse(t)}).toString(o.enc.Utf8)},t.Z=a}}]);