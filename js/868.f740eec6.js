"use strict";(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[868],{42722:function(t,e,a){a.d(e,{Z:function(){return i}});var s={data(){return{dnofold:!1,dunflod:!1,newkeyWord:this.keyWord}},props:{keyWord:String||"",loading:Boolean||!1,nofold:Boolean||!1,unflod:Boolean||!1,btnlg:Number||8},emits:["emReset","emQuery","update:keyWord"],created(){this.dnofold=Boolean(this.nofold),this.dunflod=Boolean(this.unflod)},methods:{fnTest(){}}},i=(0,a(1001).Z)(s,(function(){var t=this,e=t._self._c;return e("div",[e("a-form",{directives:[{name:"show",rawName:"v-show",value:!t.dunflod,expression:"!dunflod"}],staticClass:"inline-form",staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"end"},attrs:{layout:"inline"}},[t._t("COND1",(function(){return[e("a-form-item",{attrs:{label:"关键字搜索"}},[e("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入搜索关键字",allowClear:""},on:{change:function(e){return t.$emit("update:keyWord",t.newkeyWord)},search:function(e){return t.$emit("emQuery",null)}},model:{value:t.newkeyWord,callback:function(e){t.newkeyWord=e},expression:"newkeyWord"}})],1)]})),e("a-form-item",{staticStyle:{"margin-right":"0"}},[e("a-space",[t._t("BTNS",(function(){return[e("a-button",{staticClass:"cant-btn-default",attrs:{type:"default",loading:t.loading},on:{click:function(e){return t.$emit("emReset",null)}}},[t._v("重置")]),e("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("emQuery",null)}}},[t._v("搜索")]),t.dnofold?t._e():[e("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.dunflod,expression:"!dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("高级"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-down"}})],1),e("a-button",{directives:[{name:"show",rawName:"v-show",value:t.dunflod,expression:"dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("收起"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-up"}})],1)],t._t("BTNSPUSH")]}))],2)],1)],2),e("a-form",{directives:[{name:"show",rawName:"v-show",value:!t.dnofold&&t.dunflod,expression:"!dnofold && dunflod"}],staticClass:"inline-form",staticStyle:{"margin-bottom":"-10px"},attrs:{layout:"horizontal",labelCol:{style:{width:"100px"}}}},[e("a-row",{attrs:{gutter:[30,0]}},[t._t("COND2"),e("a-col",{attrs:{span:24,lg:t.btnlg}},[e("a-form-item",{staticClass:"fr"},[e("a-space",[t._t("BTNS",(function(){return[e("a-button",{staticClass:"cant-btn-default",attrs:{type:"default",loading:t.loading},on:{click:function(e){return t.$emit("emReset",null)}}},[t._v("重置")]),e("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("emQuery",null)}}},[t._v("搜索")]),t.dnofold?t._e():[e("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.dunflod,expression:"!dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("高级"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-down"}})],1),e("a-button",{directives:[{name:"show",rawName:"v-show",value:t.dunflod,expression:"dunflod"}],staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){t.dunflod=!t.dunflod}}},[t._v("收起"),e("a-icon",{staticClass:"icolorfff",attrs:{type:"caret-up"}})],1)],t._t("BTNSPUSH")]}))],2)],1)],1)],2)],1)],1)}),[],!1,null,null,null).exports},23868:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=a(2670),i=a(55743),n=a.n(i);let r={Desc:"角色",Url:{Save:"/api/BaseRFAdmin/Save_sys_role",GetCount:"/api/BaseRFAdmin/GetCount_sys_role",GetList:"/api/BaseRFAdmin/GetList_sys_role",Get:"/api/BaseRFAdmin/Get_sys_role",Delete:"/api/BaseRFAdmin/Delete_sys_role"},ListCols:[{title:"序号",dataIndex:"ix",show:!0,scopedSlots:{customRender:"ix"},width:80,className:"text-tc"},{title:"角色名称",dataIndex:"name",show:!0},{title:"角色标识",dataIndex:"role_code",show:!0},{title:"角色描述",dataIndex:"role_desc",show:!0,width:"16%",ellipsis:!0},{title:"创建时间",dataIndex:"create_time",show:!0},{title:"更新时间",dataIndex:"update_time",show:!1},{title:"操作",dataIndex:"op",show:!0,scopedSlots:{customRender:"op"},fixed:"right",width:300,className:"text-tc"}],ListFilter:t=>{let e=[...t];return e.map((t=>{t.create_time=n()(t.create_time).isValid()?n()(t.create_time).format("YYYY-MM-DD HH:mm:ss"):null,t.update_time=n()(t.update_time).isValid()?n()(t.update_time).format("YYYY-MM-DD HH:mm:ss"):null})),e},DetailFilter:t=>(t.create_time=n()(t.create_time).isValid()?n()(t.create_time).format("YYYY-MM-DD HH:mm:ss"):null,t.update_time=n()(t.update_time).isValid()?n()(t.update_time).format("YYYY-MM-DD HH:mm:ss"):null,t),EditRules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],role_code:[{required:!0,message:"请输入角色标识",trigger:"blur"}],role_desc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},EditFilter:t=>Object.assign({id:0},t),SaveFilter:t=>t};var l=r,d=a(42722),o={data(){return{dQparm:{name:"",stateID:-1,startDate:null,endDate:null}}},props:{loading:{type:Boolean,default:!1}},components:{TableQuery:d.Z},async created(){this.fnReset()},methods:{fnReset(){this.dQparm={name:"",startDate:null,endDate:null,stateID:-1}},fnQuery(){let t={};this.dQparm.name&&this.dQparm.name.length>0&&(t.name=this.dQparm.name.trim()),this.dQparm.startDate&&n()(this.dQparm.startDate).isValid()&&(t.startDate=this.dQparm.startDate.toJSON()),this.dQparm.endDate&&n()(this.dQparm.endDate).isValid()&&(t.endDate=this.dQparm.endDate.toJSON()),this.$emit("emQuery",t)}}},c=a(1001),m=(0,c.Z)(o,(function(){var t=this,e=t._self._c;return e("TableQuery",{attrs:{keyWord:t.dQparm.name,loading:t.loading,btnlg:24},on:{"update:keyWord":function(e){return t.$set(t.dQparm,"name",e)},"update:key-word":function(e){return t.$set(t.dQparm,"name",e)},emReset:t.fnReset,emQuery:t.fnQuery},scopedSlots:t._u([{key:"COND2",fn:function(){return[e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"搜索内容"}},[e("a-input-search",{attrs:{placeholder:"请输入搜索内容",allowClear:""},on:{search:function(e){return t.fnQuery()}},model:{value:t.dQparm.name,callback:function(e){t.$set(t.dQparm,"name",e)},expression:"dQparm.name"}})],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"查询起始时间"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入起始时间","show-time":""},model:{value:t.dQparm.startDate,callback:function(e){t.$set(t.dQparm,"startDate",e)},expression:"dQparm.startDate"}})],1)],1),e("a-col",{attrs:{span:24,lg:8}},[e("a-form-item",{attrs:{label:"查询终止时间"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入终止时间","show-time":""},model:{value:t.dQparm.endDate,callback:function(e){t.$set(t.dQparm,"endDate",e)},expression:"dQparm.endDate"}})],1)],1)]},proxy:!0},{key:"BTNSPUSH",fn:function(){return[e("a-button",{staticClass:"cant-btn-default",attrs:{type:"primary"},on:{click:function(e){return t.$emit("emAdd",null)}}},[t._v("添加")])]},proxy:!0}])})}),[],!1,null,null,null).exports,u={extends:s.AS,inject:["pGrand"],data(){return{schema:l}}},h=(0,c.Z)(u,(function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{visible:t.dObj.show,title:(t.dObj.mod&&t.dObj.mod.id>0?"编辑":"新增")+t.dObj.title,width:860,maskClosable:!1},on:{ok:function(e){return t.Save()},cancel:function(e){return t.Cancel()}}},[e("a-spin",{attrs:{spinning:t.dObj.load,tip:t.dObj.title+"可编辑数据加载中..."}},[e("div",{style:t.dObj.load?"min-height:280px":""},[null!=t.dObj.mod?e("a-form-model",{ref:"editref",staticClass:"inline-form",attrs:{model:t.dObj.mod,rules:t.dObj.rules,labelCol:{style:{width:"120px"}},layout:"horizontal",labelAlign:"left"}},[e("input",{attrs:{type:"hidden"},domProps:{value:t.dObj.mod.fid}}),e("a-row",[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"角色名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入角色名称",allowClear:""},model:{value:t.dObj.mod.name,callback:function(e){t.$set(t.dObj.mod,"name",e)},expression:"dObj.mod.name"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"角色标识",prop:"role_code"}},[e("a-input",{attrs:{placeholder:"请输入角色标识",allowClear:""},model:{value:t.dObj.mod.role_code,callback:function(e){t.$set(t.dObj.mod,"role_code",e)},expression:"dObj.mod.role_code"}})],1)],1),e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"角色描述",prop:"role_desc"}},[e("a-textarea",{attrs:{placeholder:"请输入角色描述",allowClear:""},model:{value:t.dObj.mod.role_desc,callback:function(e){t.$set(t.dObj.mod,"role_desc",e)},expression:"dObj.mod.role_desc"}})],1)],1)],1)],1):e("a-empty",{directives:[{name:"show",rawName:"v-show",value:!t.dObj.load,expression:"!dObj.load"}]})],1)])],1)}),[],!1,null,null,null).exports,p={extends:s.v6,inject:["pGrand"],data(){return{schema:l}}},f=(0,c.Z)(p,(function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{visible:t.dObj.show,title:t.dObj.title+"详情",maskClosable:!1,width:860},on:{cancel:function(e){t.dObj.show=!1},ok:function(e){t.dObj.show=!1}}},[e("a-spin",{attrs:{spinning:t.dObj.load,tip:t.dObj.title+"详情数据加载中..."}},[e("div",{style:t.dObj.load?"min-height:280px":""},[t.dObj.mod?[e("a-descriptions",{attrs:{column:2,contentStyle:{opacity:.75},bordered:""}},[e("a-descriptions-item",{attrs:{label:"角色名称",span:1}},[t._v(t._s(t.dObj.mod.name))]),e("a-descriptions-item",{attrs:{label:"角色标识",span:1}},[t._v(t._s(t.dObj.mod.role_code))]),e("a-descriptions-item",{attrs:{label:"创建人",span:1}},[t._v(t._s(t.dObj.mod.create_by))]),e("a-descriptions-item",{attrs:{label:"创建时间",span:1}},[t._v(t._s(t.dObj.mod.create_time))]),e("a-descriptions-item",{attrs:{label:"更新人",span:1}},[t._v(t._s(t.dObj.mod.update_by))]),e("a-descriptions-item",{attrs:{label:"更新时间",span:1}},[t._v(t._s(t.dObj.mod.update_time))]),e("a-descriptions-item",{attrs:{label:"角色描述",span:2}},[t._v(t._s(t.dObj.mod.role_desc))])],1)]:e("a-empty",{directives:[{name:"show",rawName:"v-show",value:!t.dObj.load,expression:"!dObj.load"}]})],2)])],1)}),[],!1,null,null,null).exports,b=(a(26839),{extends:s.en,data(){return{schema:l,dSysDept:[]}},components:{IndexQuery:m,IndexEdit:h,IndexDetail:f},provide:function(){return{pGrand:this}},mounted(){},methods:{}}),y=(0,c.Z)(b,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("IndexQuery",{attrs:{loading:t.dTb.load},on:{emQuery:e=>{t.dQparm=e,t.fnTb_Query()},emAdd:function(e){return t.$refs.refIndexEdit.Init(0)}}}),e("a-table",{attrs:{columns:t.dTb.colunms.filter((t=>t.show)),rowKey:t=>t.id,dataSource:t.dTb.rows,pagination:t.dTb.pagination,loading:t.dTb.load,"row-selection":{selectedRowKeys:t.dTb.rows_chks,onChange:e=>t.dTb.rows_chks=[...e]}},on:{change:t.fnTb_Query},scopedSlots:t._u([{key:"ix",fn:function(a,s,i){return e("span",{},[t._v(t._s((t.dTb.pagination.current-1)*t.dTb.pagination.pageSize+i+1)+" ")])}},{key:"IndexType",fn:function(a,s,i){return e("span",{},[t._v(t._s(a.name))])}},{key:"op",fn:function(a,s,i){return[e("a-button",{attrs:{type:"link",size:"small",icon:"eye"},on:{click:function(e){return t.$refs.refIndexDetail.Init(s.id,"id")}}},[t._v("查看")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{type:"link",size:"small",icon:"edit"},on:{click:function(e){return t.$refs.refIndexEdit.Init(s.id,"id")}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{type:"link",size:"small",icon:"delete"},on:{click:function(e){return t.fnTb_Del([s.id])}}},[t._v("删除")])]}}])}),e("IndexEdit",{ref:"refIndexEdit",on:{emOk:function(e){return t.fnTb_Query()}}}),e("IndexDetail",{ref:"refIndexDetail"})],1)}),[],!1,null,null,null).exports},2670:function(t,e,a){a.d(e,{AS:function(){return l},en:function(){return n},v6:function(){return r}});var s=a(55743),i=a.n(s);const n={data(){return{dQparm:{},dTb:{rows:[],colunms:[],rows_chks:[],load:!1,pagination:{current:1,total:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,e)=>`共${t}条数据 当前从${e[0]}~${e[1]}条`},size:"defalut"}}},mounted(){this.dTb.colunms=this.schema.ListCols,this.fnTb_Query()},methods:{async fnTb_Query(t,e,a){this.dTb.pagination.current=t&&t.current||1,this.dTb.pagination.pageSize=t&&t.pageSize||10,this.dQparm.pageIndex=this.dTb.pagination.current,this.dQparm.pageSize=this.dTb.pagination.pageSize,this.dTb.load=!0;let s=await this.$api2(this.schema.Url.GetCount,this.dQparm);if(s.isOk){let t=parseInt(s.data);if(t>0){this.dTb.pagination.total=t;let e=await this.$api2(this.schema.Url.GetList,this.dQparm);e.isOk?this.dTb.rows=this.schema.ListFilter&&await this.schema.ListFilter(e.data)||e.data:this.$message.error(e&&e.message||this.schema.Desc+"数据列表查询失败")}else this.dTb.rows=[]}else this.$message.error(s&&s.message||this.schema.Desc+"数据分页统计失败");this.dTb.load=!1},async fnTb_Del(t){if(!t||t.length<=0)return this.$message.error("请选择要删除的"+this.schema.Desc+"数据");let e=this;this.$confirm({title:"操作确认",content:"确认删除当前选中的"+t.length+"条记录",onOk(){e.$api2(e.schema.Url.Delete,t).then((t=>{t&&t.isOk?(e.$message.success(e.schema.Desc+"数据已成功删除"),e.fnTb_Query()):e.$message.error(t&&t.message||"数据删除失败")}))}})}},filters:{time(t,e="YYYY-MM-DD HH:mm:ss"){let a=i()(t);return a.isValid()?a.format(e):null}}},r={data(){return{dObj:{show:!1,load:!1,mod:null,title:""}}},mounted(){this.dObj.title=this.schema&&this.schema.Desc||""},methods:{async Init(t,e="fid"){if(!(t&&t>0))return;this.dObj.mod=null,this.dObj.show=!0,this.dObj.load=!0;let a="fid"==e?{fid:t}:{id:t},s=await this.$api2(this.schema.Url.Get,null,a);this.dObj.load=!1,s&&s.isOk&&null!=s.data?this.dObj.mod=this.schema.DetailFilter&&await this.schema.DetailFilter(s.data)||s.data:this.$message.error(s&&s.message||this.schema.Desc+"可预览信息查询失败")}}},l={data(){return{dObj:{show:!1,load:!1,mod:null,title:"",rules:null}}},mounted(){this.dObj.title=this.schema.Desc||"",this.dObj.rules=this.schema.EditRules||null},methods:{async Init(t,e="fid"){if(parseInt(t)>=0){if(this.dObj.mod=null,this.dObj.show=!0,0==t)this.dObj.mod=this.schema.EditFilter&&await this.schema.EditFilter(null);else{this.dObj.load=!0;let a="fid"==e?{fid:t}:{id:t},s=await this.$api2(this.schema.Url.Get,null,a);s&&s.isOk&&null!=s.data?this.dObj.mod=this.schema.EditFilter&&await this.schema.EditFilter(s.data)||s.data:this.$message.error(s&&s.message||this.schema.Desc+"可编辑信息查询失败"),this.dObj.load=!1}this.$refs.editref&&this.$refs.editref.resetFields&&this.$refs.editref.resetFields()}},async Save(){this.$refs.editref.validate((async t=>{if(!t)return this.$message.error("输入数据校验失败，请重新输入"),!1;{this.dObj.load=!0;let t=this.schema.SaveFilter&&this.schema.SaveFilter(this.dObj.mod)||this.dObj.mod,e=await this.$api2(this.schema.Url.Save,t);this.dObj.load=!1,e&&e.isOk?parseInt(e.data)>0?(this.$message.success(this.schema.Desc+"数据保存成功"),this.schema.SaveFilterEnd&&(this.dObj.mod.fid=e.data,this.schema.SaveFilterEnd(this.dObj.mod)),this.dObj.show=!1,this.$emit("emOk",!0)):this.$message.error("数据保存失败"):this.$message.error(e&&e.message||this.schema.Desc+"数据保存失败")}}))},async Cancel(){this.dObj.show=!1,this.dObj.mod=null}}}}}]);