"use strict";(self.webpackChunkChemicalDetection=self.webpackChunkChemicalDetection||[]).push([[440],{45440:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});i(57658);var a=i(55338),s={data(){return{optionData:[{code:"3",name:"病区四",cws:80,zcs:20,zcl:"25%",value:80,startRatio:0,endRatio:.34782608695652173},{code:"0",name:"病区一",cws:60,zcs:30,zcl:"50%",value:60,startRatio:.34782608695652173,endRatio:.6086956521739131},{code:"2",name:"病区三",cws:50,zcs:20,zcl:"40%",value:50,startRatio:.6086956521739131,endRatio:.8260869565217391},{code:"1",name:"病区二",cws:40,zcs:30,zcl:"75%",value:40,startRatio:.8260869565217391,endRatio:1}]}},mounted(){this.myChart=a.S1(this.$refs.pie3d),this.init()},methods:{init(){this.option=this.getPie3D(this.optionData,.85),this.myChart.setOption(this.option),this.bindListen(this.myChart)},bindListen(e){let t=this,i="",a="";e.on("click",(function(a){let s=!t.option.series[a.seriesIndex].pieStatus.selected,o=t.option.series[a.seriesIndex].pieStatus.hovered,n=t.option.series[a.seriesIndex].pieStatus.k,r=t.option.series[a.seriesIndex].pieData.startRatio,p=t.option.series[a.seriesIndex].pieData.endRatio;""!==i&&i!==a.seriesIndex&&(t.option.series[i].parametricEquation=t.getParametricEquation(t.option.series[i].pieData.startRatio,t.option.series[i].pieData.endRatio,!1,!1,n,t.option.series[i].pieData.value),t.option.series[i].pieStatus.selected=!1),t.option.series[a.seriesIndex].parametricEquation=t.getParametricEquation(r,p,s,o,n,t.option.series[a.seriesIndex].pieData.value),t.option.series[a.seriesIndex].pieStatus.selected=s,s&&(i=a.seriesIndex),e.setOption(t.option)})),e.on("mouseover",(function(i){let s,o,n,r,p;a!==i.seriesIndex&&(""!==a&&(s=t.option.series[a].pieStatus.selected,o=!1,n=t.option.series[a].pieData.startRatio,r=t.option.series[a].pieData.endRatio,p=t.option.series[a].pieStatus.k,t.option.series[a].parametricEquation=t.getParametricEquation(n,r,s,o,p,t.option.series[a].pieData.value),t.option.series[a].pieStatus.hovered=o,a=""),"mouseoutSeries"!==i.seriesName&&"pie2d"!==i.seriesName&&(s=t.option.series[i.seriesIndex].pieStatus.selected,o=!0,n=t.option.series[i.seriesIndex].pieData.startRatio,r=t.option.series[i.seriesIndex].pieData.endRatio,p=t.option.series[i.seriesIndex].pieStatus.k,t.option.series[i.seriesIndex].parametricEquation=t.getParametricEquation(n,r,s,o,p,t.option.series[i.seriesIndex].pieData.value+5),t.option.series[i.seriesIndex].pieStatus.hovered=o,a=i.seriesIndex),e.setOption(t.option))})),e.on("globalout",(function(){let i,s,o,n,r;""!==a&&(i=t.option.series[a].pieStatus.selected,s=!1,r=t.option.series[a].pieStatus.k,o=t.option.series[a].pieData.startRatio,n=t.option.series[a].pieData.endRatio,t.option.series[a].parametricEquation=t.getParametricEquation(o,n,i,false,r,t.option.series[a].pieData.value),t.option.series[a].pieStatus.hovered=false,a=""),e.setOption(t.option)}))},getPie3D(e,t){let i=this,a=[],s=0,o=0,n=0,r=[],p=[],l=1-t;e.sort(((e,t)=>t.value-e.value));for(let t=0;t<e.length;t++){s+=e[t].value;let i={name:void 0===e[t].name?`series${t}`:e[t].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:e[t],pieStatus:{selected:!1,hovered:!1,k:l}};if(void 0!==e[t].itemStyle){let a={};void 0!==e[t].itemStyle.color&&(a.color=e[t].itemStyle.color),void 0!==e[t].itemStyle.opacity&&(a.opacity=e[t].itemStyle.opacity),i.itemStyle=a}a.push(i)}r=[],p=[];for(let e=0;e<a.length;e++){n=o+a[e].pieData.value,a[e].pieData.startRatio=o/s,a[e].pieData.endRatio=n/s,a[e].parametricEquation=this.getParametricEquation(a[e].pieData.startRatio,a[e].pieData.endRatio,!1,!1,l,a[e].pieData.value),o=n;let t=i.fomatFloat(a[e].pieData.value/s,4);r.push({name:a[e].name,value:t}),p.push({name:a[e].name,value:t})}let u={legend:{data:r,orient:"horizontal",left:"0%",itemGap:10,textStyle:{color:"#A1E2FF",fontSize:"0.5rem"},show:!0,icon:"circle"},tooltip:{formatter:e=>{if("mouseoutSeries"!==e.seriesName&&"pie2d"!==e.seriesName){let t=(100*(u.series[e.seriesIndex].pieData.endRatio-u.series[e.seriesIndex].pieData.startRatio)).toFixed(2);return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${t}`}}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:this.getHeight3D(a,15),top:"15%",viewControl:{alpha:35,distance:165,rotateSensitivity:1,zoomSensitivity:0,panSensitivity:0,autoRotate:!0}},series:a};return u},getHeight3D(e,t){return e.sort(((e,t)=>t.pieData.value-e.pieData.value)),25*t/e[0].pieData.value},getParametricEquation(e,t,i,a,s,o){let n=(e+t)/2,r=e*Math.PI*2,p=t*Math.PI*2,l=n*Math.PI*2;0===e&&1===t&&(i=!1),s=void 0!==s?s:1/3;let u=i?.1*Math.cos(l):0,c=i?.1*Math.sin(l):0,d=a?1.05:1;return{u:{min:-Math.PI,max:3*Math.PI,step:Math.PI/32},v:{min:0,max:2*Math.PI,step:Math.PI/20},x:function(e,t){return e<r?u+Math.cos(r)*(1+Math.cos(t)*s)*d:e>p?u+Math.cos(p)*(1+Math.cos(t)*s)*d:u+Math.cos(e)*(1+Math.cos(t)*s)*d},y:function(e,t){return e<r?c+Math.sin(r)*(1+Math.cos(t)*s)*d:e>p?c+Math.sin(p)*(1+Math.cos(t)*s)*d:c+Math.sin(e)*(1+Math.cos(t)*s)*d},z:function(e,t){return e<.5*-Math.PI?Math.sin(e):e>2.5*Math.PI?Math.sin(e)*o*.1:Math.sin(t)>0?1*o*.1:-1}}},fomatFloat(e,t){var i=parseFloat(e);if(isNaN(i))return!1;var a=(i=Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString(),s=a.indexOf(".");for(s<0&&(s=a.length,a+=".");a.length<=s+t;)a+="0";return a}}},o=(0,i(1001).Z)(s,(function(){var e=this._self._c;return e("div",[e("div",{ref:"pie3d"})])}),[],!1,null,null,null).exports}}]);